/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e,t,r,n={8346:e=>{"use strict";function t(e){if(!(this instanceof t))return new t(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=r.bind(this)}function r(){this.pending--,this._run()}["push","unshift","splice"].forEach((function(e){t.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}})),Object.defineProperty(t.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),t.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},t.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=t},8505:e=>{"use strict";function t(e,t,i){e instanceof RegExp&&(e=r(e,i)),t instanceof RegExp&&(t=r(t,i));var o=n(e,t,i);return o&&{start:o[0],end:o[1],pre:i.slice(0,o[0]),body:i.slice(o[0]+e.length,o[1]),post:i.slice(o[1]+t.length)}}function r(e,t){var r=t.match(e);return r?r[0]:null}function n(e,t,r){var n,i,o,s,a,c=r.indexOf(e),l=r.indexOf(t,c+1),u=c;if(c>=0&&l>0){if(e===t)return[c,l];for(n=[],o=r.length;u>=0&&!a;)u==c?(n.push(u),c=r.indexOf(e,u+1)):1==n.length?a=[n.pop(),l]:((i=n.pop())<o&&(o=i,s=l),l=r.indexOf(t,u+1)),u=c<l&&c>=0?c:l;n.length&&(a=[o,s])}return a}e.exports=t,t.range=n},7813:(e,t,r)=>{"use strict";const{Buffer:n}=r(181),i=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},o.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},o.prototype.get=function(e){if(e>this.length||e<0)return;const t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,r,i){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length)return e||n.alloc(0);if(i<=0)return e||n.alloc(0);const o=!!e,s=this._offset(r),a=i-r;let c=a,l=o&&t||0,u=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,l),l+=this._bufs[t].length;return e}if(c<=this._bufs[s[0]].length-u)return o?this._bufs[s[0]].copy(e,t,u,u+c):this._bufs[s[0]].slice(u,u+c);o||(e=n.allocUnsafe(a));for(let t=s[0];t<this._bufs.length;t++){const r=this._bufs[t].length-u;if(!(c>r)){this._bufs[t].copy(e,l,u,u+c),l+=r;break}this._bufs[t].copy(e,l,u),l+=r,c-=r,u&&(u=0)}return e.length>l?e.slice(0,l):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},o.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(n.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=n.from([e]):"string"==typeof e?e=n.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=n.from(e.buffer,e.byteOffset,e.byteLength):n.isBuffer(e)||(e=n.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const i=this._offset(t);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const t=this._bufs[o];for(;s<t.length;)if(t.length-s>=e.length){const r=t.indexOf(e,s);if(-1!==r)return this._reverseOffset([o,r]);s=t.length-e.length+1}else{const t=this._reverseOffset([o,s]);if(this._match(t,e))return t;s++}s=0}return-1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(t){o.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r=0){return this.slice(r,r+e[t])[t](0)}}(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[i]},e.exports=o},4829:(e,t,r)=>{"use strict";const n=r(4198).Duplex,i=r(2017),o=r(7813);function s(e){if(!(this instanceof s))return new s(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}o._init.call(this,e),n.call(this)}i(s,n),Object.assign(s.prototype,o.prototype),s.prototype._new=function(e){return new s(e)},s.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},s.prototype._isBufferList=function(e){return e instanceof s||e instanceof o||s.isBufferList(e)},s.isBufferList=o.isBufferList,e.exports=s,e.exports.BufferListStream=s,e.exports.BufferList=o},8928:(e,t,r)=>{var n=r(9818),i=r(8505);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),y(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(d)):[]};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function h(e){if(!e)return[""];var t=[],r=i("{","}",e);if(!r)return e.split(",");var n=r.pre,o=r.body,s=r.post,a=n.split(",");a[a.length-1]+="{"+o+"}";var c=h(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function p(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function m(e,t){return e<=t}function g(e,t){return e>=t}function y(e,t){var r=[],o=i("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),d=c||l,v=o.body.indexOf(",")>=0;if(!d&&!v)return o.post.match(/,.*\}/)?y(e=o.pre+"{"+o.body+a+o.post):[e];if(d)s=o.body.split(/\.\./);else if(1===(s=h(o.body)).length&&1===(s=y(s[0],!1).map(p)).length)return(w=o.post.length?y(o.post,!1):[""]).map((function(e){return o.pre+s[0]+e}));var _,b=o.pre,w=o.post.length?y(o.post,!1):[""];if(d){var S=u(s[0]),E=u(s[1]),C=Math.max(s[0].length,s[1].length),T=3==s.length?Math.abs(u(s[2])):1,k=m;E<S&&(T*=-1,k=g);var P=s.some(f);_=[];for(var R=S;k(R,E);R+=T){var x;if(l)"\\"===(x=String.fromCharCode(R))&&(x="");else if(x=String(R),P){var M=C-x.length;if(M>0){var O=new Array(M+1).join("0");x=R<0?"-"+O+x.slice(1):O+x}}_.push(x)}}else _=n(s,(function(e){return y(e,!1)}));for(var D=0;D<_.length;D++)for(var I=0;I<w.length;I++){var A=b+_[D]+w[I];(!t||d||A)&&r.push(A)}return r}},4025:(e,t,r)=>{var n=r(181).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function o(e){if(n.isBuffer(e))return e;var t="function"==typeof n.alloc&&"function"==typeof n.from;if("number"==typeof e)return t?n.alloc(e):new n(e);if("string"==typeof e)return t?n.from(e):new n(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function s(e,t){e=o(e),n.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=~t,s=0;s<e.length;s++)r=i[255&(r^e[s])]^r>>>8;return~r}function a(){return e=s.apply(null,arguments),(t=o(4)).writeInt32BE(e,0),t;var e,t}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),a.signed=function(){return s.apply(null,arguments)},a.unsigned=function(){return s.apply(null,arguments)>>>0},e.exports=a},6489:e=>{"use strict";e.exports={mask:(e,t,r,n,i)=>{for(var o=0;o<i;o++)r[n+o]=e[o]^t[3&o]},unmask:(e,t)=>{const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}}},2627:(e,t,r)=>{"use strict";try{e.exports=r(8169)(__dirname)}catch(t){e.exports=r(6489)}},911:(e,t,r)=>{"use strict";const n=r(9896),i=r(6928),o=n.lchown?"lchown":"chown",s=n.lchownSync?"lchownSync":"chownSync",a=n.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),c=(e,t,r)=>{try{return n[s](e,t,r)}catch(e){if("ENOENT"!==e.code)throw e}},l=a?(e,t,r,i)=>o=>{o&&"EISDIR"===o.code?n.chown(e,t,r,i):i(o)}:(e,t,r,n)=>n,u=a?(e,t,r)=>{try{return c(e,t,r)}catch(i){if("EISDIR"!==i.code)throw i;((e,t,r)=>{try{return n.chownSync(e,t,r)}catch(e){if("ENOENT"!==e.code)throw e}})(e,t,r)}}:(e,t,r)=>c(e,t,r),d=process.version;let h=(e,t,r)=>n.readdir(e,t,r);/^v4\./.test(d)&&(h=(e,t,r)=>n.readdir(e,r));const p=(e,t,r,i)=>{n[o](e,t,r,l(e,t,r,(e=>{i(e&&"ENOENT"!==e.code?e:null)})))},f=(e,t,r,o,s)=>{if("string"==typeof t)return n.lstat(i.resolve(e,t),((n,i)=>{if(n)return s("ENOENT"!==n.code?n:null);i.name=t,f(e,i,r,o,s)}));if(t.isDirectory())m(i.resolve(e,t.name),r,o,(n=>{if(n)return s(n);const a=i.resolve(e,t.name);p(a,r,o,s)}));else{const n=i.resolve(e,t.name);p(n,r,o,s)}},m=(e,t,r,n)=>{h(e,{withFileTypes:!0},((i,o)=>{if(i){if("ENOENT"===i.code)return n();if("ENOTDIR"!==i.code&&"ENOTSUP"!==i.code)return n(i)}if(i||!o.length)return p(e,t,r,n);let s=o.length,a=null;const c=i=>{if(!a)return i?n(a=i):0==--s?p(e,t,r,n):void 0};o.forEach((n=>f(e,n,t,r,c)))}))},g=(e,t,r)=>{let o;try{o=(e=>n.readdirSync(e,{withFileTypes:!0}))(e)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code||"ENOTSUP"===n.code)return u(e,t,r);throw n}return o&&o.length&&o.forEach((o=>((e,t,r,o)=>{if("string"==typeof t)try{const r=n.lstatSync(i.resolve(e,t));r.name=t,t=r}catch(e){if("ENOENT"===e.code)return;throw e}t.isDirectory()&&g(i.resolve(e,t.name),r,o),u(i.resolve(e,t.name),r,o)})(e,o,t,r))),u(e,t,r)};e.exports=m,m.sync=g},5659:(e,t,r)=>{var n=r(8156),i={};for(var o in n)n.hasOwnProperty(o)&&(i[n[o]]=o);var s=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var c=s[a].channels,l=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:c}),Object.defineProperty(s[a],"labels",{value:l})}s.rgb.hsl=function(e){var t,r,n=e[0]/255,i=e[1]/255,o=e[2]/255,s=Math.min(n,i,o),a=Math.max(n,i,o),c=a-s;return a===s?t=0:n===a?t=(i-o)/c:i===a?t=2+(o-n)/c:o===a&&(t=4+(n-i)/c),(t=Math.min(60*t,360))<0&&(t+=360),r=(s+a)/2,[t,100*(a===s?0:r<=.5?c/(a+s):c/(2-a-s)),100*r]},s.rgb.hsv=function(e){var t,r,n,i,o,s=e[0]/255,a=e[1]/255,c=e[2]/255,l=Math.max(s,a,c),u=l-Math.min(s,a,c),d=function(e){return(l-e)/6/u+.5};return 0===u?i=o=0:(o=u/l,t=d(s),r=d(a),n=d(c),s===l?i=n-r:a===l?i=1/3+t-n:c===l&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},s.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2];return[s.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(r,n))*100,100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},s.rgb.cmyk=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-i)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},s.rgb.keyword=function(e){var t=i[e];if(t)return t;var r,o,s,a=1/0;for(var c in n)if(n.hasOwnProperty(c)){var l=(o=e,s=n[c],Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)+Math.pow(o[2]-s[2],2));l<a&&(a=l,r=c)}return r},s.keyword.rgb=function(e){return n[e]},s.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},s.rgb.lab=function(e){var t=s.rgb.xyz(e),r=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},s.hsl.rgb=function(e){var t,r,n,i,o,s=e[0]/360,a=e[1]/100,c=e[2]/100;if(0===a)return[o=255*c,o,o];t=2*c-(r=c<.5?c*(1+a):c+a-c*a),i=[0,0,0];for(var l=0;l<3;l++)(n=s+1/3*-(l-1))<0&&n++,n>1&&n--,o=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,i[l]=255*o;return i},s.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=r,o=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,i*=o<=1?o:2-o,[t,100*(0===n?2*i/(o+i):2*r/(n+r)),(n+r)/2*100]},s.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*o),c=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,c,s];case 1:return[a,n,s];case 2:return[s,n,c];case 3:return[s,a,n];case 4:return[c,s,n];case 5:return[n,s,a]}},s.hsv.hsl=function(e){var t,r,n,i=e[0],o=e[1]/100,s=e[2]/100,a=Math.max(s,.01);return n=(2-o)*s,r=o*a,[i,100*(r=(r/=(t=(2-o)*a)<=1?t:2-t)||0),100*(n/=2)]},s.hwb.rgb=function(e){var t,r,n,i,o,s,a,c=e[0]/360,l=e[1]/100,u=e[2]/100,d=l+u;switch(d>1&&(l/=d,u/=d),n=6*c-(t=Math.floor(6*c)),1&t&&(n=1-n),i=l+n*((r=1-u)-l),t){default:case 6:case 0:o=r,s=i,a=l;break;case 1:o=i,s=r,a=l;break;case 2:o=l,s=r,a=i;break;case 3:o=l,s=i,a=r;break;case 4:o=i,s=l,a=r;break;case 5:o=r,s=l,a=i}return[255*o,255*s,255*a]},s.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},s.xyz.rgb=function(e){var t,r,n,i=e[0]/100,o=e[1]/100,s=e[2]/100;return r=-.9689*i+1.8758*o+.0415*s,n=.0557*i+-.204*o+1.057*s,t=(t=3.2406*i+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},s.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},s.lab.xyz=function(e){var t,r,n,i=e[0];t=e[1]/500+(r=(i+16)/116),n=r-e[2]/200;var o=Math.pow(r,3),s=Math.pow(t,3),a=Math.pow(n,3);return r=o>.008856?o:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},s.lab.lch=function(e){var t,r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]},s.lch.lab=function(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]},s.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],i=1 in arguments?arguments[1]:s.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return 2===i&&(o+=60),o},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},s.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},s.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},s.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map((function(e){return e+e})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},s.rgb.hcg=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.max(Math.max(r,n),i),s=Math.min(Math.min(r,n),i),a=o-s;return t=a<=0?0:o===r?(n-i)/a%6:o===n?2+(i-r)/a:4+(r-n)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?s/(1-a):0)]},s.hsl.hcg=function(e){var t,r=e[1]/100,n=e[2]/100,i=0;return(t=n<.5?2*r*n:2*r*(1-n))<1&&(i=(n-.5*t)/(1-t)),[e[0],100*t,100*i]},s.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},s.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var i,o=[0,0,0],s=t%1*6,a=s%1,c=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=c,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=c,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=c}return i=(1-r)*n,[255*(r*o[0]+i),255*(r*o[1]+i),255*(r*o[2]+i)]},s.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},s.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},s.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},s.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=s.gray.hsv=function(e){return[0,0,e[0]]},s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},734:(e,t,r)=>{var n=r(5659),i=r(8507),o={};Object.keys(n).forEach((function(e){o[e]={},Object.defineProperty(o[e],"channels",{value:n[e].channels}),Object.defineProperty(o[e],"labels",{value:n[e].labels});var t=i(e);Object.keys(t).forEach((function(r){var n=t[r];o[e][r]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=e(t);if("object"==typeof r)for(var n=r.length,i=0;i<n;i++)r[i]=Math.round(r[i]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(n),o[e][r].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)}))})),e.exports=o},8507:(e,t,r)=>{var n=r(5659);function i(e,t){return function(r){return t(e(r))}}function o(e,t){for(var r=[t[e].parent,e],o=n[t[e].parent][e],s=t[e].parent;t[s].parent;)r.unshift(t[s].parent),o=i(n[t[s].parent][s],o),s=t[s].parent;return o.conversion=r,o}e.exports=function(e){for(var t=function(e){var t=function(){for(var e={},t=Object.keys(n),r=t.length,i=0;i<r;i++)e[t[i]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var i=r.pop(),o=Object.keys(n[i]),s=o.length,a=0;a<s;a++){var c=o[a],l=t[c];-1===l.distance&&(l.distance=t[i].distance+1,l.parent=i,r.unshift(c))}return t}(e),r={},i=Object.keys(t),s=i.length,a=0;a<s;a++){var c=i[a];null!==t[c].parent&&(r[c]=o(c,t))}return r}},8156:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},8854:(e,t,r)=>{var n=r(8156),i=r(9872),o=Object.hasOwnProperty,s=Object.create(null);for(var a in n)o.call(n,a)&&(s[n[a]]=a);var c=e.exports={to:{},get:{}};function l(e,t,r){return Math.min(Math.max(t,e),r)}function u(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}c.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=c.get.hsl(e),r="hsl";break;case"hwb":t=c.get.hwb(e),r="hwb";break;default:t=c.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},c.get.rgb=function(e){if(!e)return null;var t,r,i,s=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=t[2],t=t[1],r=0;r<3;r++){var a=2*r;s[r]=parseInt(t.slice(a,a+2),16)}i&&(s[3]=parseInt(i,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(i=(t=t[1])[3],r=0;r<3;r++)s[r]=parseInt(t[r]+t[r],16);i&&(s[3]=parseInt(i+i,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(r=0;r<3;r++)s[r]=parseInt(t[r+1],0);t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:o.call(n,t[1])?((s=n[t[1]])[3]=1,s):null:null;for(r=0;r<3;r++)s[r]=Math.round(2.55*parseFloat(t[r+1]));t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}for(r=0;r<3;r++)s[r]=l(s[r],0,255);return s[3]=l(s[3],0,1),s},c.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(r)?1:r,0,1)]}return null},c.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(r)?1:r,0,1)]}return null},c.to.hex=function(){var e=i(arguments);return"#"+u(e[0])+u(e[1])+u(e[2])+(e[3]<1?u(Math.round(255*e[3])):"")},c.to.rgb=function(){var e=i(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},c.to.rgb.percent=function(){var e=i(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},c.to.hsl=function(){var e=i(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},c.to.hwb=function(){var e=i(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},c.to.keyword=function(e){return s[e.slice(0,3)]}},2520:(e,t,r)=>{"use strict";var n=r(8854),i=r(734),o=[].slice,s=["keyword","gray","hex"],a={};Object.keys(i).forEach((function(e){a[o.call(i[e].labels).sort().join("")]=e}));var c={};function l(e,t){if(!(this instanceof l))return new l(e,t);if(t&&t in s&&(t=null),t&&!(t in i))throw new Error("Unknown model: "+t);var r,u;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof l)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var d=n.get(e);if(null===d)throw new Error("Unable to parse color from string: "+e);this.model=d.model,u=i[this.model].channels,this.color=d.value.slice(0,u),this.valpha="number"==typeof d.value[u]?d.value[u]:1}else if(e.length){this.model=t||"rgb",u=i[this.model].channels;var p=o.call(e,0,u);this.color=h(p,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var f=Object.keys(e);"alpha"in e&&(f.splice(f.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var m=f.sort().join("");if(!(m in a))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=a[m];var g=i[this.model].labels,y=[];for(r=0;r<g.length;r++)y.push(e[g[r]]);this.color=h(y)}if(c[this.model])for(u=i[this.model].channels,r=0;r<u;r++){var v=c[this.model][r];v&&(this.color[r]=v(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(e,t,r){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(c[e]||(c[e]=[]))[t]=r})),e=e[0],function(n){var i;return arguments.length?(r&&(n=r(n)),(i=this[e]()).color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function d(e){return function(t){return Math.max(0,Math.min(e,t))}}function h(e,t){for(var r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}l.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in n.to?this:this.rgb(),r=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return n.to[t.model](r)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),r=1===t.valpha?t.color:t.color.concat(this.valpha);return n.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=i[this.model].channels,r=i[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new l(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new l(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:u("rgb",0,d(255)),green:u("rgb",1,d(255)),blue:u("rgb",2,d(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:u("hsl",1,d(100)),lightness:u("hsl",2,d(100)),saturationv:u("hsv",1,d(100)),value:u("hsv",2,d(100)),chroma:u("hcg",1,d(100)),gray:u("hcg",2,d(100)),white:u("hwb",1,d(100)),wblack:u("hwb",2,d(100)),cyan:u("cmyk",0,d(100)),magenta:u("cmyk",1,d(100)),yellow:u("cmyk",2,d(100)),black:u("cmyk",3,d(100)),x:u("xyz",0,d(100)),y:u("xyz",1,d(100)),z:u("xyz",2,d(100)),l:u("lab",0,d(100)),a:u("lab",1),b:u("lab",2),keyword:function(e){return arguments.length?new l(e):i[this.model].keyword(this.color)},hex:function(e){return arguments.length?new l(e):n.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return l.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r=(r+e)%360)<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),i=void 0===t?.5:t,o=2*i-1,s=r.alpha()-n.alpha(),a=((o*s==-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return l.rgb(a*r.red()+c*n.red(),a*r.green()+c*n.green(),a*r.blue()+c*n.blue(),r.alpha()*i+n.alpha()*(1-i))}},Object.keys(i).forEach((function(e){if(-1===s.indexOf(e)){var t=i[e].channels;l.prototype[e]=function(){if(this.model===e)return new l(this);if(arguments.length)return new l(arguments,e);var r,n="number"==typeof arguments[t]?t:this.valpha;return new l((r=i[this.model][e].raw(this.color),Array.isArray(r)?r:[r]).concat(n),e)},l[e]=function(r){return"number"==typeof r&&(r=h(o.call(arguments),t)),new l(r,e)}}})),e.exports=l},9818:e=>{e.exports=function(e,r){for(var n=[],i=0;i<e.length;i++){var o=r(e[i],i);t(o)?n.push.apply(n,o):n.push(o)}return n};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},7833:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(736)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},736:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},5753:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(7833):e.exports=r(6033)},6033:(e,t,r)=>{const n=r(2018),i=r(9023);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(i.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=r(736)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},6611:(e,t,r)=>{var n=r(3519),i=function(){},o=function(e,t,r){if("function"==typeof t)return o(e,null,t);t||(t={}),r=n(r||i);var s=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,u=!1,d=function(){e.writable||h()},h=function(){l=!1,c||r.call(e)},p=function(){c=!1,l||r.call(e)},f=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){r.call(e,t)},g=function(){process.nextTick(y)},y=function(){if(!u)return(!c||a&&a.ended&&!a.destroyed)&&(!l||s&&s.ended&&!s.destroyed)?void 0:r.call(e,new Error("premature close"))},v=function(){e.req.on("finish",h)};return function(e){return e.setHeader&&"function"==typeof e.abort}(e)?(e.on("complete",h),e.on("abort",g),e.req?v():e.on("request",v)):l&&!s&&(e.on("end",d),e.on("close",d)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",f),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",m),e.on("close",g),function(){u=!0,e.removeListener("complete",h),e.removeListener("abort",g),e.removeListener("request",v),e.req&&e.req.removeListener("finish",h),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("exit",f),e.removeListener("end",p),e.removeListener("error",m),e.removeListener("close",g)}};e.exports=o},3832:(e,t,r)=>{const n=r(5753)("extract-zip"),{createWriteStream:i,promises:o}=r(9896),s=r(1635),a=r(6928),{promisify:c}=r(9023),l=r(2203),u=r(4824),d=c(u.open),h=c(l.pipeline);class p{constructor(e,t){this.zipPath=e,this.opts=t}async extract(){return n("opening",this.zipPath,"with opts",this.opts),this.zipfile=await d(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise(((e,t)=>{this.zipfile.on("error",(e=>{this.canceled=!0,t(e)})),this.zipfile.readEntry(),this.zipfile.on("close",(()=>{this.canceled||(n("zip extraction complete"),e())})),this.zipfile.on("entry",(async e=>{if(this.canceled)return void n("skipping entry",e.fileName,{cancelled:this.canceled});if(n("zipfile entry",e.fileName),e.fileName.startsWith("__MACOSX/"))return void this.zipfile.readEntry();const r=a.dirname(a.join(this.opts.dir,e.fileName));try{await o.mkdir(r,{recursive:!0});const t=await o.realpath(r);if(a.relative(this.opts.dir,t).split(a.sep).includes(".."))throw new Error(`Out of bound path "${t}" found while processing file ${e.fileName}`);await this.extractEntry(e),n("finished processing",e.fileName),this.zipfile.readEntry()}catch(e){this.canceled=!0,this.zipfile.close(),t(e)}}))}))}async extractEntry(e){if(this.canceled)return void n("skipping entry extraction",e.fileName,{cancelled:this.canceled});this.opts.onEntry&&this.opts.onEntry(e,this.zipfile);const t=a.join(this.opts.dir,e.fileName),r=e.externalFileAttributes>>16&65535,l=40960==(61440&r);let u=16384==(61440&r);!u&&e.fileName.endsWith("/")&&(u=!0);const d=e.versionMadeBy>>8;u||(u=0===d&&16===e.externalFileAttributes),n("extracting entry",{filename:e.fileName,isDir:u,isSymlink:l});const p=511&this.getExtractedMode(r,u),f=u?t:a.dirname(t),m={recursive:!0};if(u&&(m.mode=p),n("mkdir",{dir:f,...m}),await o.mkdir(f,m),u)return;n("opening read stream",t);const g=await c(this.zipfile.openReadStream.bind(this.zipfile))(e);if(l){const e=await s(g);n("creating symlink",e,t),await o.symlink(e,t)}else await h(g,i(t,{mode:p}))}getExtractedMode(e,t){let r=e;return 0===r&&(t?(this.opts.defaultDirMode&&(r=parseInt(this.opts.defaultDirMode,10)),r||(r=493)):(this.opts.defaultFileMode&&(r=parseInt(this.opts.defaultFileMode,10)),r||(r=420))),r}}e.exports=async function(e,t){if(n("creating target directory",t.dir),!a.isAbsolute(t.dir))throw new Error("Target directory is expected to be absolute");return await o.mkdir(t.dir,{recursive:!0}),t.dir=await o.realpath(t.dir),new p(e,t).extract()}},6350:(e,t,r)=>{"use strict";const{PassThrough:n}=r(2203);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const i="buffer"===r;let o=!1;t?o=!(r||i):r=r||"utf8",i&&(r=null);const s=new n({objectMode:o});r&&s.setEncoding(r);let a=0;const c=[];return s.on("data",(e=>{c.push(e),o?a=c.length:a+=e.length})),s.getBufferedValue=()=>t?c:i?Buffer.concat(c,a):c.join(""),s.getBufferedLength=()=>a,s}},1635:(e,t,r)=>{"use strict";const{constants:n}=r(181),i=r(815),o=r(6350);class s extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function a(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};const{maxBuffer:r}=t;let a;return await new Promise(((c,l)=>{const u=e=>{e&&a.getBufferedLength()<=n.MAX_LENGTH&&(e.bufferedData=a.getBufferedValue()),l(e)};a=i(e,o(t),(e=>{e?u(e):c()})),a.on("data",(()=>{a.getBufferedLength()>r&&u(new s)}))})),a.getBufferedValue()}e.exports=a,e.exports.default=a,e.exports.buffer=(e,t)=>a(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>a(e,{...t,array:!0}),e.exports.MaxBufferError=s},3070:(e,t,r)=>{var n=r(9896),i=r(9023),o=r(2203),s=o.Readable,a=o.Writable,c=o.PassThrough,l=r(1436),u=r(4434).EventEmitter;function d(e,t){t=t||{},u.call(this),this.fd=e,this.pend=new l,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}function h(e,t){t=t||{},s.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}function p(e,t){t=t||{},a.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=null==t.end?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function f(e,t){u.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}t.createFromBuffer=function(e,t){return new f(e,t)},t.createFromFd=function(e,t){return new d(e,t)},t.BufferSlicer=f,t.FdSlicer=d,i.inherits(d,u),d.prototype.read=function(e,t,r,i,o){var s=this;s.pend.go((function(a){n.read(s.fd,e,t,r,i,(function(e,t,r){a(),o(e,t,r)}))}))},d.prototype.write=function(e,t,r,i,o){var s=this;s.pend.go((function(a){n.write(s.fd,e,t,r,i,(function(e,t,r){a(),o(e,t,r)}))}))},d.prototype.createReadStream=function(e){return new h(this,e)},d.prototype.createWriteStream=function(e){return new p(this,e)},d.prototype.ref=function(){this.refCount+=1},d.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.autoClose&&n.close(e.fd,(function(t){t?e.emit("error",t):e.emit("close")}))}},i.inherits(h,s),h.prototype._read=function(e){var t=this;if(!t.destroyed){var r=Math.min(t._readableState.highWaterMark,e);if(null!=t.endOffset&&(r=Math.min(r,t.endOffset-t.pos)),r<=0)return t.destroyed=!0,t.push(null),void t.context.unref();t.context.pend.go((function(e){if(t.destroyed)return e();var i=new Buffer(r);n.read(t.context.fd,i,0,r,t.pos,(function(r,n){r?t.destroy(r):0===n?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=n,t.push(i.slice(0,n))),e()}))}))}},h.prototype.destroy=function(e){this.destroyed||(e=e||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())},i.inherits(p,a),p.prototype._write=function(e,t,r){var i=this;if(!i.destroyed){if(i.pos+e.length>i.endOffset){var o=new Error("maximum file length exceeded");return o.code="ETOOBIG",i.destroy(),void r(o)}i.context.pend.go((function(t){if(i.destroyed)return t();n.write(i.context.fd,e,0,e.length,i.pos,(function(e,n){e?(i.destroy(),t(),r(e)):(i.bytesWritten+=n,i.pos+=n,i.emit("progress"),t(),r())}))}))}},p.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},i.inherits(f,u),f.prototype.read=function(e,t,r,n,i){var o=n+r,s=o-this.buffer.length,a=s>0?s:r;this.buffer.copy(e,t,n,o),setImmediate((function(){i(null,a)}))},f.prototype.write=function(e,t,r,n,i){e.copy(this.buffer,n,t,t+r),setImmediate((function(){i(null,r,e)}))},f.prototype.createReadStream=function(e){var t=new c(e=e||{});t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var r=this.buffer.slice(t.start,t.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=r.length){n<r.length&&t.write(r.slice(n,r.length));break}t.write(r.slice(n,i)),n=i}return t.end(),t.destroy=function(){t.destroyed=!0},t},f.prototype.createWriteStream=function(e){var t=this,r=new a(e=e||{});return r.start=e.start||0,r.endOffset=null==e.end?this.buffer.length:+e.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(e,n,i){if(!r.destroyed){var o=r.pos+e.length;if(o>r.endOffset){var s=new Error("maximum file length exceeded");return s.code="ETOOBIG",r.destroyed=!0,void i(s)}e.copy(t.buffer,r.pos,0,e.length),r.bytesWritten+=e.length,r.pos=o,r.emit("progress"),i()}},r.destroy=function(){r.destroyed=!0},r},f.prototype.ref=function(){this.refCount+=1},f.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")}},2170:(e,t,r)=>{e.exports=r(9896).constants||r(9140)},3876:(e,t,r)=>{"use strict";const n=r(3735),i=r(6928),o=r(3798).mkdirsSync,s=r(7211).utimesMillisSync,a=r(6462);function c(e,t,r,o){const s=(o.dereference?n.statSync:n.lstatSync)(t);if(s.isDirectory())return function(e,t,r,i,o){return t?d(r,i,o):function(e,t,r,i){return n.mkdirSync(r),d(t,r,i),u(r,e)}(e.mode,r,i,o)}(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return function(e,t,r,i,o){return t?function(e,t,r,i){if(i.overwrite)return n.unlinkSync(r),l(e,t,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,i,o):l(e,r,i,o)}(s,e,t,r,o);if(s.isSymbolicLink())return function(e,t,r,o){let s=n.readlinkSync(t);if(o.dereference&&(s=i.resolve(process.cwd(),s)),e){let e;try{e=n.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlinkSync(s,r);throw e}if(o.dereference&&(e=i.resolve(process.cwd(),e)),a.isSrcSubdir(s,e))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${e}'.`);if(a.isSrcSubdir(e,s))throw new Error(`Cannot overwrite '${e}' with '${s}'.`);return function(e,t){return n.unlinkSync(t),n.symlinkSync(e,t)}(s,r)}return n.symlinkSync(s,r)}(e,t,r,o);if(s.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(s.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function l(e,t,r,i){return n.copyFileSync(t,r),i.preserveTimestamps&&function(e,t,r){(function(e){return!(128&e)})(e)&&function(e,t){u(e,128|t)}(r,e),function(e,t){const r=n.statSync(e);s(t,r.atime,r.mtime)}(t,r)}(e.mode,t,r),u(r,e.mode)}function u(e,t){return n.chmodSync(e,t)}function d(e,t,r){n.readdirSync(e).forEach((n=>function(e,t,r,n){const o=i.join(t,e),s=i.join(r,e);if(n.filter&&!n.filter(o,s))return;const{destStat:l}=a.checkPathsSync(o,s,"copy",n);return c(l,o,s,n)}(n,e,t,r)))}e.exports=function(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:s,destStat:l}=a.checkPathsSync(e,t,"copy",r);if(a.checkParentPathsSync(e,s,t,"copy"),r.filter&&!r.filter(e,t))return;const u=i.dirname(t);return n.existsSync(u)||o(u),c(l,e,t,r)}},4994:(e,t,r)=>{"use strict";const n=r(8737),i=r(6928),{mkdirs:o}=r(3798),{pathExists:s}=r(9288),{utimesMillis:a}=r(7211),c=r(6462);async function l(e,t,r){return!r.filter||r.filter(e,t)}async function u(e,t,r,o){const s=o.dereference?n.stat:n.lstat,a=await s(t);if(a.isDirectory())return async function(e,t,r,o,s){t||await n.mkdir(o);const a=await n.readdir(r);await Promise.all(a.map((async e=>{const t=i.join(r,e),n=i.join(o,e);if(!await l(t,n,s))return;const{destStat:a}=await c.checkPaths(t,n,"copy",s);return u(a,t,n,s)}))),t||await n.chmod(o,e.mode)}(a,e,t,r,o);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return async function(e,t,r,i,o){if(!t)return d(e,r,i,o);if(o.overwrite)return await n.unlink(i),d(e,r,i,o);if(o.errorOnExist)throw new Error(`'${i}' already exists`)}(a,e,t,r,o);if(a.isSymbolicLink())return async function(e,t,r,o){let s=await n.readlink(t);if(o.dereference&&(s=i.resolve(process.cwd(),s)),!e)return n.symlink(s,r);let a=null;try{a=await n.readlink(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlink(s,r);throw e}if(o.dereference&&(a=i.resolve(process.cwd(),a)),c.isSrcSubdir(s,a))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${a}'.`);if(c.isSrcSubdir(a,s))throw new Error(`Cannot overwrite '${a}' with '${s}'.`);return await n.unlink(r),n.symlink(s,r)}(e,t,r,o);if(a.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(a.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}async function d(e,t,r,i){if(await n.copyFile(t,r),i.preserveTimestamps){128&e.mode||await function(e,t){return n.chmod(e,128|t)}(r,e.mode);const i=await n.stat(t);await a(r,i.atime,i.mtime)}return n.chmod(r,e.mode)}e.exports=async function(e,t,r={}){"function"==typeof r&&(r={filter:r}),r.clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:n,destStat:a}=await c.checkPaths(e,t,"copy",r);if(await c.checkParentPaths(e,n,t,"copy"),!await l(e,t,r))return;const d=i.dirname(t);await s(d)||await o(d),await u(a,e,t,r)}},4423:(e,t,r)=>{"use strict";const n=r(1236).fromPromise;e.exports={copy:n(r(4994)),copySync:r(3876)}},2591:(e,t,r)=>{"use strict";const n=r(1236).fromPromise,i=r(8737),o=r(6928),s=r(3798),a=r(5422),c=n((async function(e){let t;try{t=await i.readdir(e)}catch{return s.mkdirs(e)}return Promise.all(t.map((t=>a.remove(o.join(e,t)))))}));function l(e){let t;try{t=i.readdirSync(e)}catch{return s.mkdirsSync(e)}t.forEach((t=>{t=o.join(e,t),a.removeSync(t)}))}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},9616:(e,t,r)=>{"use strict";const n=r(1236).fromPromise,i=r(6928),o=r(8737),s=r(3798);e.exports={createFile:n((async function(e){let t;try{t=await o.stat(e)}catch{}if(t&&t.isFile())return;const r=i.dirname(e);let n=null;try{n=await o.stat(r)}catch(t){if("ENOENT"===t.code)return await s.mkdirs(r),void await o.writeFile(e,"");throw t}n.isDirectory()?await o.writeFile(e,""):await o.readdir(r)})),createFileSync:function(e){let t;try{t=o.statSync(e)}catch{}if(t&&t.isFile())return;const r=i.dirname(e);try{o.statSync(r).isDirectory()||o.readdirSync(r)}catch(e){if(!e||"ENOENT"!==e.code)throw e;s.mkdirsSync(r)}o.writeFileSync(e,"")}}},6288:(e,t,r)=>{"use strict";const{createFile:n,createFileSync:i}=r(9616),{createLink:o,createLinkSync:s}=r(1522),{createSymlink:a,createSymlinkSync:c}=r(5291);e.exports={createFile:n,createFileSync:i,ensureFile:n,ensureFileSync:i,createLink:o,createLinkSync:s,ensureLink:o,ensureLinkSync:s,createSymlink:a,createSymlinkSync:c,ensureSymlink:a,ensureSymlinkSync:c}},1522:(e,t,r)=>{"use strict";const n=r(1236).fromPromise,i=r(6928),o=r(8737),s=r(3798),{pathExists:a}=r(9288),{areIdentical:c}=r(6462);e.exports={createLink:n((async function(e,t){let r,n;try{r=await o.lstat(t)}catch{}try{n=await o.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}if(r&&c(n,r))return;const l=i.dirname(t);await a(l)||await s.mkdirs(l),await o.link(e,t)})),createLinkSync:function(e,t){let r;try{r=o.lstatSync(t)}catch{}try{const t=o.lstatSync(e);if(r&&c(t,r))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=i.dirname(t);return o.existsSync(n)||s.mkdirsSync(n),o.linkSync(e,t)}}},3838:(e,t,r)=>{"use strict";const n=r(6928),i=r(8737),{pathExists:o}=r(9288),s=r(1236).fromPromise;e.exports={symlinkPaths:s((async function(e,t){if(n.isAbsolute(e)){try{await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:e}}const r=n.dirname(t),s=n.join(r,e);if(await o(s))return{toCwd:s,toDst:e};try{await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:n.relative(r,e)}})),symlinkPathsSync:function(e,t){if(n.isAbsolute(e)){if(!i.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const r=n.dirname(t),o=n.join(r,e);if(i.existsSync(o))return{toCwd:o,toDst:e};if(!i.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:n.relative(r,e)}}}},7064:(e,t,r)=>{"use strict";const n=r(8737),i=r(1236).fromPromise;e.exports={symlinkType:i((async function(e,t){if(t)return t;let r;try{r=await n.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"})),symlinkTypeSync:function(e,t){if(t)return t;let r;try{r=n.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}}},5291:(e,t,r)=>{"use strict";const n=r(1236).fromPromise,i=r(6928),o=r(8737),{mkdirs:s,mkdirsSync:a}=r(3798),{symlinkPaths:c,symlinkPathsSync:l}=r(3838),{symlinkType:u,symlinkTypeSync:d}=r(7064),{pathExists:h}=r(9288),{areIdentical:p}=r(6462);e.exports={createSymlink:n((async function(e,t,r){let n;try{n=await o.lstat(t)}catch{}if(n&&n.isSymbolicLink()){const[r,n]=await Promise.all([o.stat(e),o.stat(t)]);if(p(r,n))return}const a=await c(e,t);e=a.toDst;const l=await u(a.toCwd,r),d=i.dirname(t);return await h(d)||await s(d),o.symlink(e,t,l)})),createSymlinkSync:function(e,t,r){let n;try{n=o.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const r=o.statSync(e),n=o.statSync(t);if(p(r,n))return}const s=l(e,t);e=s.toDst,r=d(s.toCwd,r);const c=i.dirname(t);return o.existsSync(c)||a(c),o.symlinkSync(e,t,r)}}},8737:(e,t,r)=>{"use strict";const n=r(1236).fromCallback,i=r(3735),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof i[e]));Object.assign(t,i),o.forEach((e=>{t[e]=n(i[e])})),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise((t=>i.exists(e,t)))},t.read=function(e,t,r,n,o,s){return"function"==typeof s?i.read(e,t,r,n,o,s):new Promise(((s,a)=>{i.read(e,t,r,n,o,((e,t,r)=>{if(e)return a(e);s({bytesRead:t,buffer:r})}))}))},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?i.write(e,t,...r):new Promise(((n,o)=>{i.write(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesWritten:t,buffer:r})}))}))},t.readv=function(e,t,...r){return"function"==typeof r[r.length-1]?i.readv(e,t,...r):new Promise(((n,o)=>{i.readv(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesRead:t,buffers:r})}))}))},t.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?i.writev(e,t,...r):new Promise(((n,o)=>{i.writev(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesWritten:t,buffers:r})}))}))},"function"==typeof i.realpath.native?t.realpath.native=n(i.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")},1605:(e,t,r)=>{"use strict";e.exports={...r(8737),...r(4423),...r(2591),...r(6288),...r(3376),...r(3798),...r(2455),...r(7024),...r(9288),...r(5422)}},3376:(e,t,r)=>{"use strict";const n=r(1236).fromPromise,i=r(2934);i.outputJson=n(r(6426)),i.outputJsonSync=r(2188),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},2934:(e,t,r)=>{"use strict";const n=r(2909);e.exports={readJson:n.readFile,readJsonSync:n.readFileSync,writeJson:n.writeFile,writeJsonSync:n.writeFileSync}},2188:(e,t,r)=>{"use strict";const{stringify:n}=r(1144),{outputFileSync:i}=r(7024);e.exports=function(e,t,r){const o=n(t,r);i(e,o,r)}},6426:(e,t,r)=>{"use strict";const{stringify:n}=r(1144),{outputFile:i}=r(7024);e.exports=async function(e,t,r={}){const o=n(t,r);await i(e,o,r)}},3798:(e,t,r)=>{"use strict";const n=r(1236).fromPromise,{makeDir:i,makeDirSync:o}=r(8916),s=n(i);e.exports={mkdirs:s,mkdirsSync:o,mkdirp:s,mkdirpSync:o,ensureDir:s,ensureDirSync:o}},8916:(e,t,r)=>{"use strict";const n=r(8737),{checkPath:i}=r(7111),o=e=>"number"==typeof e?e:{mode:511,...e}.mode;e.exports.makeDir=async(e,t)=>(i(e),n.mkdir(e,{mode:o(t),recursive:!0})),e.exports.makeDirSync=(e,t)=>(i(e),n.mkdirSync(e,{mode:o(t),recursive:!0}))},7111:(e,t,r)=>{"use strict";const n=r(6928);e.exports.checkPath=function(e){if("win32"===process.platform&&/[<>:"|?*]/.test(e.replace(n.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},2455:(e,t,r)=>{"use strict";const n=r(1236).fromPromise;e.exports={move:n(r(3314)),moveSync:r(6244)}},6244:(e,t,r)=>{"use strict";const n=r(3735),i=r(6928),o=r(4423).copySync,s=r(5422).removeSync,a=r(3798).mkdirpSync,c=r(6462);function l(e,t,r){try{n.renameSync(e,t)}catch(n){if("EXDEV"!==n.code)throw n;return function(e,t,r){return o(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),s(e)}(e,t,r)}}e.exports=function(e,t,r){const o=(r=r||{}).overwrite||r.clobber||!1,{srcStat:u,isChangingCase:d=!1}=c.checkPathsSync(e,t,"move",r);return c.checkParentPathsSync(e,u,t,"move"),function(e){const t=i.dirname(e);return i.parse(t).root===t}(t)||a(i.dirname(t)),function(e,t,r,i){if(i)return l(e,t,r);if(r)return s(t),l(e,t,r);if(n.existsSync(t))throw new Error("dest already exists.");return l(e,t,r)}(e,t,o,d)}},3314:(e,t,r)=>{"use strict";const n=r(8737),i=r(6928),{copy:o}=r(4423),{remove:s}=r(5422),{mkdirp:a}=r(3798),{pathExists:c}=r(9288),l=r(6462);e.exports=async function(e,t,r={}){const u=r.overwrite||r.clobber||!1,{srcStat:d,isChangingCase:h=!1}=await l.checkPaths(e,t,"move",r);await l.checkParentPaths(e,d,t,"move");const p=i.dirname(t);return i.parse(p).root!==p&&await a(p),async function(e,t,r,i){if(!i)if(r)await s(t);else if(await c(t))throw new Error("dest already exists.");try{await n.rename(e,t)}catch(n){if("EXDEV"!==n.code)throw n;await async function(e,t,r){const n={overwrite:r,errorOnExist:!0,preserveTimestamps:!0};return await o(e,t,n),s(e)}(e,t,r)}}(e,t,u,h)}},7024:(e,t,r)=>{"use strict";const n=r(1236).fromPromise,i=r(8737),o=r(6928),s=r(3798),a=r(9288).pathExists;e.exports={outputFile:n((async function(e,t,r="utf-8"){const n=o.dirname(e);return await a(n)||await s.mkdirs(n),i.writeFile(e,t,r)})),outputFileSync:function(e,...t){const r=o.dirname(e);i.existsSync(r)||s.mkdirsSync(r),i.writeFileSync(e,...t)}}},9288:(e,t,r)=>{"use strict";const n=r(1236).fromPromise,i=r(8737);e.exports={pathExists:n((function(e){return i.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:i.existsSync}},5422:(e,t,r)=>{"use strict";const n=r(3735),i=r(1236).fromCallback;e.exports={remove:i((function(e,t){n.rm(e,{recursive:!0,force:!0},t)})),removeSync:function(e){n.rmSync(e,{recursive:!0,force:!0})}}},6462:(e,t,r)=>{"use strict";const n=r(8737),i=r(6928),o=r(1236).fromPromise;function s(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function a(e,t){const r=i.resolve(e).split(i.sep).filter((e=>e)),n=i.resolve(t).split(i.sep).filter((e=>e));return r.every(((e,t)=>n[t]===e))}function c(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:o((async function(e,t,r,o){const{srcStat:l,destStat:u}=await function(e,t,r){const i=r.dereference?e=>n.stat(e,{bigint:!0}):e=>n.lstat(e,{bigint:!0});return Promise.all([i(e),i(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}(e,t,o);if(u){if(s(l,u)){const n=i.basename(e),o=i.basename(t);if("move"===r&&n!==o&&n.toLowerCase()===o.toLowerCase())return{srcStat:l,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(l.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!l.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(l.isDirectory()&&a(e,t))throw new Error(c(e,t,r));return{srcStat:l,destStat:u}})),checkPathsSync:function(e,t,r,o){const{srcStat:l,destStat:u}=function(e,t,r){let i;const o=r.dereference?e=>n.statSync(e,{bigint:!0}):e=>n.lstatSync(e,{bigint:!0}),s=o(e);try{i=o(t)}catch(e){if("ENOENT"===e.code)return{srcStat:s,destStat:null};throw e}return{srcStat:s,destStat:i}}(e,t,o);if(u){if(s(l,u)){const n=i.basename(e),o=i.basename(t);if("move"===r&&n!==o&&n.toLowerCase()===o.toLowerCase())return{srcStat:l,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(l.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!l.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(l.isDirectory()&&a(e,t))throw new Error(c(e,t,r));return{srcStat:l,destStat:u}},checkParentPaths:o((async function e(t,r,o,a){const l=i.resolve(i.dirname(t)),u=i.resolve(i.dirname(o));if(u===l||u===i.parse(u).root)return;let d;try{d=await n.stat(u,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(s(r,d))throw new Error(c(t,o,a));return e(t,r,u,a)})),checkParentPathsSync:function e(t,r,o,a){const l=i.resolve(i.dirname(t)),u=i.resolve(i.dirname(o));if(u===l||u===i.parse(u).root)return;let d;try{d=n.statSync(u,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(s(r,d))throw new Error(c(t,o,a));return e(t,r,u,a)},isSrcSubdir:a,areIdentical:s}},7211:(e,t,r)=>{"use strict";const n=r(8737),i=r(1236).fromPromise;e.exports={utimesMillis:i((async function(e,t,r){const i=await n.open(e,"r+");let o=null;try{await n.futimes(i,t,r)}finally{try{await n.close(i)}catch(e){o=e}}if(o)throw o})),utimesMillisSync:function(e,t,r){const i=n.openSync(e,"r+");return n.futimesSync(i,t,r),n.closeSync(i)}}},1455:(e,t,r)=>{e.exports=u,u.realpath=u,u.sync=d,u.realpathSync=d,u.monkeypatch=function(){n.realpath=u,n.realpathSync=d},u.unmonkeypatch=function(){n.realpath=i,n.realpathSync=o};var n=r(9896),i=n.realpath,o=n.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=r(6674);function l(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function u(e,t,r){if(a)return i(e,t,r);"function"==typeof t&&(r=t,t=null),i(e,t,(function(n,i){l(n)?c.realpath(e,t,r):r(n,i)}))}function d(e,t){if(a)return o(e,t);try{return o(e,t)}catch(r){if(l(r))return c.realpathSync(e,t);throw r}}},6674:(e,t,r)=>{var n=r(6928),i="win32"===process.platform,o=r(9896),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);if(n.normalize,i)var a=/(.*?)(?:[\/\\]+|$)/g;else a=/(.*?)(?:[\/]+|$)/g;if(i)var c=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else c=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,l,u,d=e,h={},p={};function f(){var t=c.exec(e);r=t[0].length,s=t[0],l=t[0],u="",i&&!p[l]&&(o.lstatSync(l),p[l]=!0)}for(f();r<e.length;){a.lastIndex=r;var m=a.exec(e);if(u=s,s+=m[0],l=u+m[1],r=a.lastIndex,!(p[l]||t&&t[l]===l)){var g;if(t&&Object.prototype.hasOwnProperty.call(t,l))g=t[l];else{var y=o.lstatSync(l);if(!y.isSymbolicLink()){p[l]=!0,t&&(t[l]=l);continue}var v=null;if(!i){var _=y.dev.toString(32)+":"+y.ino.toString(32);h.hasOwnProperty(_)&&(v=h[_])}null===v&&(o.statSync(l),v=o.readlinkSync(l)),g=n.resolve(u,v),t&&(t[l]=g),i||(h[_]=v)}e=n.resolve(g,e.slice(r)),f()}}return t&&(t[d]=e),e},t.realpath=function(e,t,r){if("function"!=typeof r&&(r=function(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}(t),t=null),e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var l,u,d,h,p=e,f={},m={};function g(){var t=c.exec(e);l=t[0].length,u=t[0],d=t[0],h="",i&&!m[d]?o.lstat(d,(function(e){if(e)return r(e);m[d]=!0,y()})):process.nextTick(y)}function y(){if(l>=e.length)return t&&(t[p]=e),r(null,e);a.lastIndex=l;var n=a.exec(e);return h=u,u+=n[0],d=h+n[1],l=a.lastIndex,m[d]||t&&t[d]===d?process.nextTick(y):t&&Object.prototype.hasOwnProperty.call(t,d)?b(t[d]):o.lstat(d,v)}function v(e,n){if(e)return r(e);if(!n.isSymbolicLink())return m[d]=!0,t&&(t[d]=d),process.nextTick(y);if(!i){var s=n.dev.toString(32)+":"+n.ino.toString(32);if(f.hasOwnProperty(s))return _(null,f[s],d)}o.stat(d,(function(e){if(e)return r(e);o.readlink(d,(function(e,t){i||(f[s]=t),_(e,t)}))}))}function _(e,i,o){if(e)return r(e);var s=n.resolve(h,i);t&&(t[o]=s),b(s)}function b(t){e=n.resolve(t,e.slice(l)),g()}g()}},1198:(e,t,r)=>{function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.setopts=function(e,t,r){if(r||(r={}),r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||i,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(u))}(e,r),e.changedCwd=!1;var s=process.cwd();n(r,"cwd")?(e.cwd=o.resolve(r.cwd),e.changedCwd=e.cwd!==s):e.cwd=s,e.root=r.root||o.resolve(e.cwd,"/"),e.root=o.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=a(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,r.allowWindowsEscape=!1,e.minimatch=new c(t,r),e.options=e.minimatch.options},t.ownProp=n,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?r.push.apply(r,s):s.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(l)),e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[d(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!h(e,t)}))),e.found=r},t.mark=function(e,t){var r=d(e,t),n=e.cache[r],i=t;if(n){var o="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=d(e,i);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return i},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var i=r(9896),o=r(6928),s=r(4027),a=r(2641),c=s.Minimatch;function l(e,t){return e.localeCompare(t,"en")}function u(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new c(r,{dot:!0})}return{matcher:new c(e,{dot:!0}),gmatcher:t}}function d(e,t){var r=t;return r="/"===t.charAt(0)?o.join(e.root,t):a(t)||""===t?t:e.changedCwd?o.resolve(e.cwd,t):o.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function h(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},3577:(e,t,r)=>{e.exports=v;var n=r(1455),i=r(4027),o=(i.Minimatch,r(2017)),s=r(4434).EventEmitter,a=r(6928),c=r(2613),l=r(2641),u=r(4700),d=r(1198),h=d.setopts,p=d.ownProp,f=r(3423),m=(r(9023),d.childrenIgnored),g=d.isIgnored,y=r(3519);function v(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return u(e,t)}return new b(e,t,r)}v.sync=u;var _=v.GlobSync=u.GlobSync;function b(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new _(e,t)}if(!(this instanceof b))return new b(e,t,r);h(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=y(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return a();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--i._processing,i._processing<=0&&(o?process.nextTick((function(){i._finish()})):i._finish())}o=!1}v.glob=v,v.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new b(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var i=0;i<n[0].length;i++)if("string"!=typeof n[0][i])return!0;return!1},v.Glob=b,o(b,s),b.prototype._finish=function(){if(c(this instanceof b),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},b.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},b.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var i=Object.keys(r),o=this,s=i.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);i.forEach((function(r,i){r=o._makeAbs(r),n.realpath(r,o.realpathCache,(function(n,i){n?"stat"===n.syscall?a[r]=!0:o.emit("error",n):a[i]=!0,0==--s&&(o.matches[e]=a,t())}))}))},b.prototype._mark=function(e){return d.mark(this,e)},b.prototype._makeAbs=function(e){return d.makeAbs(this,e)},b.prototype.abort=function(){this.aborted=!0,this.emit("abort")},b.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},b.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);for(this._processQueue.length=0,t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},b.prototype._process=function(e,t,r,n){if(c(this instanceof b),c("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var o,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:o=null;break;default:o=e.slice(0,s).join("/")}var a,u=e.slice(s);null===o?a=".":l(o)||l(e.map((function(e){return"string"==typeof e?e:"[*]"})).join("/"))?(o&&l(o)||(o="/"+o),a=o):a=o;var d=this._makeAbs(a);if(m(this,a))return n();u[0]===i.GLOBSTAR?this._processGlobStar(o,a,d,u,t,r,n):this._processReaddir(o,a,d,u,t,r,n)}},b.prototype._processReaddir=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,(function(c,l){return a._processReaddir2(e,t,r,n,i,o,l,s)}))},b.prototype._processReaddir2=function(e,t,r,n,i,o,s,c){if(!s)return c();for(var l=n[0],u=!!this.minimatch.negate,d=l._glob,h=this.dot||"."===d.charAt(0),p=[],f=0;f<s.length;f++)("."!==(g=s[f]).charAt(0)||h)&&(u&&!e?!g.match(l):g.match(l))&&p.push(g);var m=p.length;if(0===m)return c();if(1===n.length&&!this.mark&&!this.stat){for(this.matches[i]||(this.matches[i]=Object.create(null)),f=0;f<m;f++){var g=p[f];e&&(g="/"!==e?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=a.join(this.root,g)),this._emitMatch(i,g)}return c()}for(n.shift(),f=0;f<m;f++)g=p[f],e&&(g="/"!==e?e+"/"+g:e+g),this._process([g].concat(n),i,o,c);c()},b.prototype._emitMatch=function(e,t){if(!this.aborted&&!g(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}},b.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,n=f("lstat\0"+e,(function(n,i){if(n&&"ENOENT"===n.code)return t();var o=i&&i.isSymbolicLink();r.symlinks[e]=o,o||!i||i.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));n&&r.fs.lstat(e,n)}},b.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=f("readdir\0"+e+"\0"+t,r))){if(t&&!p(this.symlinks,e))return this._readdirInGlobStar(e,r);if(p(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}this.fs.readdir(e,function(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}(this,e,r))}},b.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}},b.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},b.prototype._processGlobStar=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,(function(c,l){a._processGlobStar2(e,t,r,n,i,o,l,s)}))},b.prototype._processGlobStar2=function(e,t,r,n,i,o,s,a){if(!s)return a();var c=n.slice(1),l=e?[e]:[],u=l.concat(c);this._process(u,i,!1,a);var d=this.symlinks[r],h=s.length;if(d&&o)return a();for(var p=0;p<h;p++)if("."!==s[p].charAt(0)||this.dot){var f=l.concat(s[p],c);this._process(f,i,!0,a);var m=l.concat(s[p],n);this._process(m,i,!0,a)}a()},b.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(i,o){n._processSimple2(e,t,i,o,r)}))},b.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&l(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=a.join(this.root,e):(e=a.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},b.prototype._stat=function(e,t){var r=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&p(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return t(null,i);if(n&&"FILE"===i)return t()}var o=this.statCache[r];if(void 0!==o){if(!1===o)return t(null,o);var s=o.isDirectory()?"DIR":"FILE";return n&&"FILE"===s?t():t(null,s,o)}var a=this,c=f("stat\0"+r,(function(n,i){if(i&&i.isSymbolicLink())return a.fs.stat(r,(function(n,o){n?a._stat2(e,r,null,i,t):a._stat2(e,r,n,o,t)}));a._stat2(e,r,n,i,t)}));c&&a.fs.lstat(r,c)},b.prototype._stat2=function(e,t,r,n,i){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,n)}},4700:(e,t,r)=>{e.exports=p,p.GlobSync=f;var n=r(1455),i=r(4027),o=(i.Minimatch,r(3577).Glob,r(9023),r(6928)),s=r(2613),a=r(2641),c=r(1198),l=c.setopts,u=c.ownProp,d=c.childrenIgnored,h=c.isIgnored;function p(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new f(e,t).found}function f(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof f))return new f(e,t);if(l(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}f.prototype._finish=function(){if(s.ok(this instanceof f),this.realpath){var e=this;this.matches.forEach((function(t,r){var i=e.matches[r]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),i[n.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;i[e._makeAbs(o)]=!0}}))}c.finish(this)},f.prototype._process=function(e,t,r){s.ok(this instanceof f);for(var n,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,o).join("/")}var c,l=e.slice(o);null===n?c=".":a(n)||a(e.map((function(e){return"string"==typeof e?e:"[*]"})).join("/"))?(n&&a(n)||(n="/"+n),c=n):c=n;var u=this._makeAbs(c);d(this,c)||(l[0]===i.GLOBSTAR?this._processGlobStar(n,c,u,l,t,r):this._processReaddir(n,c,u,l,t,r))},f.prototype._processReaddir=function(e,t,r,n,i,s){var a=this._readdir(r,s);if(a){for(var c=n[0],l=!!this.minimatch.negate,u=c._glob,d=this.dot||"."===u.charAt(0),h=[],p=0;p<a.length;p++)("."!==(g=a[p]).charAt(0)||d)&&(l&&!e?!g.match(c):g.match(c))&&h.push(g);var f=h.length;if(0!==f)if(1!==n.length||this.mark||this.stat)for(n.shift(),p=0;p<f;p++){var m;g=h[p],m=e?[e,g]:[g],this._process(m.concat(n),i,s)}else{this.matches[i]||(this.matches[i]=Object.create(null));for(p=0;p<f;p++){var g=h[p];e&&(g="/"!==e.slice(-1)?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=o.join(this.root,g)),this._emitMatch(i,g)}}}},f.prototype._emitMatch=function(e,t){if(!h(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},f.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=this.fs.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var n=r&&r.isSymbolicLink();return this.symlinks[e]=n,n||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},f.prototype._readdir=function(e,t){if(t&&!u(this.symlinks,e))return this._readdirInGlobStar(e);if(u(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},f.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},f.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},f.prototype._processGlobStar=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),c=e?[e]:[],l=c.concat(a);this._process(l,i,!1);var u=s.length;if(!this.symlinks[r]||!o)for(var d=0;d<u;d++)if("."!==s[d].charAt(0)||this.dot){var h=c.concat(s[d],a);this._process(h,i,!0);var p=c.concat(s[d],n);this._process(p,i,!0)}}},f.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&a(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=o.join(this.root,e):(e=o.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},f.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&u(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!r||"DIR"===n)return n;if(r&&"FILE"===n)return!1}var i=this.statCache[t];if(!i){var o;try{o=this.fs.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(o&&o.isSymbolicLink())try{i=this.fs.statSync(t)}catch(e){i=o}else i=o}return this.statCache[t]=i,n=!0,i&&(n=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||n,(!r||"FILE"!==n)&&n},f.prototype._mark=function(e){return c.mark(this,e)},f.prototype._makeAbs=function(e){return c.makeAbs(this,e)}},1283:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:t(e)};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})),r};var t=Object.getPrototypeOf||function(e){return e.__proto__}},3735:(e,t,r)=>{var n,i,o=r(9896),s=r(9106),a=r(1995),c=r(1283),l=r(9023);function u(e,t){Object.defineProperty(e,n,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(n=Symbol.for("graceful-fs.queue"),i=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",i="___graceful-fs.previous");var d,h=function(){};if(l.debuglog?h=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(h=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!o[n]){var p=global[n]||[];u(o,p),o.close=function(e){function t(t,r){return e.call(o,t,(function(e){e||g(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,i,{value:e}),t}(o.close),o.closeSync=function(e){function t(t){e.apply(o,arguments),g()}return Object.defineProperty(t,i,{value:e}),t}(o.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){h(o[n]),r(2613).equal(o[n].length,0)}))}function f(e){s(e),e.gracefulify=f,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){return"function"==typeof r&&(n=r,r=null),function e(r,n,i,o){return t(r,n,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof i&&i.apply(this,arguments):m([e,[r,n,i],t,o||Date.now(),Date.now()])}))}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,i){return"function"==typeof n&&(i=n,n=null),function e(t,n,i,o,s){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,n,i,o],r,s||Date.now(),Date.now()])}))}(e,t,n,i)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,i){return"function"==typeof r&&(i=r,r=null),function e(t,r,i,o,s){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,r,i,o],n,s||Date.now(),Date.now()])}))}(e,t,r,i)});var i=e.copyFile;i&&(e.copyFile=function(e,t,r,n){return"function"==typeof r&&(n=r,r=0),function e(t,r,n,o,s){return i(t,r,n,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,r,n,o],i,s||Date.now(),Date.now()])}))}(e,t,r,n)});var o=e.readdir;e.readdir=function(e,t,r){"function"==typeof t&&(r=t,t=null);var n=c.test(process.version)?function(e,t,r,n){return o(e,i(e,t,r,n))}:function(e,t,r,n){return o(e,t,i(e,t,r,n))};return n(e,t,r);function i(e,t,r,i){return function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"==typeof r&&r.call(this,o,s)):m([n,[e,t,r],o,i||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var l=a(e);g=l.ReadStream,y=l.WriteStream}var u=e.ReadStream;u&&(g.prototype=Object.create(u.prototype),g.prototype.open=function(){var e=this;_(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var d=e.WriteStream;d&&(y.prototype=Object.create(d.prototype),y.prototype.open=function(){var e=this;_(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return g},set:function(e){g=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return y},set:function(e){y=e},enumerable:!0,configurable:!0});var h=g;Object.defineProperty(e,"FileReadStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var p=y;function g(e,t){return this instanceof g?(u.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function y(e,t){return this instanceof y?(d.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0});var v=e.open;function _(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,i,o){return v(t,r,n,(function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof i&&i.apply(this,arguments):m([e,[t,r,n,i],s,o||Date.now(),Date.now()])}))}(e,t,r,n)}return e.open=_,e}function m(e){h("ENQUEUE",e[0].name,e[1]),o[n].push(e),y()}function g(){for(var e=Date.now(),t=0;t<o[n].length;++t)o[n][t].length>2&&(o[n][t][3]=e,o[n][t][4]=e);y()}function y(){if(clearTimeout(d),d=void 0,0!==o[n].length){var e=o[n].shift(),t=e[0],r=e[1],i=e[2],s=e[3],a=e[4];if(void 0===s)h("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-s>=6e4){h("TIMEOUT",t.name,r);var c=r.pop();"function"==typeof c&&c.call(null,i)}else{var l=Date.now()-a,u=Math.max(a-s,1);l>=Math.min(1.2*u,100)?(h("RETRY",t.name,r),t.apply(null,r.concat([s]))):o[n].push(e)}void 0===d&&(d=setTimeout(y,0))}}global[n]||u(global,o[n]),e.exports=f(c(o)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!o.__patched&&(e.exports=f(o),o.__patched=!0)},1995:(e,t,r)=>{var n=r(2203).Stream;e.exports=function(e){return{ReadStream:function t(r,i){if(!(this instanceof t))return new t(r,i);n.call(this);var o=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var s=Object.keys(i),a=0,c=s.length;a<c;a++){var l=s[a];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()})):process.nextTick((function(){o._read()}))},WriteStream:function t(r,i){if(!(this instanceof t))return new t(r,i);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},9106:(e,t,r)=>{var n=r(9140),i=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=i.call(process)),o};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var a=process.chdir;process.chdir=function(e){o=null,a.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,a)}e.exports=function(e){function t(t){return t?function(r,n,i){return t.call(e,r,n,(function(e){l(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function r(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!l(e))throw e}}:t}function i(t){return t?function(r,n,i,o){return t.call(e,r,n,i,(function(e){l(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function o(t){return t?function(r,n,i){try{return t.call(e,r,n,i)}catch(e){if(!l(e))throw e}}:t}function a(t){return t?function(r,n,i){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof n&&(i=n,n=null),n?t.call(e,r,n,o):t.call(e,r,o)}:t}function c(t){return t?function(r,n){var i=n?t.call(e,r,n):t.call(e,r);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:t}function l(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}var u;n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,i){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){t?i&&i(t):e.fchmod(n,r,(function(t){e.close(n,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(t,r){var i,o=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),s=!0;try{i=e.fchmodSync(o,r),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}}(e),e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,r,i,o){e.open(t,n.O_SYMLINK,(function(t,n){t?o&&o(t):e.futimes(n,r,i,(function(t){e.close(n,(function(e){o&&o(t||e)}))}))}))},e.lutimesSync=function(t,r,i){var o,s=e.openSync(t,n.O_SYMLINK),a=!0;try{o=e.futimesSync(s,r,i),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):e.futimes&&(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=r(e.chmodSync),e.fchmodSync=r(e.fchmodSync),e.lchmodSync=r(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){}),"win32"===s&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function r(r,n,i){var o=Date.now(),s=0;t(r,n,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code||"EBUSY"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(n,(function(e,o){e&&"ENOENT"===e.code?t(r,n,a):i(c)}))}),s),void(s<100&&(s+=10));i&&i(c)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.rename)),e.read="function"!=typeof e.read?e.read:function(t){function r(r,n,i,o,s,a){var c;if(a&&"function"==typeof a){var l=0;c=function(u,d,h){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,r,n,i,o,s,c);a.apply(this,arguments)}}return t.call(e,r,n,i,o,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(u=e.readSync,function(t,r,n,i,o){for(var s=0;;)try{return u.call(e,t,r,n,i,o)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}})}},5884:e=>{"use strict";e.exports=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)}},3423:(e,t,r)=>{var n=r(6587),i=Object.create(null),o=r(3519);e.exports=n((function(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function(e){return o((function t(){var r=i[e],n=r.length,o=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}(arguments);try{for(var s=0;s<n;s++)r[s].apply(null,o)}finally{r.length>n?(r.splice(0,n),process.nextTick((function(){t.apply(null,o)}))):delete i[e]}}))}(e))}))},2017:(e,t,r)=>{try{var n=r(9023);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(6698)}},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},2909:(e,t,r)=>{let n;try{n=r(3735)}catch(e){n=r(9896)}const i=r(1236),{stringify:o,stripBom:s}=r(1144),a={readFile:i.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,o=!("throws"in t)||t.throws;let a,c=await i.fromCallback(r.readFile)(e,t);c=s(c);try{a=JSON.parse(c,t?t.reviver:null)}catch(t){if(o)throw t.message=`${e}: ${t.message}`,t;return null}return a})),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,i=!("throws"in t)||t.throws;try{let n=r.readFileSync(e,t);return n=s(n),JSON.parse(n,t.reviver)}catch(t){if(i)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:i.fromPromise((async function(e,t,r={}){const s=r.fs||n,a=o(t,r);await i.fromCallback(s.writeFile)(e,a,r)})),writeFileSync:function(e,t,r={}){const i=r.fs||n,s=o(t,r);return i.writeFileSync(e,s,r)}};e.exports=a},1144:e=>{e.exports={stringify:function(e,{EOL:t="\n",finalEOL:r=!0,replacer:n=null,spaces:i}={}){const o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},4027:(e,t,r)=>{e.exports=h,h.Minimatch=p;var n=function(){try{return r(6928)}catch(e){}}()||{sep:"/"};h.sep=n.sep;var i=h.GLOBSTAR=p.GLOBSTAR={},o=r(8928),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",l="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),u=/\/+/;function d(e,t){t=t||{};var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),Object.keys(t).forEach((function(e){r[e]=t[e]})),r}function h(e,t,r){return m(t),r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&new p(t,r).match(e)}function p(e,t){if(!(this instanceof p))return new p(e,t);m(e),t||(t={}),e=e.trim(),t.allowWindowsEscape||"/"===n.sep||(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}function f(e,t){return t||(t=this instanceof p?this.options:{}),e=void 0===e?this.pattern:e,m(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:o(e)}h.filter=function(e,t){return t=t||{},function(r,n,i){return h(r,e,t)}},h.defaults=function(e){if(!e||"object"!=typeof e||!Object.keys(e).length)return h;var t=h,r=function(r,n,i){return t(r,n,d(e,i))};return(r.Minimatch=function(r,n){return new t.Minimatch(r,d(e,n))}).defaults=function(r){return t.defaults(d(e,r)).Minimatch},r.filter=function(r,n){return t.filter(r,d(e,n))},r.defaults=function(r){return t.defaults(d(e,r))},r.makeRe=function(r,n){return t.makeRe(r,d(e,n))},r.braceExpand=function(r,n){return t.braceExpand(r,d(e,n))},r.match=function(r,n,i){return t.match(r,n,d(e,i))},r},p.defaults=function(e){return h.defaults(e).Minimatch},p.prototype.debug=function(){},p.prototype.make=function(){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(u)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r}else this.empty=!0;else this.comment=!0},p.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=0;if(!this.options.nonegate){for(var n=0,i=e.length;n<i&&"!"===e.charAt(n);n++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}},h.braceExpand=function(e,t){return f(e,t)},p.prototype.braceExpand=f;var m=function(e){if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")};p.prototype.parse=function(e,t){m(e);var r=this.options;if("**"===e){if(!r.noglobstar)return i;e="*"}if(""===e)return"";var n,o="",u=!!r.nocase,d=!1,h=[],p=[],f=!1,y=-1,v=-1,_="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function w(){if(n){switch(n){case"*":o+=c,u=!0;break;case"?":o+=a,u=!0;break;default:o+="\\"+n}b.debug("clearStateChar %j %j",n,o),n=!1}}for(var S,E=0,C=e.length;E<C&&(S=e.charAt(E));E++)if(this.debug("%s\t%s %s %j",e,E,o,S),d&&l[S])o+="\\"+S,d=!1;else switch(S){case"/":return!1;case"\\":w(),d=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,E,o,S),f){this.debug("  in class"),"!"===S&&E===v+1&&(S="^"),o+=S;continue}b.debug("call clearStateChar %j",n),w(),n=S,r.noext&&w();continue;case"(":if(f){o+="(";continue}if(!n){o+="\\(";continue}h.push({type:n,start:E-1,reStart:o.length,open:s[n].open,close:s[n].close}),o+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,o),n=!1;continue;case")":if(f||!h.length){o+="\\)";continue}w(),u=!0;var T=h.pop();o+=T.close,"!"===T.type&&p.push(T),T.reEnd=o.length;continue;case"|":if(f||!h.length||d){o+="\\|",d=!1;continue}w(),o+="|";continue;case"[":if(w(),f){o+="\\"+S;continue}f=!0,v=E,y=o.length,o+=S;continue;case"]":if(E===v+1||!f){o+="\\"+S,d=!1;continue}var k=e.substring(v+1,E);try{RegExp("["+k+"]")}catch(e){var P=this.parse(k,g);o=o.substr(0,y)+"\\["+P[0]+"\\]",u=u||P[1],f=!1;continue}u=!0,f=!1,o+=S;continue;default:w(),d?d=!1:!l[S]||"^"===S&&f||(o+="\\"),o+=S}for(f&&(k=e.substr(v+1),P=this.parse(k,g),o=o.substr(0,y)+"\\["+P[0],u=u||P[1]),T=h.pop();T;T=h.pop()){var R=o.slice(T.reStart+T.open.length);this.debug("setting tail",o,T),R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",R,R,T,o);var x="*"===T.type?c:"?"===T.type?a:"\\"+T.type;u=!0,o=o.slice(0,T.reStart)+x+"\\("+R}w(),d&&(o+="\\\\");var M=!1;switch(o.charAt(0)){case"[":case".":case"(":M=!0}for(var O=p.length-1;O>-1;O--){var D=p[O],I=o.slice(0,D.reStart),A=o.slice(D.reStart,D.reEnd-8),N=o.slice(D.reEnd-8,D.reEnd),L=o.slice(D.reEnd);N+=L;var F=I.split("(").length-1,j=L;for(E=0;E<F;E++)j=j.replace(/\)[+*?]?/,"");var q="";""===(L=j)&&t!==g&&(q="$"),o=I+A+L+q+N}if(""!==o&&u&&(o="(?=.)"+o),M&&(o=_+o),t===g)return[o,u];if(!u)return e.replace(/\\(.)/g,"$1");var U=r.nocase?"i":"";try{var B=new RegExp("^"+o+"$",U)}catch(e){return new RegExp("$.")}return B._glob=e,B._src=o,B};var g={};h.makeRe=function(e,t){return new p(e,t||{}).makeRe()},p.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?c:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===i?r:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch(e){this.regexp=!1}return this.regexp},h.match=function(e,t,r){var n=new p(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},p.prototype.match=function(e,t){if(void 0===t&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/")),e=e.split(u),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=e;if(r.matchBase&&1===a.length&&(c=[i]),this.matchOne(c,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},p.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var l,u=t[s],d=e[o];if(this.debug(t,u,d),!1===u)return!1;if(u===i){this.debug("GLOBSTAR",[t,u,d]);var h=o,p=s+1;if(p===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!n.dot&&"."===e[o].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,p,f),this.matchOne(e.slice(h),t.slice(p),r))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!r||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof u?(l=d===u,this.debug("string match",u,d,l)):(l=d.match(u),this.debug("pattern match",u,d,l)),!l)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},9505:(e,t,r)=>{var n=r(6928),i=r(9896),o=parseInt("0777",8);function s(e,t,r,a){"function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,l=t.fs||i;void 0===c&&(c=o&~process.umask()),a||(a=null);var u=r||function(){};e=n.resolve(e),l.mkdir(e,c,(function(r){if(!r)return u(null,a=a||e);"ENOENT"===r.code?s(n.dirname(e),t,(function(r,n){r?u(r,n):s(e,t,u,n)})):l.stat(e,(function(e,t){e||!t.isDirectory()?u(r,a):u(null,a)}))}))}e.exports=s.mkdirp=s.mkdirP=s,s.sync=function e(t,r,s){r&&"object"==typeof r||(r={mode:r});var a=r.mode,c=r.fs||i;void 0===a&&(a=o&~process.umask()),s||(s=null),t=n.resolve(t);try{c.mkdirSync(t,a),s=s||t}catch(i){if("ENOENT"===i.code)s=e(n.dirname(t),r,s),e(t,r,s);else{var l;try{l=c.statSync(t)}catch(e){throw i}if(!l.isDirectory())throw i}}return s}},3480:(e,t,r)=>{const n=r(5737),i=r(1276),{mkdirpNative:o,mkdirpNativeSync:s}=r(3831),{mkdirpManual:a,mkdirpManualSync:c}=r(6990),{useNative:l,useNativeSync:u}=r(4443),d=(e,t)=>(e=i(e),t=n(t),l(t)?o(e,t):a(e,t));d.sync=(e,t)=>(e=i(e),t=n(t),u(t)?s(e,t):c(e,t)),d.native=(e,t)=>o(i(e),n(t)),d.manual=(e,t)=>a(i(e),n(t)),d.nativeSync=(e,t)=>s(i(e),n(t)),d.manualSync=(e,t)=>c(i(e),n(t)),e.exports=d},4523:(e,t,r)=>{const{dirname:n}=r(6928),i=(e,t,r=void 0)=>r===t?Promise.resolve():e.statAsync(t).then((e=>e.isDirectory()?r:void 0),(r=>"ENOENT"===r.code?i(e,n(t),t):void 0)),o=(e,t,r=void 0)=>{if(r!==t)try{return e.statSync(t).isDirectory()?r:void 0}catch(r){return"ENOENT"===r.code?o(e,n(t),t):void 0}};e.exports={findMade:i,findMadeSync:o}},6990:(e,t,r)=>{const{dirname:n}=r(6928),i=(e,t,r)=>{t.recursive=!1;const o=n(e);return o===e?t.mkdirAsync(e,t).catch((e=>{if("EISDIR"!==e.code)throw e})):t.mkdirAsync(e,t).then((()=>r||e),(n=>{if("ENOENT"===n.code)return i(o,t).then((r=>i(e,t,r)));if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;return t.statAsync(e).then((e=>{if(e.isDirectory())return r;throw n}),(()=>{throw n}))}))},o=(e,t,r)=>{const i=n(e);if(t.recursive=!1,i===e)try{return t.mkdirSync(e,t)}catch(e){if("EISDIR"!==e.code)throw e;return}try{return t.mkdirSync(e,t),r||e}catch(n){if("ENOENT"===n.code)return o(e,t,o(i,t,r));if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;try{if(!t.statSync(e).isDirectory())throw n}catch(e){throw n}}};e.exports={mkdirpManual:i,mkdirpManualSync:o}},3831:(e,t,r)=>{const{dirname:n}=r(6928),{findMade:i,findMadeSync:o}=r(4523),{mkdirpManual:s,mkdirpManualSync:a}=r(6990);e.exports={mkdirpNative:(e,t)=>(t.recursive=!0,n(e)===e?t.mkdirAsync(e,t):i(t,e).then((r=>t.mkdirAsync(e,t).then((()=>r)).catch((r=>{if("ENOENT"===r.code)return s(e,t);throw r}))))),mkdirpNativeSync:(e,t)=>{if(t.recursive=!0,n(e)===e)return t.mkdirSync(e,t);const r=o(t,e);try{return t.mkdirSync(e,t),r}catch(r){if("ENOENT"===r.code)return a(e,t);throw r}}}},5737:(e,t,r)=>{const{promisify:n}=r(9023),i=r(9896);e.exports=e=>{if(e)if("object"==typeof e)e={mode:511,fs:i,...e};else if("number"==typeof e)e={mode:e,fs:i};else{if("string"!=typeof e)throw new TypeError("invalid options argument");e={mode:parseInt(e,8),fs:i}}else e={mode:511,fs:i};return e.mkdir=e.mkdir||e.fs.mkdir||i.mkdir,e.mkdirAsync=n(e.mkdir),e.stat=e.stat||e.fs.stat||i.stat,e.statAsync=n(e.stat),e.statSync=e.statSync||e.fs.statSync||i.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||i.mkdirSync,e}},1276:(e,t,r)=>{const n=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:i,parse:o}=r(6928);e.exports=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=i(e),"win32"===n){const t=/[*|"<>?:]/,{root:r}=o(e);if(t.test(e.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e}},4443:(e,t,r)=>{const n=r(9896),i=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),o=+i[0]>10||10==+i[0]&&+i[1]>=12,s=o?e=>e.mkdir===n.mkdir:()=>!1,a=o?e=>e.mkdirSync===n.mkdirSync:()=>!1;e.exports={useNative:s,useNativeSync:a}},6585:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,o=7*i;function s(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*o;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=i?s(c,l,i,"day"):l>=n?s(c,l,n,"hour"):l>=r?s(c,l,r,"minute"):l>=t?s(c,l,t,"second"):c+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8169:(e,t,r)=>{const n=require;"function"==typeof n.addon?e.exports=n.addon.bind(n):e.exports=r(1381)},1381:(e,t,r)=>{var n=r(9896),i=r(6928),o=r(857),s=require,a=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,l=process.versions.modules,u=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",d=process.env.npm_config_arch||o.arch(),h=process.env.npm_config_platform||o.platform(),p=process.env.LIBC||(function(e){return"linux"===e&&n.existsSync("/etc/alpine-release")}(h)?"musl":"glibc"),f=process.env.ARM_VERSION||("arm64"===d?"8":a.arm_version)||"",m=(process.versions.uv||"").split(".")[0];function g(e){return s(g.resolve(e))}function y(e){try{return n.readdirSync(e)}catch(e){return[]}}function v(e,t){var r=y(e).filter(t);return r[0]&&i.join(e,r[0])}function _(e){return/\.node$/.test(e)}function b(e){var t=e.split("-");if(2===t.length){var r=t[0],n=t[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:e,platform:r,architectures:n}}}function w(e,t){return function(r){return null!=r&&r.platform===e&&r.architectures.includes(t)}}function S(e,t){return e.architectures.length-t.architectures.length}function E(e){var t=e.split("."),r={file:e,specificity:0};if("node"===t.pop()){for(var n=0;n<t.length;n++){var i=t[n];if("node"===i||"electron"===i||"node-webkit"===i)r.runtime=i;else if("napi"===i)r.napi=!0;else if("abi"===i.slice(0,3))r.abi=i.slice(3);else if("uv"===i.slice(0,2))r.uv=i.slice(2);else if("armv"===i.slice(0,4))r.armv=i.slice(4);else{if("glibc"!==i&&"musl"!==i)continue;r.libc=i}r.specificity++}return r}}function C(e,t){return function(r){return!(null==r||r.runtime&&r.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(r)||r.abi&&r.abi!==t&&!r.napi||r.uv&&r.uv!==m||r.armv&&r.armv!==f||r.libc&&r.libc!==p)}}function T(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}e.exports=g,g.resolve=g.path=function(e){e=i.resolve(e||".");try{var t=s(i.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!c){var r=v(i.join(e,"build/Release"),_);if(r)return r;var n=v(i.join(e,"build/Debug"),_);if(n)return n}var o=k(e);if(o)return o;var a=k(i.dirname(process.execPath));if(a)return a;var g=["platform="+h,"arch="+d,"runtime="+u,"abi="+l,"uv="+m,f?"armv="+f:"","libc="+p,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+g+"\n    loaded from: "+e+"\n");function k(e){var t=y(i.join(e,"prebuilds")).map(b).filter(w(h,d)).sort(S)[0];if(t){var r=i.join(e,"prebuilds",t.name),n=y(r).map(E).filter(C(u,l)).sort(T(u))[0];return n?i.join(r,n.file):void 0}}},g.parseTags=E,g.matchTags=C,g.compareTags=T,g.parseTuple=b,g.matchTuple=w,g.compareTuples=S},8355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4434);class i extends Error{constructor(e){super(e.message),this._code=e.code||0,this._data=e.data||null}get code(){return this._code}get data(){return this._data}}t.MessageError=i;class o extends n.EventEmitter{constructor(e,t){if(super(),this._responsePromiseMap=new Map,this._nextMessageId=0,this._connected=!1,this._emitLog=!1,this._consoleLog=!1,this._requestQueue=[],this.setLogging(t),!e)throw new TypeError("socket cannot be undefined or null");this._socket=e,e.on("open",(()=>{this._connected=!0,this._sendQueuedRequests()})),e.on("message",(e=>this.processMessage(e)))}processMessage(e){let t;this._logMessage(e,"receive");try{t=JSON.parse(e)}catch(e){return this.emit("error",e)}if(t)if(t.id)if(this._responsePromiseMap.has(t.id)){const r=this._responsePromiseMap.get(t.id);t.result?r.resolve(t.result):t.error?r.reject(new i(t.error)):this.emit("error",new Error(`Response must have result or error: ${e}`))}else this.emit("error",new Error(`Response with id:${t.id} has no pending request`));else t.method?this.emit(t.method,t.params):this.emit("error",new Error(`Invalid message: ${e}`));else this.emit("error",new Error("Message cannot be null, empty or undefined"))}setLogging({logEmit:e,logConsole:t}={}){this._emitLog=e,this._consoleLog=t}_send(e){this._requestQueue.push(JSON.stringify(e)),this._sendQueuedRequests()}_sendQueuedRequests(){if(this._connected){for(let e of this._requestQueue)this._logMessage(e,"send"),this._socket.send(e);this._requestQueue=[]}}_logMessage(e,t){this._consoleLog&&console.log("Client "+("send"===t?">":"<"),e),this._emitLog&&this.emit(t,e)}call(e,t){const r=++this._nextMessageId,n={id:r,method:e,params:t};return new Promise(((e,t)=>{try{this._send(n),this._responsePromiseMap.set(r,{resolve:e,reject:t})}catch(e){return t(e)}}))}notify(e,t){this._send({method:e,params:t})}api(e){if(!Proxy)throw new Error("api() requires ES6 Proxy. Please use an ES6 compatible engine");return new Proxy({},{get:(t,r)=>{if(t[r])return t[r];if("__proto__"===r||"prototype"===r)return Object.prototype;if(void 0===e)t[r]=this.api(`${r}.`);else if("on"===r)t[r]=(t,r)=>this.on(`${e}${t}`,r);else if("emit"===r)t[r]=(t,r)=>this.notify(`${e}${t}`,r);else if("on"===r.substr(0,2)&&r.length>3){const n=r[2].toLowerCase()+r.substr(3);t[r]=t=>this.on(`${e}${n}`,t)}else if("emit"===r.substr(0,4)&&r.length>5){const n=r[4].toLowerCase()+r.substr(5);t[r]=t=>this.notify(`${e}${n}`,t)}else{const n=r;t[r]=t=>this.call(`${e}${n}`,t)}return t[r]}})}}t.Client=o;class s extends n.EventEmitter{constructor(e,t){if(super(),this._exposedMethodsMap=new Map,this._emitLog=!1,this._consoleLog=!1,this.setLogging(t),!e)throw new TypeError("server cannot be undefined or null");this._socketServer=e,e.on("connection",(e=>{e.on("message",(t=>this.processMessage(t,e)))}))}processMessage(e,t){let r;this._logMessage(e,"receive");try{r=JSON.parse(e)}catch(e){return this._sendError(t,r,-32700)}if(r&&r.method&&"string"==typeof r.method)if(r.id&&"number"==typeof r.id){const e=this._exposedMethodsMap.get(r.method);if(e)try{const n=e.call(null,r.params);n instanceof Promise?n.then((e=>{this._send(t,{id:r.id,result:e||{}})})).catch((e=>{this._sendError(t,r,-32603,e)})):this._send(t,{id:r.id,result:n||{}})}catch(e){this._sendError(t,r,-32603,e)}else this._sendError(t,r,-32601)}else this.emit(r.method,r.params);else this._sendError(t,r,-32600)}setLogging({logEmit:e,logConsole:t}={}){this._emitLog=e,this._consoleLog=t}_logMessage(e,t){this._consoleLog&&console.log("Server "+("send"===t?">":"<"),e),this._emitLog&&this.emit(t,e)}_send(e,t){const r=JSON.stringify(t);this._logMessage(r,"send"),e.send(r)}_sendError(e,t,r,n){try{this._send(e,{id:t&&t.id||-1,error:this._errorFromCode(r,n&&n.message||n,t&&t.method)})}catch(n){}}_errorFromCode(e,t,r){let n="";switch(e){case-32603:n=`InternalError: Internal Error when calling '${r}'`;break;case-32601:n=`MethodNotFound: '${r}' wasn't found`;break;case-32600:n="InvalidRequest: JSON sent is not a valid request object";break;case-32700:n="ParseError: invalid JSON received"}return{code:e,message:n,data:t}}expose(e,t){this._exposedMethodsMap.set(e,t)}notify(e,t){if(!this._socketServer.clients)throw new Error('SocketServer does not support broadcasting. No "clients: LikeSocket[]" property found');for(let r of this._socketServer.clients)this._send(r,{method:e,params:t})}api(e){if(!Proxy)throw new Error("api() requires ES6 Proxy. Please use an ES6 compatible engine");return new Proxy({},{get:(t,r)=>{if(t[r])return t[r];if("__proto__"===r||"prototype"===r)return Object.prototype;if(void 0===e)t[r]=this.api(`${r}.`);else if("on"===r)t[r]=(t,r)=>this.on(`${e}${t}`,r);else if("emit"===r)t[r]=(t,r)=>this.notify(`${e}${t}`,r);else if("on"===r.substr(0,2)&&r.length>3){const n=r[2].toLowerCase()+r.substr(3);t[r]=t=>this.on(`${e}${n}`,t)}else if("emit"===r.substr(0,4)&&r.length>5){const n=r[4].toLowerCase()+r.substr(5);t[r]=t=>this.notify(`${e}${n}`,t)}else{if("expose"!==r)return;t[r]=t=>{if(!t||"object"!=typeof t)throw new Error("Expected an iterable object to expose functions");for(let r in t)"function"==typeof t[r]&&this.expose(`${e}${r}`,t[r].bind(t))}}return t[r]}})}}t.Server=s},3519:(e,t,r)=>{var n=r(6587);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},2641:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===process.platform?r:t,e.exports.posix=t,e.exports.win32=r},1436:e=>{function t(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function r(e){e.pending+=1;var t=!1;return function(i){if(t)throw new Error("callback called twice");if(t=!0,e.error=e.error||i,e.pending-=1,e.waiting.length>0&&e.pending<e.max)n(e,e.waiting.shift());else if(0===e.pending){var o=e.listeners;e.listeners=[],o.forEach(r)}};function r(t){t(e.error)}}function n(e,t){t(r(e))}e.exports=t,t.prototype.go=function(e){this.pending<this.max?n(this,e):this.waiting.push(e)},t.prototype.wait=function(e){0===this.pending?e(this.error):this.listeners.push(e)},t.prototype.hold=function(){return r(this)}},6504:(e,t,r)=>{"use strict";var n=r(7016).parse,i={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},o=String.prototype.endsWith||function(e){return e.length<=this.length&&-1!==this.indexOf(e,this.length-e.length)};function s(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}t.T=function(e){var t="string"==typeof e?n(e):e||{},r=t.protocol,a=t.host,c=t.port;if("string"!=typeof a||!a||"string"!=typeof r)return"";if(r=r.split(":",1)[0],!function(e,t){var r=(s("npm_config_no_proxy")||s("no_proxy")).toLowerCase();return!r||"*"!==r&&r.split(/[,\s]/).every((function(r){if(!r)return!0;var n=r.match(/^(.+):(\d+)$/),i=n?n[1]:r,s=n?parseInt(n[2]):0;return!(!s||s===t)||(/^[.*]/.test(i)?("*"===i.charAt(0)&&(i=i.slice(1)),!o.call(e,i)):e!==i)}))}(a=a.replace(/:\d*$/,""),c=parseInt(c)||i[r]||0))return"";var l=s("npm_config_"+r+"_proxy")||s(r+"_proxy")||s("npm_config_proxy")||s("all_proxy");return l&&-1===l.indexOf("://")&&(l=r+"://"+l),l}},815:(e,t,r)=>{var n,i=r(3519),o=r(6611);try{n=r(9896)}catch(e){}var s=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},l=function(e){e()},u=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var d=t.map((function(u,h){var p=h<t.length-1;return function(e,t,r,l){l=i(l);var u=!1;e.on("close",(function(){u=!0})),o(e,{readable:t,writable:r},(function(e){if(e)return l(e);u=!0,l()}));var d=!1;return function(t){if(!u&&!d)return d=!0,function(e){return!!a&&!!n&&(e instanceof(n.ReadStream||s)||e instanceof(n.WriteStream||s))&&c(e.close)}(e)?e.close(s):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void l(t||new Error("stream was destroyed"))}}(u,p,h>0,(function(t){e||(e=t),t&&d.forEach(l),p||(d.forEach(l),r(e))}))}));return t.reduce(u)}},2814:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=r(4434),o=n(r(8339)),s=n(r(346)),a=o.default("agent-base");function c(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function l(e,t){return new l.Agent(e,t)}!function(e){class t extends i.EventEmitter{constructor(e,t){super();let r=t;"function"==typeof e?this.callback=e:e&&(r=e),this.timeout=null,r&&"number"==typeof r.timeout&&(this.timeout=r.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,r){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const r=Object.assign({},t);"boolean"!=typeof r.secureEndpoint&&(r.secureEndpoint=c()),null==r.host&&(r.host="localhost"),null==r.port&&(r.port=r.secureEndpoint?443:80),null==r.protocol&&(r.protocol=r.secureEndpoint?"https:":"http:"),r.host&&r.path&&delete r.path,delete r.agent,delete r.hostname,delete r._defaultAgent,delete r.defaultPort,delete r.createConnection,e._last=!0,e.shouldKeepAlive=!1;let n=!1,i=null;const o=r.timeout||this.timeout,l=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},u=()=>{i=null,n=!0;const e=new Error(`A "socket" was not created for HTTP request before ${o}ms`);e.code="ETIMEOUT",l(e)},d=e=>{n||(null!==i&&(clearTimeout(i),i=null),l(e))},h=t=>{if(n)return;if(null!=i&&(clearTimeout(i),i=null),o=t,Boolean(o)&&"function"==typeof o.addRequest)return a("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,r);var o;if(t)return t.once("free",(()=>{this.freeSocket(t,r)})),void e.onSocket(t);const s=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);l(s)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=s.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof o&&o>0&&(i=setTimeout(u,o)),"port"in r&&"number"!=typeof r.port&&(r.port=Number(r.port));try{a("Resolving socket for %o request: %o",r.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,r)).then(h,d)}catch(e){Promise.reject(e).catch(d)}}else l(new Error("`callback` is not defined"))}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(l||(l={})),e.exports=l},346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,r){return new Promise(((n,i)=>{e.call(this,t,r,((e,t)=>{e?i(e):n(t)}))}))}}},4887:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(4106)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},4106:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(3179),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},8339:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(4887):e.exports=r(2339)},2339:(e,t,r)=>{const n=r(2018),i=r(9023);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=r(4106)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},7807:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(9278)),s=i(r(4756)),a=i(r(7016)),c=i(r(2613)),l=i(r(8339)),u=r(2814),d=i(r(914)),h=l.default("https-proxy-agent:agent");class p extends u.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");h("creating new HttpsProxyAgent instance: %o",t),super(t);const r=Object.assign({},t);var n;this.secureProxy=t.secureProxy||"string"==typeof(n=r.protocol)&&/^https:?$/i.test(n),r.host=r.hostname||r.host,"string"==typeof r.port&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in r)&&(r.ALPNProtocols=["http 1.1"]),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(e,t){return n(this,void 0,void 0,(function*(){const{proxy:r,secureProxy:n}=this;let i;n?(h("Creating `tls.Socket`: %o",r),i=s.default.connect(r)):(h("Creating `net.Socket`: %o",r),i=o.default.connect(r));const a=Object.assign({},r.headers);let l=`CONNECT ${t.host}:${t.port} HTTP/1.1\r\n`;r.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(r.auth).toString("base64")}`);let{host:u,port:p,secureEndpoint:m}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(p,m)||(u+=`:${p}`),a.Host=u,a.Connection="close";for(const e of Object.keys(a))l+=`${e}: ${a[e]}\r\n`;const g=d.default(i);i.write(`${l}\r\n`);const{statusCode:y,buffered:v}=yield g;if(200===y){if(e.once("socket",f),t.secureEndpoint){h("Upgrading socket connection to TLS");const e=t.servername||t.host;return s.default.connect(Object.assign(Object.assign({},function(e,...t){const r={};let n;for(n in e)t.includes(n)||(r[n]=e[n]);return r}(t,"host","hostname","path","port")),{socket:i,servername:e}))}return i}i.destroy();const _=new o.default.Socket({writable:!1});return _.readable=!0,e.once("socket",(e=>{h("replaying proxy buffer for failed request"),c.default(e.listenerCount("data")>0),e.push(v),e.push(null)})),_}))}}function f(e){e.resume()}t.default=p},7626:function(e,t,r){"use strict";const n=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(r(7807));function i(e){return new n.default(e)}!function(e){e.HttpsProxyAgent=n.default,e.prototype=n.default.prototype}(i||(i={})),e.exports=i},914:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(8339)).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise(((t,r)=>{let n=0;const o=[];function s(){const r=e.read();r?function(e){o.push(e),n+=e.length;const r=Buffer.concat(o,n);if(-1===r.indexOf("\r\n\r\n"))return i("have not received end of HTTP headers yet..."),void s();const a=r.toString("ascii",0,r.indexOf("\r\n")),c=+a.split(" ")[1];i("got proxy server response: %o",a),t({statusCode:c,buffered:r})}(r):e.once("readable",s)}function a(e){i("onclose had error %o",e)}function c(){i("onend")}e.on("error",(function t(n){e.removeListener("end",c),e.removeListener("error",t),e.removeListener("close",a),e.removeListener("readable",s),i("onerror %o",n),r(n)})),e.on("close",a),e.on("end",c),s()}))}},3179:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,o=7*i;function s(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*o;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=i?s(c,l,i,"day"):l>=n?s(c,l,n,"hour"):l>=r?s(c,l,r,"minute"):l>=t?s(c,l,t,"second"):c+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},9610:e=>{"use strict";e.exports=function(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}},8290:(e,t,r)=>{"use strict";try{e.exports=r(8169)(__dirname)}catch(t){e.exports=r(9610)}},2740:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(4464);function i(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function o(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,i),i+=n.length}return i<t?r.slice(0,i):r},mask:i,toArrayBuffer:function(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=Buffer.from(t):ArrayBuffer.isView(t)?r=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:o},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(2627);e.exports.mask=function(e,r,n,o,s){s<48?i(e,r,n,o,s):t.mask(e,r,n,o,s)},e.exports.unmask=function(e,r){e.length<32?o(e,r):t.unmask(e,r)}}catch(e){}},4464:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},3243:(e,t,r)=>{"use strict";const{kForOnEventAttribute:n,kListener:i}=r(4464),o=Symbol("kCode"),s=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),d=Symbol("kType"),h=Symbol("kWasClean");class p{constructor(e){this[u]=null,this[d]=e}get target(){return this[u]}get type(){return this[d]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class f extends p{constructor(e,t={}){super(e),this[o]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[o]}get reason(){return this[l]}get wasClean(){return this[h]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class g extends p{constructor(e,t={}){super(e),this[s]=void 0===t.data?null:t.data}get data(){return this[s]}}Object.defineProperty(g.prototype,"data",{enumerable:!0});const y={addEventListener(e,t,r={}){let o;if("message"===e)o=function(e,r){const n=new g("message",{data:r?e:e.toString()});n[u]=this,t.call(this,n)};else if("close"===e)o=function(e,r){const n=new f("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[u]=this,t.call(this,n)};else if("error"===e)o=function(e){const r=new m("error",{error:e,message:e.message});r[u]=this,t.call(this,r)};else{if("open"!==e)return;o=function(){const e=new p("open");e[u]=this,t.call(this,e)}}o[n]=!!r[n],o[i]=t,r.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[i]===t&&!r[n]){this.removeListener(e,r);break}}};e.exports={CloseEvent:f,ErrorEvent:m,Event:p,EventTarget:y,MessageEvent:g}},1800:(e,t,r)=>{"use strict";const{tokenChars:n}=r(6978);function i(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,o,s=Object.create(null),a=!1,c=!1,l=!1,u=-1,d=-1,h=-1,p=0;for(;p<e.length;p++)if(d=e.charCodeAt(p),void 0===r)if(-1===h&&1===n[d])-1===u&&(u=p);else if(0===p||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);const n=e.slice(u,h);44===d?(i(t,n,s),s=Object.create(null)):r=n,u=h=-1}}else-1===h&&-1!==u&&(h=p);else if(void 0===o)if(-1===h&&1===n[d])-1===u&&(u=p);else if(32===d||9===d)-1===h&&-1!==u&&(h=p);else if(59===d||44===d){if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p),i(s,e.slice(u,h),!0),44===d&&(i(t,r,s),s=Object.create(null),r=void 0),u=h=-1}else{if(61!==d||-1===u||-1!==h)throw new SyntaxError(`Unexpected character at index ${p}`);o=e.slice(u,p),u=h=-1}else if(c){if(1!==n[d])throw new SyntaxError(`Unexpected character at index ${p}`);-1===u?u=p:a||(a=!0),c=!1}else if(l)if(1===n[d])-1===u&&(u=p);else if(34===d&&-1!==u)l=!1,h=p;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===d&&61===e.charCodeAt(p-1))l=!0;else if(-1===h&&1===n[d])-1===u&&(u=p);else if(-1===u||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);let n=e.slice(u,h);a&&(n=n.replace(/\\/g,""),a=!1),i(s,o,n),44===d&&(i(t,r,s),s=Object.create(null),r=void 0),o=void 0,u=h=-1}}else-1===h&&(h=p);if(-1===u||l||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===h&&(h=p);const f=e.slice(u,h);return void 0===r?i(t,f,s):(void 0===o?i(s,f,!0):i(s,o,a?f.replace(/\\/g,""):f),i(t,r,s)),t}}},7005:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},8842:(e,t,r)=>{"use strict";const n=r(3106),i=r(2740),o=r(7005),{kStatusCode:s}=r(4464),a=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),l=Symbol("total-length"),u=Symbol("callback"),d=Symbol("buffers"),h=Symbol("error");let p;function f(e){this[d].push(e),this[l]+=e.length}function m(e){this[l]+=e.length,this[c]._maxPayload<1||this[l]<=this[c]._maxPayload?this[d].push(e):(this[h]=new RangeError("Max payload size exceeded"),this[h].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[h][s]=1009,this.removeListener("data",m),this.reset())}function g(e){this[c]._inflate=null,e[s]=1007,this[u](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[u];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){p.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){p.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const o=this._isServer?"client":"server";if(!this._inflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[l]=0,this._inflate[d]=[],this._inflate.on("error",g),this._inflate.on("data",m)}this._inflate[u]=r,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush((()=>{const e=this._inflate[h];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=i.concat(this._inflate[d],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[d]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const o=this._isServer?"server":"client";if(!this._deflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[d]=[],this._deflate.on("data",f)}this._deflate[u]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=i.concat(this._deflate[d],this._deflate[l]);t&&(e=e.slice(0,e.length-4)),this._deflate[u]=null,this._deflate[l]=0,this._deflate[d]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},5220:(e,t,r)=>{"use strict";const{Writable:n}=r(2203),i=r(8842),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=r(4464),{concat:l,toArrayBuffer:u,unmask:d}=r(2740),{isValidStatusCode:h,isValidUTF8:p}=r(6978);function f(e,t,r,n,i){const o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,f),o.code=i,o[a]=n,o}e.exports=class extends n{constructor(e={}){super(),this._binaryType=e.binaryType||o[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(48&e[0])return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=!(64&~e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=!(128&~e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~e[1]),this._isServer){if(!this._masked)return this._loop=!1,f(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,f(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(f(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?l(t,e):"arraybuffer"===this._binaryType?u(l(t,e)):t,this.emit("message",r,!0)}else{const r=l(t,e);if(!this._skipUTF8Validation&&!p(r))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,s),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!h(t))return f(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=e.slice(2);if(!this._skipUTF8Validation&&!p(r))return f(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},4924:(e,t,r)=>{"use strict";r(9278),r(4756);const{randomFillSync:n}=r(6982),i=r(8842),{EMPTY_BUFFER:o}=r(4464),{isValidStatusCode:s}=r(6978),{mask:a,toBuffer:c}=r(2740),l=Symbol("kByteLength"),u=Buffer.alloc(4);class d{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let r,i,o=!1,s=2,c=!1;t.mask&&(r=t.maskBuffer||u,t.generateMask?t.generateMask(r):n(r,0,4),c=!(r[0]|r[1]|r[2]|r[3]),s=6),"string"==typeof e?i=t.mask&&!c||void 0===t[l]?(e=Buffer.from(e)).length:t[l]:(i=e.length,o=t.mask&&t.readOnly&&!c);let d=i;i>=65536?(s+=8,d=127):i>125&&(s+=2,d=126);const h=Buffer.allocUnsafe(o?i+s:s);return h[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(h[0]|=64),h[1]=d,126===d?h.writeUInt16BE(i,2):127===d&&(h[2]=h[3]=0,h.writeUIntBE(i,4,6)),t.mask?(h[1]|=128,h[s-4]=r[0],h[s-3]=r[1],h[s-2]=r[2],h[s-1]=r[3],c?[h,e]:o?(a(e,r,h,s,i),[h]):(a(e,r,e,0,i),[h,e])):[h,e]}close(e,t,r,n){let i;if(void 0===e)i=o;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+r),i.writeUInt16BE(e,0),"string"==typeof t?i.write(t,2):i.set(t,2)}else i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0)}const a={[l]:i.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,i,!1,a,n]):this.sendFrame(d.frame(i,a),n)}ping(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):(n=(e=c(e)).length,i=c.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[l]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(d.frame(e,o),r)}pong(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):(n=(e=c(e)).length,i=c.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[l]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(d.frame(e,o),r)}send(e,t,r){const n=this._extensions[i.extensionName];let o,s,a=t.binary?2:1,u=t.compress;if("string"==typeof e?(o=Buffer.byteLength(e),s=!1):(o=(e=c(e)).length,s=c.readOnly),this._firstFragment?(this._firstFragment=!1,u&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(u=o>=n._threshold),this._compress=u):(u=!1,a=0),t.fin&&(this._firstFragment=!0),n){const n={[l]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:u};this._deflating?this.enqueue([this.dispatch,e,this._compress,n,r]):this.dispatch(e,this._compress,n,r)}else this.sendFrame(d.frame(e,{[l]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:!1}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(d.frame(e,r),n);const o=this._extensions[i.extensionName];this._bufferedBytes+=r[l],this._deflating=!0,o.compress(e,r.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof n&&n(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t],n=r[r.length-1];"function"==typeof n&&n(e)}}else this._bufferedBytes-=r[l],this._deflating=!1,r.readOnly=!1,this.sendFrame(d.frame(t,r),n),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][l],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][l],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=d},8397:(e,t,r)=>{"use strict";const{Duplex:n}=r(2203);function i(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;const a=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,r){const n=!r&&a._readableState.objectMode?t.toString():t;a.push(n)||e.pause()})),e.once("error",(function(e){a.destroyed||(r=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(i,a);let o=!1;e.once("error",(function(e){o=!0,n(e)})),e.once("close",(function(){o||n(t),process.nextTick(i,a)})),r&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){a._write(t,r,n)}))},a.on("end",o),a.on("error",s),a}},5179:(e,t,r)=>{"use strict";const{tokenChars:n}=r(6978);e.exports={parse:function(e){const t=new Set;let r=-1,i=-1,o=0;for(;o<e.length;o++){const s=e.charCodeAt(o);if(-1===i&&1===n[s])-1===r&&(r=o);else if(0===o||32!==s&&9!==s){if(44!==s)throw new SyntaxError(`Unexpected character at index ${o}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${o}`);-1===i&&(i=o);const n=e.slice(r,i);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);t.add(n),r=i=-1}}else-1===i&&-1!==r&&(i=o)}if(-1===r||-1!==i)throw new SyntaxError("Unexpected end of input");const s=e.slice(r,o);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return t.add(s),t}}},6978:(e,t,r)=>{"use strict";function n(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:n,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(8290);e.exports.isValidUTF8=function(e){return e.length<150?n(e):t(e)}}catch(e){}},8600:(e,t,r)=>{"use strict";const n=r(4434),i=r(8611),{createHash:o}=(r(5692),r(9278),r(4756),r(6982)),s=r(1800),a=r(8842),c=r(5179),l=r(398),{GUID:u,kWebSocket:d}=r(4464),h=/^[+/0-9A-Za-z]{22}==$/;function p(e){e._state=2,e.emit("close")}function f(){this.destroy()}function m(e,t,r,n){r=r||i.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function g(e,t,r,n,i){if(e.listenerCount("wsClientError")){const n=new Error(i);Error.captureStackTrace(n,g),e.emit("wsClientError",n,r,t)}else m(r,n,i)}e.exports=class extends n{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:l,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=i.createServer(((e,t)=>{const r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(p,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{p(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",f);const i=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void g(this,e,t,405,"Invalid HTTP method");if("websocket"!==e.headers.upgrade.toLowerCase())return void g(this,e,t,400,"Invalid Upgrade header");if(!i||!h.test(i))return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==o&&13!==o)return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void m(t,400);const l=e.headers["sec-websocket-protocol"];let u=new Set;if(void 0!==l)try{u=c.parse(l)}catch(r){return void g(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const d=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&void 0!==d){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=s.parse(d);e[a.extensionName]&&(r.accept(e[a.extensionName]),p[a.extensionName]=r)}catch(r){return void g(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const s={origin:e.headers[8===o?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,((o,s,a,c)=>{if(!o)return m(t,s||401,a,c);this.completeUpgrade(p,i,u,e,t,r,n)}));if(!this.options.verifyClient(s))return m(t,401)}this.completeUpgrade(p,i,u,e,t,r,n)}completeUpgrade(e,t,r,n,i,c,l){if(!i.readable||!i.writable)return i.destroy();if(i[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(i,503);const h=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o("sha1").update(t+u).digest("base64")}`],g=new this.options.WebSocket(null);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(h.push(`Sec-WebSocket-Protocol: ${e}`),g._protocol=e)}if(e[a.extensionName]){const t=e[a.extensionName].params,r=s.format({[a.extensionName]:[t]});h.push(`Sec-WebSocket-Extensions: ${r}`),g._extensions=e}this.emit("headers",h,n),i.write(h.concat("\r\n").join("\r\n")),i.removeListener("error",f),g.setSocket(i,c,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(g),g.on("close",(()=>{this.clients.delete(g),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)}))),l(g,n)}}},398:(e,t,r)=>{"use strict";const n=r(4434),i=r(5692),o=r(8611),s=r(9278),a=r(4756),{randomBytes:c,createHash:l}=r(6982),{Readable:u}=r(2203),{URL:d}=r(7016),h=r(8842),p=r(5220),f=r(4924),{BINARY_TYPES:m,EMPTY_BUFFER:g,GUID:y,kForOnEventAttribute:v,kListener:_,kStatusCode:b,kWebSocket:w,NOOP:S}=r(4464),{EventTarget:{addEventListener:E,removeEventListener:C}}=r(3243),{format:T,parse:k}=r(1800),{toBuffer:P}=r(2740),R=Symbol("kAborted"),x=[8,13],M=["CONNECTING","OPEN","CLOSING","CLOSED"],O=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class D extends n{constructor(e,t,r){super(),this._binaryType=m[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=g,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=D.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),I(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new p({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new f(e,this._extensions,r.generateMask),this._receiver=n,this._socket=e,n[w]=this,e[w]=this,n.on("conclude",q),n.on("drain",U),n.on("error",B),n.on("message",W),n.on("ping",H),n.on("pong",V),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",K),e.on("data",z),e.on("end",X),e.on("error",J),this._readyState=D.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=D.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[h.extensionName]&&this._extensions[h.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=D.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==D.CLOSED){if(this.readyState===D.CONNECTING){const e="WebSocket was closed before the connection was established";return F(this,this._req,e)}this.readyState!==D.CLOSING?(this._readyState=D.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}pause(){this.readyState!==D.CONNECTING&&this.readyState!==D.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===D.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,r)):j(this,e,r)}pong(e,t,r){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===D.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,r)):j(this,e,r)}resume(){this.readyState!==D.CONNECTING&&this.readyState!==D.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==D.OPEN)return void j(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[h.extensionName]||(n.compress=!1),this._sender.send(e||g,n,r)}terminate(){if(this.readyState!==D.CLOSED){if(this.readyState===D.CONNECTING){const e="WebSocket was closed before the connection was established";return F(this,this._req,e)}this._socket&&(this._readyState=D.CLOSING,this._socket.destroy())}}}function I(e,t,r,n){const s={protocolVersion:x[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!x.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${x.join(", ")})`);let a;if(t instanceof d)a=t,e._url=t.href;else{try{a=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const u="wss:"===a.protocol,p="ws+unix:"===a.protocol;let f;if("ws:"===a.protocol||u||p?p&&!a.pathname?f="The URL's pathname is empty":a.hash&&(f="The URL contains a fragment identifier"):f='The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"',f){const t=new SyntaxError(f);if(0===e._redirects)throw t;return void A(e,t)}const m=u?443:80,g=c(16).toString("base64"),v=u?i.request:o.request,_=new Set;let b,w;if(s.createConnection=u?L:N,s.defaultPort=s.defaultPort||m,s.port=a.port||m,s.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":g,Connection:"Upgrade",Upgrade:"websocket"},s.path=a.pathname+a.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(b=new h(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=T({[h.extensionName]:b.offer()})),r.length){for(const e of r){if("string"!=typeof e||!O.test(e)||_.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");_.add(e)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(a.username||a.password)&&(s.auth=`${a.username}:${a.password}`),p){const e=s.path.split(":");s.socketPath=e[0],s.path=e[1]}if(s.followRedirects){if(0===e._redirects){e._originalIpc=p,e._originalSecure=u,e._originalHostOrSocketPath=p?s.socketPath:a.host;const t=n&&n.headers;if(n={...n,headers:{}},t)for(const[e,r]of Object.entries(t))n.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=p?!!e._originalIpc&&s.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete s.headers.authorization,delete s.headers.cookie,t||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),w=e._req=v(s),e._redirects&&e.emit("redirect",e.url,w)}else w=e._req=v(s);s.timeout&&w.on("timeout",(()=>{F(e,w,"Opening handshake has timed out")})),w.on("error",(t=>{null===w||w[R]||(w=e._req=null,A(e,t))})),w.on("response",(i=>{const o=i.headers.location,a=i.statusCode;if(o&&s.followRedirects&&a>=300&&a<400){if(++e._redirects>s.maxRedirects)return void F(e,w,"Maximum redirects exceeded");let i;w.abort();try{i=new d(o,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${o}`);return void A(e,r)}I(e,i,r,n)}else e.emit("unexpected-response",w,i)||F(e,w,`Unexpected server response: ${i.statusCode}`)})),w.on("upgrade",((t,r,n)=>{if(e.emit("upgrade",t),e.readyState!==D.CONNECTING)return;if(w=e._req=null,"websocket"!==t.headers.upgrade.toLowerCase())return void F(e,r,"Invalid Upgrade header");const i=l("sha1").update(g+y).digest("base64");if(t.headers["sec-websocket-accept"]!==i)return void F(e,r,"Invalid Sec-WebSocket-Accept header");const o=t.headers["sec-websocket-protocol"];let a;if(void 0!==o?_.size?_.has(o)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":_.size&&(a="Server sent no subprotocol"),a)return void F(e,r,a);o&&(e._protocol=o);const c=t.headers["sec-websocket-extensions"];if(void 0!==c){if(!b)return void F(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=k(c)}catch(t){return void F(e,r,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(t);if(1!==n.length||n[0]!==h.extensionName)return void F(e,r,"Server indicated an extension that was not requested");try{b.accept(t[h.extensionName])}catch(t){return void F(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[h.extensionName]=b}e.setSocket(r,n,{generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})})),w.end()}function A(e,t){e._readyState=D.CLOSING,e.emit("error",t),e.emitClose()}function N(e){return e.path=e.socketPath,s.connect(e)}function L(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),a.connect(e)}function F(e,t,r){e._readyState=D.CLOSING;const n=new Error(r);Error.captureStackTrace(n,F),t.setHeader?(t[R]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(A,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function j(e,t,r){if(t){const r=P(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}r&&r(new Error(`WebSocket is not open: readyState ${e.readyState} (${M[e.readyState]})`))}function q(e,t){const r=this[w];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[w]&&(r._socket.removeListener("data",z),process.nextTick(G,r._socket),1005===e?r.close():r.close(e,t))}function U(){const e=this[w];e.isPaused||e._socket.resume()}function B(e){const t=this[w];void 0!==t._socket[w]&&(t._socket.removeListener("data",z),process.nextTick(G,t._socket),t.close(e[b])),t.emit("error",e)}function $(){this[w].emitClose()}function W(e,t){this[w].emit("message",e,t)}function H(e){const t=this[w];t.pong(e,!t._isServer,S),t.emit("ping",e)}function V(e){this[w].emit("pong",e)}function G(e){e.resume()}function K(){const e=this[w];let t;this.removeListener("close",K),this.removeListener("data",z),this.removeListener("end",X),e._readyState=D.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[w]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",$),e._receiver.on("finish",$))}function z(e){this[w]._receiver.write(e)||this.pause()}function X(){const e=this[w];e._readyState=D.CLOSING,e._receiver.end(),this.end()}function J(){const e=this[w];this.removeListener("error",J),this.on("error",S),e&&(e._readyState=D.CLOSING,this.destroy())}Object.defineProperty(D,"CONNECTING",{enumerable:!0,value:M.indexOf("CONNECTING")}),Object.defineProperty(D.prototype,"CONNECTING",{enumerable:!0,value:M.indexOf("CONNECTING")}),Object.defineProperty(D,"OPEN",{enumerable:!0,value:M.indexOf("OPEN")}),Object.defineProperty(D.prototype,"OPEN",{enumerable:!0,value:M.indexOf("OPEN")}),Object.defineProperty(D,"CLOSING",{enumerable:!0,value:M.indexOf("CLOSING")}),Object.defineProperty(D.prototype,"CLOSING",{enumerable:!0,value:M.indexOf("CLOSING")}),Object.defineProperty(D,"CLOSED",{enumerable:!0,value:M.indexOf("CLOSED")}),Object.defineProperty(D.prototype,"CLOSED",{enumerable:!0,value:M.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(D.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(D.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[v])return t[_];return null},set(t){for(const t of this.listeners(e))if(t[v]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[v]:!0})}})})),D.prototype.addEventListener=E,D.prototype.removeEventListener=C,e.exports=D},113:e=>{"use strict";const t={};function r(e,r,n){n||(n=Error);class i extends n{constructor(e,t,n){super(function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(e,t,n))}}i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map((e=>String(e))),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){let i;var o;let s;if("string"==typeof t&&(o="not ",t.substr(0,4)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-9,r)===t}(e," argument"))s=`The ${e} ${i} ${n(t,"type")}`;else{s=`The "${e}" ${"number"!=typeof c&&(c=0),c+1>(a=e).length||-1===a.indexOf(".",c)?"argument":"property"} ${i} ${n(t,"type")}`}var a,c;return s+=". Received type "+typeof r,s}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},5382:(e,t,r)=>{"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var i=r(5412),o=r(6708);r(2017)(l,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var c=s[a];l.prototype[c]||(l.prototype[c]=o.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},3600:(e,t,r)=>{"use strict";e.exports=i;var n=r(4610);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(2017)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},5412:(e,t,r)=>{"use strict";var n;e.exports=C,C.ReadableState=E,r(4434).EventEmitter;var i,o=function(e,t){return e.listeners(t).length},s=r(1416),a=r(181).Buffer,c=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},l=r(9023);i=l&&l.debuglog?l.debuglog("stream"):function(){};var u,d,h,p=r(345),f=r(5896),m=r(7672).getHighWaterMark,g=r(113).F,y=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(2017)(C,s);var w=f.errorOrDestroy,S=["error","close","destroy","pause","resume"];function E(e,t,i){n=n||r(5382),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=r(3141).I),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function C(e){if(n=n||r(5382),!(this instanceof C))return new C(e);var t=this instanceof n;this._readableState=new E(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function T(e,t,r,n,o){i("readableAddChunk",t);var s,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(i("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?x(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,M(e)))}}(e,l);else if(o||(s=function(e,t){var r,n;return n=t,a.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t)),r}(l,t)),s)w(e,s);else if(l.objectMode||t&&t.length>0)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)l.endEmitted?w(e,new b):k(e,l,t,!0);else if(l.ended)w(e,new v);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(t=l.decoder.write(t),l.objectMode||0!==t.length?k(e,l,t,!1):O(e,l)):k(e,l,t,!1)}else n||(l.reading=!1,O(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function k(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&x(e)),O(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=f.destroy,C.prototype._undestroy=f.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},C.prototype.unshift=function(e){return T(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){u||(u=r(3141).I);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var P=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=P?e=P:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(M,e))}function M(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function O(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(i("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function A(e){i("readable nexttick read 0"),e.read(0)}function N(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function j(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(q,t,e))}function q(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}C.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return i("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):x(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&j(this),null;var n,o=t.needReadable;return i("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&i("length less than watermark",o=!0),t.ended||t.reading?i("reading or ended",o=!1):o&&(i("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(r,t))),null===(n=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&j(this)),null!==n&&this.emit("data",n),n},C.prototype._read=function(e){w(this,new _("_read()"))},C.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,i("pipe count=%d opts=%j",n.pipesCount,t);var s=t&&!1===t.end||e===process.stdout||e===process.stderr?f:a;function a(){i("onend"),e.end()}n.endEmitted?process.nextTick(s):r.once("end",s),e.on("unpipe",(function t(o,s){i("onunpipe"),o===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,i("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("drain",c),e.removeListener("error",d),e.removeListener("unpipe",t),r.removeListener("end",a),r.removeListener("end",f),r.removeListener("data",u),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;i("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",c);var l=!1;function u(t){i("ondata");var o=e.write(t);i("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==U(n.pipes,e))&&!l&&(i("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(t){i("onerror",t),f(),e.removeListener("error",d),0===o(e,"error")&&w(e,t)}function h(){e.removeListener("finish",p),f()}function p(){i("onfinish"),e.removeListener("close",h),f()}function f(){i("unpipe"),r.unpipe(e)}return r.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",h),e.once("finish",p),e.emit("pipe",r),n.flowing||(i("pipe resume"),r.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,i("on readable",n.length,n.reading),n.length?x(this):n.reading||process.nextTick(A,this))),r},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(I,this),r},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(I,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(i("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(N,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(i("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){i("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<S.length;s++)e.on(S[s],this.emit.bind(this,S[s]));return this._read=function(t){i("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=r(2955)),d(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=F,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,t){return void 0===h&&(h=r(6532)),h(C,e,t)})},4610:(e,t,r)=>{"use strict";e.exports=u;var n=r(113).F,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(5382);function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(2017)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},6708:(e,t,r)=>{"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t){var r=e.entry;for(e.entry=null;r;){var n=r.callback;t.pendingcb--,n(undefined),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=C,C.WritableState=E;var o,s={deprecate:r(7983)},a=r(1416),c=r(181).Buffer,l=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=r(5896),d=r(7672).getHighWaterMark,h=r(113).F,p=h.ERR_INVALID_ARG_TYPE,f=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,v=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,b=h.ERR_UNKNOWN_ENCODING,w=u.errorOrDestroy;function S(){}function E(e,t,o){i=i||r(5382),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(M,e,t),e._writableState.errorEmitted=!0,w(e,n)):(i(n),e._writableState.errorEmitted=!0,w(e,n),M(e,t))}(e,r,n,t,i);else{var o=R(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||P(e,r),n?process.nextTick(k,e,r,o,i):k(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function C(e){var t=this instanceof(i=i||r(5382));if(!t&&!o.call(C,this))return new C(e);this._writableState=new E(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function T(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function k(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),M(e,t)}function P(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)o[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;o.allBuffers=c,T(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,d=r.callback;if(T(e,t,!1,t.objectMode?1:l.length,l,u,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(r){t.pendingcb--,r&&w(e,r),t.prefinished=!0,e.emit("prefinish"),M(e,t)}))}function M(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(2017)(C,a),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===C&&e&&e._writableState instanceof E}})):o=function(e){return e instanceof this},C.prototype.pipe=function(){w(this,new g)},C.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,s=!i.objectMode&&(n=e,c.isBuffer(n)||n instanceof l);return s&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=S),i.ending?function(e,t){var r=new _;w(e,r),process.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i;return null===r?i=new v:"string"==typeof r||t.objectMode||(i=new p("chunk",["string","Buffer"],r)),!i||(w(e,i),process.nextTick(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r)),t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,a,n,i,o);return l}(this,i,s,e,t,r)),o},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||P(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,r){r(new f("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,M(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=u.destroy,C.prototype._undestroy=u.undestroy,C.prototype._destroy=function(e,t){t(e)}},2955:(e,t,r)=>{"use strict";var n;function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(6238),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[s];if(null!==t){var r=e[h].read();null!==r&&(e[u]=null,e[s]=null,e[a]=null,t(p(r,!1)))}}function m(e){process.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[c]?r(e[c]):t(p(void 0,!0))}))}));var r,n=this[u];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(p(void 0,!0)):t[d](r,n)}),n)}}(n,this));else{var i=this[h].read();if(null!==i)return Promise.resolve(p(i,!1));r=new Promise(this[d])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,r=Object.create(y,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[h].read();n?(r[u]=null,r[s]=null,r[a]=null,e(p(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[u]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[u]=null,r[s]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[s];null!==n&&(r[u]=null,r[s]=null,r[a]=null,n(p(void 0,!0))),r[l]=!0})),e.on("readable",m.bind(null,r)),r}},345:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var c=r(181).Buffer,l=r(9023).inspect,u=l&&l.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,r,n,i=c.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,c.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return l(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},5896:e=>{"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(r,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):i?(process.nextTick(r,o),i(e)):process.nextTick(r,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},6238:(e,t,r)=>{"use strict";var n=r(113).F.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){a=!1,l=!0,s||o.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,d=!0,a||o.call(t)},p=function(e){o.call(t,e)},f=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",h),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}},6532:(e,t,r)=>{"use strict";function n(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(113).F.ERR_INVALID_ARG_TYPE;e.exports=function(e,t,r){var a;if(t&&"function"==typeof t.next)a=t;else if(t&&t[Symbol.asyncIterator])a=t[Symbol.asyncIterator]();else{if(!t||!t[Symbol.iterator])throw new s("iterable",["Iterable"],t);a=t[Symbol.iterator]()}var c=new e(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({objectMode:!0},r)),l=!1;function u(){return d.apply(this,arguments)}function d(){var e;return e=function*(){try{var e=yield a.next(),t=e.value;e.done?c.push(null):c.push(yield t)?u():l=!1}catch(e){c.destroy(e)}},d=function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)}))},d.apply(this,arguments)}return c._read=function(){l||(l=!0,u())},c}},7758:(e,t,r)=>{"use strict";var n,i=r(113).F,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var u,d=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var h=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(6238)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}(e,o,i>0,(function(e){u||(u=e),e&&h.forEach(c),o||(h.forEach(c),d(u))}))}));return t.reduce(l)}},7672:(e,t,r)=>{"use strict";var n=r(113).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},1416:(e,t,r)=>{e.exports=r(2203)},4198:(e,t,r)=>{var n=r(2203);"disable"===process.env.READABLE_STREAM&&n?(e.exports=n.Readable,Object.assign(e.exports,n),e.exports.Stream=n):((t=e.exports=r(5412)).Stream=n||t,t.Readable=t,t.Writable=r(6708),t.Duplex=r(5382),t.Transform=r(4610),t.PassThrough=r(3600),t.finished=r(6238),t.pipeline=r(7758))},4239:(e,t,r)=>{const n=r(2613),i=r(6928),o=r(9896);let s;try{s=r(3577)}catch(e){}const a={nosort:!0,silent:!0};let c=0;const l="win32"===process.platform,u=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||o[t],e[t+="Sync"]=e[t]||o[t]})),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===s)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},d=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n.equal(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.equal(typeof t,"object","rimraf: options should be object"),u(t);let i=0,o=null,a=0;const l=(e,n)=>e?r(e):(a=n.length,0===a?r():void n.forEach((e=>{const n=s=>{if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&i<t.maxBusyTries)return i++,setTimeout((()=>h(e,t,n)),100*i);if("EMFILE"===s.code&&c<t.emfileWait)return setTimeout((()=>h(e,t,n)),c++);"ENOENT"===s.code&&(s=null)}c=0,(e=>{o=o||e,0==--a&&r(o)})(s)};h(e,t,n)})));if(t.disableGlob||!s.hasMagic(e))return l(null,[e]);t.lstat(e,((r,n)=>{if(!r)return l(null,[e]);s(e,t.glob,l)}))},h=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.lstat(e,((n,i)=>n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&l&&p(e,t,n,r),i&&i.isDirectory()?m(e,t,n,r):void t.unlink(e,(n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return l?p(e,t,n,r):m(e,t,n,r);if("EISDIR"===n.code)return m(e,t,n,r)}return r(n)})))))},p=(e,t,r,i)=>{n(e),n(t),n("function"==typeof i),t.chmod(e,438,(n=>{n?i("ENOENT"===n.code?null:r):t.stat(e,((n,o)=>{n?i("ENOENT"===n.code?null:r):o.isDirectory()?m(e,t,r,i):t.unlink(e,i)}))}))},f=(e,t,r)=>{n(e),n(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}let i;try{i=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}i.isDirectory()?v(e,t,r):t.unlinkSync(e)},m=(e,t,r,i)=>{n(e),n(t),n("function"==typeof i),t.rmdir(e,(n=>{!n||"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code?n&&"ENOTDIR"===n.code?i(r):i(n):g(e,t,i)}))},g=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.readdir(e,((n,o)=>{if(n)return r(n);let s,a=o.length;if(0===a)return t.rmdir(e,r);o.forEach((n=>{d(i.join(e,n),t,(n=>{if(!s)return n?r(s=n):void(0==--a&&t.rmdir(e,r))}))}))}))},y=(e,t)=>{let r;if(u(t=t||{}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!s.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=s.sync(e,t.glob)}if(r.length)for(let e=0;e<r.length;e++){const n=r[e];let i;try{i=t.lstatSync(n)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&l&&f(n,t,e)}try{i&&i.isDirectory()?v(n,t,null):t.unlinkSync(n)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return l?f(n,t,e):v(n,t,e);if("EISDIR"!==e.code)throw e;v(n,t,e)}}},v=(e,t,r)=>{n(e),n(t);try{t.rmdirSync(e)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code)throw r;"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code||_(e,t)}},_=(e,t)=>{n(e),n(t),t.readdirSync(e).forEach((r=>y(i.join(e,r),t)));const r=l?100:1;let o=0;for(;;){let n=!0;try{const r=t.rmdirSync(e,t);return n=!1,r}finally{if(++o<r&&n)continue}}};e.exports=d,d.sync=y},2861:(e,t,r)=>{var n=r(181),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},3904:(e,t,r)=>{const n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const o=r(8587),{safeRe:s,t:a}=r(9718),c=r(2111),l=r(7272),u=r(3908),d=r(8311)},8311:(e,t,r)=>{const n=/\s+/g;class i{constructor(e,t){if(t=s(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!y(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,r=o.get(t);if(r)return r;const n=this.options.loose,i=n?u[d.HYPHENRANGELOOSE]:u[d.HYPHENRANGE];e=e.replace(i,M(this.options.includePrerelease)),c("hyphen replace",e),e=e.replace(u[d.COMPARATORTRIM],h),c("comparator trim",e),e=e.replace(u[d.TILDETRIM],p),c("tilde trim",e),e=e.replace(u[d.CARETTRIM],f),c("caret trim",e);let s=e.split(" ").map((e=>b(e,this.options))).join(" ").split(/\s+/).map((e=>x(e,this.options)));n&&(s=s.filter((e=>(c("loose invalid filter",e,this.options),!!e.match(u[d.COMPARATORLOOSE]))))),c("range list",s);const l=new Map,v=s.map((e=>new a(e,this.options)));for(const e of v){if(y(e))return[e];l.set(e.value,e)}l.size>1&&l.has("")&&l.delete("");const _=[...l.values()];return o.set(t,_),_}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some((r=>_(r,t)&&e.set.some((e=>_(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(O(this.set[t],e,this.options))return!0;return!1}}e.exports=i;const o=new(r(8794)),s=r(8587),a=r(3904),c=r(7272),l=r(3908),{safeRe:u,t:d,comparatorTrimReplace:h,tildeTrimReplace:p,caretTrimReplace:f}=r(9718),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=r(6874),y=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,_=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},b=(e,t)=>(c("comp",e,t),e=C(e,t),c("caret",e),e=S(e,t),c("tildes",e),e=k(e,t),c("xrange",e),e=R(e,t),c("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,S=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{const r=t.loose?u[d.TILDELOOSE]:u[d.TILDE];return e.replace(r,((t,r,n,i,o)=>{let s;return c("tilde",e,t,r,n,i,o),w(r)?s="":w(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:w(i)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(c("replaceTilde pr",o),s=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,c("tilde return",s),s}))},C=(e,t)=>e.trim().split(/\s+/).map((e=>T(e,t))).join(" "),T=(e,t)=>{c("caret",e,t);const r=t.loose?u[d.CARETLOOSE]:u[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,o,s)=>{let a;return c("caret",e,t,r,i,o,s),w(r)?a="":w(i)?a=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(o)?a="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(c("replaceCaret pr",s),a="0"===r?"0"===i?`>=${r}.${i}.${o}-${s} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${s} <${+r+1}.0.0-0`):(c("no pr"),a="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),c("caret return",a),a}))},k=(e,t)=>(c("replaceXRanges",e,t),e.split(/\s+/).map((e=>P(e,t))).join(" ")),P=(e,t)=>{e=e.trim();const r=t.loose?u[d.XRANGELOOSE]:u[d.XRANGE];return e.replace(r,((r,n,i,o,s,a)=>{c("xRange",e,r,n,i,o,s,a);const l=w(i),u=l||w(o),d=u||w(s),h=d;return"="===n&&h&&(n=""),a=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(o=0),s=0,">"===n?(n=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",u?i=+i+1:o=+o+1),"<"===n&&(a="-0"),r=`${n+i}.${o}.${s}${a}`):u?r=`>=${i}.0.0${a} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${o}.0${a} <${i}.${+o+1}.0-0`),c("xRange return",r),r}))},R=(e,t)=>(c("replaceStars",e,t),e.trim().replace(u[d.STAR],"")),x=(e,t)=>(c("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),M=e=>(t,r,n,i,o,s,a,c,l,u,d,h)=>`${r=w(n)?"":w(i)?`>=${n}.0.0${e?"-0":""}`:w(o)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=w(l)?"":w(u)?`<${+l+1}.0.0-0`:w(d)?`<${l}.${+u+1}.0-0`:h?`<=${l}.${u}.${d}-${h}`:e?`<${l}.${u}.${+d+1}-0`:`<=${c}`}`.trim(),O=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(c(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},3908:(e,t,r)=>{const n=r(7272),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(6874),{safeRe:s,t:a}=r(9718),c=r(8587),{compareIdentifiers:l}=r(1123);class u{constructor(e,t){if(t=c(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return l(r,i)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return l(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=u},2111:(e,t,r)=>{const n=r(4641),i=r(3999),o=r(5580),s=r(4089),a=r(7059),c=r(5200);e.exports=(e,t,r,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,l);case"!=":return i(e,r,l);case">":return o(e,r,l);case">=":return s(e,r,l);case"<":return a(e,r,l);case"<=":return c(e,r,l);default:throw new TypeError(`Invalid operator: ${t}`)}}},560:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},4641:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>0===n(e,t,r)},5580:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)>0},4089:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)>=0},7059:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)<0},5200:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)<=0},3999:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>0!==n(e,t,r)},144:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},7638:(e,t,r)=>{const n=r(8311);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},6874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},7272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},1123:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},8794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},8587:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},9718:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(6874),s=r(7272),a=(t=e.exports={}).re=[],c=t.safeRe=[],l=t.src=[],u=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",o],[h,i]],f=(e,t,r)=>{const n=(e=>{for(const[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=d++;s(e,i,t),u[e]=i,l[i]=t,a[i]=new RegExp(t,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),f("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${h}+`),f("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),f("FULL",`^${l[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),f("LOOSE",`^${l[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),f("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),f("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?`+`(?:${l[u.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",l[u.COERCE],!0),f("COERCERTLFULL",l[u.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},9872:(e,t,r)=>{"use strict";var n=r(3496),i=Array.prototype.concat,o=Array.prototype.slice,s=e.exports=function(e){for(var t=[],r=0,s=e.length;r<s;r++){var a=e[r];n(a)?t=i.call(t,o.call(a)):t.push(a)}return t};s.wrap=function(e){return function(){return e(s(arguments))}}},3496:e=>{e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},735:(e,t,r)=>{var n=r(251),i=Object.prototype.hasOwnProperty,o="undefined"!=typeof Map;function s(){this._array=[],this._set=o?new Map:Object.create(null)}s.fromArray=function(e,t){for(var r=new s,n=0,i=e.length;n<i;n++)r.add(e[n],t);return r},s.prototype.size=function(){return o?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(e,t){var r=o?e:n.toSetString(e),s=o?this.has(e):i.call(this._set,r),a=this._array.length;s&&!t||this._array.push(e),s||(o?this._set.set(e,a):this._set[r]=a)},s.prototype.has=function(e){if(o)return this._set.has(e);var t=n.toSetString(e);return i.call(this._set,t)},s.prototype.indexOf=function(e){if(o){var t=this._set.get(e);if(t>=0)return t}else{var r=n.toSetString(e);if(i.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},s.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},s.prototype.toArray=function(){return this._array.slice()},t.C=s},7092:(e,t,r)=>{var n=r(2364);t.encode=function(e){var t,r="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&i,(i>>>=5)>0&&(t|=32),r+=n.encode(t)}while(i>0);return r},t.decode=function(e,t,r){var i,o,s,a,c=e.length,l=0,u=0;do{if(t>=c)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=n.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&o),l+=(o&=31)<<u,u+=5}while(i);r.value=(a=(s=l)>>1,1&~s?a:-a),r.rest=t}},2364:(e,t)=>{var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},1163:(e,t)=>{function r(e,n,i,o,s,a){var c=Math.floor((n-e)/2)+e,l=s(i,o[c],!0);return 0===l?c:l>0?n-c>1?r(c,n,i,o,s,a):a==t.LEAST_UPPER_BOUND?n<o.length?n:-1:c:c-e>1?r(e,c,i,o,s,a):a==t.LEAST_UPPER_BOUND?c:e<0?-1:e}t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,n,i,o){if(0===n.length)return-1;var s=r(-1,n.length,e,n,i,o||t.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===i(n[s],n[s-1],!0);)--s;return s}},3302:(e,t,r)=>{var n=r(251);function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,r,i,o,s,a;r=e,i=(t=this._last).generatedLine,o=r.generatedLine,s=t.generatedColumn,a=r.generatedColumn,o>i||o==i&&a>=s||n.compareByGeneratedPositionsInflated(t,r)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(n.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t.P=i},3801:(e,t)=>{function r(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function n(e,t,i,o){if(i<o){var s=i-1;r(e,(u=i,d=o,Math.round(u+Math.random()*(d-u))),o);for(var a=e[o],c=i;c<o;c++)t(e[c],a)<=0&&r(e,s+=1,c);r(e,s+1,c);var l=s+1;n(e,t,i,l-1),n(e,t,l+1,o)}var u,d}t.g=function(e,t){n(e,t,0,e.length-1)}},7446:(e,t,r)=>{var n=r(251),i=r(1163),o=r(735).C,s=r(7092),a=r(3801).g;function c(e,t){var r=e;return"string"==typeof e&&(r=n.parseSourceMapInput(e)),null!=r.sections?new d(r,t):new l(r,t)}function l(e,t){var r=e;"string"==typeof e&&(r=n.parseSourceMapInput(e));var i=n.getArg(r,"version"),s=n.getArg(r,"sources"),a=n.getArg(r,"names",[]),c=n.getArg(r,"sourceRoot",null),l=n.getArg(r,"sourcesContent",null),u=n.getArg(r,"mappings"),d=n.getArg(r,"file",null);if(i!=this._version)throw new Error("Unsupported version: "+i);c&&(c=n.normalize(c)),s=s.map(String).map(n.normalize).map((function(e){return c&&n.isAbsolute(c)&&n.isAbsolute(e)?n.relative(c,e):e})),this._names=o.fromArray(a.map(String),!0),this._sources=o.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map((function(e){return n.computeSourceURL(c,e,t)})),this.sourceRoot=c,this.sourcesContent=l,this._mappings=u,this._sourceMapURL=t,this.file=d}function u(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function d(e,t){var r=e;"string"==typeof e&&(r=n.parseSourceMapInput(e));var i=n.getArg(r,"version"),s=n.getArg(r,"sections");if(i!=this._version)throw new Error("Unsupported version: "+i);this._sources=new o,this._names=new o;var a={line:-1,column:0};this._sections=s.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var r=n.getArg(e,"offset"),i=n.getArg(r,"line"),o=n.getArg(r,"column");if(i<a.line||i===a.line&&o<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=r,{generatedOffset:{generatedLine:i+1,generatedColumn:o+1},consumer:new c(n.getArg(e,"map"),t)}}))}c.fromSourceMap=function(e,t){return l.fromSourceMap(e,t)},c.prototype._version=3,c.prototype.__generatedMappings=null,Object.defineProperty(c.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),c.prototype.__originalMappings=null,Object.defineProperty(c.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),c.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},c.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},c.GENERATED_ORDER=1,c.ORIGINAL_ORDER=2,c.GREATEST_LOWER_BOUND=1,c.LEAST_UPPER_BOUND=2,c.prototype.eachMapping=function(e,t,r){var i,o=t||null;switch(r||c.GENERATED_ORDER){case c.GENERATED_ORDER:i=this._generatedMappings;break;case c.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:t=n.computeSourceURL(s,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,o)},c.prototype.allGeneratedPositionsFor=function(e){var t=n.getArg(e,"line"),r={source:n.getArg(e,"source"),originalLine:t,originalColumn:n.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var o=[],s=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===e.column)for(var c=a.originalLine;a&&a.originalLine===c;)o.push({line:n.getArg(a,"generatedLine",null),column:n.getArg(a,"generatedColumn",null),lastColumn:n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var l=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==l;)o.push({line:n.getArg(a,"generatedLine",null),column:n.getArg(a,"generatedColumn",null),lastColumn:n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},t.SourceMapConsumer=c,l.prototype=Object.create(c.prototype),l.prototype.consumer=c,l.prototype._findSourceIndex=function(e){var t,r=e;if(null!=this.sourceRoot&&(r=n.relative(this.sourceRoot,r)),this._sources.has(r))return this._sources.indexOf(r);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},l.fromSourceMap=function(e,t){var r=Object.create(l.prototype),i=r._names=o.fromArray(e._names.toArray(),!0),s=r._sources=o.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=t,r._absoluteSources=r._sources.toArray().map((function(e){return n.computeSourceURL(r.sourceRoot,e,t)}));for(var c=e._mappings.toArray().slice(),d=r.__generatedMappings=[],h=r.__originalMappings=[],p=0,f=c.length;p<f;p++){var m=c[p],g=new u;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=s.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=i.indexOf(m.name)),h.push(g)),d.push(g)}return a(r.__originalMappings,n.compareByOriginalPositions),r},l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),l.prototype._parseMappings=function(e,t){for(var r,i,o,c,l,d=1,h=0,p=0,f=0,m=0,g=0,y=e.length,v=0,_={},b={},w=[],S=[];v<y;)if(";"===e.charAt(v))d++,v++,h=0;else if(","===e.charAt(v))v++;else{for((r=new u).generatedLine=d,c=v;c<y&&!this._charIsMappingSeparator(e,c);c++);if(o=_[i=e.slice(v,c)])v+=i.length;else{for(o=[];v<c;)s.decode(e,v,b),l=b.value,v=b.rest,o.push(l);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");_[i]=o}r.generatedColumn=h+o[0],h=r.generatedColumn,o.length>1&&(r.source=m+o[1],m+=o[1],r.originalLine=p+o[2],p=r.originalLine,r.originalLine+=1,r.originalColumn=f+o[3],f=r.originalColumn,o.length>4&&(r.name=g+o[4],g+=o[4])),S.push(r),"number"==typeof r.originalLine&&w.push(r)}a(S,n.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,a(w,n.compareByOriginalPositions),this.__originalMappings=w},l.prototype._findMapping=function(e,t,r,n,o,s){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return i.search(e,t,o,s)},l.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},l.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositionsDeflated,n.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===t.generatedLine){var o=n.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),o=n.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=n.getArg(i,"name",null);return null!==s&&(s=this._names.at(s)),{source:o,line:n.getArg(i,"originalLine",null),column:n.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e}))},l.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var i,o=e;if(null!=this.sourceRoot&&(o=n.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(i=n.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||"/"==i.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(t)return null;throw new Error('"'+o+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(e){var t=n.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var r={source:t,originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,n.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===r.source)return{line:n.getArg(o,"generatedLine",null),column:n.getArg(o,"generatedColumn",null),lastColumn:n.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},d.prototype=Object.create(c.prototype),d.prototype.constructor=c,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),d.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=i.search(t,this._sections,(function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn})),o=this._sections[r];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},d.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(-1!==r.consumer._findSourceIndex(n.getArg(e,"source"))){var i=r.consumer.generatedPositionFor(e);if(i)return{line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},d.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var c=o[s],l=i.consumer._sources.at(c.source);l=n.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var d={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}a(this.__generatedMappings,n.compareByGeneratedPositionsDeflated),a(this.__originalMappings,n.compareByOriginalPositions)}},4041:(e,t,r)=>{var n=r(7092),i=r(251),o=r(735).C,s=r(3302).P;function a(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,r=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=i.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(n){var o=n;null!==t&&(o=i.relative(t,n)),r._sources.has(o)||r._sources.add(o);var s=e.sourceContentFor(n);null!=s&&r.setSourceContent(n,s)})),r},a.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),r=i.getArg(e,"original",null),n=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,o),null!=n&&(n=String(n),this._sources.has(n)||this._sources.add(n)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:o})},a.prototype.setSourceContent=function(e,t){var r=e;null!=this._sourceRoot&&(r=i.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[i.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,r){var n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}var s=this._sourceRoot;null!=s&&(n=i.relative(s,n));var a=new o,c=new o;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){var o=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=o.source&&(t.source=o.source,null!=r&&(t.source=i.join(r,t.source)),null!=s&&(t.source=i.relative(s,t.source)),t.originalLine=o.line,t.originalColumn=o.column,null!=o.name&&(t.name=o.name))}var l=t.source;null==l||a.has(l)||a.add(l);var u=t.name;null==u||c.has(u)||c.add(u)}),this),this._sources=a,this._names=c,e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=i.join(r,t)),null!=s&&(t=i.relative(s,t)),this.setSourceContent(t,n))}),this)},a.prototype._validateMapping=function(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},a.prototype._serializeMappings=function(){for(var e,t,r,o,s=0,a=1,c=0,l=0,u=0,d=0,h="",p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(e="",(t=p[f]).generatedLine!==a)for(s=0;t.generatedLine!==a;)e+=";",a++;else if(f>0){if(!i.compareByGeneratedPositionsInflated(t,p[f-1]))continue;e+=","}e+=n.encode(t.generatedColumn-s),s=t.generatedColumn,null!=t.source&&(o=this._sources.indexOf(t.source),e+=n.encode(o-d),d=o,e+=n.encode(t.originalLine-1-l),l=t.originalLine-1,e+=n.encode(t.originalColumn-c),c=t.originalColumn,null!=t.name&&(r=this._names.indexOf(t.name),e+=n.encode(r-u),u=r)),h+=e}return h},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var r=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.SourceMapGenerator=a},1683:(e,t,r)=>{var n=r(4041).SourceMapGenerator,i=r(251),o=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,r,n,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==i?null:i,this[s]=!0,null!=n&&this.add(n)}a.fromStringWithSourceMap=function(e,t,r){var n=new a,s=e.split(o),c=0,l=function(){return e()+(e()||"");function e(){return c<s.length?s[c++]:void 0}},u=1,d=0,h=null;return t.eachMapping((function(e){if(null!==h){if(!(u<e.generatedLine)){var t=(r=s[c]||"").substr(0,e.generatedColumn-d);return s[c]=r.substr(e.generatedColumn-d),d=e.generatedColumn,p(h,t),void(h=e)}p(h,l()),u++,d=0}for(;u<e.generatedLine;)n.add(l()),u++;if(d<e.generatedColumn){var r=s[c]||"";n.add(r.substr(0,e.generatedColumn)),s[c]=r.substr(e.generatedColumn),d=e.generatedColumn}h=e}),this),c<s.length&&(h&&p(h,l()),n.add(s.splice(c).join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=r&&(e=i.join(r,e)),n.setSourceContent(e,o))})),n;function p(e,t){if(null===e||void 0===e.source)n.add(t);else{var o=r?i.join(r,e.source):e.source;n.add(new a(e.originalLine,e.originalColumn,o,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[s]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,r=n.length;t<r;t++)e(i.fromSetString(n[t]),this.sourceContents[n[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new n(e),i=!1,o=null,s=null,a=null,c=null;return this.walk((function(e,n){t.code+=e,null!==n.source&&null!==n.line&&null!==n.column?(o===n.source&&s===n.line&&a===n.column&&c===n.name||r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name}),o=n.source,s=n.line,a=n.column,c=n.name,i=!0):i&&(r.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var l=0,u=e.length;l<u;l++)10===e.charCodeAt(l)?(t.line++,t.column=0,l+1===u?(o=null,i=!1):i&&r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}},t.SourceNode=a},251:(e,t)=>{t.getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function i(e){var t=e.match(r);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var r=e,n=i(e);if(n){if(!n.path)return e;r=n.path}for(var s,a=t.isAbsolute(r),c=r.split(/\/+/),l=0,u=c.length-1;u>=0;u--)"."===(s=c[u])?c.splice(u,1):".."===s?l++:l>0&&(""===s?(c.splice(u+1,l),l=0):(c.splice(u,2),l--));return""===(r=c.join("/"))&&(r=a?"/":"."),n?(n.path=r,o(n)):r}function a(e,t){""===e&&(e="."),""===t&&(t=".");var r=i(t),a=i(e);if(a&&(e=a.path||"/"),r&&!r.scheme)return a&&(r.scheme=a.scheme),o(r);if(r||t.match(n))return t;if(a&&!a.host&&!a.path)return a.host=t,o(a);var c="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=c,o(a)):c}t.urlParse=i,t.urlGenerate=o,t.normalize=s,t.join=a,t.isAbsolute=function(e){return"/"===e.charAt(0)||r.test(e)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};var c=!("__proto__"in Object.create(null));function l(e){return e}function u(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function d(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}t.toSetString=c?l:function(e){return u(e)?"$"+e:e},t.fromSetString=c?l:function(e){return u(e)?e.slice(1):e},t.compareByOriginalPositions=function(e,t,r){var n=d(e.source,t.source);return 0!==n||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)||r||0!=(n=e.generatedColumn-t.generatedColumn)||0!=(n=e.generatedLine-t.generatedLine)?n:d(e.name,t.name)},t.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n||0!=(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=d(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:d(e.name,t.name)},t.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||0!==(r=d(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:d(e.name,t.name)},t.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},t.computeSourceURL=function(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){var n=i(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var c=n.path.lastIndexOf("/");c>=0&&(n.path=n.path.substring(0,c+1))}t=a(o(n),t)}return s(t)}},9665:(e,t,r)=>{t.SourceMapGenerator=r(4041).SourceMapGenerator,t.SourceMapConsumer=r(7446).SourceMapConsumer,t.SourceNode=r(1683).SourceNode},3141:(e,t,r)=>{"use strict";var n=r(2861).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.I=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},7687:(e,t,r)=>{"use strict";const n=r(857),i=r(5884),o=process.env;let s;function a(e){const t=function(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in o))||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},6868:(e,t,r)=>{var n=r(911),i=r(4231),o=r(815),s=r(9505),a=r(9896),c=r(6928),l="win32"===r(857).platform(),u=function(){},d=function(e){return e},h=l?function(e){return e.replace(/\\/g,"/").replace(/[:?<>|]/g,"_")}:d,p=function(e,t){return function(r){r.name=r.name.split("/").slice(t).join("/");var n=r.linkname;return n&&("link"===r.type||c.isAbsolute(n))&&(r.linkname=n.split("/").slice(t).join("/")),e(r)}};t.pack=function(e,t){e||(e="."),t||(t={});var r=t.fs||a,n=t.ignore||t.filter||u,s=t.map||u,l=t.mapStream||d,m=function(e,t,r,n,i,o){var s=i||["."];return function(i){if(!s.length)return i();var a=s.shift(),l=c.join(r,a);t.call(e,l,(function(t,u){return t?i(t):u.isDirectory()?void e.readdir(l,(function(e,t){if(e)return i(e);o&&t.sort();for(var l=0;l<t.length;l++)n(c.join(r,a,t[l]))||s.push(c.join(a,t[l]));i(null,a,u)})):i(null,a,u)}))}}(r,t.dereference?r.stat:r.lstat,e,n,t.entries,t.sort),g=!1!==t.strict,y="number"==typeof t.umask?~t.umask:~f(),v="number"==typeof t.dmode?t.dmode:0,_="number"==typeof t.fmode?t.fmode:0,b=t.pack||i.pack(),w=t.finish||u;t.strip&&(s=p(s,t.strip)),t.readable&&(v|=parseInt(555,8),_|=parseInt(444,8)),t.writable&&(v|=parseInt(333,8),_|=parseInt(222,8));var S=function(n,i,a){if(n)return b.destroy(n);if(!i)return!1!==t.finalize&&b.finalize(),w(b);if(a.isSocket())return E();var u={name:h(i),mode:(a.mode|(a.isDirectory()?v:_))&y,mtime:a.mtime,size:a.size,type:"file",uid:a.uid,gid:a.gid};if(a.isDirectory())return u.size=0,u.type="directory",u=s(u)||u,b.entry(u,E);if(a.isSymbolicLink())return u.size=0,u.type="symlink",function(t,n){r.readlink(c.join(e,t),(function(e,t){if(e)return b.destroy(e);n.linkname=h(t),b.entry(n,E)}))}(i,u=s(u)||u);if(u=s(u)||u,!a.isFile())return g?b.destroy(new Error("unsupported type for "+i)):E();var d=b.entry(u,E);if(d){var p=l(r.createReadStream(c.join(e,i),{start:0,end:u.size>0?u.size-1:u.size}),u);p.on("error",(function(e){d.destroy(e)})),o(p,d)}},E=function(e){if(e)return b.destroy(e);m(S)};return E(),b};var f=function(){return process.umask?process.umask():0};function m(e,t,r,n){if(t===r)return n(null,!0);e.lstat(t,(function(i,o){return i&&"ENOENT"!==i.code?n(i):i||o.isDirectory()?m(e,c.join(t,".."),r,n):void n(null,!1)}))}function g(e,t,r){s(e,{fs:t.fs},(function(e,i){!e&&i&&t.own?n(i,t.uid,t.gid,r):r(e)}))}t.extract=function(e,t){e||(e="."),t||(t={});var r=t.fs||a,n=t.ignore||t.filter||u,s=t.map||u,y=t.mapStream||d,v=!1!==t.chown&&!l&&0===(process.getuid?process.getuid():-1),_=t.extract||i.extract(),b=[],w=new Date,S="number"==typeof t.umask?~t.umask:~f(),E="number"==typeof t.dmode?t.dmode:0,C="number"==typeof t.fmode?t.fmode:0,T=!1!==t.strict;t.strip&&(s=p(s,t.strip)),t.readable&&(E|=parseInt(555,8),C|=parseInt(444,8)),t.writable&&(E|=parseInt(333,8),C|=parseInt(222,8));var k=function(e,t){for(var n,i;(n=(i=b).length?i[i.length-1]:null)&&e.slice(0,n[0].length)!==n[0];)b.pop();if(!n)return t();r.utimes(n[0],w,n[1],t)};return _.on("entry",(function(i,a,u){(i=s(i)||i).name=h(i.name);var d=c.join(e,c.join("/",i.name));if(n(d,i))return a.resume(),u();var p=function(e){if(e)return u(e);!function(e,n,i){!1===t.utimes?i():"directory"===n.type?r.utimes(e,w,n.mtime,i):"symlink"===n.type?k(e,i):r.utimes(e,w,n.mtime,(function(t){if(t)return i(t);k(e,i)}))}(d,i,(function(e){return e?u(e):l?u():void function(e,t,n){var i="symlink"===t.type,o=i?r.lchmod:r.chmod,s=i?r.lchown:r.chown;if(!o)return n();var a=(t.mode|("directory"===t.type?E:C))&S;function c(t){return t?n(t):o?void o.call(r,e,a,n):n()}s&&v?s.call(r,e,t.uid,t.gid,c):c(null)}(d,i,u)}))},f=function(){var e=r.createWriteStream(d),t=y(a,i);e.on("error",(function(e){t.destroy(e)})),o(t,e,(function(t){if(t)return u(t);e.on("close",p)}))};if("directory"===i.type)return b.push([d,i.mtime]),g(d,{fs:r,own:v,uid:i.uid,gid:i.gid},p);var _=c.dirname(d);m(r,_,c.join(e,"."),(function(n,o){return n?u(n):o?void g(_,{fs:r,own:v,uid:i.uid,gid:i.gid},(function(n){if(n)return u(n);switch(i.type){case"file":return f();case"link":return function(){if(l)return u();r.unlink(d,(function(){var n=c.join(e,c.join("/",i.linkname));r.link(n,d,(function(e){if(e&&"EPERM"===e.code&&t.hardlinkAsFilesFallback)return a=r.createReadStream(n),f();p(e)}))}))}();case"symlink":return function(){if(l)return u();r.unlink(d,(function(){r.symlink(i.linkname,d,p)}))}()}if(T)return u(new Error("unsupported type for "+d+" ("+i.type+")"));a.resume(),u()})):u(new Error(_+" is not a valid path"))}))})),t.finish&&_.on("finish",t.finish),_}},2414:(e,t,r)=>{var n=r(9023),i=r(4829),o=r(3481),s=r(4198).Writable,a=r(4198).PassThrough,c=function(){},l=function(e){return(e&=511)&&512-e},u=function(e,t){this._parent=e,this.offset=t,a.call(this,{autoDestroy:!1})};n.inherits(u,a),u.prototype.destroy=function(e){this._parent.destroy(e)};var d=function(e){if(!(this instanceof d))return new d(e);s.call(this,e),e=e||{},this._offset=0,this._buffer=i(),this._missing=0,this._partial=!1,this._onparse=c,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var t=this,r=t._buffer,n=function(){t._continue()},a=function(e){if(t._locked=!1,e)return t.destroy(e);t._stream||n()},h=function(){t._stream=null;var e=l(t._header.size);e?t._parse(e,p):t._parse(512,v),t._locked||n()},p=function(){t._buffer.consume(l(t._header.size)),t._parse(512,v),n()},f=function(){var e=t._header.size;t._paxGlobal=o.decodePax(r.slice(0,e)),r.consume(e),h()},m=function(){var e=t._header.size;t._pax=o.decodePax(r.slice(0,e)),t._paxGlobal&&(t._pax=Object.assign({},t._paxGlobal,t._pax)),r.consume(e),h()},g=function(){var n=t._header.size;this._gnuLongPath=o.decodeLongPath(r.slice(0,n),e.filenameEncoding),r.consume(n),h()},y=function(){var n=t._header.size;this._gnuLongLinkPath=o.decodeLongPath(r.slice(0,n),e.filenameEncoding),r.consume(n),h()},v=function(){var i,s=t._offset;try{i=t._header=o.decode(r.slice(0,512),e.filenameEncoding,e.allowUnknownFormat)}catch(e){t.emit("error",e)}return r.consume(512),i?"gnu-long-path"===i.type?(t._parse(i.size,g),void n()):"gnu-long-link-path"===i.type?(t._parse(i.size,y),void n()):"pax-global-header"===i.type?(t._parse(i.size,f),void n()):"pax-header"===i.type?(t._parse(i.size,m),void n()):(t._gnuLongPath&&(i.name=t._gnuLongPath,t._gnuLongPath=null),t._gnuLongLinkPath&&(i.linkname=t._gnuLongLinkPath,t._gnuLongLinkPath=null),t._pax&&(t._header=i=function(e,t){return t.path&&(e.name=t.path),t.linkpath&&(e.linkname=t.linkpath),t.size&&(e.size=parseInt(t.size,10)),e.pax=t,e}(i,t._pax),t._pax=null),t._locked=!0,i.size&&"directory"!==i.type?(t._stream=new u(t,s),t.emit("entry",i,t._stream,a),t._parse(i.size,h),void n()):(t._parse(512,v),void t.emit("entry",i,function(e,t){var r=new u(e,t);return r.end(),r}(t,s),a))):(t._parse(512,v),void n())};this._onheader=v,this._parse(512,v)};n.inherits(d,s),d.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.emit("close"))},d.prototype._parse=function(e,t){this._destroyed||(this._offset+=e,this._missing=e,t===this._onheader&&(this._partial=!1),this._onparse=t)},d.prototype._continue=function(){if(!this._destroyed){var e=this._cb;this._cb=c,this._overflow?this._write(this._overflow,void 0,e):e()}},d.prototype._write=function(e,t,r){if(!this._destroyed){var n=this._stream,i=this._buffer,o=this._missing;if(e.length&&(this._partial=!0),e.length<o)return this._missing-=e.length,this._overflow=null,n?n.write(e,r):(i.append(e),r());this._cb=r,this._missing=0;var s=null;e.length>o&&(s=e.slice(o),e=e.slice(0,o)),n?n.end(e):i.append(e),this._overflow=s,this._onparse()}},d.prototype._final=function(e){if(this._partial)return this.destroy(new Error("Unexpected end of data"));e()},e.exports=d},3481:(e,t)=>{var r=Buffer.alloc,n="0".charCodeAt(0),i=Buffer.from("ustar\0","binary"),o=Buffer.from("00","binary"),s=Buffer.from("ustar ","binary"),a=Buffer.from(" \0","binary"),c=parseInt("7777",8),l=function(e,t,r,n){for(;r<n;r++)if(e[r]===t)return r;return n},u=function(e){for(var t=256,r=0;r<148;r++)t+=e[r];for(var n=156;n<512;n++)t+=e[n];return t},d=function(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "},h=function(e,t,r){if(128&(e=e.slice(t,t+r))[t=0])return function(e){var t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}for(var r=[],n=e.length-1;n>0;n--){var i=e[n];t?r.push(i):r.push(255-i)}var o=0,s=r.length;for(n=0;n<s;n++)o+=r[n]*Math.pow(256,n);return t?o:-1*o}(e);for(;t<e.length&&32===e[t];)t++;for(var n=(i=l(e,32,t,e.length),o=e.length,s=e.length,"number"!=typeof i?s:(i=~~i)>=o?o:i>=0||(i+=o)>=0?i:0);t<n&&0===e[t];)t++;return n===t?0:parseInt(e.slice(t,n).toString(),8);var i,o,s},p=function(e,t,r,n){return e.slice(t,l(e,0,t,t+r)).toString(n)},f=function(e){var t=Buffer.byteLength(e),r=Math.floor(Math.log(t)/Math.log(10))+1;return t+r>=Math.pow(10,r)&&r++,t+r+e};t.decodeLongPath=function(e,t){return p(e,0,e.length,t)},t.encodePax=function(e){var t="";e.name&&(t+=f(" path="+e.name+"\n")),e.linkname&&(t+=f(" linkpath="+e.linkname+"\n"));var r=e.pax;if(r)for(var n in r)t+=f(" "+n+"="+r[n]+"\n");return Buffer.from(t)},t.decodePax=function(e){for(var t={};e.length;){for(var r=0;r<e.length&&32!==e[r];)r++;var n=parseInt(e.slice(0,r).toString(),10);if(!n)return t;var i=e.slice(r+1,n-1).toString(),o=i.indexOf("=");if(-1===o)return t;t[i.slice(0,o)]=i.slice(o+1),e=e.slice(n)}return t},t.encode=function(e){var t=r(512),s=e.name,a="";if(5===e.typeflag&&"/"!==s[s.length-1]&&(s+="/"),Buffer.byteLength(s)!==s.length)return null;for(;Buffer.byteLength(s)>100;){var l=s.indexOf("/");if(-1===l)return null;a+=a?"/"+s.slice(0,l):s.slice(0,l),s=s.slice(l+1)}return Buffer.byteLength(s)>100||Buffer.byteLength(a)>155||e.linkname&&Buffer.byteLength(e.linkname)>100?null:(t.write(s),t.write(d(e.mode&c,6),100),t.write(d(e.uid,6),108),t.write(d(e.gid,6),116),t.write(d(e.size,11),124),t.write(d(e.mtime.getTime()/1e3|0,11),136),t[156]=n+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(e.type),e.linkname&&t.write(e.linkname,157),i.copy(t,257),o.copy(t,263),e.uname&&t.write(e.uname,265),e.gname&&t.write(e.gname,297),t.write(d(e.devmajor||0,6),329),t.write(d(e.devminor||0,6),337),a&&t.write(a,345),t.write(d(u(t),6),148),t)},t.decode=function(e,t,r){var o=0===e[156]?0:e[156]-n,c=p(e,0,100,t),l=h(e,100,8),d=h(e,108,8),f=h(e,116,8),m=h(e,124,12),g=h(e,136,12),y=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(o),v=0===e[157]?null:p(e,157,100,t),_=p(e,265,32),b=p(e,297,32),w=h(e,329,8),S=h(e,337,8),E=u(e);if(256===E)return null;if(E!==h(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===i.compare(e,257,263))e[345]&&(c=p(e,345,155,t)+"/"+c);else if(0===s.compare(e,257,263)&&0===a.compare(e,263,265));else if(!r)throw new Error("Invalid tar header: unknown format.");return 0===o&&c&&"/"===c[c.length-1]&&(o=5),{name:c,mode:l,uid:d,gid:f,size:m,mtime:new Date(1e3*g),type:y,linkname:v,uname:_,gname:b,devmajor:w,devminor:S}}},4231:(e,t,r)=>{t.extract=r(2414),t.pack=r(446)},446:(e,t,r)=>{var n=r(2170),i=r(6611),o=r(2017),s=Buffer.alloc,a=r(4198).Readable,c=r(4198).Writable,l=r(3193).StringDecoder,u=r(3481),d=parseInt("755",8),h=parseInt("644",8),p=s(1024),f=function(){},m=function(e,t){(t&=511)&&e.push(p.slice(0,512-t))},g=function(e){c.call(this),this.written=0,this._to=e,this._destroyed=!1};o(g,c),g.prototype._write=function(e,t,r){if(this.written+=e.length,this._to.push(e))return r();this._to._drain=r},g.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var y=function(){c.call(this),this.linkname="",this._decoder=new l("utf-8"),this._destroyed=!1};o(y,c),y.prototype._write=function(e,t,r){this.linkname+=this._decoder.write(e),r()},y.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var v=function(){c.call(this),this._destroyed=!1};o(v,c),v.prototype._write=function(e,t,r){r(new Error("No body allowed for this entry"))},v.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var _=function(e){if(!(this instanceof _))return new _(e);a.call(this,e),this._drain=f,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};o(_,a),_.prototype.entry=function(e,t,r){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof t&&(r=t,t=null),r||(r=f);var o=this;if(e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&n.S_IFMT){case n.S_IFBLK:return"block-device";case n.S_IFCHR:return"character-device";case n.S_IFDIR:return"directory";case n.S_IFIFO:return"fifo";case n.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?d:h),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=Buffer.from(t)),Buffer.isBuffer(t)){e.size=t.length,this._encode(e);var s=this.push(t);return m(o,e.size),s?process.nextTick(r):this._drain=r,new v}if("symlink"===e.type&&!e.linkname){var a=new y;return i(a,(function(t){if(t)return o.destroy(),r(t);e.linkname=a.linkname,o._encode(e),r()})),a}if(this._encode(e),"file"!==e.type&&"contiguous-file"!==e.type)return process.nextTick(r),new v;var c=new g(this);return this._stream=c,i(c,(function(t){return o._stream=null,t?(o.destroy(),r(t)):c.written!==e.size?(o.destroy(),r(new Error("size mismatch"))):(m(o,e.size),o._finalizing&&o.finalize(),void r())})),c}},_.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(p),this.push(null))},_.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},_.prototype._encode=function(e){if(!e.pax){var t=u.encode(e);if(t)return void this.push(t)}this._encodePax(e)},_.prototype._encodePax=function(e){var t=u.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(u.encode(r)),this.push(t),m(this,t.length),r.size=e.size,r.type=e.type,this.push(u.encode(r))},_.prototype._read=function(e){var t=this._drain;this._drain=f,t()},e.exports=_},1094:(e,t,r)=>{var n=r(2203);function i(e,t,r){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var i=!1,o=!1,s=[],a=!1,c=new n;function l(){for(;s.length&&!c.paused;){var e=s.shift();if(null===e)return c.emit("end");c.emit("data",e)}}return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(r&&!1===r.autoDestroy),c.write=function(t){return e.call(this,t),!c.paused},c.queue=c.push=function(e){return a||(null===e&&(a=!0),s.push(e),l()),c},c.on("end",(function(){c.readable=!1,!c.writable&&c.autoDestroy&&process.nextTick((function(){c.destroy()}))})),c.end=function(e){if(!i)return i=!0,arguments.length&&c.write(e),c.writable=!1,t.call(c),!c.readable&&c.autoDestroy&&c.destroy(),c},c.destroy=function(){if(!o)return o=!0,i=!0,s.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),l(),c.paused||c.emit("drain"),c},c}e.exports=i,i.through=i},2322:(e,t,r)=>{var n=r(1094),i=r(259),o=r(1465);e.exports=function(){var e=[],t=0,r=0,s=!1,a=null,c=null;function l(e){if(!s)try{return function(){if(r){var t=1e5*r,n=new Int32Array(t),o=[];return null===(c=i.decompress(a,(function(e){o.push(e)}),n,t,c))?(r=0,!1):(s=Buffer.from(o),e.queue(s),null!==s&&s.length,!0)}var s;return r=i.header(a),c=0,!0}()}catch(t){return e.emit("error",t),s=!0,!1}}return n((function(n){for(e.push(n),t+=n.length,null===a&&(a=o((function(){return e.shift()})));!s&&t-a.bytesRead+1>=(25e3+1e5*r||4);)l(this)}),(function(e){for(;!s&&a&&t>a.bytesRead;)l(this);s||(null!==c&&this.emit("error",new Error("input stream ended prematurely")),this.queue(null))}))}},1465:e=>{var t=[0,1,3,7,15,31,63,127,255];e.exports=function(e){var r=0,n=0,i=e(),o=function(s){if(null===s&&0!=r)return r=0,void n++;for(var a=0;s>0;){n>=i.length&&(n=0,i=e());var c=8-r;0===r&&s>0&&o.bytesRead++,s>=c?(a<<=c,a|=t[c]&i[n++],r=0,s-=c):(a<<=s,a|=(i[n]&t[s]<<8-s-r)>>8-s-r,r+=s,s=0)}return a};return o.bytesRead=0,o}},259:e=>{function t(e){this.name="Bzip2Error",this.message=e,this.stack=(new Error).stack}t.prototype=new Error;var r=function(e){throw new t(e)},n={};n.Bzip2Error=t,n.crcTable=[0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188],n.array=function(e){var t=0,r=0,n=[0,1,3,7,15,31,63,127,255];return function(i){for(var o=0;i>0;){var s=8-t;i>=s?(o<<=s,o|=n[s]&e[r++],t=0,i-=s):(o<<=i,o|=(e[r]&n[i]<<8-i-t)>>8-i-t,t+=i,i=0)}return o}},n.simple=function(e,t){var r=n.array(e),i=!1,o=1e5*n.header(r),s=new Int32Array(o);do{i=n.decompress(r,t,s,o)}while(!i)},n.header=function(e){this.byteCount=new Int32Array(256),this.symToByte=new Uint8Array(256),this.mtfSymbol=new Int32Array(256),this.selectors=new Uint8Array(32768),4348520!=e(24)&&r("No magic number found");var t=e(8)-48;return(t<1||t>9)&&r("Not a BZIP archive"),t},n.decompress=function(e,t,n,i,o){for(var s=-1,a="",c=0;c<6;c++)a+=e(8).toString(16);if("177245385090"==a)return(0|e(32))!==o&&r("Error in bzip2: crc32 do not match"),e(null),null;"314159265359"!=a&&r("eek not valid bzip data");var l=0|e(32);e(1)&&r("unsupported obsolete version");var u=e(24);u>i&&r("Initial position larger than buffer size");var d=e(16),h=0;for(c=0;c<16;c++)if(d&1<<15-c){var p=e(16);for(g=0;g<16;g++)p&1<<15-g&&(this.symToByte[h++]=16*c+g)}var f=e(3);(f<2||f>6)&&r("another error");var m=e(15);for(0==m&&r("meh"),c=0;c<f;c++)this.mtfSymbol[c]=c;for(c=0;c<m;c++){for(var g=0;e(1);g++)g>=f&&r("whoops another error");var y=this.mtfSymbol[g];for(p=g-1;p>=0;p--)this.mtfSymbol[p+1]=this.mtfSymbol[p];this.mtfSymbol[0]=y,this.selectors[c]=y}var v,_,b,w,S=h+2,E=[],C=new Uint8Array(258),T=new Uint16Array(21);for(g=0;g<f;g++){for(d=e(5),c=0;c<S;c++){for(;(d<1||d>20)&&r("I gave up a while ago on writing error messages"),e(1);)e(1)?d--:d++;C[c]=d}var k,P;for(k=P=C[0],c=1;c<S;c++)C[c]>P?P=C[c]:C[c]<k&&(k=C[c]);(v=E[g]={}).permute=new Int32Array(258),v.limit=new Int32Array(21),v.base=new Int32Array(21),v.minLen=k,v.maxLen=P;var R=v.base,x=v.limit,M=0;for(c=k;c<=P;c++)for(d=0;d<S;d++)C[d]==c&&(v.permute[M++]=d);for(c=k;c<=P;c++)T[c]=x[c]=0;for(c=0;c<S;c++)T[C[c]]++;for(M=d=0,c=k;c<P;c++)M+=T[c],x[c]=M-1,M<<=1,R[c+1]=M-(d+=T[c]);x[P]=M+T[P]-1,R[k]=0}for(c=0;c<256;c++)this.mtfSymbol[c]=c,this.byteCount[c]=0;for(_=b=S=w=0;;){for(S--||(S=49,w>=m&&r("meow i'm a kitty, that's an error"),R=(v=E[this.selectors[w++]]).base,x=v.limit),g=e(c=v.minLen);c>v.maxLen&&r("rawr i'm a dinosaur"),!(g<=x[c]);)c++,g=g<<1|e(1);((g-=R[c])<0||g>=258)&&r("moo i'm a cow");var O=v.permute[g];if(0!=O&&1!=O){if(_)for(_=0,b+d>i&&r("Boom."),y=this.symToByte[this.mtfSymbol[0]],this.byteCount[y]+=d;d--;)n[b++]=y;if(O>h)break;for(b>=i&&r("I can't think of anything. Error"),c=O-1,y=this.mtfSymbol[c],p=c-1;p>=0;p--)this.mtfSymbol[p+1]=this.mtfSymbol[p];this.mtfSymbol[0]=y,y=this.symToByte[y],this.byteCount[y]++,n[b++]=y}else _||(_=1,d=0),d+=0==O?_:2*_,_<<=1}for((u<0||u>=b)&&r("I'm a monkey and I'm throwing something at someone, namely you"),g=0,c=0;c<256;c++)p=g+this.byteCount[c],this.byteCount[c]=g,g=p;for(c=0;c<b;c++)y=255&n[c],n[this.byteCount[y]]|=c<<8,this.byteCount[y]++;var D,I,A,N=0,L=0,F=0;for(b&&(L=255&(N=n[u]),N>>=8,F=-1);b;){for(b--,I=L,L=255&(N=n[N]),N>>=8,3==F++?(D=L,A=I,L=-1):(D=1,A=L);D--;)s=4294967295&(s<<8^this.crcTable[255&(s>>24^A)]),t(A);L!=I&&(F=0)}return(0|(s=~s>>>0))!=(0|l)&&r("Error in bzip2: crc32 do not match"),4294967295&(s^(o<<1|o>>>31))},e.exports=n},1236:(e,t)=>{"use strict";t.fromCallback=function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise(((r,n)=>{t.push(((e,t)=>null!=e?n(e):r(t))),e.apply(this,t)}));e.apply(this,t)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(...t){const r=t[t.length-1];if("function"!=typeof r)return e.apply(this,t);t.pop(),e.apply(this,t).then((e=>r(null,e)),r)}),"name",{value:e.name})}},6556:e=>{"use strict";e.exports=function(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}},3148:(e,t,r)=>{"use strict";try{e.exports=r(8169)(__dirname)}catch(t){e.exports=r(6556)}},7983:(e,t,r)=>{e.exports=r(9023).deprecate},4084:(e,t,r)=>{"use strict";const n=r(5151);n.Server=r(1387),n.Receiver=r(4063),n.Sender=r(8459),e.exports=n},2857:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(4693);function i(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);for(var i=0,o=0;o<e.length;o++){const t=e[o];t.copy(r,i),i+=t.length}return r}function o(e,t,r,n,i){for(var o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function s(e,t){const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){return c.readOnly=!0,Buffer.isBuffer(e)?e:(e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=function(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}(e):(t=Buffer.from(e),c.readOnly=!1),t);var t}try{const t=r(2627),n=t.BufferUtil||t;e.exports={concat:i,mask(e,t,r,i,s){s<48?o(e,t,r,i,s):n.mask(e,t,r,i,s)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?s(e,t):n.unmask(e,t)}}}catch(t){e.exports={concat:i,mask:o,toArrayBuffer:a,toBuffer:c,unmask:s}}},4693:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},6644:e=>{"use strict";class t{constructor(e,t){this.target=t,this.type=e}}class r extends t{constructor(e,t){super("message",t),this.data=e}}class n extends t{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class i extends t{constructor(e){super("open",e)}}class o extends t{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const s={addEventListener(e,t){function s(e){t.call(this,new r(e,this))}function a(e,r){t.call(this,new n(e,r,this))}function c(e){t.call(this,new o(e,this))}function l(){t.call(this,new i(this))}"function"==typeof t&&("message"===e?(s._listener=t,this.on(e,s)):"close"===e?(a._listener=t,this.on(e,a)):"error"===e?(c._listener=t,this.on(e,c)):"open"===e?(l._listener=t,this.on(e,l)):this.on(e,t))},removeEventListener(e,t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=s},5845:e=>{"use strict";const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,r){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(r):e[t]=[r]}e.exports={format:function(e){return Object.keys(e).map((t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const n={};if(void 0===e||""===e)return n;for(var i,o,s={},a=!1,c=!1,l=!1,u=-1,d=-1,h=0;h<e.length;h++){const f=e.charCodeAt(h);if(void 0===i)if(-1===d&&1===t[f])-1===u&&(u=h);else if(32===f||9===f)-1===d&&-1!==u&&(d=h);else{if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h);const t=e.slice(u,d);44===f?(r(n,t,s),s={}):i=t,u=d=-1}}else if(void 0===o)if(-1===d&&1===t[f])-1===u&&(u=h);else if(32===f||9===f)-1===d&&-1!==u&&(d=h);else if(59===f||44===f){if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h),r(s,e.slice(u,d),!0),44===f&&(r(n,i,s),s={},i=void 0),u=d=-1}else{if(61!==f||-1===u||-1!==d)throw new SyntaxError(`Unexpected character at index ${h}`);o=e.slice(u,h),u=d=-1}else if(c){if(1!==t[f])throw new SyntaxError(`Unexpected character at index ${h}`);-1===u?u=h:a||(a=!0),c=!1}else if(l)if(1===t[f])-1===u&&(u=h);else if(34===f&&-1!==u)l=!1,d=h;else{if(92!==f)throw new SyntaxError(`Unexpected character at index ${h}`);c=!0}else if(34===f&&61===e.charCodeAt(h-1))l=!0;else if(-1===d&&1===t[f])-1===u&&(u=h);else if(-1===u||32!==f&&9!==f){if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${h}`);if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h);var p=e.slice(u,d);a&&(p=p.replace(/\\/g,""),a=!1),r(s,o,p),44===f&&(r(n,i,s),s={},i=void 0),o=void 0,u=d=-1}else-1===d&&(d=h)}if(-1===u||l)throw new SyntaxError("Unexpected end of input");-1===d&&(d=h);const f=e.slice(u,d);return void 0===i?r(n,f,{}):(void 0===o?r(s,f,!0):r(s,o,a?f.replace(/\\/g,""):f),r(n,i,s)),n}}},8502:(e,t,r)=>{"use strict";const n=r(8346),i=r(3106),o=r(2857),{kStatusCode:s,NOOP:a}=r(4693),c=Buffer.from([0,0,255,255]),l=Buffer.from([0]),u=Symbol("permessage-deflate"),d=Symbol("total-length"),h=Symbol("callback"),p=Symbol("buffers"),f=Symbol("error");let m;function g(e){this[p].push(e),this[d]+=e.length}function y(e){this[d]+=e.length,this[u]._maxPayload<1||this[d]<=this[u]._maxPayload?this[p].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f][s]=1009,this.removeListener("data",y),this.reset())}function v(e){this[u]._inflate=null,e[s]=1007,this[h](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!m){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;m=new n({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate&&(this._deflate.close(),this._deflate=null)}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{var r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){m.push((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){m.push((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[u]=this,this._inflate[d]=0,this._inflate[p]=[],this._inflate.on("error",v),this._inflate.on("data",y)}this._inflate[h]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void r(e);const i=o.concat(this._inflate[p],this._inflate[d]);t&&this.params[`${n}_no_context_takeover`]?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[p]=[]),r(null,i)}))}_compress(e,t,r){if(!e||0===e.length)return void process.nextTick(r,null,l);const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[d]=0,this._deflate[p]=[],this._deflate.on("error",a),this._deflate.on("data",g)}this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,(()=>{if(this._deflate){var e=o.concat(this._deflate[p],this._deflate[d]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${n}_no_context_takeover`]?(this._deflate.close(),this._deflate=null):(this._deflate[d]=0,this._deflate[p]=[]),r(null,e)}}))}}},4063:(e,t,r)=>{"use strict";const{Writable:n}=r(2203),i=r(8502),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=r(4693),{concat:l,toArrayBuffer:u,unmask:d}=r(2857),{isValidStatusCode:h,isValidUTF8:p}=r(365);function f(e,t,r,n){const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,f),i[a]=n,i}e.exports=class extends n{constructor(e,t,r){super(),this._binaryType=e||o[0],this[c]=void 0,this._extensions=t||{},this._maxPayload=0|r,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];e>=r.length?this._buffers.shift().copy(t,t.length-e):(r.copy(t,t.length-e,0,e),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(48&e[0])return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=!(64&~e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=!(128&~e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~e[1]),126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){var t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(f(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)}))}dataMessage(){if(this._fin){const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?l(r,t):"arraybuffer"===this._binaryType?u(l(r,t)):r,this.emit("message",e)}else{const e=l(r,t);if(!p(e))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!h(t))return f(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!p(r))return f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},8459:(e,t,r)=>{"use strict";const{randomBytes:n}=r(6982),i=r(8502),{EMPTY_BUFFER:o}=r(4693),{isValidStatusCode:s}=r(365),{mask:a,toBuffer:c}=r(2857);class l{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;var i=t.mask?6:2,o=e.length;e.length>=65536?(i+=8,o=127):e.length>125&&(i+=2,o=126);const s=Buffer.allocUnsafe(r?e.length+i:i);if(s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=o,126===o?s.writeUInt16BE(e.length,2):127===o&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),!t.mask)return[s,e];const c=n(4);return s[1]|=128,s[i-4]=c[0],s[i-3]=c[1],s[i-2]=c[2],s[i-1]=c[3],r?(a(e,c,s,i,e.length),[s]):(a(e,c,e,0,e.length),[s,e])}close(e,t,r,n){var i;if(void 0===e)i=o;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((i=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),i.write(t,2))}this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(e,t,r){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const n=c(e);this._deflating?this.enqueue([this.doPing,n,t,c.readOnly,r]):this.doPing(n,t,c.readOnly,r)}doPing(e,t,r,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){const n=c(e);this._deflating?this.enqueue([this.doPong,n,t,c.readOnly,r]):this.doPong(n,t,c.readOnly,r)}doPong(e,t,r,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){const n=c(e),o=this._extensions[i.extensionName];var s=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&o&&(a=n.length>=o._threshold),this._compress=a):(a=!1,s=0),t.fin&&(this._firstFragment=!0),o){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,n,this._compress,e,r]):this.dispatch(n,this._compress,e,r)}else this.sendFrame(l.frame(n,{fin:t.fin,rsv1:!1,opcode:s,mask:t.mask,readOnly:c.readOnly}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(l.frame(e,r),n);const o=this._extensions[i.extensionName];this._deflating=!0,o.compress(e,r.fin,((e,t)=>{this._deflating=!1,r.readOnly=!1,this.sendFrame(l.frame(t,r),n),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=l},365:(e,t,r)=>{"use strict";try{const e=r(3148);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},1387:(e,t,r)=>{"use strict";const n=r(4434),i=r(6982),o=r(8611),s=r(8502),a=r(5845),c=r(5151),{GUID:l}=r(4693),u=/^[+/0-9A-Za-z]{22}==$/;function d(e){e.emit("close")}function h(){this.destroy()}function p(e,t,r,n){e.writable&&(r=r||o.STATUS_CODES[t],n=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(r)},n),e.write(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",h),e.destroy()}function f(e){return e.trim()}e.exports=class extends n{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=o.createServer(((e,t)=>{const r=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,r)=>{this.handleUpgrade(e,t,r,(t=>{this.emit("connection",t,e)}))}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close((()=>this.emit("close"))):process.nextTick(d,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",h);const i=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),o=e.headers.upgrade,c=+e.headers["sec-websocket-version"],l={};if("GET"!==e.method||void 0===o||"websocket"!==o.toLowerCase()||!i||!u.test(i)||8!==c&&13!==c||!this.shouldHandle(e))return p(t,400);if(this.options.perMessageDeflate){const r=new s(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=a.parse(e.headers["sec-websocket-extensions"]);t[s.extensionName]&&(r.accept(t[s.extensionName]),l[s.extensionName]=r)}catch(e){return p(t,400)}}if(this.options.verifyClient){const o={origin:e.headers[8===c?"sec-websocket-origin":"origin"],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,((o,s,a,c)=>{if(!o)return p(t,s||401,a,c);this.completeUpgrade(i,l,e,t,r,n)}));if(!this.options.verifyClient(o))return p(t,401)}this.completeUpgrade(i,l,e,t,r,n)}completeUpgrade(e,t,r,n,o,u){if(!n.readable||!n.writable)return n.destroy();const d=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i.createHash("sha1").update(e+l).digest("base64")}`],p=new c(null);var m=r.headers["sec-websocket-protocol"];if(m&&(m=m.split(",").map(f),(m=this.options.handleProtocols?this.options.handleProtocols(m,r):m[0])&&(d.push(`Sec-WebSocket-Protocol: ${m}`),p.protocol=m)),t[s.extensionName]){const e=t[s.extensionName].params,r=a.format({[s.extensionName]:[e]});d.push(`Sec-WebSocket-Extensions: ${r}`),p._extensions=t}this.emit("headers",d,r),n.write(d.concat("\r\n").join("\r\n")),n.removeListener("error",h),p.setSocket(n,o,this.options.maxPayload),this.clients&&(this.clients.add(p),p.on("close",(()=>this.clients.delete(p)))),u(p)}}},5151:(e,t,r)=>{"use strict";const n=r(4434),i=r(6982),o=r(5692),s=r(8611),a=r(9278),c=r(4756),l=r(7016),u=r(8502),d=r(6644),h=r(5845),p=r(4063),f=r(8459),{BINARY_TYPES:m,EMPTY_BUFFER:g,GUID:y,kStatusCode:v,kWebSocket:_,NOOP:b}=r(4693),w=["CONNECTING","OPEN","CLOSING","CLOSED"],S=[8,13];class E extends n{constructor(e,t,r){super(),this.readyState=E.CONNECTING,this.protocol="",this._binaryType=m[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),C(this,e,t,r)):this._isServer=!0}get CONNECTING(){return E.CONNECTING}get CLOSING(){return E.CLOSING}get CLOSED(){return E.CLOSED}get OPEN(){return E.OPEN}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,r){const n=new p(this._binaryType,this._extensions,r);this._sender=new f(e,this._extensions),this._receiver=n,this._socket=e,n[_]=this,e[_]=this,n.on("conclude",R),n.on("drain",x),n.on("error",M),n.on("message",D),n.on("ping",I),n.on("pong",A),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",N),e.on("data",L),e.on("end",F),e.on("error",j),this.readyState=E.OPEN,this.emit("open")}emitClose(){this.readyState=E.CLOSED,this._socket?(this._extensions[u.extensionName]&&this._extensions[u.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==E.CLOSED){if(this.readyState===E.CONNECTING){const e="WebSocket was closed before the connection was established";return P(this,this._req,e)}this.readyState!==E.CLOSING?(this.readyState=E.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==E.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${w[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,r)}pong(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==E.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${w[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,r)}send(e,t,r){if("function"==typeof t&&(r=t,t={}),this.readyState!==E.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} (${w[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString());const n=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[u.extensionName]||(n.compress=!1),this._sender.send(e||g,n,r)}terminate(){if(this.readyState!==E.CLOSED){if(this.readyState===E.CONNECTING){const e="WebSocket was closed before the connection was established";return P(this,this._req,e)}this._socket&&(this.readyState=E.CLOSING,this._socket.destroy())}}}function C(e,t,r,n){const a=Object.assign({protocolVersion:S[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},n,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0});if(!S.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} (supported versions: ${S.join(", ")})`);var c;"object"==typeof t&&void 0!==t.href?(c=t,e.url=t.href):(c=l.URL?new l.URL(t):l.parse(t),e.url=t);const d="ws+unix:"===c.protocol;if(!(c.host||d&&c.pathname))throw new Error(`Invalid URL: ${e.url}`);const p="wss:"===c.protocol||"https:"===c.protocol,f=p?443:80,m=i.randomBytes(16).toString("base64"),g=p?o.get:s.get,v=c.search?`${c.pathname||"/"}${c.search}`:c.pathname||"/";var _;if(a.createConnection=p?k:T,a.defaultPort=a.defaultPort||f,a.port=c.port||f,a.host=c.hostname.startsWith("[")?c.hostname.slice(1,-1):c.hostname,a.headers=Object.assign({"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket"},a.headers),a.path=v,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(_=new u(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=h.format({[u.extensionName]:_.offer()})),r&&(a.headers["Sec-WebSocket-Protocol"]=r),a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin),c.auth?a.auth=c.auth:(c.username||c.password)&&(a.auth=`${c.username}:${c.password}`),d){const e=v.split(":");a.socketPath=e[0],a.path=e[1]}var b=e._req=g(a);a.timeout&&b.on("timeout",(()=>{P(e,b,"Opening handshake has timed out")})),b.on("error",(t=>{e._req.aborted||(b=e._req=null,e.readyState=E.CLOSING,e.emit("error",t),e.emitClose())})),b.on("response",(i=>{const o=i.headers.location,s=i.statusCode;if(o&&a.followRedirects&&s>=300&&s<400){if(++e._redirects>a.maxRedirects)return void P(e,b,"Maximum redirects exceeded");b.abort();const i=l.URL?new l.URL(o,t):l.resolve(t,o);C(e,i,r,n)}else e.emit("unexpected-response",b,i)||P(e,b,`Unexpected server response: ${i.statusCode}`)})),b.on("upgrade",((t,n,o)=>{if(e.emit("upgrade",t),e.readyState!==E.CONNECTING)return;b=e._req=null;const s=i.createHash("sha1").update(m+y).digest("base64");if(t.headers["sec-websocket-accept"]!==s)return void P(e,n,"Invalid Sec-WebSocket-Accept header");const c=t.headers["sec-websocket-protocol"],l=(r||"").split(/, */);var d;if(!r&&c?d="Server sent a subprotocol but none was requested":r&&!c?d="Server sent no subprotocol":c&&!l.includes(c)&&(d="Server sent an invalid subprotocol"),d)P(e,n,d);else{if(c&&(e.protocol=c),_)try{const r=h.parse(t.headers["sec-websocket-extensions"]);r[u.extensionName]&&(_.accept(r[u.extensionName]),e._extensions[u.extensionName]=_)}catch(t){return void P(e,n,"Invalid Sec-WebSocket-Extensions header")}e.setSocket(n,o,a.maxPayload)}}))}function T(e){return e.protocolVersion&&(e.path=e.socketPath),a.connect(e)}function k(e){return e.path=void 0,e.servername=e.servername||e.host,c.connect(e)}function P(e,t,r){e.readyState=E.CLOSING;const n=new Error(r);Error.captureStackTrace(n,P),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function R(e,t){const r=this[_];r._socket.removeListener("data",L),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function x(){this[_]._socket.resume()}function M(e){const t=this[_];t._socket.removeListener("data",L),t.readyState=E.CLOSING,t._closeCode=e[v],t.emit("error",e),t._socket.destroy()}function O(){this[_].emitClose()}function D(e){this[_].emit("message",e)}function I(e){const t=this[_];t.pong(e,!t._isServer,b),t.emit("ping",e)}function A(e){this[_].emit("pong",e)}function N(){const e=this[_];this.removeListener("close",N),this.removeListener("end",F),e.readyState=E.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",L),this[_]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",O),e._receiver.on("finish",O))}function L(e){this[_]._receiver.write(e)||this.pause()}function F(){const e=this[_];e.readyState=E.CLOSING,e._receiver.end(),this.end()}function j(){const e=this[_];this.removeListener("error",j),this.on("error",b),e.readyState=E.CLOSING,this.destroy()}w.forEach(((e,t)=>{E[e]=t})),["open","error","close","message"].forEach((e=>{Object.defineProperty(E.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var r=0;r<t.length;r++)if(t[r]._listener)return t[r]._listener},set(t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]._listener&&this.removeListener(e,r[n]);this.addEventListener(e,t)}})})),E.prototype.addEventListener=d.addEventListener,E.prototype.removeEventListener=d.removeEventListener,e.exports=E},2021:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8063),o=r(7992),s=r(2613),a=r(8704);t.BreakOnLoadHelper=class{constructor(e,t){this._doesDOMInstrumentationRecieveExtraEvent=!1,this._instrumentationBreakpointSet=!1,this._stopOnEntryBreakpointIdToRequestedFileName=new Map,this._stopOnEntryRequestedFileNameToBreakpointId=new Map,this._stopOnEntryRegexToBreakpointId=new Map,this.validateStrategy(t),this._chromeDebugAdapter=e,this._breakOnLoadStrategy=t}validateStrategy(e){if("regex"!==e&&"instrument"!==e)throw new Error("Invalid breakOnLoadStrategy: "+e)}get stopOnEntryRequestedFileNameToBreakpointId(){return this._stopOnEntryRequestedFileNameToBreakpointId}get stopOnEntryBreakpointIdToRequestedFileName(){return this._stopOnEntryBreakpointIdToRequestedFileName}get instrumentationBreakpointSet(){return this._instrumentationBreakpointSet}getScriptUrlFromId(e){return a.utils.canonicalizeUrl(this._chromeDebugAdapter.scriptsById.get(e).url)}setBrowserVersion(e){return n(this,void 0,void 0,(function*(){this._doesDOMInstrumentationRecieveExtraEvent=!e.isAtLeastVersion(69,0)}))}handleOnPaused(e){return n(this,void 0,void 0,(function*(){if(e.hitBreakpoints&&e.hitBreakpoints.length){if("regex"===this._breakOnLoadStrategy)return yield this.handleStopOnEntryBreakpointAndContinue(e)}else if(this.isInstrumentationPause(e)){const t=e.callFrames[0].location.scriptId;return yield this._chromeDebugAdapter.getBreakpointsResolvedDefer(t).promise,i.logger.log("BreakOnLoadHelper: Finished waiting for breakpoints to get resolved."),this._doesDOMInstrumentationRecieveExtraEvent||(yield this.handleStopOnEntryBreakpointAndContinue(e))}return!1}))}isInstrumentationPause(e){return"EventListener"===e.reason&&"instrumentation:scriptFirstStatement"===e.data.eventName||"ambiguous"===e.reason&&Array.isArray(e.data.reasons)&&e.data.reasons.every((e=>"EventListener"===e.reason&&"instrumentation:scriptFirstStatement"===e.auxData.eventName))}shouldContinueOnStopOnEntryBreakpoint(e){return n(this,void 0,void 0,(function*(){let t=!0;yield this._chromeDebugAdapter.getBreakpointsResolvedDefer(e.scriptId).promise;const r=this.getScriptUrlFromId(e.scriptId);return(this._chromeDebugAdapter.committedBreakpointsByUrl.get(r)||[]).filter((t=>t.actualLocation&&t.actualLocation.lineNumber===e.lineNumber&&t.actualLocation.columnNumber===e.columnNumber)).length>0&&(t=!1),t}))}handleStopOnEntryBreakpointAndContinue(e){return n(this,void 0,void 0,(function*(){const t=e.hitBreakpoints;let r=!0;const n=e.callFrames[0].location.scriptId,o=this._chromeDebugAdapter.scriptsById.get(n).url,c=yield this._chromeDebugAdapter.pathTransformer.scriptParsed(o);for(let n of t){let t=this._stopOnEntryBreakpointIdToRequestedFileName.get(n);if(t){const e=a.utils.canonicalizeUrl(c);t.fileSet.has(e)&&(t.fileSet.delete(e),s(this._stopOnEntryRequestedFileNameToBreakpointId.delete(e),`Expected to delete break-on-load information associated with url: ${e}`),0===t.fileSet.size?(i.logger.log(`Stop on entry breakpoint hit for last remaining file. Removing: ${n} created for: ${e}`),yield this.removeBreakpointById(n),s(this._stopOnEntryRegexToBreakpointId.delete(t.urlRegex),`Expected to delete break-on-load information associated with regexp: ${t.urlRegex}`)):i.logger.log(`Stop on entry breakpoint hit but still has remaining files. Keeping: ${n} that was hit for: ${e} because it's still needed for: ${Array.from(t.fileSet.entries()).join(", ")}`))}else e.hitBreakpoints=[n],r=!1}if(r){const t=e.callFrames[0].location;if(yield this.shouldContinueOnStopOnEntryBreakpoint(t))return!0}return!1}))}addStopOnEntryBreakpoint(e){return n(this,void 0,void 0,(function*(){let t;if(this._stopOnEntryRequestedFileNameToBreakpointId.has(e))t=[];else{const r=a.utils.canonicalizeUrl(e),n=o.getUrlRegexForBreakOnLoad(r);let s;if(s=this._stopOnEntryRegexToBreakpointId.get(n),void 0===s){let e;try{e=yield this.setStopOnEntryBreakpoint(n)}catch(e){i.logger.log(`Exception occured while trying to set stop on entry breakpoint ${e.message}.`)}e?(s=e.breakpointId,this._stopOnEntryRegexToBreakpointId.set(n,s)):i.logger.log(`BreakpointId was null when trying to set on urlregex ${n}. This normally happens if the breakpoint already exists.`),t=[e]}else t=[];this._stopOnEntryRequestedFileNameToBreakpointId.set(r,s);let c=this._stopOnEntryBreakpointIdToRequestedFileName.get(s);if(void 0!==c)c.fileSet.add(r);else{const e=new Set;e.add(r),this._stopOnEntryBreakpointIdToRequestedFileName.set(s,{urlRegex:n,fileSet:e})}}return Promise.all(t)}))}handleAddBreakpoints(e,t){return n(this,void 0,void 0,(function*(){return"regex"===this._breakOnLoadStrategy?yield this.addStopOnEntryBreakpoint(e):"instrument"===this._breakOnLoadStrategy&&(this.instrumentationBreakpointSet||(yield this.setInstrumentationBreakpoint())),t.map((e=>({})))}))}setInstrumentationBreakpoint(){return n(this,void 0,void 0,(function*(){yield this._chromeDebugAdapter.chrome.DOMDebugger.setInstrumentationBreakpoint({eventName:"scriptFirstStatement"}),this._instrumentationBreakpointSet=!0}))}setStopOnEntryBreakpoint(e){return n(this,void 0,void 0,(function*(){return yield this._chromeDebugAdapter.chrome.Debugger.setBreakpointByUrl({urlRegex:e,lineNumber:0,columnNumber:0})}))}removeBreakpointById(e){return n(this,void 0,void 0,(function*(){return yield this._chromeDebugAdapter.chrome.Debugger.removeBreakpoint({breakpointId:e})}))}shouldResolvePendingBPs(e){return"regex"===this._breakOnLoadStrategy&&!this.stopOnEntryRequestedFileNameToBreakpointId.has(e)}}},9623:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8063),o=r(7992),s=r(7884),a=r(6665),c=r(6928);let l=r(4200).loadMessageBundle(__filename);class u{constructor(e,t){this.adapter=e,this._chromeConnection=t,this._nextUnboundBreakpointId=0,this._committedBreakpointsByUrl=new Map,this._setBreakpointsRequestQ=Promise.resolve(),this._breakpointIdHandles=new a.ReverseHandles,this._pendingBreakpointsByUrl=new Map,this._hitConditionBreakpointsById=new Map}get breakpointsQueueDrained(){return this._setBreakpointsRequestQ}get committedBreakpointsByUrl(){return this._committedBreakpointsByUrl}getValueFromCommittedBreakpointsByUrl(e){let t=a.canonicalizeUrl(e);return this._committedBreakpointsByUrl.get(t)}setValueForCommittedBreakpointsByUrl(e,t){let r=a.canonicalizeUrl(e);this._committedBreakpointsByUrl.set(r,t)}get chrome(){return this._chromeConnection.api}reset(){this._committedBreakpointsByUrl=new Map,this._setBreakpointsRequestQ=Promise.resolve()}setBreakpoints(e,t,r,n){return e.source.path&&(e.source.path=this.adapter.displayPathToRealPath(e.source.path),e.source.path=a.canonicalizeUrl(e.source.path)),this.validateBreakpointsPath(e).then((()=>{const o=e;e=JSON.parse(JSON.stringify(e)),e=this.adapter.lineColTransformer.setBreakpoints(e);const c=this.adapter.sourceMapTransformer.setBreakpoints(e,r,n);let d;if(c&&c.args&&(e=c.args),c&&c.ids&&(n=c.ids),e.source=this.adapter.pathTransformer.setBreakpoints(e.source),e.source.sourceReference){const r=t.getSource(e.source.sourceReference);if(r&&r.scriptId||!e.source.path){const e=t.getScriptById(r.scriptId);e&&(d=e.url)}else d=e.source.path}else e.source.path&&(d=e.source.path);if(d){const c=e.breakpoints.map((e=>new s.InternalSourceBreakpoint(e))),h=this._setBreakpointsRequestQ.then((()=>this.clearAllBreakpoints(d))).then((()=>this.addBreakpoints(d,c,t))).then((e=>({breakpoints:this.targetBreakpointResponsesToBreakpointSetResults(d,e,c,n)}))),p=a.promiseTimeout(h,u.SET_BREAKPOINTS_TIMEOUT,l(0,null));return this._setBreakpointsRequestQ=p.catch((e=>{e.message&&e.message.indexOf("timed out")>=0&&i.logger.error(e.stack)})),h.then((e=>{const t={breakpoints:e.breakpoints.map((e=>e.breakpoint))};return t.breakpoints.every((e=>!e.verified))?this.unverifiedBpResponseForBreakpoints(o,r,d,t.breakpoints,l(1,null)):(t.breakpoints=this.adapter.sourceMapTransformer.setBreakpointsResponse(t.breakpoints,!0,r)||t.breakpoints,this.adapter.lineColTransformer.setBreakpointsResponse(t),t)}))}return Promise.resolve(this.unverifiedBpResponse(e,r,void 0,l(2,null)))}),(t=>this.unverifiedBpResponse(e,r,void 0,t.message)))}validateBreakpointsPath(e){return!e.source.path||e.source.sourceReference||this.adapter.breakOnLoadActive?Promise.resolve():this.adapter.sourceMapTransformer.getGeneratedPathFromAuthoredPath(e.source.path).then((e=>e?this.adapter.pathTransformer.getTargetPathFromClientPath(e)?void 0:a.errP(l(4,null)):a.errP(l(3,null))))}addBreakpoints(e,t,r){return n(this,void 0,void 0,(function*(){let n;if(o.isEvalScript(e)){const r=a.lstrip(e,o.EVAL_NAME_PREFIX);n=t.map((({line:e,column:t=0,condition:n})=>this.chrome.Debugger.setBreakpoint({location:{scriptId:r,lineNumber:e,columnNumber:t},condition:n})))}else{const i=r.getScriptByUrl(e);if(!this.adapter.breakOnLoadActive||i){const r=a.pathToRegex(e);n=t.map((({line:e,column:t=0,condition:n})=>this.addOneBreakpointByUrl(i&&i.scriptId,r,e,t,n)))}else if(this.adapter.breakOnLoadActive)return yield this.adapter.breakOnLoadHelper.handleAddBreakpoints(e,t)}return Promise.all(n)}))}addOneBreakpointByUrl(e,t,r,i,s){return n(this,void 0,void 0,(function*(){let n,a={lineNumber:r,columnNumber:i};if(this.adapter.columnBreakpointsEnabled&&e)try{const t=yield this.chrome.Debugger.getPossibleBreakpoints({start:{scriptId:e,lineNumber:r,columnNumber:0},end:{scriptId:e,lineNumber:r+1,columnNumber:0},restrictToFunction:!1});if(t.locations.length){const e=o.selectBreakpointLocation(r,i,t.locations);a={lineNumber:e.lineNumber,columnNumber:e.columnNumber||0}}}catch(e){}try{n=yield this.chrome.Debugger.setBreakpointByUrl({urlRegex:t,lineNumber:a.lineNumber,columnNumber:a.columnNumber,condition:s})}catch(t){if("Breakpoint at specified location already exists."===t.message)return{actualLocation:{lineNumber:a.lineNumber,columnNumber:a.columnNumber,scriptId:e}};throw t}const c=n.locations;return{breakpointId:n.breakpointId,actualLocation:c[0]&&{lineNumber:c[0].lineNumber,columnNumber:c[0].columnNumber,scriptId:e}}}))}getBreakpointsLocations(e,t,r){return n(this,void 0,void 0,(function*(){e.source.path&&(e.source.path=this.adapter.displayPathToRealPath(e.source.path),e.source.path=a.canonicalizeUrl(e.source.path));try{yield this.validateBreakpointsPath(e)}catch(e){return i.logger.log("breakpointsLocations failed: "+e.message),{breakpoints:[]}}if((e=JSON.parse(JSON.stringify(e))).endLine=this.adapter.lineColTransformer.convertClientLineToDebugger("number"==typeof e.endLine?e.endLine:e.line+1),e.endColumn=this.adapter.lineColTransformer.convertClientLineToDebugger(e.endColumn||1),e.line=this.adapter.lineColTransformer.convertClientLineToDebugger(e.line),e.column=this.adapter.lineColTransformer.convertClientColumnToDebugger(e.column||1),e.source.path){const t=JSON.parse(JSON.stringify(e.source)),n=this.adapter.sourceMapTransformer.setBreakpoints({breakpoints:[{line:e.line,column:e.column}],source:t},r);e.line=n.args.breakpoints[0].line,e.column=n.args.breakpoints[0].column;const i=this.adapter.sourceMapTransformer.setBreakpoints({breakpoints:[{line:e.endLine,column:e.endColumn}],source:e.source},r);e.endLine=i.args.breakpoints[0].line,e.endColumn=i.args.breakpoints[0].column}let n;if(e.source=this.adapter.pathTransformer.setBreakpoints(e.source),e.source.sourceReference){const r=t.getSource(e.source.sourceReference);if(r&&r.scriptId||!e.source.path){const e=t.getScriptById(r.scriptId);e&&(n=e.url)}else n=e.source.path}else e.source.path&&(n=e.source.path);if(n){const i=t.getScriptByUrl(n);if(i){const t="number"==typeof e.endLine?{scriptId:i.scriptId,lineNumber:e.endLine,columnNumber:e.endColumn||0}:{scriptId:i.scriptId,lineNumber:e.line+1,columnNumber:0},n=yield this.chrome.Debugger.getPossibleBreakpoints({start:{scriptId:i.scriptId,lineNumber:e.line,columnNumber:e.column||0},end:t,restrictToFunction:!1});if(n.locations){let e=n.locations.map((e=>({line:e.lineNumber,column:e.columnNumber})));e=this.adapter.sourceMapTransformer.setBreakpointsResponse(e,!1,r);const t={breakpoints:e};return this.adapter.lineColTransformer.setBreakpointsResponse(t),t}return{breakpoints:[]}}}return null}))}targetBreakpointResponsesToBreakpointSetResults(e,t,r,n){const i=t.filter((e=>e&&e.breakpointId));return this.setValueForCommittedBreakpointsByUrl(e,i),t.map(((e,t)=>{if(!e)return{isSet:!1,breakpoint:{verified:!1}};const i=e.breakpointId||this.generateNextUnboundBreakpointId();let o;if(n&&n[t]?(o=n[t],this._breakpointIdHandles.set(o,i)):o=this._breakpointIdHandles.lookup(i)||this._breakpointIdHandles.create(i),!e.actualLocation)return{isSet:void 0!==e.breakpointId,breakpoint:{id:o,verified:!1}};const s=r[t];return s.hitCondition&&!this.addHitConditionBreakpoint(s,e)?{isSet:!0,breakpoint:{id:o,message:l(5,null,s.hitCondition),verified:!1}}:{isSet:!0,breakpoint:{id:o,verified:!0,line:e.actualLocation.lineNumber,column:e.actualLocation.columnNumber}}}))}addHitConditionBreakpoint(e,t){const r=u.HITCONDITION_MATCHER.exec(e.hitCondition.trim());if(r&&r.length>=3){let e=r[1]||">=";"="===e&&(e="==");const n=r[2],i=new Function("numHits","%"===e?`return (numHits % ${n}) === 0;`:`return numHits ${e} ${n};`);return this._hitConditionBreakpointsById.set(t.breakpointId,{numHits:0,shouldPause:i}),!0}return!1}clearAllBreakpoints(e){return e=a.canonicalizeUrl(e),this._committedBreakpointsByUrl.has(e)?this._committedBreakpointsByUrl.get(e).reduce(((e,t)=>e.then((()=>this.chrome.Debugger.removeBreakpoint({breakpointId:t.breakpointId}))).then((()=>{}))),Promise.resolve()).then((()=>{this._committedBreakpointsByUrl.delete(e)})):Promise.resolve()}onBreakpointResolved(e,t){const r=t.getScriptById(e.location.scriptId),n=this._breakpointIdHandles.lookup(e.breakpointId);if(!r||!n)return;if(this.adapter.breakOnLoadActive&&this.adapter.breakOnLoadHelper.stopOnEntryBreakpointIdToRequestedFileName.has(e.breakpointId))return;const o=this.getValueFromCommittedBreakpointsByUrl(r.url)||[];o.find((t=>t.breakpointId===e.breakpointId))||o.push({breakpointId:e.breakpointId,actualLocation:e.location}),this.setValueForCommittedBreakpointsByUrl(r.url,o);const s={id:n,verified:!0,line:e.location.lineNumber,column:e.location.columnNumber},c=a.canonicalizeUrl(this.adapter.pathTransformer.breakpointResolved(s,r.url));this._pendingBreakpointsByUrl.has(c)&&this._pendingBreakpointsByUrl.delete(c),this.adapter.sourceMapTransformer.breakpointResolved(s,c),this.adapter.lineColTransformer.breakpointResolved(s),this.adapter.session.sendEvent(new i.BreakpointEvent("changed",s))}generateNextUnboundBreakpointId(){return"__::[vscode_chrome_debug_adapter_unbound_breakpoint]::"+this._nextUnboundBreakpointId++}unverifiedBpResponse(e,t,r,n){const i=e.breakpoints.map((e=>({verified:!1,line:e.line,column:e.column,message:n,id:this._breakpointIdHandles.create(this.generateNextUnboundBreakpointId())})));return this.unverifiedBpResponseForBreakpoints(e,t,r,i,n)}unverifiedBpResponseForBreakpoints(e,t,r,n,i){if(n.forEach((e=>{e.message||(e.message=i)})),e.source.path){const i=n.map((e=>e.id));this._pendingBreakpointsByUrl.set(a.canonicalizeUrl(e.source.path),{args:e,ids:i,requestSeq:t,setWithPath:this.adapter.breakOnLoadActive?"":r})}return{breakpoints:n}}handleScriptParsed(e,t,r,i){return n(this,void 0,void 0,(function*(){if(i){const e=i.filter((e=>e!==r));for(const r of e)yield this.resolvePendingBPs(r,t)}a.canonicalizeUrl(e.url)===r&&this._pendingBreakpointsByUrl.has(r)&&a.canonicalizeUrl(this._pendingBreakpointsByUrl.get(r).setWithPath)===a.canonicalizeUrl(r)?this._pendingBreakpointsByUrl.delete(r):yield this.resolvePendingBPs(r,t)}))}resolvePendingBPs(e,t){return n(this,void 0,void 0,(function*(){e=e&&a.canonicalizeUrl(e);const r=this._pendingBreakpointsByUrl.get(e);if(!r||r.setWithPath&&a.canonicalizeUrl(r.setWithPath)!==e){if(e){const t=c.basename(e).toLowerCase();Array.from(this._pendingBreakpointsByUrl.keys()).find((e=>e.toLowerCase().indexOf(t)>-1))&&i.logger.log(`OnScriptParsed.resolvePendingBPs: The following pending breakpoints won't be resolved: ${JSON.stringify(r)} pendingBreakpointsByUrl = ${JSON.stringify([...this._pendingBreakpointsByUrl])} source = ${e}`)}}else i.logger.log(`OnScriptParsed.resolvePendingBPs: Resolving pending breakpoints: ${JSON.stringify(r)}`),yield this.resolvePendingBreakpoint(r,t),this._pendingBreakpointsByUrl.delete(e)}))}resolvePendingBreakpoint(e,t){return this.setBreakpoints(e.args,t,e.requestSeq,e.ids).then((t=>{t.breakpoints.forEach(((t,r)=>{t.id=e.ids[r],this.adapter.session.sendEvent(new i.BreakpointEvent("changed",t))}))}))}handleHitCountBreakpoints(e,t){for(let r of t)if(this._hitConditionBreakpointsById.has(r)){const t=this._hitConditionBreakpointsById.get(r);if(t.numHits++,!e&&!t.shouldPause(t.numHits))return this.chrome.Debugger.resume().catch((()=>{})),{didPause:!1}}return null}}u.SET_BREAKPOINTS_TIMEOUT=5e3,u.HITCONDITION_MATCHER=/^(>|>=|=|<|<=|%)?\s*([0-9]+)$/,t.Breakpoints=u},3629:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4084),i=r(3023),o=r(3138),s=r(3201),a=r(6665),c=r(8063),l=r(8597),u=r(8355),d=r(2959),h=r(4621);class p extends n{constructor(e,t,r){super(e,t,r),this.on("error",(e=>{c.logger.log("Websocket error: "+e.toString())})),this.on("close",(()=>{c.logger.log("Websocket closed")})),this.on("message",(e=>{let t;try{t=JSON.parse(e.toString())}catch(t){return void c.logger.error(`Invalid JSON from target: (${t.message}): ${e}`)}!t||t.method&&t.method.startsWith("Network.")||(t.result&&t.result.scriptSource?(t.result.scriptSource="<removed script source for logs>",c.logger.verbose("← From target: "+JSON.stringify(t))):c.logger.verbose("← From target: "+e))}))}send(e,t,r){const i=JSON.stringify(e);this.readyState===n.OPEN?(super.send.apply(this,arguments),c.logger.verbose("→ To target: "+i)):c.logger.log(`→ Warning: Target not open! Message: ${i}`)}}class f{constructor(e,t){this._targetFilter=t,this._targetDiscoveryStrategy=e||new l.ChromeTargetDiscovery(c.logger,i.telemetry),this.events=new o.StepProgressEventsEmitter([this._targetDiscoveryStrategy.events])}get isAttached(){return!!this._client}get api(){return this._client&&this._client.api()}get attachedTarget(){return this._attachedTarget}setTargetFilter(e){this._targetFilter=e}attach(e="127.0.0.1",t=9222,r,n,i){return this._attach(e,t,r,n,i).then((()=>{}))}attachToWebsocketUrl(e,t){this.events.emitStepStarted("Attach.AttachToTargetDebuggerWebsocket"),this._socket=new p(e,void 0,{headers:{Host:"localhost"}}),t?(this._crdpSocketMultiplexor=new d.CRDPMultiplexor(this._socket),new h.WebSocketToLikeSocketProxy(t,this._crdpSocketMultiplexor.addChannel("extraCRDPEndpoint")).start(),this._client=new u.Client(this._crdpSocketMultiplexor.addChannel("debugger"))):this._client=new u.Client(this._socket),this._client.on("error",(e=>c.logger.error("Error handling message from target: "+e.message)))}getAllTargets(e="127.0.0.1",t=9222,r,n){return this._targetDiscoveryStrategy.getAllTargets(e,t,r,n)}_attach(e,t,r,n=f.ATTACH_TIMEOUT,i){let o;return a.retryAsync((()=>this._targetDiscoveryStrategy.getTarget(e,t,this._targetFilter,r)),n,200).catch((e=>Promise.reject(s.runtimeConnectionTimeout(n,e.message)))).then((e=>(o=e,this.attachToWebsocketUrl(e.webSocketDebuggerUrl,i)))).then((()=>{this._attachedTarget=o}))}run(){return Promise.all([this.api.Runtime.runIfWaitingForDebugger(),this.api.Runtime.run()]).then((()=>{}),(()=>{}))}close(){this._socket.close()}onClose(e){this._socket.on("close",e)}get version(){return this._attachedTarget.version.then((e=>e||new l.TargetVersions(l.Version.unknownVersion(),l.Version.unknownVersion())))}}f.ATTACH_TIMEOUT=1e4,t.ChromeConnection=f},9767:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8063),o=r(3629),s=r(7992),a=r(7414),c=r(7414),l=r(7254),u=r(3884),d=r(7884),h=r(3201),p=r(6665),f=r(6665),m=r(3023),g=r(3138),y=r(27),v=r(9693),_=r(1261),b=r(4451),w=r(2021),S=r(1165),E=r(6928),C=r(4200),T=r(6461),k=r(9623),P=r(7643),R=r(8377),x=r(4211),M=r(5492),O=r(1091);let D=C.loadMessageBundle(__filename);class I{constructor({chromeConnection:e,lineColTransformer:t,sourceMapTransformer:r,pathTransformer:n,targetFilter:i,breakpoints:s,scriptContainer:a},c){this._domains=new Map,this._waitAfterStep=Promise.resolve(),this._currentStep=Promise.resolve(),this._currentLogMessage=Promise.resolve(),this._pauseOnPromiseRejections=!0,this._promiseRejectExceptionFilterEnabled=!1,this._smartStepCount=0,this._earlyScripts=[],this._initialSourceMapsP=Promise.resolve(),this._sourceLoadedQueue=Promise.resolve(null),this._scriptIdToBreakpointsAreResolvedDefer=new Map,this._loadedSourcesByScriptId=new Map,m.telemetry.setupEventHandler((e=>c.sendEvent(e))),this._batchTelemetryReporter=new m.BatchTelemetryReporter(m.telemetry),this._session=c,this._chromeConnection=new(e||o.ChromeConnection)(void 0,i),this.events=new g.StepProgressEventsEmitter(this._chromeConnection.events?[this._chromeConnection.events]:[]),this._scriptContainer=new(a||x.ScriptContainer),this._transformers={lineColTransformer:new(t||y.LineColTransformer)(this._session),sourceMapTransformer:new(r||_.EagerSourceMapTransformer)(this._scriptContainer),pathTransformer:new(n||v.RemotePathTransformer)},this._breakpoints=new(s||k.Breakpoints)(this,this._chromeConnection),this._variablesManager=new P.VariablesManager(this._chromeConnection),this._stackFrames=new R.StackFrames,this._scriptSkipper=new O.ScriptSkipper(this._chromeConnection,this._transformers),this.clearTargetContext()}get columnBreakpointsEnabled(){return this._columnBreakpointsEnabled}get breakOnLoadHelper(){return this._breakOnLoadHelper}get chrome(){return this._chromeConnection.api}get scriptsById(){return this._scriptContainer.scriptsByIdMap}get committedBreakpointsByUrl(){return this._breakpoints.committedBreakpointsByUrl}get pathTransformer(){return this._transformers.pathTransformer}get sourceMapTransformer(){return this._transformers.sourceMapTransformer}get lineColTransformer(){return this._transformers.lineColTransformer}get session(){return this._session}get originProvider(){return e=>this.getReadonlyOrigin(e)}clearTargetContext(){this.sourceMapTransformer.clearTargetContext(),this._scriptContainer.reset(),this._breakpoints&&this._breakpoints.reset(),this.pathTransformer.clearTargetContext()}initialize(e){if(e.supportsMapURLToFilePathRequest&&(this._transformers.pathTransformer=new b.FallbackToClientPathTransformer(this._session)),this._isVSClient="visualstudio"===e.clientID,p.setCaseSensitivePaths(!this._isVSClient),this.sourceMapTransformer.isVSClient=this._isVSClient,"path"!==e.pathFormat)throw h.pathFormat();e.locale&&(D=C.config({locale:e.locale})(__filename)),"boolean"==typeof e.linesStartAt1&&(this._clientLinesStartAt1=e.linesStartAt1),"boolean"==typeof e.columnsStartAt1&&(this._clientColumnsStartAt1=e.columnsStartAt1);const t=[{label:D(0,null),filter:"all",default:!1},{label:D(1,null),filter:"uncaught",default:!1}];return this._promiseRejectExceptionFilterEnabled&&t.push({label:D(2,null),filter:"promise_reject",default:!1}),{exceptionBreakpointFilters:t,supportsConfigurationDoneRequest:!0,supportsSetVariable:!0,supportsConditionalBreakpoints:!0,supportsCompletionsRequest:!0,supportsHitConditionalBreakpoints:!0,supportsRestartFrame:!0,supportsExceptionInfoRequest:!0,supportsDelayedStackTraceLoading:!0,supportsValueFormattingOptions:!0,supportsEvaluateForHovers:!0,supportsLoadedSourcesRequest:!0,supportsBreakpointLocationsRequest:!0}}configurationDone(){return Promise.resolve()}get breakOnLoadActive(){return!!this._breakOnLoadHelper}launch(e,t){return n(this,void 0,void 0,(function*(){if(this.commonArgs(e),e.pathMapping)for(const t in e.pathMapping)e.pathMapping[t]=p.canonicalizeUrl(e.pathMapping[t]);this.sourceMapTransformer.launch(e),yield this.pathTransformer.launch(e),e.__restart||m.telemetry.reportEvent("debugStarted",{request:"launch",args:Object.keys(e)})}))}attach(e){return n(this,void 0,void 0,(function*(){this._attachMode=!0,this.commonArgs(e),this.sourceMapTransformer.attach(e),yield this.pathTransformer.attach(e),e.port||(e.port=9229),m.telemetry.reportEvent("debugStarted",{request:"attach",args:Object.keys(e)}),yield this.doAttach(e.port,e.url,e.address,e.timeout,e.websocketUrl,e.extraCRDPChannelPort)}))}commonArgs(e){let t,r=!1;"verbose"===e.trace?(t=i.Logger.LogLevel.Verbose,r=!0):e.trace?(t=i.Logger.LogLevel.Warn,r=!0):t=i.Logger.LogLevel.Warn;let n=e.logTimestamps;const o=e.logFilePath||r;i.logger.setup(t,o,n),this._launchAttachArgs=e,e.sourceMaps=void 0===e.sourceMaps||e.sourceMaps,e.showAsyncStacks=void 0===e.showAsyncStacks||e.showAsyncStacks,this._smartStepper=new M.SmartStepper(this._launchAttachArgs.smartStep),e.breakOnLoadStrategy&&"off"!==e.breakOnLoadStrategy&&(this._breakOnLoadHelper=new w.BreakOnLoadHelper(this,e.breakOnLoadStrategy)),e.hasOwnProperty("targetFilter")&&this._chromeConnection.setTargetFilter(e.targetFilter)}shutdown(){this._batchTelemetryReporter.finalize(),this._inShutdown=!0,this._session.shutdown()}terminateSession(e,t,r){return n(this,void 0,void 0,(function*(){i.logger.log(`Terminated: ${e}`),this._hasTerminated||(i.logger.log("Waiting for any pending steps or log messages."),yield this._currentStep,yield this._currentLogMessage,i.logger.log("Current step and log messages complete"),m.telemetry.reportEvent("debugStopped",{reason:e}),this._hasTerminated=!0,(this._clientAttached||this._launchAttachArgs&&this._launchAttachArgs.noDebug)&&this._session.sendEvent(new i.TerminatedEvent(r)),this._chromeConnection.isAttached&&this._chromeConnection.close())}))}hookConnectionEvents(){this.chrome.Debugger.on("paused",(e=>{this.runAndMeasureProcessingTime("target/notification/onPaused",(()=>n(this,void 0,void 0,(function*(){yield this.onPaused(e)}))))})),this.chrome.Debugger.on("resumed",(()=>this.onResumed())),this.chrome.Debugger.on("scriptParsed",(e=>{this.runAndMeasureProcessingTime("target/notification/onScriptParsed",(()=>this.onScriptParsed(e)))})),this.chrome.Console.on("messageAdded",(e=>this.onMessageAdded(e))),this.chrome.Runtime.on("consoleAPICalled",(e=>this.onConsoleAPICalled(e))),this.chrome.Runtime.on("exceptionThrown",(e=>this.onExceptionThrown(e))),this.chrome.Runtime.on("executionContextsCleared",(()=>this.onExecutionContextsCleared())),this.chrome.Log.on("entryAdded",(e=>this.onLogEntryAdded(e))),this.chrome.Debugger.on("breakpointResolved",(e=>this._breakpoints.onBreakpointResolved(e,this._scriptContainer))),this._chromeConnection.onClose((()=>this.terminateSession("websocket closed")))}runAndMeasureProcessingTime(e,t){return n(this,void 0,void 0,(function*(){const r=Date.now(),n=process.hrtime();let i={startTime:r.toString()};try{yield t(),i.successful="true"}catch(e){i.successful="false",i.exceptionType="firstChance",p.fillErrorDetails(i,e)}const o=p.calculateElapsedTime(n);i.timeTakenInMilliseconds=o.toString(),this._batchTelemetryReporter.reportEvent(e,i)}))}runConnection(){return[this.chrome.Console.enable().catch((()=>{})),p.toVoidP(this.chrome.Debugger.enable()),this.chrome.Runtime.enable(),this.chrome.Log.enable().catch((()=>{})),this._chromeConnection.run()]}doAttach(e,t,r,i,o,s){return n(this,void 0,void 0,(function*(){if(this.events.emitStepStarted("Attach"),this._clientAttached=!0,!this._chromeConnection.isAttached){o?yield this._chromeConnection.attachToWebsocketUrl(o,s):yield this._chromeConnection.attach(r,e,t,i,s),this.events.emitStepStarted("Attach.ConfigureDebuggingSession.Internal"),this._port=e,this.hookConnectionEvents(),this.events.emitStepStarted("Attach.ConfigureDebuggingSession.Target"),yield Promise.all(this.runConnection()),this._scriptSkipper.init(this._launchAttachArgs.skipFiles,this._launchAttachArgs.skipFileRegExps),yield this.initSupportedDomains();const n=this._launchAttachArgs.showAsyncStacks?I.ASYNC_CALL_STACK_DEPTH:0;try{yield this.chrome.Debugger.setAsyncCallStackDepth({maxDepth:n})}catch(e){}this._breakOnLoadHelper&&this._breakOnLoadHelper.setBrowserVersion((yield this._chromeConnection.version).browser),this.events.emitStepStarted("Attach.ConfigureDebuggingSession.End")}}))}initSupportedDomains(){return n(this,void 0,void 0,(function*(){try{(yield this.chrome.Schema.getDomains()).domains.forEach((e=>this._domains.set(e.name,e)))}catch(e){}}))}sendInitializedEvent(){return n(this,void 0,void 0,(function*(){if(this._initialSourceMapsP){const e=this._initialSourceMapsP;this._initialSourceMapsP=null,yield e,this._session.sendEvent(new i.InitializedEvent),this.events.emitStepCompleted("NotifyInitialized"),yield Promise.all(this._earlyScripts.map((e=>this.sendLoadedSourceEvent(e)))),this._earlyScripts=null}}))}doAfterProcessingSourceEvents(e){return this._sourceLoadedQueue=this._sourceLoadedQueue.then(e)}onExecutionContextsCleared(){const e=Array.from(this._scriptContainer.loadedScripts);return this.clearTargetContext(),this.doAfterProcessingSourceEvents((()=>n(this,void 0,void 0,(function*(){for(let t of e)this.sendLoadedSourceEvent(t,"removed")}))))}onPaused(e,t=this._expectingStopReason){return n(this,void 0,void 0,(function*(){if(e.asyncCallStackTraceId)return yield this.chrome.Debugger.pauseOnAsyncCall({parentStackTraceId:e.asyncCallStackTraceId}),yield this.chrome.Debugger.resume(),{didPause:!1};if(this._variablesManager.onPaused(),this._stackFrames.reset(),this._exception=void 0,this._lastPauseState={event:e,expecting:t},this._currentPauseNotification=e,this.breakOnLoadActive&&(yield this._breakOnLoadHelper.handleOnPaused(e)))return this.chrome.Debugger.resume().catch((e=>{i.logger.error("Failed to resume due to exception: "+e.message)})),{didPause:!1};let r,n=!1;if("exception"===e.reason)r="exception",this._exception=e.data;else if("promiseRejection"===e.reason){if(r="promise_rejection",this._promiseRejectExceptionFilterEnabled&&!this._pauseOnPromiseRejections)return this.chrome.Debugger.resume().catch((()=>{})),{didPause:!1};this._exception=e.data}else if(e.hitBreakpoints&&e.hitBreakpoints.length){r="breakpoint";const n=this._breakpoints.handleHitCountBreakpoints(t,e.hitBreakpoints);if(n)return n}else t?(r=t,n=yield this._shouldSmartStepCallFrame(this._currentPauseNotification.callFrames[0])):r="debugger_statement";if(this._expectingStopReason=void 0,n)return this._smartStepCount++,yield this.stepIn(!1),{didPause:!1};{this._smartStepCount>0&&(i.logger.log(`SmartStep: Skipped ${this._smartStepCount} steps`),this._smartStepCount=0);const e=()=>this._session.sendEvent(new u.StoppedEvent2(r,I.THREAD_ID,this._exception));return yield p.promiseTimeout(this._currentStep,300).then(e,e),{didPause:!0}}}))}exceptionInfo(e){return n(this,void 0,void 0,(function*(){if(e.threadId!==I.THREAD_ID)throw h.invalidThread(e.threadId);if(this._exception){const e="error"===this._exception.subtype?p.firstLine(this._exception.description):this._exception.description||this._exception.value,t=e&&e.replace(/\*/g,"\\*");return{exceptionId:this._exception.className||this._exception.type||"Error",breakMode:"unhandled",details:{stackTrace:this._exception.description&&(yield this._stackFrames.mapFormattedException(this._exception.description,this._transformers)),message:e,formattedDescription:t,typeName:this._exception.subtype||this._exception.type}}}throw h.noStoredException()}))}onResumed(){if(this._currentPauseNotification=null,this._expectingResumedEvent)this._expectingResumedEvent=!1,this._waitAfterStep=p.promiseTimeout(null,50);else{let e=new i.ContinuedEvent(I.THREAD_ID);this._session.sendEvent(e)}}detectColumnBreakpointSupport(e){return n(this,void 0,void 0,(function*(){this._columnBreakpointsEnabled=!1;try{yield this.chrome.Debugger.getPossibleBreakpoints({start:{scriptId:e,lineNumber:0,columnNumber:0},end:{scriptId:e,lineNumber:1,columnNumber:0},restrictToFunction:!1}),this._columnBreakpointsEnabled=!0}catch(e){this._columnBreakpointsEnabled=!1}this.lineColTransformer.columnBreakpointsEnabled=this._columnBreakpointsEnabled}))}getBreakpointsResolvedDefer(e){const t=this._scriptIdToBreakpointsAreResolvedDefer.get(e);if(t)return t;{const t=f.promiseDefer();return this._scriptIdToBreakpointsAreResolvedDefer.set(e,t),t}}onScriptParsed(e){return n(this,void 0,void 0,(function*(){delete e.stackTrace,delete e.hash;const t=this.getBreakpointsResolvedDefer(e.scriptId);try{this.doAfterProcessingSourceEvents((()=>n(this,void 0,void 0,(function*(){void 0===this._columnBreakpointsEnabled&&(e.url.includes("internal/per_context")||(yield this.detectColumnBreakpointSupport(e.scriptId),yield this.sendInitializedEvent())),this._earlyScripts?this._earlyScripts.push(e):yield this.sendLoadedSourceEvent(e)})))),e.url?e.url=p.fixDriveLetter(e.url):e.url=I.EVAL_NAME_PREFIX+e.scriptId,this._scriptContainer.add(e);const r=yield this.pathTransformer.scriptParsed(e.url),i=this.sourceMapTransformer.scriptParsed(r,e.url,e.sourceMapURL).then((t=>n(this,void 0,void 0,(function*(){this._hasTerminated||(yield this._breakpoints.handleScriptParsed(e,this._scriptContainer,r,t),yield this._scriptSkipper.resolveSkipFiles(e,r,t))}))));this._initialSourceMapsP&&(this._initialSourceMapsP=Promise.all([this._initialSourceMapsP,i])),yield i,t.resolve()}catch(e){t.reject(e)}}))}sendLoadedSourceEvent(e,t="new"){return n(this,void 0,void 0,(function*(){const r=this.getReadonlyOrigin(e.url),n=yield this._scriptContainer.scriptToSource(e,r);switch(t){case"new":case"changed":if(this._loadedSourcesByScriptId.get(e.scriptId)){if(!n.sourceReference)return;t="changed"}else t="new";this._loadedSourcesByScriptId.set(e.scriptId,e);break;case"removed":if(!this._loadedSourcesByScriptId.delete(e.scriptId))return void m.telemetry.reportEvent("LoadedSourceEventError",{issue:"Tried to remove non-existent script",scriptId:e.scriptId});break;default:m.telemetry.reportEvent("LoadedSourceEventError",{issue:"Unknown reason",reason:t})}const o=new i.LoadedSourceEvent(t,n);this._session.sendEvent(o)}))}toggleSmartStep(){return n(this,void 0,void 0,(function*(){this._smartStepEnabled=!this._smartStepEnabled,this.onPaused(this._lastPauseState.event,this._lastPauseState.expecting)}))}toggleSkipFileStatus(e){return n(this,void 0,void 0,(function*(){if(e.path&&(e.path=p.fileUrlToPath(e.path),e.path=T.mapRemoteClientToInternalPath(e.path)),yield this.isInCurrentStack(e))this._scriptSkipper.toggleSkipFileStatus(e,this._scriptContainer,this._transformers),this.onPaused(this._lastPauseState.event,this._lastPauseState.expecting);else{const t=e.path||this._scriptContainer.displayNameForSourceReference(e.sourceReference);i.logger.log(`Can't toggle the skipFile status for ${t} - it's not in the current stack.`)}}))}isInCurrentStack(e){return n(this,void 0,void 0,(function*(){const t=yield this.stackTrace({threadId:void 0});return e.path?t.stackFrames.some((t=>t.source&&t.source.path===e.path)):t.stackFrames.some((t=>t.source&&t.source.sourceReference===e.sourceReference))}))}loadedSources(){return n(this,void 0,void 0,(function*(){return{sources:(yield Promise.all(Array.from(this._scriptContainer.loadedScripts).map((e=>this._scriptContainer.scriptToSource(e,this.getReadonlyOrigin(e.url)))))).sort(((e,t)=>e.path.localeCompare(t.path)))}}))}onConsoleAPICalled(e){if(this._launchAttachArgs._suppressConsoleOutput)return;const t=l.formatConsoleArguments(e.type,e.args,e.stackTrace),r=d.stackTraceWithoutLogpointFrame(e.stackTrace);t&&this.logObjects(t.args,t.isError,r)}onLogEntryAdded(e){if("verbose"===e.entry.level)return;const t=e.entry.args||[];let r=e.entry.text||"";e.entry.url&&!e.entry.stackTrace&&(r&&(r+=" "),r+=`[${e.entry.url}]`),r&&t.unshift({type:"string",value:r});const n="error"===e.entry.level?"error":"warning"===e.entry.level?"warning":"log",i=l.formatConsoleArguments(n,t,e.entry.stackTrace),o=e.entry.stackTrace;i&&this.logObjects(i.args,i.isError,o)}logObjects(e,t=!1,r){return n(this,void 0,void 0,(function*(){this._currentLogMessage=this._currentLogMessage.then((()=>n(this,void 0,void 0,(function*(){const n=t?"stderr":"stdout";let o;if(1===e.length&&"string"===e[0].type){let r=e[0].value;t&&(r=yield this._stackFrames.mapFormattedException(r,this._transformers)),r.endsWith(l.clearConsoleCode)||(r+="\n"),o=new i.OutputEvent(r,n)}else o=new i.OutputEvent("output",n),o.body.variablesReference=this._variablesManager.createHandle(new c.LoggedObjects(e),"repl");if(r&&r.callFrames.length){const e=yield this._stackFrames.mapCallFrame(r.callFrames[0],this._transformers,this._scriptContainer,this.originProvider);o.body.source=T.mapInternalSourceToRemoteClient(e.source,this._launchAttachArgs.remoteAuthority),o.body.line=e.line,o.body.column=e.column}this._session.sendEvent(o)})))).catch((e=>i.logger.error(e.toString())))}))}onExceptionThrown(e){return n(this,void 0,void 0,(function*(){if(!this._launchAttachArgs._suppressConsoleOutput)return this._currentLogMessage=this._currentLogMessage.then((()=>n(this,void 0,void 0,(function*(){const t=l.formatExceptionDetails(e.exceptionDetails),r=yield this._stackFrames.mapFormattedException(t,this._transformers),n=new i.OutputEvent(r+"\n","stderr"),o=e.exceptionDetails.stackTrace;if(o&&o.callFrames.length){const e=yield this._stackFrames.mapCallFrame(o.callFrames[0],this._transformers,this._scriptContainer,this.originProvider);n.body.source=T.mapInternalSourceToRemoteClient(e.source,this._launchAttachArgs.remoteAuthority),n.body.line=e.line,n.body.column=e.column}this._session.sendEvent(n)})))).catch((e=>i.logger.error(e.toString())))}))}onMessageAdded(e){if(e&&e.message&&e.message.type){const t={type:e.message.type,timestamp:e.message.timestamp,args:e.message.parameters||[{type:"string",value:e.message.text}],stackTrace:e.message.stack,executionContextId:1};this.onConsoleAPICalled(t)}}disconnect(e){m.telemetry.reportEvent("FullSessionStatistics/SourceMaps/Overrides",{aspNetClientAppFallbackCount:S.getAspNetFallbackCount()}),this._clientRequestedSessionEnd=!0,this.shutdown(),this.terminateSession("Got disconnect request",e)}setBreakpoints(e,t,r,n){return e.source.path&&(e.source.path=T.mapRemoteClientToInternalPath(e.source.path)),this.reportBpTelemetry(e),this._breakpoints.setBreakpoints(e,this._scriptContainer,r,n)}reportBpTelemetry(e){let t="";e.source.path&&(t=E.extname(e.source.path),t=E.extname(e.source.path)),m.telemetry.reportEvent("setBreakpointsRequest",{fileExt:t})}setExceptionBreakpoints(e){let t;return t=e.filters.indexOf("all")>=0?"all":e.filters.indexOf("uncaught")>=0?"uncaught":"none",e.filters.indexOf("promise_reject")>=0?this._pauseOnPromiseRejections=!0:this._pauseOnPromiseRejections=!1,this.chrome.Debugger.setPauseOnExceptions({state:t}).then((()=>{}))}continue(e=!1){return e||m.telemetry.reportEvent("continueRequest"),this.chrome?(this._expectingResumedEvent=!0,this._currentStep=this.chrome.Debugger.resume().then((()=>{}),(()=>{}))):p.errP(h.runtimeNotConnectedMsg)}next(){return this.chrome?(m.telemetry.reportEvent("nextRequest"),this._expectingStopReason="step",this._expectingResumedEvent=!0,this._currentStep=this.chrome.Debugger.stepOver().then((()=>{}),(()=>{}))):p.errP(h.runtimeNotConnectedMsg)}stepIn(e=!0){return this.chrome?(e&&m.telemetry.reportEvent("stepInRequest"),this._expectingStopReason="step",this._expectingResumedEvent=!0,this._currentStep=this.chrome.Debugger.stepInto({breakOnAsyncCall:!0}).then((()=>{}),(()=>{}))):p.errP(h.runtimeNotConnectedMsg)}stepOut(){return this.chrome?(m.telemetry.reportEvent("stepOutRequest"),this._expectingStopReason="step",this._expectingResumedEvent=!0,this._currentStep=this.chrome.Debugger.stepOut().then((()=>{}),(()=>{}))):p.errP(h.runtimeNotConnectedMsg)}stepBack(){return this.chrome.TimeTravel.stepBack().then((()=>{}),(()=>{}))}reverseContinue(){return this.chrome.TimeTravel.reverse().then((()=>{}),(()=>{}))}pause(){return this.chrome?(m.telemetry.reportEvent("pauseRequest"),this._expectingStopReason="pause",this._currentStep=this.chrome.Debugger.pause().then((()=>{}))):p.errP(h.runtimeNotConnectedMsg)}stackTrace(e){return n(this,void 0,void 0,(function*(){if(!this._currentPauseNotification)return Promise.reject(h.noCallStackAvailable());const t=yield this._stackFrames.getStackTrace({args:e,originProvider:this.originProvider,scripts:this._scriptContainer,scriptSkipper:this._scriptSkipper,smartStepper:this._smartStepper,transformers:this._transformers,pauseEvent:this._currentPauseNotification});return t.stackFrames=t.stackFrames.map((e=>Object.assign({},e,{source:T.mapInternalSourceToRemoteClient(e.source,this._launchAttachArgs.remoteAuthority)}))),t}))}getReadonlyOrigin(e){}realPathToDisplayPath(e){return this._scriptContainer.realPathToDisplayPath(e)}displayPathToRealPath(e){return this._scriptContainer.displayPathToRealPath(e)}scopes(e){return this._stackFrames.getScopes({args:e,scripts:this._scriptContainer,variables:this._variablesManager,transformers:this._transformers,pauseEvent:this._currentPauseNotification,currentException:this._exception})}variables(e){return n(this,void 0,void 0,(function*(){const t=yield this._variablesManager.getVariables(e);return{variables:(t?t.variables:[]).filter((e=>-1===I.FILTERED_VARIABLE_NAMES.indexOf(e.name)))}}))}source(e){let t;if(e.sourceReference){const r=this._scriptContainer.getSource(e.sourceReference);if(!r)return Promise.reject(h.sourceRequestIllegalHandle());if(r.contents)return Promise.resolve({content:r.contents});t=r.scriptId}else if(e.source&&e.source.path){const r=this.displayPathToRealPath(e.source.path),n=this.getScriptByUrl(p.isURL(r)?encodeURI(r):r);if(!n)return Promise.reject(h.sourceRequestCouldNotRetrieveContent());t=n.scriptId}return t?this.chrome.Debugger.getScriptSource({scriptId:t}).then((e=>({content:e.scriptSource,mimeType:"text/javascript"}))):Promise.reject(h.sourceRequestCouldNotRetrieveContent())}threads(){return{threads:[{id:I.THREAD_ID,name:this.threadName()}]}}threadName(){return"Thread "+I.THREAD_ID}evaluate(e){return n(this,void 0,void 0,(function*(){if(!this.chrome)return p.errP(h.runtimeNotConnectedMsg);if(e.expression.startsWith(I.SCRIPTS_COMMAND))return this.handleScriptsCommand(e);e.expression.startsWith("{")&&e.expression.endsWith("}")&&(e.expression=`(${e.expression})`);const t=yield this.waitThenDoEvaluate(e.expression,e.frameId,{generatePreview:!0}),r=yield this._variablesManager.remoteObjectToVariable(e.expression,t.result,void 0,void 0,e.context);if(t.exceptionDetails){let t=r.value;return t&&(t.startsWith("ReferenceError: ")||t.startsWith("TypeError: "))&&"repl"!==e.context&&(t=h.evalNotAvailableMsg),p.errP(t)}return{result:r.value,variablesReference:r.variablesReference,indexedVariables:r.indexedVariables,namedVariables:r.namedVariables,type:r.type}}))}handleScriptsCommand(e){let t;const r=p.lstrip(e.expression,I.SCRIPTS_COMMAND).trim();if(r){const e=this.getScriptByUrl(r);t=e?this.chrome.Debugger.getScriptSource({scriptId:e.scriptId}).then((e=>{const t=1e5;return e.scriptSource.length>t?e.scriptSource.substr(0,t)+"[⋯]":e.scriptSource})):Promise.resolve(`No runtime script with url: ${r}\n`)}else t=this._scriptContainer.getAllScriptsString(this.pathTransformer,this.sourceMapTransformer);return t.then((e=>(this._session.sendEvent(new i.OutputEvent(e)),{result:"",variablesReference:0})))}_shouldSmartStepCallFrame(e){return n(this,void 0,void 0,(function*(){const t={stackFrames:[this._stackFrames.callFrameToStackFrame(e,this._scriptContainer,this.originProvider)]};return yield this.pathTransformer.stackTraceResponse(t),yield this.sourceMapTransformer.stackTraceResponse(t),this._smartStepper.shouldSmartStep(t.stackFrames[0],this.pathTransformer,this.sourceMapTransformer)}))}globalEvaluate(e){return this.chrome.Runtime.evaluate(e)}waitThenDoEvaluate(e,t,r){return n(this,void 0,void 0,(function*(){const n=this._waitAfterStep.then((()=>this.doEvaluate(e,t,r)));return this._waitAfterStep=n.then((()=>{}),(()=>{})),n}))}doEvaluate(e,t,r){return n(this,void 0,void 0,(function*(){if("number"==typeof t){const n=this._stackFrames.getFrame(t);return n&&n.callFrameId?this.evaluateOnCallFrame(e,n,r):p.errP(h.evalNotAvailableMsg)}{let t={expression:e,silent:!0,includeCommandLineAPI:!0,objectGroup:"console",userGesture:!0};return r&&(t=Object.assign(t,r)),this.globalEvaluate(t)}}))}evaluateOnCallFrame(e,t,r){return n(this,void 0,void 0,(function*(){let n={callFrameId:t.callFrameId,expression:e,silent:!0,includeCommandLineAPI:!0,objectGroup:"console"};return r&&(n=Object.assign(n,r)),this.chrome.Debugger.evaluateOnCallFrame(n)}))}setVariable(e){return this._variablesManager.setVariable(e)}restartFrame(e){return n(this,void 0,void 0,(function*(){const t=this._stackFrames.getFrame(e.frameId);if(!t||!t.callFrameId)return p.errP(h.noRestartFrame);try{yield this.chrome.Debugger.restartFrame({callFrameId:t.callFrameId})}catch(e){}return this._expectingStopReason="frame_entry",this.chrome.Debugger.stepInto({})}))}completions(e){return n(this,void 0,void 0,(function*(){const t=e.text,r=e.column,n=t.substring(0,r-1);let o;const s=n.lastIndexOf(".");if(s>=0&&(o=n.substr(0,s)),"number"!=typeof e.frameId||o){o=o||"this",i.logger.verbose(`Completions: Returning for expression '${o}'`);const t=`(function(x){var a=[];for(var o=x;o!==null&&typeof o !== 'undefined';o=o.__proto__){a.push(Object.getOwnPropertyNames(o))};return a})(${o})`,r=yield this.waitThenDoEvaluate(t,e.frameId,{returnByValue:!0});return r.exceptionDetails?{targets:[]}:{targets:this.getFlatAndUniqueCompletionItems(r.result.value)}}{if(i.logger.verbose("Completions: Returning global completions"),!this._stackFrames.getFrame(e.frameId))return Promise.reject(h.stackFrameNotValid());const t=this._stackFrames.getFrame(e.frameId);if(!t||!t.callFrameId)return{targets:[]};const r=t.scopeChain.map((e=>new a.ScopeContainer(t.callFrameId,void 0,e.object.objectId).expand(this._variablesManager)));return Promise.all(r).then((e=>({targets:this.getFlatAndUniqueCompletionItems(e.map((e=>e.map((e=>e.name)))))})))}}))}getFlatAndUniqueCompletionItems(e){const t=new Set,r=[];for(let n=0;n<e.length;n++)for(let i of e[n])a.isIndexedPropName(i)||t.has(i)||(t.add(i),r.push({label:i,type:"property"}));return r}getScriptByUrl(e){return this._scriptContainer.getScriptByUrl(e)}breakpointLocations(e,t,r){return this._breakpoints.getBreakpointsLocations(e,this._scriptContainer,r)}}I.EVAL_NAME_PREFIX=s.EVAL_NAME_PREFIX,I.EVAL_ROOT="<eval>",I.FILTERED_VARIABLE_NAMES=["[[StableObjectId]]"],I.SCRIPTS_COMMAND=".scripts",I.THREAD_ID=1,I.ASYNC_CALL_STACK_DEPTH=4,t.ChromeDebugAdapter=I},2048:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(857),o=r(8063),s=r(3023),a=r(6665),c=r(3138);function l(e){return!!e.format}function u(e){return!!e.data}t.ErrorTelemetryEventName="error";class d extends o.LoggingDebugSession{constructor(e,n,l){super(l.logFilePath,e,n),this._readyForUserTimeoutInMilliseconds=3e5,this.reporter=new c.ExecutionTimingsReporter,this.haveTimingsWhileStartingUpBeenReported=!1,function(){o.logger.log(`OS: ${i.platform()} ${i.arch()}`),o.logger.log(`Adapter node: ${process.version} ${process.arch}`);const e=r(2281).rE;o.logger.log("vscode-chrome-debug-core: "+e),s.telemetry.addCustomGlobalProperty({"Versions.DebugAdapterCore":e})}(),this._extensionName=l.extensionName,this._debugAdapter=new l.adapter(l,this),this.events=new c.StepProgressEventsEmitter([this._debugAdapter.events]),this.configureExecutionTimingsReporting();const u=e=>{let t;try{t=e&&e.stack?e.stack:JSON.stringify(e)}catch(e){t="Error while handling previous error: "+e.stack}return t},d=(e,r)=>{let n={successful:"false"};n.exceptionType=r,a.fillErrorDetails(n,e),s.telemetry.reportEvent(t.ErrorTelemetryEventName,n)};process.addListener("uncaughtException",(e=>{d(e,"uncaughtException"),o.logger.error(`******** Unhandled error in debug adapter: ${u(e)}`)})),process.addListener("unhandledRejection",(e=>{d(e,"unhandledRejection"),o.logger.error(`******** Unhandled error in debug adapter - Unhandled promise rejection: ${u(e)}`)}))}static getSession(e){return class extends d{constructor(t,r){super(t,r,e)}}}dispatchRequest(e){this.reportTelemetry(`ClientRequest/${e.command}`,((t,r)=>n(this,void 0,void 0,(function*(){const n=new o.Response(e);try{o.logger.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),e.command in this._debugAdapter?(r.addTelemetryProperty("requestType",e.type),n.body=yield this._debugAdapter[e.command](e.arguments,r,e.seq),this.sendResponse(n)):(t("The debug adapter doesn't recognize this command"),this.sendUnknownCommandResponse(n,e.command))}catch(r){this.isEvaluateRequest(e.command,r)||t(r),this.failedRequest(e.command,n,r)}}))))}reportTelemetry(e,t){return n(this,void 0,void 0,(function*(){const r=process.hrtime(),n=Date.now(),i="ClientRequest/initialize"===e||"ClientRequest/launch"===e||"ClientRequest/attach"===e,o={},c=new s.TelemetryPropertyCollector;i&&this.events.emitStepStarted(e);let l=!1;const u=()=>{const t=a.calculateElapsedTime(r);o.timeTakenInMilliseconds=t.toString(),i?this.events.emitStepCompleted(e):this.events.emitRequestCompleted(e,n,t),Object.assign(o,c.getProperties()),s.telemetry.reportEvent(e,o)};yield t((e=>{l=!0,o.successful="false",o.exceptionType="firstChance",a.fillErrorDetails(o,e),u()}),c),l||(o.successful="true",u())}))}isEvaluateRequest(e,t){return!l(t)&&"evaluate"===e}failedRequest(e,t,r){if(l(r))return void this.sendErrorResponse(t,r);if(this.isEvaluateRequest(e,r))return t.message=r?r.message:"Unknown error",t.success=!1,void this.sendResponse(t);const n=u(r)?r.message+": "+r.data:r.message||r.stack,i=u(r)?n:r.stack||r.message;o.logger.error(`Error processing "${e}": ${i}`),this.sendErrorResponse(t,1104,'[{_extensionName}] Error processing "{_requestType}": {_stack}',{_extensionName:this._extensionName,_requestType:e,_stack:n},o.ErrorDestination.Telemetry)}sendUnknownCommandResponse(e,t){this.sendErrorResponse(e,1014,`[${this._extensionName}] Unrecognized request: ${t}`,null,o.ErrorDestination.Telemetry)}reportTimingsWhileStartingUpIfNeeded(e,t){if(!this.haveTimingsWhileStartingUpBeenReported){const r=this.reporter.generateReport(),n={RequestedContentWasDetected:e.toString()};for(const e in r)n[e]=JSON.stringify(r[e]);e||void 0===t||(n.RequestedContentWasNotDetectedReason=t),s.telemetry.reportEvent("report-start-up-timings",n),this.haveTimingsWhileStartingUpBeenReported=!0}}configureExecutionTimingsReporting(){this.reporter.subscribeTo(this.events),this._debugAdapter.events.once(d.FinishedStartingUpEventName,(e=>{this.reportTimingsWhileStartingUpIfNeeded(!e||e.requestedContentWasDetected,e&&e.reasonForNotDetected)})),setTimeout((()=>this.reportTimingsWhileStartingUpIfNeeded(!1,"timeout")),this._readyForUserTimeoutInMilliseconds)}shutdown(){process.removeAllListeners("uncaughtException"),process.removeAllListeners("unhandledRejection"),this.reportTimingsWhileStartingUpIfNeeded(!1,"shutdown"),super.shutdown()}sendResponse(e){const t=o.logger.verbose;try{o.logger.verbose=r=>{if(e&&"source"===e.command&&e.body&&e.body.content){const r=Object.assign({},e);return r.body=Object.assign({},e.body),r.body.content="<removed script source for logs>",t.call(o.logger,`To client: ${JSON.stringify(r)}`)}return t.call(o.logger,r)},super.sendResponse(e)}finally{o.logger.verbose=t}}}d.FinishedStartingUpEventName="finishedStartingUp",t.ChromeDebugSession=d},8597:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(6665),o=r(3138),s=r(7992),a=r(4200).loadMessageBundle(__filename);class c{constructor(e,t){this._major=e,this._minor=t}static parse(e){const t=e.split("."),r=parseInt(t[0],10),n=parseInt(t[1],10);return new c(r,n)}static unknownVersion(){return new c(0,0)}isAtLeastVersion(e,t){return this._major>e||this._major===e&&this._minor>=t}}t.Version=c;class l{constructor(e,t){this.protocol=e,this.browser=t}}function u(e){return e.replace(/"title": "[^"]+",?/,"")}t.TargetVersions=l,t.ChromeTargetDiscovery=class{constructor(e,t){this.events=new o.StepProgressEventsEmitter,this.logger=e,this.telemetry=t}getTarget(e,t,r,i){return n(this,void 0,void 0,(function*(){const n=yield this.getAllTargets(e,t,r,i);n.length>1&&this.logger.log("Warning: Found more than one valid target page. Attaching to the first one. Available pages: "+JSON.stringify(n.map((e=>e.url))));const o=n[0];return this.logger.verbose(`Attaching to target: ${JSON.stringify(o)}`),this.logger.verbose(`WebSocket Url: ${o.webSocketDebuggerUrl}`),o}))}getAllTargets(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=yield this._getTargets(e,t);return this.telemetry.reportEvent("targetCount",{numTargets:n.length}),n.length?this._getMatchingTargets(n,r,o):i.errP(a(0,null))}))}_getVersionData(e,t){return n(this,void 0,void 0,(function*(){const r=`http://${e}:${t}/json/version`;this.logger.log(`Getting browser and debug protocol version via ${r}`);const n=yield i.getURL(r,{headers:{Host:"localhost"}}).catch((e=>this.logger.log(`There was an error connecting to ${r} : ${e.message}`)));try{if(n){const e=JSON.parse(n),t=e["Protocol-Version"],r=e.Browser;this.logger.log(`Got browser version: ${r}`),this.logger.log(`Got debug protocol version: ${t}`);const i="Chrome/";let o=c.unknownVersion();if(r.startsWith(i)){const e=r.substr(i.length);o=c.parse(e)}return this.telemetry.reportEvent("targetDebugProtocolVersion",{debugProtocolVersion:e["Protcol-Version"]}),new l(c.parse(t),o)}}catch(e){this.logger.log(`Didn't get a valid response for /json/version call. Error: ${e.message}. Response: ${n}`)}return new l(c.unknownVersion(),c.unknownVersion())}))}_getTargets(e,t){return n(this,void 0,void 0,(function*(){const r=this._getVersionData(e,t);this.events.emitStepStarted("Attach.RequestDebuggerTargetsInformation");const n=e=>(this.logger.log(`Discovering targets via ${e}`),i.getURL(e,{headers:{Host:"localhost"}})),o=yield n(`http://${e}:${t}/json/list`).catch((()=>n(`http://${e}:${t}/json`))).catch((e=>i.errP(a(1,null,e.message))));let s;this.events.emitStepStarted("Attach.ProcessDebuggerTargetsInformation");try{s=JSON.parse(o)}catch(e){try{s=JSON.parse(u(o))}catch(e){return i.errP(a(2,null,e.message,o))}}return Array.isArray(s)?s.map((n=>(this._fixRemoteUrl(e,t,n),n.version=r,n))):i.errP(a(3,null,o))}))}_getMatchingTargets(e,t,r){let n=t?e.filter(t):e;if(n=r?s.getMatchingTargets(n,r):n,!n.length)throw new Error(a(4,null,r,JSON.stringify(e.map((e=>e.url)))));const i=n.filter((e=>!!e.webSocketDebuggerUrl));if(!i.length)throw new Error(a(5,null,n[0].url));return i}_fixRemoteUrl(e,t,r){if(r.webSocketDebuggerUrl){const n=r.webSocketDebuggerUrl.match(/ws:\/\/([^/]+)\/?/);if(n){const i=`${e}:${t}`;r.webSocketDebuggerUrl=r.webSocketDebuggerUrl.replace(n[1],i)}}return r}},t.removeTitleProperty=u},7992:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(7016),o=r(6928),s=r(8063),a=r(6665),c=r(6665),l=r(6461),u=r(9278),d=r(3201);function h(e,t){if(!t)return"";if(!e||!e.startsWith("/"))return"";const r=Object.keys(t).sort(((e,t)=>t.length-e.length));for(let n of r){if(!n)continue;const r=t[n];if("/"!==n[0]&&(s.logger.log(`PathMapping keys should be absolute: ${n}`),n="/"+n),p(n,e))return f(n,r,e)}return""}function p(e,t){return e===t||(e.endsWith("/")||(e+="/"),t.startsWith(e))}function f(e,t,r){const n=decodeURIComponent(r.substring(e.length));return n?a.properJoin(t,n):t}t.applyPathMappingsToTargetUrlPath=h,t.applyPathMappingsToTargetUrl=function(e,t){const r=i.parse(e);return r.protocol&&!r.protocol.startsWith("file")&&r.pathname?h(r.pathname,t):""},t.targetUrlToClientPath=function(e,t){return n(this,void 0,void 0,(function*(){if(!e)return"";const r=a.canonicalizeUrl(e);if(a.isFileUrl(e)){if(yield a.exists(r))return r;const t=a.fileUrlToNetworkPath(e);if(t!==e&&(yield a.exists(t)))return t}let n=i.parse(r).pathname;if(!n||"/"===n)return"";const o=n.replace(/^\//,"").split(/[\/\\]/);for(;o.length>0;){const e=h("/"+o.join("/"),t);if(l.isInternalRemotePath(e))return e;if(e&&(yield a.exists(e)))return a.canonicalizeUrl(e);o.shift()}return""}))},t.remoteObjectToValue=function(e,t=!0){let r,n="";if(e)if("object"===e.type)"null"===e.subtype?n="null":(r=e.objectId,n=e.description);else if("undefined"===e.type)n="undefined";else if("function"===e.type){const t=e.description.indexOf("{");if(t>=0)n=e.description.substring(0,t)+"{ … }";else{const t=e.description.indexOf("=>");n=t>=0?e.description.substring(0,t+2)+" …":e.description}}else n=void 0===e.value||"number"===e.type?e.description:t?JSON.stringify(e.value):e.value;return{value:n,variableHandleRef:r}},t.getMatchingTargets=function(e,t){const r=e=>(e=e.toLowerCase(),a.isFileUrl(e)?e=a.fileUrlToPath(e):a.isURL(e)&&e.indexOf("://")>=0&&(e=e.substr(e.indexOf("://")+3)),e.endsWith("/")&&(e=e.substr(0,e.length-1)),e);t=r(t),t=a.escapeRegexSpecialChars(t,"/*").replace(/\*/g,".*");const n=new RegExp("^"+t+"$","g");return e.filter((e=>!!r(e.url).match(n)))};const m="__proto__",g=/^[0-9]+$/;function y(e){let t;return t=e.exception?e.exception.description||"Error: "+e.exception.value:e.text,t||""}t.compareVariableNames=function(e,t){if(e===m)return 1;if(t===m)return-1;const r=!!e.match(g),n=!!t.match(g);return r&&!n?1:!r&&n?-1:r&&n?parseInt(e,10)-parseInt(t,10):e.localeCompare(t)},t.remoteObjectToCallArgument=function(e){return{objectId:e.objectId,unserializableValue:e.unserializableValue,value:e.value}},t.descriptionFromExceptionDetails=y,t.errorMessageFromExceptionDetails=function(e){let t=y(e);const r=t.indexOf("\n");return r>=0&&(t=t.substr(0,r)),t},t.getEvaluateName=function(e,t){if(!e)return t;let r;return r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(t)?"."+t:/^\d+$/.test(t)?`[${t}]`:`[${JSON.stringify(t)}]`,e+r},t.selectBreakpointLocation=function(e,t,r){for(let e=r.length-1;e>=0;e--)if(r[e].columnNumber<=t)return r[e];return r[0]},t.EVAL_NAME_PREFIX="VM",t.isEvalScript=function(e){return e.startsWith(t.EVAL_NAME_PREFIX)},t.getUrlRegexForBreakOnLoad=function(e){const t=o.parse(e).base,r=o.parse(t).name;return".*[\\\\\\/]"+c.pathToRegex(r)+"([^A-z^0-9].*)?$"},t.isPortInUse=function(e,t="127.0.0.1",r=400){return n(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{const o=new u.Socket;function s(e){return()=>{n(e),o.removeAllListeners(),o.destroy()}}o.setTimeout(r),o.on("connect",s(!0)),o.on("timeout",s(!1)),o.on("error",s(!1)),o.connect(e,t)}))}))},t.getLaunchedPort=function(e){return n(this,void 0,void 0,(function*(){const t=o.join(e,"DevToolsActivePort");try{const e=yield a.readFileP(t,"utf-8"),[r]=e.split("\n"),n=parseInt(r,10);return isNaN(n)?Promise.reject(d.activePortFileContentsInvalid(t,e)):n}catch(t){return Promise.reject(d.failedToReadPortFromUserDataDir(e,t))}}))}},7254:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2520),i=r(7414);function o(e,t){if(!e.length||e[0].objectId)return e;let r;const n=e.shift();let o=i.getRemoteObjectPreview(n,!1)+"";r="string"!==n.type||t?[]:(o.match(/\%[sidfoOc]/g)||[]).map((e=>e[1]));const a=[],c=e=>{"string"==typeof e&&a.push({type:"string",value:e})};for(let t=0;t<e.length;t++){const n=e[t],i=r.shift(),l=s(i,n);if(o=o||"","string"==typeof l)i?o=o.replace("%"+i,l):o+=o?" "+l:l;else if(i){const e=o.indexOf("%"+i),t=o.slice(0,e);t&&c(t),o=o.slice(e+2),a.push(l)}else c(o),o=null,a.push(l)}return c(o),a}function s(e,t){const r=String(void 0!==t.value?t.value:t.description);return"s"===e?r:["i","d"].indexOf(e)>=0?Math.floor(+r)+"":"f"===e?+r+"":"c"===e?function(e){const t=/\s*(.*?)\s*:\s*(.*?)\s*(?:;|$)/g;let r,n=t.exec(e.value);for(;null!=n;){if(3===n.length&&(void 0===r&&(r=""),n[2]))switch(n[1]){case"color":const e=c(n[2]);e&&(r+=`;${e}`);break;case"background":const t=c(n[2]);t&&(r+=`;${t+10}`);break;case"font-weight":"bold"===n[2]&&(r+=";1");break;case"text-decoration":"underline"===n[2]&&(r+=";4")}n=t.exec(e.value)}return"string"==typeof r&&(r=`[0${r}m`),r}(t):t.objectId?t:r}function a(e){return e?e.callFrames.map((e=>`    at ${e.functionName||(e.url?"(anonymous)":"(eval)")} (${e.url?e.url:"eval"}:${e.lineNumber+1}:${e.columnNumber})`)).join("\n"):""}function c(e){try{return new n(e).ansi16().object().ansi16}catch(e){}}t.formatExceptionDetails=function(e){return e.exception?e.exception.className&&e.exception.className.endsWith("Error")&&e.exception.description||`Error: ${i.getRemoteObjectPreview(e.exception)}\n${a(e.stackTrace)}`:`${e.text||"Uncaught Error"}\n${a(e.stackTrace)}`},t.clearConsoleCode="[2J",t.formatConsoleArguments=function(e,r,n){switch(e){case"log":case"debug":case"info":case"error":case"warning":case"dir":case"timeEnd":case"count":r=o(r);break;case"assert":const e=r.length?o(r,!0):[];r=[{type:"string",value:`Assertion failed: ${e[0]&&"string"===e[0].type?e.shift().value:""}\n`+a(n)},...e];break;case"startGroup":case"startGroupCollapsed":let i="‹Start group›";const s=o(r),c=s.find((e=>e&&"string"===e.type));c&&(i+=": "+c.value),r=[{type:"string",value:i},...s];break;case"endGroup":r=[{type:"string",value:"‹End group›"}];break;case"trace":r=[{type:"string",value:"console.trace()\n"+a(n)}];break;case"clear":r=[{type:"string",value:t.clearConsoleCode}];break;default:return null}return{args:r,isError:"assert"===e||"error"===e}}},2959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8063);function i(e){const t=e.split(".");return 2===t.length?t[0]:(o(`The method ${e} didn't have exactly two parts`),"Unknown")}function o(e){throw n.logger.error("CRDP Multiplexor - CRITICAL-ERROR: "+e),new Error(e)}t.CRDPMultiplexor=class{constructor(e){this._wrappedLikeSocket=e,this._channels=[],this._wrappedLikeSocket.on("message",(e=>this.onMessage(e)))}onMessage(e){const t=JSON.parse(e);void 0!==t.id?this.onResponseMessage(t,e):t.method?this.onDomainNotification(t,e):o(`Message didn't have id nor method: ${e}`)}onResponseMessage(e,t){const r=this._channels[(n=e.id,n%10)];var n;r?(e.id=function(e){return Math.floor(e/10)}(e.id),t=JSON.stringify(e),r.callMessageCallbacks(t)):o(`Didn't find channel for message with id: ${e.id} and data: <${t}>`)}onDomainNotification(e,t){const r=i(e.method);for(const e of this._channels)e.callDomainMessageCallbacks(r,t)}addChannel(e){if(this._channels.length>=10)throw new Error("Only 10 channels are supported");const t=new s(e,this._channels.length,this);return this._channels.push(t),t}send(e,t){const r=JSON.parse(t);var n;void 0!==r.id?(r.id=(n=e.id,10*r.id+n),t=JSON.stringify(r)):o(`Channel [${e.name}] sent a message without an id: ${t}`),this._wrappedLikeSocket.send(t)}addListenerOfNonMultiplexedEvent(e,t){this._wrappedLikeSocket.on(e,t)}removeListenerOfNonMultiplexedEvent(e,t){this._wrappedLikeSocket.removeListener(e,t)}};class s{constructor(e,t,r){this.name=e,this.id=t,this._multiplexor=r,this._messageCallbacks=[],this._enabledDomains={},this._pendingMessagesForDomain={}}callMessageCallbacks(e){this._messageCallbacks.forEach((t=>t(e)))}callDomainMessageCallbacks(e,t){this._enabledDomains[e]?this.callMessageCallbacks(t):null!==this._pendingMessagesForDomain&&this.storeMessageForLater(e,t)}storeMessageForLater(e,t){let r=this._pendingMessagesForDomain[e];void 0===r&&(this._pendingMessagesForDomain[e]=[],r=this._pendingMessagesForDomain[e]),r.push(t)}send(e){const t=JSON.parse(e).method,r=t&&t.endsWith(".enable");let n;r&&(n=i(t),this._enabledDomains[n]=!0),this._multiplexor.send(this,e),r&&this.sendUnsentPendingMessages(n)}sendUnsentPendingMessages(e){if(null!==this._pendingMessagesForDomain){const t=this._pendingMessagesForDomain[e];void 0!==t&&this._messageCallbacks.length&&(n.logger.log(`CRDP Multiplexor - Sending pending messages of domain ${e}(Count = ${t.length})`),delete this._pendingMessagesForDomain[e],t.forEach((t=>{this.callDomainMessageCallbacks(e,t)})))}}discardUnsentPendingMessages(){n.logger.log(`CRDP Multiplexor - Discarding unsent pending messages for domains: ${Object.keys(this._pendingMessagesForDomain).join(", ")}`),this._pendingMessagesForDomain=null}on(e,t){"message"===e?(0===this._messageCallbacks.length&&setTimeout((()=>this.discardUnsentPendingMessages()),s.timeToPreserveMessagesInMillis),this._messageCallbacks.push(t)):this._multiplexor.addListenerOfNonMultiplexedEvent(e,t)}removeListener(e,t){if("message"===e){const e=this._messageCallbacks.indexOf(t);this._messageCallbacks.splice(e,1)}else this._multiplexor.removeListenerOfNonMultiplexedEvent(e,t)}}s.timeToPreserveMessagesInMillis=6e4,t.CRDPChannel=s},4621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8063),i=r(4084);t.WebSocketToLikeSocketProxy=class{constructor(e,t){this._port=e,this._socket=t,this._currentlyOpenedWebSocket=null}start(){this._server=new i.Server({port:this._port},(()=>{n.logger.log(`CRDP Proxy listening on: ${this._port}`)})),this._socket.on("close",(()=>{n.logger.log("CRDP Proxy shutting down"),this._server.close((()=>(null!==this._currentlyOpenedWebSocket&&(this._currentlyOpenedWebSocket.close(),n.logger.log("CRDP Proxy succesfully shut down")),{})))})),this._server.on("connection",(e=>{if(null!==this._currentlyOpenedWebSocket)throw e.close(),Error(`CRDP Proxy: Only one websocket is supported by the server on port ${this._port}`);this._currentlyOpenedWebSocket=e,n.logger.log("CRDP Proxy accepted a new connection"),e.on("message",(e=>{n.logger.log(`CRDP Proxy - Client to Target: ${e}`),this._socket.send(e.toString())})),e.on("close",(()=>{n.logger.log("CRDP Proxy - Client closed the connection"),this._currentlyOpenedWebSocket=null})),this._socket.on("message",(t=>{n.logger.log(`CRDP Proxy - Target to Client: ${t}`),e.send(t)}))}))}}},7884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.line=e.line,this.column=e.column,this.hitCondition=e.hitCondition,e.logMessage?(this.condition=function(e){e=e.replace("%","%%");const t=[];let i=e.replace(n,((e,r)=>{const n=r.trim();return n?(t.push(`(${n})`),"%O"):""}));i=i.replace("'","\\'");return`console.log('${i}'${t.length?`, ${t.join(", ")}`:""});\n//# sourceURL=${r.LOGPOINT_URL}`}(e.logMessage),e.condition&&(this.condition=`(${e.condition}) && ${this.condition}`)):e.condition&&(this.condition=e.condition)}}r.LOGPOINT_URL="vscode.logpoint.js",t.InternalSourceBreakpoint=r,t.stackTraceWithoutLogpointFrame=function(e){return function(e){return e&&e.callFrames.length>0&&e.callFrames[0].url===r.LOGPOINT_URL}(e)?Object.assign({},e,{callFrames:e.callFrames.slice(1)}):e};const n=/{(.*?)}/g},1091:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8063),o=r(6665);t.ScriptSkipper=class{constructor(e,t){this._chromeConnection=e,this._transformers=t,this._skipFileStatuses=new Map,this._blackboxedRegexes=[]}get chrome(){return this._chromeConnection.api}init(e,t){let r=[];e&&(r=e.filter((e=>!e.startsWith("!")||(i.logger.warn(`Warning: skipFiles entries starting with '!' aren't supported and will be ignored. ("${e}")`),!1))).map((e=>o.pathGlobToBlackboxedRegex(e)))),t&&(r=r.concat(t)),r.length&&(this._blackboxedRegexes=r.map((e=>new RegExp(e,"i"))),this.refreshBlackboxPatterns())}toggleSkipFileStatus(e,t,r){return n(this,void 0,void 0,(function*(){e.path&&(e.path=t.displayPathToRealPath(e.path));const n=e.path||t.fakeUrlForSourceReference(e.sourceReference),o=yield r.sourceMapTransformer.getGeneratedPathFromAuthoredPath(n);if(!o)return void i.logger.log(`Can't toggle the skipFile status for: ${n} - haven't seen it yet.`);const s=yield r.sourceMapTransformer.allSources(o);if(o===n&&s.length)return void i.logger.log(`Can't toggle skipFile status for ${n} - it's a script with a sourcemap`);const a=!this.shouldSkipSource(n);i.logger.log(`Setting the skip file status for: ${n} to ${a}`),this._skipFileStatuses.set(n,a);const c=r.pathTransformer.getTargetPathFromClientPath(o)||o,l=t.getScriptByUrl(c);yield this.resolveSkipFiles(l,o,s,!0),a?this.makeRegexesSkip(l.url):this.makeRegexesNotSkip(l.url)}))}resolveSkipFiles(e,t,r,i){return n(this,void 0,void 0,(function*(){if(r&&r.length){const n=this.shouldSkipSource(e.url),o=[];let s=n;for(let e of r){let r=this.shouldSkipSource(e);if("boolean"!=typeof r&&(r=n),this._skipFileStatuses.set(e,r),r&&!s||!r&&s){const r=(yield this._transformers.sourceMapTransformer.allSourcePathDetails(t)).find((t=>t.inferredPath===e));r.startPosition&&o.push({lineNumber:r.startPosition.line,columnNumber:r.startPosition.column}),s=!s}}(o.length||i)&&(n&&o.splice(0,0,{lineNumber:0,columnNumber:0}),0===o[0].lineNumber&&0===o[0].columnNumber||(o[0]={lineNumber:0,columnNumber:0}),yield this.chrome.Debugger.setBlackboxedRanges({scriptId:e.scriptId,positions:[]}).catch((()=>this.warnNoSkipFiles())),o.length&&this.chrome.Debugger.setBlackboxedRanges({scriptId:e.scriptId,positions:o}).catch((()=>this.warnNoSkipFiles())))}else{const r=yield this.getSkipStatus(t),n=this.matchesSkipFilesPatterns(t);if("boolean"==typeof r&&r!==n){const t=r?[{lineNumber:0,columnNumber:0}]:[];this.chrome.Debugger.setBlackboxedRanges({scriptId:e.scriptId,positions:t}).catch((()=>this.warnNoSkipFiles()))}}}))}makeRegexesNotSkip(e){let t=!1;this._blackboxedRegexes=this._blackboxedRegexes.map((r=>{const n=o.makeRegexNotMatchPath(r,e);return t=t||n!==r,n})),t&&this.refreshBlackboxPatterns()}makeRegexesSkip(e){let t=!1;this._blackboxedRegexes=this._blackboxedRegexes.map((r=>{const n=o.makeRegexMatchPath(r,e);return t=t||n!==r,n})),t||this._blackboxedRegexes.push(new RegExp(o.pathToRegex(e),"i")),this.refreshBlackboxPatterns()}refreshBlackboxPatterns(){this.chrome.Debugger.setBlackboxPatterns({patterns:this._blackboxedRegexes.map((e=>e.source))}).catch((()=>this.warnNoSkipFiles()))}shouldSkipSource(e){const t=this.getSkipStatus(e);return"boolean"==typeof t?t:!!this.matchesSkipFilesPatterns(e)||void 0}matchesSkipFilesPatterns(e){return this._blackboxedRegexes.some((t=>t.test(e)))}getSkipStatus(e){if(this._skipFileStatuses.has(e))return this._skipFileStatuses.get(e)}warnNoSkipFiles(){i.logger.log("Warning: this runtime does not support skipFiles")}}},4211:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(6665),o=r(7992),s=r(9767),a=r(6928),c=r(6461);t.ScriptContainer=class{constructor(){this._scriptsById=new Map,this._scriptsByUrl=new Map,this._sourceHandles=new i.ReverseHandles}get scriptsByIdMap(){return this._scriptsById}get loadedScripts(){return this._scriptsById.values()}getScriptByUrl(e){const t=i.canonicalizeUrl(e);return this._scriptsByUrl.get(t)||this._scriptsByUrl.get(i.fixDriveLetter(t))}reset(){this._scriptsById=new Map,this._scriptsByUrl=new Map}add(e){this._scriptsById.set(e.scriptId,e),this._scriptsByUrl.set(i.canonicalizeUrl(e.url),e)}getScriptById(e){return this._scriptsById.get(e)}getAllScriptsString(e,t){const r=Array.from(this._scriptsByUrl.keys()).sort();return Promise.all(r.map((r=>this.getOneScriptString(r,e,t)))).then((e=>e.join("\n")))}getOneScriptString(e,t,r){let n="› "+e;const i=t.getClientPathFromTargetPath(e);return i&&i!==e&&(n+=` (${i})`),r.allSourcePathDetails(i||e).then((e=>{let t=e.map((e=>`    - ${e.originalPath} (${e.inferredPath})`)).join("\n");return e.length&&(t="\n"+t),n+t}))}getSourceReferenceForScriptId(e){return this._sourceHandles.lookupF((t=>t.scriptId===e))||this._sourceHandles.create({scriptId:e})}getSourceReferenceForScriptPath(e,t){return this._sourceHandles.lookupF((t=>t.mappedPath===e))||this._sourceHandles.create({contents:t,mappedPath:e})}scriptToSource(e,t,r){return n(this,void 0,void 0,(function*(){const n=this.getSourceReferenceForScriptId(e.scriptId),o=i.canonicalizeUrl(e.url),s=this.realPathToDisplayPath(o),l=yield i.existsAsync(o),u={name:a.basename(s),path:s,sourceReference:l?void 0:n,origin:t};return r?c.mapInternalSourceToRemoteClient(u,r):u}))}getSource(e){return this._sourceHandles.get(e)}fakeUrlForSourceReference(e){const t=this._sourceHandles.get(e);return`${o.EVAL_NAME_PREFIX}${t.scriptId}`}displayNameForSourceReference(e){const t=this._sourceHandles.get(e);return t&&this.displayNameForScriptId(t.scriptId)||e+""}displayNameForScriptId(e){return`${o.EVAL_NAME_PREFIX}${e}`}realPathToDisplayPath(e){return o.isEvalScript(e)?`${s.ChromeDebugAdapter.EVAL_ROOT}/${e}`:e}displayPathToRealPath(e){return e.startsWith(s.ChromeDebugAdapter.EVAL_ROOT)?e.substr(s.ChromeDebugAdapter.EVAL_ROOT.length+1):e}}},5492:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SmartStepper=class{constructor(e){this._enabled=e}shouldSmartStep(e,t,n){return r(this,void 0,void 0,(function*(){if(!this._enabled)return!1;const r=t.getClientPathFromTargetPath(e.source.path)||e.source.path;return!(yield n.mapToAuthored(r,e.line,e.column))&&!!(yield n.allSources(r)).length}))}}},8377:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8063),o=r(7992),s=r(6665),a=r(6928),c=r(4200),l=r(3201),u=r(7414);let d=c.loadMessageBundle(__filename);t.StackFrames=class{constructor(){this._frameHandles=new i.Handles}reset(){this._frameHandles.reset()}getFrame(e){return this._frameHandles.get(e)}getStackTrace({args:e,scripts:t,originProvider:r,scriptSkipper:i,smartStepper:s,transformers:a,pauseEvent:c}){return n(this,void 0,void 0,(function*(){let l=c.callFrames.map((e=>this.callFrameToStackFrame(e,t,r))).concat(this.asyncFrames(c.asyncStackTrace,t,r));const u=l.length;"number"==typeof e.startFrame&&(l=l.slice(e.startFrame)),"number"==typeof e.levels&&(l=l.slice(0,e.levels));const h={stackFrames:l,totalFrames:u};return yield a.pathTransformer.stackTraceResponse(h),yield a.sourceMapTransformer.stackTraceResponse(h),yield Promise.all(h.stackFrames.map((e=>n(this,void 0,void 0,(function*(){const r=e.isSourceMapped;if(delete e.isSourceMapped,!e.source)return;const n=e=>d(0,null,e);e.source.path&&i.shouldSkipSource(e.source.path)?(e.source.origin=(e.source.origin?e.source.origin+" ":"")+n("skipFiles"),e.source.presentationHint="deemphasize"):!r&&(yield s.shouldSmartStep(e,a.pathTransformer,a.sourceMapTransformer))&&(e.source.origin=(e.source.origin?e.source.origin+" ":"")+n("smartStep"),e.presentationHint="deemphasize"),e.source.path&&e.source.sourceReference&&(e.source.path=t.realPathToDisplayPath(e.source.path)),e.source.path&&o.isEvalScript(e.source.path)&&(e.source.path=void 0,e.source.name=t.displayNameForSourceReference(e.source.sourceReference))}))))),a.lineColTransformer.stackTraceResponse(h),h.stackFrames.forEach((t=>t.name=this.formatStackFrameName(t,e.format))),h}))}getScopes({args:e,scripts:t,transformers:r,variables:n,pauseEvent:i,currentException:o}){const s=this._frameHandles.get(e.frameId);if(!s||!s.location||!s.callFrameId)throw l.stackFrameNotValid();if(!s.callFrameId)return{scopes:[]};const a=t.getScriptById(s.location.scriptId),c=a&&a.url,h=c&&r.pathTransformer.getClientPathFromTargetPath(c)||c,p=s.scopeChain.map(((e,t)=>{const r=0===t&&s.this,i=0===t&&s.returnValue,o=n.createHandle(new u.ScopeContainer(s.callFrameId,t,e.object.objectId,r,i)),a={name:e.type.substr(0,1).toUpperCase()+e.type.substr(1),variablesReference:o,expensive:"global"===e.type};return e.startLocation&&e.endLocation&&(a.column=e.startLocation.columnNumber,a.line=e.startLocation.lineNumber,a.endColumn=e.endLocation.columnNumber,a.endLine=e.endLocation.lineNumber),a}));o&&0===this.lookupFrameIndex(e.frameId,i)&&p.unshift({name:d(1,null),variablesReference:n.createHandle(u.ExceptionContainer.create(o))});const f={scopes:p};return h&&(r.sourceMapTransformer.scopesResponse(h,f),r.lineColTransformer.scopeResponse(f)),f}mapCallFrame(e,t,r,i){return n(this,void 0,void 0,(function*(){const n=this.runtimeCFToDebuggerCF(e),o=this.callFrameToStackFrame(n,r,i);return yield t.pathTransformer.fixSource(o.source),yield t.sourceMapTransformer.fixSourceLocation(o),t.lineColTransformer.convertDebuggerLocationToClient(o),o}))}mapFormattedException(e,t){return n(this,void 0,void 0,(function*(){const r=e.split(/\r?\n/);for(let e=0,n=r.length;e<n;++e){const n=r[e].match(/^\s+at (.*?)\s*\(?([^ ]+):(\d+):(\d+)\)?$/);if(!n)continue;const i=n[2],o=parseInt(n[3],10),a=o-1,c=parseInt(n[4],10),l=t.pathTransformer.getClientPathFromTargetPath(i),u=yield t.sourceMapTransformer.mapToAuthored(l||i,a,c);if(u&&u.source&&s.isNumber(u.line)&&s.isNumber(u.column)&&s.existsSync(u.source))t.lineColTransformer.mappedExceptionStack(u),r[e]=r[e].replace(`${i}:${o}:${c}`,`${u.source}:${u.line}:${u.column}`);else if(l&&l!==i){const n={line:a,column:c};t.lineColTransformer.mappedExceptionStack(n),r[e]=r[e].replace(`${i}:${o}:${c}`,`${l}:${n.line}:${n.column}`)}}return r.join("\n")}))}asyncFrames(e,t,r){if(e){const n=e.callFrames.map((e=>this.runtimeCFToDebuggerCF(e))).map((e=>this.callFrameToStackFrame(e,t,r)));return n.unshift({id:this._frameHandles.create(null),name:`[ ${e.description} ]`,source:void 0,line:void 0,column:void 0,presentationHint:"label"}),n.concat(this.asyncFrames(e.parent,t,r))}return[]}runtimeCFToDebuggerCF(e){return{callFrameId:void 0,scopeChain:void 0,this:void 0,location:{lineNumber:e.lineNumber,columnNumber:e.columnNumber,scriptId:e.scriptId},url:e.url,functionName:e.functionName}}formatStackFrameName(e,t){let r=e.name;return e.source&&t&&(t.module&&(r+=` [${e.source.name}]`),t.line&&(r+=` Line ${e.line}`)),r}callFrameToStackFrame(e,t,r){const{location:n,functionName:i}=e,s=n.lineNumber,c=n.columnNumber,l=t.getScriptById(n.scriptId);try{const n=t.getSourceReferenceForScriptId(l.scriptId),o={name:a.basename(l.url),path:l.url,sourceReference:n,origin:r(l.url)},u=i||(l.url?"(anonymous function)":"(eval code)");return{id:this._frameHandles.create(e),name:u,source:o,line:s,column:c}}catch(e){const t=`${o.EVAL_NAME_PREFIX}_Unknown`;return{id:this._frameHandles.create({}),name:t,source:{name:t,path:t},line:s,column:c}}}lookupFrameIndex(e,t){const r=this._frameHandles.get(e);return r&&r.callFrameId&&t?t.callFrames.findIndex((e=>e.callFrameId===r.callFrameId)):-1}}},3884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8063),i=r(6665),o=r(4200).loadMessageBundle(__filename);class s extends n.StoppedEvent{constructor(e,t,r){switch(super(e,t,r&&r.description&&i.firstLine(r.description)),e){case"step":this.body.description=o(0,null);break;case"breakpoint":this.body.description=o(1,null);break;case"exception":const e=r&&r.uncaught;this.body.description=o(void 0===e?2:e?3:4,null);break;case"pause":this.body.description=o(5,null);break;case"entry":this.body.description=o(6,null);break;case"debugger_statement":this.body.description=o(7,null);break;case"frame_entry":this.body.description=o(8,null);break;case"promise_rejection":this.body.description=o(9,null),this.body.reason="exception";break;default:this.body.description="Unknown pause reason"}}}t.StoppedEvent2=s},7414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8063),i=r(6665),o=r(7992);class s{constructor(e,t){this.objectId=e,this.evaluateName=t}expand(e,t,r,n){return e.getVariablesForObjectId(this.objectId,this.evaluateName,t,r,n)}setValue(e,t,r){return i.errP("setValue not supported by this variable type")}}t.BaseVariableContainer=s;class a extends s{setValue(e,t,r){return e.setPropertyValue(this.objectId,t,r)}}t.PropertyContainer=a,t.LoggedObjects=class extends s{constructor(e){super(void 0),this.args=e}expand(e,t,r,n){return Promise.all(this.args.map(((t,r)=>e.remoteObjectToVariable(""+r,t,void 0,!1,"repl"))))}},t.ScopeContainer=class extends s{constructor(e,t,r,n,i){super(r,""),this._thisObj=n,this._returnValue=i,this._frameId=e,this._origScopeIndex=t}expand(e,t,r,n){return super.expand(e,"all",r,n).then((t=>this._thisObj?this.insertRemoteObject(e,t,"this",this._thisObj):t)).then((t=>this._returnValue?this.insertRemoteObject(e,t,"Return value",this._returnValue):t))}setValue(e,t,r){return e.setVariableValue(this._frameId,this._origScopeIndex,t,r)}insertRemoteObject(e,t,r,n){return e.remoteObjectToVariable(r,n).then((e=>(t.unshift(e),t)))}};class c extends a{constructor(e,t){super(t.objectId,void 0),this._exception=t}static create(e){return e.objectId?new c(e.objectId,e):new l(e)}}t.ExceptionContainer=c;class l extends c{constructor(e){super("EXCEPTION_ID",e)}expand(e,t,r,n){const i={name:"Exception",value:this._exception};return e.propertyDescriptorToVariable(i).then((e=>[e]))}}function u(e){return!!e.match(/^\d+$/)}t.ExceptionValueContainer=l,t.isIndexedPropName=u;const d=50,h="…";function p(e){const t=void 0===e.value?`<${e.type}>`:function(e){return null!=e&&e.length>d?e.substr(0,d)+h:e}(e.value);return"string"===e.type?`"${t}"`:t}function f(e,t){const r=e.description||"";if("internal#location"===e.subtype)return"internal#location";if("null"===e.subtype)return"null";if("array"===e.subtype||"typedarray"===e.subtype)return function(e,t){let r=e.description;if(e.preview){const n="repl"===t?8:3,i=e.preview.properties.filter((e=>u(e.name))),o=i.slice(0,n).map(((e,t)=>({idx:parseInt(e.name,10),value:p(e)}))),s=[];for(let e=0;e<o.length;e++){const t=o[e],r=0===e?-1:o[e-1].idx;t.idx>r+1&&s.push(h),s.push(t.value)}let a=s.join(", ");(e.preview.overflow||i.length>n)&&(a+=", "+h),r+=` [${a}]`}return r}(e,t);if("error"===e.subtype){const e=r.indexOf("\n");return e>=0?r.substr(0,e):r}if("promise"===e.subtype&&e.preview){const t=e.preview.properties.filter((e=>"[[PromiseStatus]]"===e.name))[0];return t?r+" { "+t.value+" }":r}if("generator"===e.subtype&&e.preview){const t=e.preview.properties.filter((e=>"[[GeneratorStatus]]"===e.name))[0];return t?r+" { "+t.value+" }":r}return"object"===e.type&&e.preview?function(e,t){let r=e.description;if(e.preview){const n="repl"===t?8:3;let i=e.preview.properties.slice(0,n).map((e=>`${e.name||'""'}: ${p(e)}`)).join(", ");(e.preview.overflow||e.preview.properties.length>n)&&(i+=", …"),r+=` {${i}}`}return r}(e,t):r}function m(e,t){return void 0===e.value?e.description+"":"number"===e.type?e.description||""+e.value:"boolean"===e.type?""+e.value:t?`"${e.value}"`:e.value}function g(e,t){const r=e.description.indexOf("{");if(r>=0)return e.description.substring(0,r)+"{ … }";{const t=e.description.indexOf("=>");return t>=0?e.description.substring(0,t+2)+" …":e.description}}function y(e,t,r){return{name:e,value:t,variablesReference:0,evaluateName:o.getEvaluateName(r,e)}}t.getRemoteObjectPreview=function(e,t=!0,r){return e?"object"===e.type?f(e,r):"function"===e.type?g(e):m(e,t):""},t.getRemoteObjectPreview_object=f,t.getRemoteObjectPreview_primitive=m,t.getRemoteObjectPreview_function=g,t.VariableHandles=class{constructor(){this._variableHandles=new n.Handles(1),this._consoleVariableHandles=new n.Handles(1e5)}onPaused(){this._variableHandles.reset()}create(e,t="variables"){return this.getHandles(t).create(e)}get(e){return this._variableHandles.get(e)||this._consoleVariableHandles.get(e)}getHandles(e){return"repl"===e?this._consoleVariableHandles:this._variableHandles}},t.getCollectionNumPropsByPreview=function(e){return{indexedVariables:0,namedVariables:e.preview.properties.length+1}},t.getArrayNumPropsByPreview=function(e){let t=0;const r=e.preview.properties.filter((e=>u(e.name)));return r.length&&(t=parseInt(r[r.length-1].name,10)+1),{indexedVariables:t,namedVariables:e.preview.properties.length-r.length+2}},t.createPrimitiveVariableWithValue=y,t.createPropertyContainer=function(e,t){return new a(e.objectId,t)},t.createPrimitiveVariable=function(e,t,r,n){const i=y(e,m(t,n),r);return i.type=t.type,i},t.createFunctionVariable=function(e,t,r,n,s){let c;if(t.description){const e=t.description.indexOf("{");if(e>=0)c=t.description.substring(0,e)+"{ … }";else{const e=t.description.indexOf("=>");c=e>=0?t.description.substring(0,e+2)+" …":t.description}}else c="function() { … }";const l=o.getEvaluateName(s,e);return{name:e,value:c,type:i.uppercaseFirstLetter(t.type),variablesReference:n.create(new a(t.objectId,l),r),evaluateName:l}}},7643:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8063),o=r(7992),s=r(7414),a=r(7414),c=r(3201),l=r(6665);t.VariablesManager=class{constructor(e){this._chromeConnection=e,this._variableHandles=new a.VariableHandles}get chrome(){return this._chromeConnection.api}getVariables(e){if(!this.chrome)return l.errP(c.runtimeNotConnectedMsg);const t=this._variableHandles.get(e.variablesReference);return t?t.expand(this,e.filter,e.start,e.count).catch((e=>(i.logger.log("Error handling variables request: "+e.toString()),[]))).then((e=>({variables:e}))):Promise.resolve(void 0)}getVariablesForObjectId(e,t,r,n,i){return"number"==typeof n&&"number"==typeof i?this.getFilteredVariablesForObject(e,t,r,n,i):(r="indexed"===r?"all":r,Promise.all([this.getRuntimeProperties({objectId:e,ownProperties:!1,accessorPropertiesOnly:!0,generatePreview:!0}),this.getRuntimeProperties({objectId:e,ownProperties:!0,accessorPropertiesOnly:!1,generatePreview:!0})]).then((n=>{const i=new Map,o=new Map;n.forEach((e=>{e&&(e.result.forEach((e=>i.set(e.name,e))),e.internalProperties&&e.internalProperties.forEach((e=>{o.set(e.name,e)})))}));const a=[];return i.forEach((n=>{r&&"all"!==r&&s.isIndexedPropName(n.name)!==("indexed"===r)||a.push(this.propertyDescriptorToVariable(n,e,t))})),o.forEach((e=>{r&&"all"!==r&&s.isIndexedPropName(e.name)!==("indexed"===r)||a.push(Promise.resolve(this.internalPropertyDescriptorToVariable(e,t)))})),Promise.all(a)})).then((e=>e.sort(((e,t)=>o.compareVariableNames(e.name,t.name))))))}onPaused(){this._variableHandles.onPaused()}createHandle(e,t){return this._variableHandles.create(e,t)}setPropertyValue(e,t,r){const n=`function() { return this["${t}"] = ${r}; }`;return this.chrome.Runtime.callFunctionOn({objectId:e,functionDeclaration:n,silent:!0}).then((e=>{if(e.exceptionDetails){const t=o.errorMessageFromExceptionDetails(e.exceptionDetails);return Promise.reject(c.errorFromEvaluate(t))}return o.remoteObjectToValue(e.result).value}),(e=>Promise.reject(c.errorFromEvaluate(e.message))))}getRuntimeProperties(e){return this.chrome.Runtime.getProperties(e).catch((e=>{if(e.message.startsWith("Cannot find context with specified id"))return null;throw e}))}getFilteredVariablesForObject(e,t,r,n,i){const o="indexed"===r?"\n            function getIndexedVariables(start, count) {\n                var result = [];\n                for (var i = start; i < (start + count); i++) result[i] = this[i];\n                return result;\n            }":"\n            function getNamedVariablesFn(start, count) {\n                var result = [];\n                var ownProps = Object.getOwnPropertyNames(this);\n                for (var i = start; i < (start + count); i++) result[i] = ownProps[i];\n                return result;\n            }";return this.getFilteredVariablesForObjectId(e,t,o,r,n,i)}getFilteredVariablesForObjectId(e,t,r,n,i,a){return this.chrome.Runtime.callFunctionOn({objectId:e,functionDeclaration:r,arguments:[{value:i},{value:a}],silent:!0}).then((e=>{if(e.exceptionDetails){const t=o.errorMessageFromExceptionDetails(e.exceptionDetails);return Promise.reject(c.errorFromEvaluate(t))}return this.getVariablesForObjectId(e.result.objectId,t,n).then((e=>e.filter((e=>s.isIndexedPropName(e.name)))))}),(e=>Promise.reject(c.errorFromEvaluate(e.message))))}setVariable(e){const t=this._variableHandles.get(e.variablesReference);return t?t.setValue(this,e.name,e.value).then((e=>({value:e}))):Promise.reject(c.setValueNotSupported())}setVariableValue(e,t,r,n){let i;return this.chrome.Debugger.evaluateOnCallFrame({callFrameId:e,expression:n,silent:!0}).then((n=>{if(n.exceptionDetails){const e=o.errorMessageFromExceptionDetails(n.exceptionDetails);return Promise.reject(c.errorFromEvaluate(e))}{i=n.result;const s=o.remoteObjectToCallArgument(i);return this.chrome.Debugger.setVariableValue({callFrameId:e,scopeNumber:t,variableName:r,newValue:s})}}),(e=>Promise.reject(c.errorFromEvaluate(e.message)))).then((()=>o.remoteObjectToValue(i).value))}createObjectVariable(e,t,r,n){if("internal#location"===t.subtype)return Promise.resolve(a.createPrimitiveVariableWithValue(e,"internal#location",r));if("null"===t.subtype)return Promise.resolve(a.createPrimitiveVariableWithValue(e,"null",r));const i=a.getRemoteObjectPreview_object(t,n);let s;s="array"===t.subtype||"typedarray"===t.subtype?t.preview&&!t.preview.overflow?Promise.resolve(a.getArrayNumPropsByPreview(t)):"Buffer"===t.className?this.getBufferNumPropsByEval(t.objectId):this.getArrayNumPropsByEval(t.objectId):"set"===t.subtype||"map"===t.subtype?t.preview&&!t.preview.overflow?Promise.resolve(a.getCollectionNumPropsByPreview(t)):this.getCollectionNumPropsByEval(t.objectId):Promise.resolve({indexedVariables:void 0,namedVariables:void 0});const c=o.getEvaluateName(r,e),u=this._variableHandles.create(a.createPropertyContainer(t,c),n);return s.then((({indexedVariables:r,namedVariables:n})=>({name:e,value:i,type:l.uppercaseFirstLetter(t.type),variablesReference:u,indexedVariables:r,namedVariables:n,evaluateName:c})))}propertyDescriptorToVariable(e,t,r){return n(this,void 0,void 0,(function*(){if(e.get){const n="function remoteFunction(propName) { return this[propName]; }";let s;try{s=yield this.chrome.Runtime.callFunctionOn({objectId:t,functionDeclaration:n,arguments:[{value:e.name}]})}catch(t){return i.logger.error("Error evaluating getter for '{propDesc.name}' - {error.toString()}"),{name:e.name,value:t.toString(),variablesReference:0}}if(s.exceptionDetails){const t=o.errorMessageFromExceptionDetails(s.exceptionDetails);return i.logger.verbose("Exception thrown evaluating getter - "+t),{name:e.name,value:t,variablesReference:0}}return this.remoteObjectToVariable(e.name,s.result,r)}return e.set?{name:e.name,value:"setter",variablesReference:0}:this.internalPropertyDescriptorToVariable(e,r)}))}getArrayNumPropsByEval(e){return this.getNumPropsByEval(e,"function() { return [this.length, Object.keys(this).length - this.length + 2]; }")}getBufferNumPropsByEval(e){return this.getNumPropsByEval(e,"function() { return [this.length, 0]; }")}getCollectionNumPropsByEval(e){return this.getNumPropsByEval(e,"function() { return [0, Object.keys(this).length + 1]; }")}getNumPropsByEval(e,t){return this.chrome.Runtime.callFunctionOn({objectId:e,functionDeclaration:t,silent:!0,returnByValue:!0}).then((e=>{if(e.exceptionDetails){const t=o.errorMessageFromExceptionDetails(e.exceptionDetails);return Promise.reject(c.errorFromEvaluate(t))}if(e.result){const t=e.result.value;return 2!==t.length?Promise.reject(c.errorFromEvaluate("Did not get expected props, got "+JSON.stringify(t))):{indexedVariables:t[0],namedVariables:t[1]}}return{indexedVariables:void 0,namedVariables:void 0}}),(e=>Promise.reject(c.errorFromEvaluate(e.message))))}remoteObjectToVariable(e,t,r,i=!0,o="variables"){return n(this,void 0,void 0,(function*(){return e=e||'""',t?"object"===t.type?this.createObjectVariable(e,t,r,o):"function"===t.type?a.createFunctionVariable(e,t,o,this._variableHandles,r):a.createPrimitiveVariable(e,t,r,i):a.createPrimitiveVariableWithValue(e,"",r)}))}internalPropertyDescriptorToVariable(e,t){return this.remoteObjectToVariable(e.name,e.value,t)}}},3201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4200).loadMessageBundle(__filename);t.evalNotAvailableMsg=n(0,null),t.runtimeNotConnectedMsg=n(1,null),t.noRestartFrame=n(2,null);class i extends Error{constructor(e){super(e.format),this.id=e.id,this.format=e.format,this.variables=e.variables,this.sendTelemetry=e.sendTelemetry,this.showUser=e.showUser,this.url=e.url,this.urlLabel=e.urlLabel}}function o(e,t,r,o){return new i({id:e,format:t,variables:r,showUser:!0,url:"http://go.microsoft.com/fwlink/?linkID=534832#_"+o.toString(),urlLabel:n(5,null)})}t.ErrorWithMessage=i,t.attributePathNotExist=function(e,t){return new i({id:2007,format:n(3,null,e,"{path}"),variables:{path:t}})},t.attributePathRelative=function(e,t){return new i(o(2008,n(4,null,e,"{path}","${workspaceFolder}/"),{path:t},20003))},t.withInfoLink=o,t.setValueNotSupported=function(){return new i({id:2004,format:n(6,null)})},t.errorFromEvaluate=function(e){return new i({id:2025,format:e})},t.sourceRequestIllegalHandle=function(){return new i({id:2027,format:"sourceRequest error: illegal handle",sendTelemetry:!0})},t.sourceRequestCouldNotRetrieveContent=function(){return new i({id:2026,format:n(7,null)})},t.pathFormat=function(){return new i({id:2018,format:"debug adapter only supports native paths",sendTelemetry:!0})},t.runtimeConnectionTimeout=function(e,t){return new i({id:2010,format:n(8,null,"{_timeout}","{_error}"),variables:{_error:t,_timeout:e+""}})},t.stackFrameNotValid=function(){return new i({id:2020,format:"stack frame not valid",sendTelemetry:!0})},t.noCallStackAvailable=function(){return new i({id:2023,format:n(9,null)})},t.invalidThread=function(e){return new i({id:2030,format:"Invalid thread {_thread}",variables:{_thread:e+""},sendTelemetry:!0})},t.exceptionInfoRequestError=function(){return new i({id:2031,format:"exceptionInfoRequest error",sendTelemetry:!0})},t.noStoredException=function(){return new i({id:2032,format:"exceptionInfoRequest error: no stored exception",sendTelemetry:!0})},t.failedToReadPortFromUserDataDir=function(e,t){return new i({id:2033,format:n(10,null),variables:{dataDirPath:e,error:t.message},sendTelemetry:!0})},t.activePortFileContentsInvalid=function(e,t){return new i({id:2034,format:n(11,null),variables:{dataDirPath:e,dataDirContents:t},sendTelemetry:!0})}},3138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6665),i=r(4434);t.stepStartedEventName="stepStarted",t.milestoneReachedEventName="milestoneReached",t.stepCompletedEventName="stepCompleted",t.requestCompletedEventName="requestCompleted";class o extends i.EventEmitter{constructor(e=[]){super(),this._nestedEmitters=e}emitStepStarted(e){this.emit(t.stepStartedEventName,{stepName:e})}emitMilestoneReached(e){this.emit(t.milestoneReachedEventName,{milestoneName:e})}emitStepCompleted(e){this.emit(t.stepCompletedEventName,{stepName:e})}emitRequestCompleted(e,r,n){this.emit(t.requestCompletedEventName,{requestName:e,startTime:r,timeTakenInMilliseconds:n})}on(e,t){return super.on(e,t),this._nestedEmitters.forEach((r=>r.on(e,t))),this}removeListener(e,t){return super.removeListener(e,t),this._nestedEmitters.forEach((r=>r.removeListener(e,t))),this}}t.StepProgressEventsEmitter=o;class s{constructor(){this._removeSubscriptionActions=[]}on(e,t,r){e.on(t,r),this._removeSubscriptionActions.push((()=>e.removeListener(t,r)))}removeAll(){for(const e of this._removeSubscriptionActions)e();this._removeSubscriptionActions=[]}}t.ExecutionTimingsReporter=class{constructor(){this._eventsExecutionTimesInMilliseconds={},this._stepsList=[],this._subscriptionManager=new s,this._requestProperties={},this._currentStepName="BeforeFirstStep",this._currentStepStartTime=this._allStartTime=process.hrtime()}recordPreviousStepAndConfigureNewStep(e){this.recordTimeTaken(this._currentStepName,this._currentStepStartTime),this._stepsList.push(this._currentStepName),this._currentStepStartTime=process.hrtime(),this._currentStepName=e}recordTimeTaken(e,t){const r=n.calculateElapsedTime(t);this.addElementToArrayProperty(this._eventsExecutionTimesInMilliseconds,e,r)}recordTotalTimeUntilMilestone(e){this.recordTimeTaken(e,this._allStartTime)}generateReport(){return this.recordPreviousStepAndConfigureNewStep("AfterLastStep"),this._subscriptionManager.removeAll(),Object.assign({},{Steps:this._stepsList,All:n.calculateElapsedTime(this._allStartTime)},this._requestProperties,this._eventsExecutionTimesInMilliseconds)}recordRequestCompleted(e,t,r){const n=`Request.${e}.`;this.addElementToArrayProperty(this._requestProperties,n+"startTime",t),this.addElementToArrayProperty(this._requestProperties,n+"timeTakenInMilliseconds",r)}addElementToArrayProperty(e,t,r){(e[t]=e[t]||[]).push(r)}subscribeTo(e){this._subscriptionManager.on(e,t.stepStartedEventName,(e=>{this.recordPreviousStepAndConfigureNewStep(e.stepName)})),this._subscriptionManager.on(e,t.milestoneReachedEventName,(e=>{this.recordTotalTimeUntilMilestone(e.milestoneName)})),this._subscriptionManager.on(e,t.stepCompletedEventName,(e=>{this.recordTotalTimeUntilMilestone(`WaitingAfter.${e.stepName}`)})),this._subscriptionManager.on(e,t.requestCompletedEventName,(e=>{this.recordRequestCompleted(e.requestName,e.startTime,e.timeTakenInMilliseconds)}))}}},8704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8063);t.logger=n.logger;const i=r(3629);t.chromeConnection=i;const o=r(9767);t.ChromeDebugAdapter=o.ChromeDebugAdapter;const s=r(2048);t.ChromeDebugSession=s.ChromeDebugSession;const a=r(8597);t.chromeTargetDiscoveryStrategy=a;const c=r(7992);t.chromeUtils=c;const l=r(3884);t.stoppedEvent=l;const u=r(7884);t.InternalSourceBreakpoint=u.InternalSourceBreakpoint;const d=r(3201);t.ErrorWithMessage=d.ErrorWithMessage;const h=r(9112);t.BasePathTransformer=h.BasePathTransformer;const p=r(4204);t.UrlPathTransformer=p.UrlPathTransformer;const f=r(27);t.LineColTransformer=f.LineColTransformer;const m=r(6164);t.BaseSourceMapTransformer=m.BaseSourceMapTransformer;const g=r(6665);t.utils=g;const y=r(3023);t.telemetry=y;const v=r(7414);t.variables=v;const _=r(6215);t.NullLogger=_.NullLogger;const b=r(3138);t.executionTimingsReporter=b;const w=r(8597);t.Version=w.Version,t.TargetVersions=w.TargetVersions;const S=r(9623);t.Breakpoints=S.Breakpoints;const E=r(4211);t.ScriptContainer=E.ScriptContainer},6215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullLogger=class{log(e,t){}verbose(e){}warn(e){}error(e){}}},6461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8063),i=r(2375),o=r(6928),s="vscode-remote",a="__vscode-remote-uri__",c="win32"===process.platform;function l(e){return e.startsWith("/"+a)||!!e.match(new RegExp("[a-zA-Z]:[\\/\\\\]"+a))}t.mapRemoteClientToInternalPath=function(e){if(e.startsWith(s+":")){const t=function(e){const t=e.fsPath;return c&&!t.match(/^[a-zA-Z]:/)?t.replace(/\\/g,"/"):t}(i.URI.parse(e)),r=t.match(/^[A-Za-z]:/);let s;return s=r?o.win32.join(r[0],a,t.substr(2)):o.posix.join("/",a,t),n.logger.log(`remoteMapper: mapping remote uri ${e} to internal path: ${s}`),s}return e},t.mapInternalSourceToRemoteClient=function(e,t){if(e&&e.path&&l(e.path)&&t){const r=i.URI.file(e.path.replace(new RegExp(a+"[\\/\\\\]"),"")).with({scheme:s,authority:t});return Object.assign({},e,{path:r.toString(),origin:void 0,sourceReference:void 0})}return e},t.isInternalRemotePath=l},7306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9665),i=r(6928),o=r(1165),s=r(6665),a=r(8063);t.SourceMap=class{constructor(e,t,r,c,l=!1){this._authoredPathCaseMap=new Map,this._generatedPath=e;const u=JSON.parse(t);a.logger.log(`SourceMap: creating for ${e}`),a.logger.log(`SourceMap: sourceRoot: ${u.sourceRoot}`),u.sourceRoot&&"/source/"===u.sourceRoot.toLowerCase()&&a.logger.log("Warning: if you are using gulp-sourcemaps < 2.0 directly or indirectly, you may need to set sourceRoot manually in your build config, if your files are not actually under a directory called /source"),a.logger.log(`SourceMap: sources: ${JSON.stringify(u.sources)}`),r&&a.logger.log(`SourceMap: pathMapping: ${JSON.stringify(r)}`);const d=o.getComputedSourceRoot(u.sourceRoot,this._generatedPath,r);this._originalSourceRoot=u.sourceRoot,this._originalSources=u.sources,u.sourceRoot=null,this._sources=u.sources.map((e=>{if(c){const t=o.getFullSourceEntry(this._originalSourceRoot,e),r=o.applySourceMapPathOverrides(t,c,l);if(t!==r)return s.canonicalizeUrl(r)}return e.startsWith("file://")||i.isAbsolute(e)||(e=s.properResolve(d,e)),s.canonicalizeUrl(e)})),u.sources=this._sources.map((e=>{const t=e.toLowerCase();return this._authoredPathCaseMap.set(t,e),s.pathToFileURL(t,!0)})),this._smc=new n.SourceMapConsumer(u)}get allSourcePathDetails(){return this._allSourcePathDetails||(this._allSourcePathDetails=this._sources.map(((e,t)=>{const r=this._originalSources[t];return{inferredPath:e,originalPath:this._originalSourceRoot?o.getFullSourceEntry(this._originalSourceRoot,r):r,startPosition:this.generatedPositionFor(e,0,0)}})).sort(((e,t)=>e.startPosition?t.startPosition?e.startPosition.line===t.startPosition.line?e.startPosition.column-t.startPosition.column:e.startPosition.line-t.startPosition.line:(a.logger.log(`Could not map start position for: ${t.inferredPath}`),1):(a.logger.log(`Could not map start position for: ${e.inferredPath}`),-1)))),this._allSourcePathDetails}get authoredSources(){return this._sources}generatedPath(){return this._generatedPath}doesOriginateFrom(e){return this.authoredSources.some((t=>t===e))}authoredPositionFor(e,t){const r={line:++e,column:t,bias:n.SourceMapConsumer.GREATEST_LOWER_BOUND};let i=this._smc.originalPositionFor(r);return i.source||(r.bias=n.SourceMapConsumer.LEAST_UPPER_BOUND,i=this._smc.originalPositionFor(r)),i.source?(i.source=s.canonicalizeUrl(i.source),i.source=this._authoredPathCaseMap.get(i.source)||i.source,i.line--,i):null}generatedPositionFor(e,t,r){const i={line:++t,column:r,source:e=s.pathToFileURL(e.toLowerCase(),!0),bias:n.SourceMapConsumer.LEAST_UPPER_BOUND};let o=this._smc.generatedPositionFor(i);return null===o.line&&(i.bias=n.SourceMapConsumer.GREATEST_LOWER_BOUND,o=this._smc.generatedPositionFor(i)),null===o.line?null:{line:o.line-1,column:o.column,source:this._generatedPath}}sourceContentFor(e){return e=s.pathToFileURL(e,!0),this._smc.sourceContentFor(e,!0)}}},1922:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9896),o=r(6982),s=r(6928),a=r(857),c=r(7016),l=r(1165),u=r(6665),d=r(8063),h=r(7306),p=r(6461);t.SourceMapFactory=class{constructor(e,t,r){this._pathMapping=e,this._sourceMapPathOverrides=t,this._enableSourceMapCaching=r}getMapForGeneratedPath(e,t,r,n=!1){let i,o=`SourceMaps.getMapForGeneratedPath: Finding SourceMap for ${e} by URI: ${r}`;if(this._pathMapping&&(o+=` and webRoot/pathMapping: ${JSON.stringify(this._pathMapping)}`),d.logger.log(o),r.indexOf("data:application/json")>=0)d.logger.log(`SourceMaps.getMapForGeneratedPath: Using inlined sourcemap in ${e}`),i=Promise.resolve(this.getInlineSourceMapContents(r));else{const n=p.isInternalRemotePath(e)&&t?t:e;i=this.getSourceMapContent(n,r)}return i.then((t=>{if(!t)return null;try{return new h.SourceMap(e,t,this._pathMapping,this._sourceMapPathOverrides,n)}catch(t){return d.logger.error(`SourceMaps.getMapForGeneratedPath: exception while processing path: ${e}, sourcemap: ${r}\n${t.stack}`),null}}))}getInlineSourceMapContents(e){const t=e.indexOf(",");if(t<0)return d.logger.log(`SourceMaps.getInlineSourceMapContents: Inline sourcemap is malformed. Starts with: ${e.substr(0,200)}`),null;const r=e.substr(0,t),n=e.substr(t+1);try{return-1!==r.indexOf(";base64")?Buffer.from(n,"base64").toString():decodeURI(n)}catch(e){d.logger.error(`SourceMaps.getInlineSourceMapContents: exception while processing data uri (${e.stack})`)}return null}getSourceMapContent(e,t){return(t=l.resolveMapPath(e,t,this._pathMapping))?this.loadSourceMapContents(t).then((r=>{if(!r){const r=e+".map";if(r!==t)return this.loadSourceMapContents(r)}return r})):Promise.resolve(null)}loadSourceMapContents(e){let t;return u.isURL(e)&&!u.isFileUrl(e)?(d.logger.log(`SourceMaps.loadSourceMapContents: Downloading sourcemap file from ${e}`),t=this.downloadSourceMapContents(e).catch((t=>(d.logger.log(`SourceMaps.loadSourceMapContents: Could not download sourcemap from ${e}`),null)))):(e=u.canonicalizeUrl(e),t=new Promise(((t,r)=>{d.logger.log(`SourceMaps.loadSourceMapContents: Reading local sourcemap file from ${e}`),i.readFile(e,((e,r)=>{e?(d.logger.log("SourceMaps.loadSourceMapContents: Could not read sourcemap file - "+e.message),t(null)):t(r&&r.toString())}))}))),t}downloadSourceMapContents(e){return n(this,void 0,void 0,(function*(){try{return yield this._downloadSourceMapContents(e)}catch(t){if("localhost"===c.parse(e).hostname)return d.logger.log("Sourcemaps.downloadSourceMapContents: downlading from 127.0.0.1 instead of localhost"),this._downloadSourceMapContents(e.replace("localhost","127.0.0.1"));throw t}}))}_downloadSourceMapContents(e){return n(this,void 0,void 0,(function*(){let t;if(this._enableSourceMapCaching){const r=o.createHash("sha256").update(e).digest("hex"),n=s.join(a.tmpdir(),"com.microsoft.VSCode","node-debug2","sm-cache");if(t=s.join(n,r),u.existsSync(t))return d.logger.log(`Sourcemaps.downloadSourceMapContents: Reading cached sourcemap file from ${t}`),this.loadSourceMapContents(t)}const r=yield u.getURL(e);return t&&this._enableSourceMapCaching&&(d.logger.log(`Sourcemaps.downloadSourceMapContents: Caching sourcemap file at ${t}`),yield u.writeFileP(t,r)),r}))}}},1165:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6928),i=r(7016),o=r(8063),s=r(7992),a=r(6665);function c(e,t){return a.properResolve(n.dirname(e),t)}t.resolveRelativeToFile=c,t.getComputedSourceRoot=function(e,t,r={}){let l;if(t=a.fileUrlToPath(t),e){if(e.startsWith("file:///"))l=a.canonicalizeUrl(e);else if(a.isAbsolute(e))l=s.applyPathMappingsToTargetUrlPath(e,r)||e;else if(n.isAbsolute(t))l=c(t,e);else{const o=i.parse(t).pathname,c=s.applyPathMappingsToTargetUrlPath(o,r),u=n.dirname(c);l=a.properJoin(u,e)}o.logger.log(`SourceMap: resolved sourceRoot ${e} -> ${l}`)}else if(n.isAbsolute(t))l=n.dirname(t),o.logger.log(`SourceMap: no sourceRoot specified, using script dirname: ${l}`);else{const e=i.parse(t).pathname||"/placeholder.js",a=s.applyPathMappingsToTargetUrlPath(e,r);l=a?n.dirname(a):"",o.logger.log(`SourceMap: no sourceRoot specified, using webRoot + script path dirname: ${l}`)}return l=a.stripTrailingSlash(l),l=a.fixDriveLetterAndSlashes(l),l};let l=0;t.getAspNetFallbackCount=function(){return l},t.applySourceMapPathOverrides=function(e,t,r=!1){const i=e.replace(/\\/g,"/"),s=Object.keys(t).sort(((e,t)=>t.length-e.length));for(let c of s){const s=t[c],u=`"${c}": "${s}"`,d=c.match(/\*/g)||[];if(d.length>1){o.logger.log(`Warning: only one asterisk allowed in a sourceMapPathOverrides entry - ${u}`);continue}if((s.match(/\*/g)||[]).length>d.length){o.logger.log(`Warning: the right side of a sourceMapPathOverrides entry must have 0 or 1 asterisks - ${u}}`);continue}const h=a.escapeRegexSpecialChars(c,"/*").replace(/\*/g,"(.*)").replace(/\\\\/g,"/"),p=new RegExp(`^${h}$`,"i"),f=i.match(p);if(!f)continue;const m=f[1];let g=s.replace(/\*/g,m);if(g=a.properJoin(g),r&&"webpack:///./*"===c&&!a.existsSync(g)){const e=n.join(s.replace(/\*/g,n.join("../ClientApp",m)));a.existsSync(e)&&(++l,g=e)}return o.logger.log(`SourceMap: mapping ${e} => ${g}, via sourceMapPathOverrides entry - ${u}`),g}return e},t.resolveMapPath=function(e,t,r){if(!a.isURL(t))if(a.isURL(e)){const r=i.parse(e),o=r.pathname;if(!o)return null;const s=a.isAbsolute(t)?t:n.posix.join(n.dirname(o),t);t=`${r.protocol}//${r.host}${s}`}else a.isAbsolute(t)?t=s.applyPathMappingsToTargetUrlPath(t,r)||t:n.isAbsolute(e)&&(t=c(e,t));return t},t.getFullSourceEntry=function(e,t){return e?(e.endsWith("/")||(e+="/"),e+t):t}},8585:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1922);t.SourceMaps=class{constructor(e,t,r){this._generatedPathToSourceMap=new Map,this._authoredPathToSourceMap=new Map,this._sourceMapFactory=new i.SourceMapFactory(e,t,r)}getGeneratedPathFromAuthoredPath(e){return e=e.toLowerCase(),this._authoredPathToSourceMap.has(e)?this._authoredPathToSourceMap.get(e).generatedPath():null}mapToGenerated(e,t,r){return e=e.toLowerCase(),this._authoredPathToSourceMap.has(e)?this._authoredPathToSourceMap.get(e).generatedPositionFor(e,t,r):null}mapToAuthored(e,t,r){return e=e.toLowerCase(),this._generatedPathToSourceMap.has(e)?this._generatedPathToSourceMap.get(e).authoredPositionFor(t,r):null}allMappedSources(e){return e=e.toLowerCase(),this._generatedPathToSourceMap.has(e)?this._generatedPathToSourceMap.get(e).authoredSources:null}allSourcePathDetails(e){return e=e.toLowerCase(),this._generatedPathToSourceMap.has(e)?this._generatedPathToSourceMap.get(e).allSourcePathDetails:null}sourceContentFor(e){return e=e.toLowerCase(),this._authoredPathToSourceMap.has(e)?this._authoredPathToSourceMap.get(e).sourceContentFor(e):null}processNewSourceMap(e,t,r,i=!1){return n(this,void 0,void 0,(function*(){const n=yield this._sourceMapFactory.getMapForGeneratedPath(e,t,r,i);n&&(this._generatedPathToSourceMap.set(e.toLowerCase(),n),n.authoredSources.forEach((e=>this._authoredPathToSourceMap.set(e.toLowerCase(),n))))}))}}},3023:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8063),i=r(6665),o=["exceptionStack","exceptionMessage","exceptionId"];class s{constructor(){this._globalTelemetryProperties={}}reportEvent(e,t){if(!this._sendEvent)return;const r=Object.assign({},this._globalTelemetryProperties,t);for(const e of o)r.hasOwnProperty(e)&&(r[`!${e}`]=r[e],delete r[e]);const i=new n.OutputEvent(e,"telemetry",r);this._sendEvent(i)}setupEventHandler(e){this._sendEvent=e}addCustomGlobalProperty(e){Object.assign(this._globalTelemetryProperties,e)}}t.TelemetryReporter=s;class a{constructor(e){this._telemetryReporter=e,this._actionsQueue=Promise.resolve()}reportEvent(e,t){this._telemetryReporter.reportEvent(e,t)}setupEventHandler(e){this._telemetryReporter.setupEventHandler(e)}addCustomGlobalProperty(e){const t=Promise.resolve(e).then((e=>this._telemetryReporter.addCustomGlobalProperty(e)),(e=>this.reportErrorWhileWaitingForProperty(e)));this._actionsQueue=Promise.all([this._actionsQueue,t])}reportErrorWhileWaitingForProperty(e){let t={successful:"false",exceptionType:"firstChance"};i.fillErrorDetails(t,e),this._telemetryReporter.reportEvent("error-while-adding-custom-global-property",t)}}t.AsyncGlobalPropertiesTelemetryReporter=a,t.NullTelemetryReporter=class{reportEvent(e,t){}setupEventHandler(e){}},t.DefaultTelemetryIntervalInMilliseconds=1e4;class c{constructor(e,r=t.DefaultTelemetryIntervalInMilliseconds){this._telemetryReporter=e,this._cadenceInMilliseconds=r,this.reset(),this.setup()}reportEvent(e,t){this._eventBuckets[e]||(this._eventBuckets[e]=[]),this._eventBuckets[e].push(t)}finalize(){this.send(),clearInterval(this._timer)}setup(){this._timer=setInterval((()=>this.send()),this._cadenceInMilliseconds)}reset(){this._eventBuckets={}}send(){for(const e in this._eventBuckets){const t=this._eventBuckets[e];let r=c.transfromBucketData(t);this._telemetryReporter.reportEvent(e,r)}this.reset()}static transfromBucketData(e){const t=c.collectPropertyNamesFromAllEvents(e);let r={};for(const e of t)r[`aggregated.${e}`]=[];for(const n of e)for(const e of t)r[`aggregated.${e}`].push(void 0===n[e]?null:n[e]);for(const e of t)r[`aggregated.${e}`]=JSON.stringify(r[`aggregated.${e}`]);return r}static collectPropertyNamesFromAllEvents(e){let t={};for(const r of e)for(const e of Object.keys(r))t[e]=!0;return Object.keys(t)}}t.BatchTelemetryReporter=c,t.TelemetryPropertyCollector=class{constructor(){this._properties={}}getProperties(){return this._properties}addTelemetryProperty(e,t){this._properties[e]=t}},t.telemetry=new a(new s)},9112:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePathTransformer=class{launch(e){return Promise.resolve()}attach(e){return Promise.resolve()}setBreakpoints(e){return e}clearTargetContext(){}scriptParsed(e){return Promise.resolve(e)}breakpointResolved(e,t){return this.getClientPathFromTargetPath(t)||t}stackTraceResponse(e){}fixSource(e){return r(this,void 0,void 0,(function*(){}))}getTargetPathFromClientPath(e){return e}getClientPathFromTargetPath(e){return e}}},6164:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(6928),o=r(8585),s=r(6665),a=r(8063),c=r(4200),l=r(6461),u=c.loadMessageBundle(__filename);t.BaseSourceMapTransformer=class{constructor(e){this._preLoad=Promise.resolve(),this._processingNewSourceMap=Promise.resolve(),this._isVSClient=!1,this._scriptContainer=e}get sourceMaps(){return this._sourceMaps}set isVSClient(e){this._isVSClient=e}launch(e){this.init(e)}attach(e){this.init(e)}init(e){e.sourceMaps&&(this._enableSourceMapCaching=e.enableSourceMapCaching,this._sourceMaps=new o.SourceMaps(e.pathMapping,e.sourceMapPathOverrides,this._enableSourceMapCaching),this._requestSeqToSetBreakpointsArgs=new Map,this._allRuntimeScriptPaths=new Set,this._authoredPathsToMappedBPs=new Map,this._authoredPathsToClientBreakpointIds=new Map)}clearTargetContext(){this._allRuntimeScriptPaths=new Set}setBreakpoints(e,t,r){if(!this._sourceMaps)return{args:e,ids:r};const n=JSON.parse(JSON.stringify(e.breakpoints));if(e.source.sourceReference){const t=this._scriptContainer.getSource(e.source.sourceReference);t&&t.mappedPath&&(e.source.path=t.mappedPath)}if(e.source.path){const t=e.source.path,n=this._sourceMaps.getGeneratedPathFromAuthoredPath(t);n?(a.logger.log(`SourceMaps.setBP: Mapped ${t} to ${n}`),e.authoredPath=t,e.source.path=n,e.breakpoints.forEach((e=>{const{line:r,column:i=0}=e,o=this._sourceMaps.mapToGenerated(t,r,i);o?(a.logger.log(`SourceMaps.setBP: Mapped ${t}:${r+1}:${i+1} to ${n}:${o.line+1}:${o.column+1}`),e.line=o.line,e.column=o.column):(a.logger.log(`SourceMaps.setBP: Mapped ${t} but not line ${r+1}, column 1`),e.column=i)})),this._authoredPathsToMappedBPs.set(t,e.breakpoints),r&&this._authoredPathsToClientBreakpointIds.set(t,r),this._sourceMaps.allMappedSources(n).forEach((n=>{if(n===t)return;const i=this._authoredPathsToMappedBPs.get(n);if(i){e.breakpoints=e.breakpoints.concat(i);const t=this._authoredPathsToClientBreakpointIds.get(n);r&&(r=r.concat(t))}}))):this.isRuntimeScript(t)?a.logger.log(`SourceMaps.setBP: SourceMaps are enabled but ${t} is a runtime script`):a.logger.log(`SourceMaps.setBP: ${t} can't be resolved to a loaded script. It may just not be loaded yet.`)}return this._requestSeqToSetBreakpointsArgs.set(t,{originalBPs:n,authoredPath:e.authoredPath,generatedPath:e.source.path}),{args:e,ids:r}}setBreakpointsResponse(e,t,r){if(this._sourceMaps&&this._requestSeqToSetBreakpointsArgs.has(r)){const n=this._requestSeqToSetBreakpointsArgs.get(r);n.authoredPath&&(t&&(e=e.filter(((e,t)=>t<n.originalBPs.length))),e.forEach(((e,t)=>{const i=this._sourceMaps.mapToAuthored(n.generatedPath,e.line,e.column);i?(a.logger.log(`SourceMaps.setBP: Mapped ${n.generatedPath}:${e.line+1}:${e.column+1} to ${i.source}:${i.line+1}`),e.line=i.line,e.column=i.column):(a.logger.log(`SourceMaps.setBP: Can't map ${n.generatedPath}:${e.line+1}:${e.column+1}, keeping original line numbers.`),n.originalBPs[t]&&(e.line=n.originalBPs[t].line,e.column=n.originalBPs[t].column)),this._requestSeqToSetBreakpointsArgs.delete(r)})))}return e}stackTraceResponse(e){return n(this,void 0,void 0,(function*(){if(this._sourceMaps){yield this._processingNewSourceMap;for(let t of e.stackFrames)yield this.fixSourceLocation(t)}}))}fixSourceLocation(e){return n(this,void 0,void 0,(function*(){if(!this._sourceMaps)return;if(!e.source)return;yield this._processingNewSourceMap;const t=this._sourceMaps.mapToAuthored(e.source.path,e.line,e.column);if(t&&(l.isInternalRemotePath(t.source)||s.existsSync(t.source)))return e.source.path=t.source,e.source.sourceReference=void 0,e.source.name=i.basename(t.source),e.line=t.line,e.column=t.column,void(e.isSourceMapped=!0);const r=t&&this._sourceMaps.sourceContentFor(t.source);return t&&r?(e.source.name=i.basename(t.source),e.source.path=t.source,e.source.sourceReference=this._scriptContainer.getSourceReferenceForScriptPath(t.source,r),e.source.origin=u(0,null),e.line=t.line,e.column=t.column,void(e.isSourceMapped=!0)):s.existsSync(e.source.path)?(e.source.sourceReference=void 0,void(e.source.origin=void 0)):void 0}))}scriptParsed(e,t,r){return n(this,void 0,void 0,(function*(){if(this._sourceMaps){if(this._allRuntimeScriptPaths.add(this.fixPathCasing(e)),!r)return null;const n=this._sourceMaps.processNewSourceMap(e,t,r,this._isVSClient);this._processingNewSourceMap=Promise.all([this._processingNewSourceMap,n]),yield n;const i=this._sourceMaps.allMappedSources(e);return i&&a.logger.log(`SourceMaps.scriptParsed: ${e} was just loaded and has mapped sources: ${JSON.stringify(i)}`),i}return null}))}breakpointResolved(e,t){if(this._sourceMaps){const r=this._sourceMaps.mapToAuthored(t,e.line,e.column);r&&(e.line=r.line,e.column=r.column)}}scopesResponse(e,t){this._sourceMaps&&t.scopes.forEach((t=>this.mapScopeLocations(e,t)))}mapScopeLocations(e,t){if("number"!=typeof t.line||t.line<0||t.endLine<0||t.column<0||t.endColumn<0)return;let r=this._sourceMaps.mapToAuthored(e,t.line,t.column),n=!1;if(r||(r=this._sourceMaps.mapToAuthored(e,t.line+1,t.column),n=!0),r){const i=this._sourceMaps.mapToAuthored(e,t.endLine,t.endColumn);i&&(t.line=r.line,n&&t.line--,t.column=r.column,t.endLine=i.line,t.endColumn=i.column)}}mapToGenerated(e,t,r){return n(this,void 0,void 0,(function*(){return this._sourceMaps?(yield this.wait(),this._sourceMaps.mapToGenerated(e,t,r)):null}))}mapToAuthored(e,t,r){return n(this,void 0,void 0,(function*(){return this._sourceMaps?(yield this.wait(),this._sourceMaps.mapToAuthored(e,t,r)):null}))}getGeneratedPathFromAuthoredPath(e){return n(this,void 0,void 0,(function*(){return this._sourceMaps?(yield this.wait(),this._sourceMaps.getGeneratedPathFromAuthoredPath(e)||(this.isRuntimeScript(e)?e:null)):e}))}allSources(e){return n(this,void 0,void 0,(function*(){return this._sourceMaps?(yield this.wait(),this._sourceMaps.allMappedSources(e)||[]):[]}))}allSourcePathDetails(e){return n(this,void 0,void 0,(function*(){return this._sourceMaps?(yield this.wait(),this._sourceMaps.allSourcePathDetails(e)||[]):[]}))}wait(){return Promise.all([this._preLoad,this._processingNewSourceMap])}isRuntimeScript(e){return this._allRuntimeScriptPaths.has(this.fixPathCasing(e))}fixPathCasing(e){return e&&(this.caseSensitivePaths?e:e.toLowerCase())}}},1261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6928),i=r(6164),o=r(6665),s=r(8063);class a extends i.BaseSourceMapTransformer{init(e){if(super.init(e),e.sourceMaps){const t=e.outFiles?e.outFiles:e.outDir?[n.join(e.outDir,"**/*.js")]:[];t.length>0?(s.logger.log("SourceMaps: preloading sourcemaps for scripts in globs: "+JSON.stringify(t)),this._preLoad=o.multiGlob(t).then((e=>(s.logger.log(`SourceMaps: expanded globs and found ${e.length} scripts`),Promise.all(e.map((e=>this.discoverSourceMapForGeneratedScript(e))))))).then((()=>{}))):this._preLoad=Promise.resolve()}}discoverSourceMapForGeneratedScript(e){return this.findSourceMapUrlInFile(e).then((t=>t?(s.logger.log(`SourceMaps: sourcemap url parsed from end of generated content: ${t}`),this._sourceMaps.processNewSourceMap(e,void 0,t,this._isVSClient)):void s.logger.log(`SourceMaps: no sourcemap url found in generated script: ${e}`))).catch((t=>{s.logger.log(`SourceMaps: could not preload for generated script: ${e}. Error: ${t.toString()}`)}))}findSourceMapUrlInFile(e,t){return t?Promise.resolve(this.findSourceMapUrl(t)):o.readFileP(e).then((e=>this.findSourceMapUrl(e)))}findSourceMapUrl(e){const t=e.split("\n");for(let e=t.length-1;e>=Math.max(t.length-10,0);e--){const r=t[e].trim(),n=a.SOURCE_MAPPING_MATCHER.exec(r);if(n&&2===n.length)return n[1].trim()}return null}}a.SOURCE_MAPPING_MATCHER=new RegExp("^//[#@] ?sourceMappingURL=(.+)$"),t.EagerSourceMapTransformer=a},4451:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(8063),o=r(4204),s=r(7992);class a extends o.UrlPathTransformer{constructor(e){super(),this._session=e}targetUrlToClientPath(e){const t=e=>super[e];return n(this,void 0,void 0,(function*(){return t("targetUrlToClientPath").call(this,e).then((t=>t||s.isEvalScript(e)?t:this.requestClientToMapURLToFilePath(e).catch((e=>(i.logger.log("The fallback transformation failed due to: "+e),t)))))}))}requestClientToMapURLToFilePath(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{this._session.sendRequest("mapURLToFilePath",{url:e},a.ASK_CLIENT_TO_MAP_URL_TO_FILE_PATH_TIMEOUT,(n=>{n.success?(i.logger.log(`The client responded that the url "${e}" maps to the file path "${n.body.filePath}"`),t(n.body.filePath)):r(new Error(`The client responded that the url "${e}" couldn't be mapped to a file path due to: ${n.message}`))}))}))}))}}a.ASK_CLIENT_TO_MAP_URL_TO_FILE_PATH_TIMEOUT=500,t.FallbackToClientPathTransformer=a},27:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineColTransformer=class{constructor(e){this._session=e}setBreakpoints(e){return e.breakpoints.forEach((e=>this.convertClientLocationToDebugger(e))),this.columnBreakpointsEnabled||e.breakpoints.forEach((e=>e.column=void 0)),e}setBreakpointsResponse(e){e.breakpoints.forEach((e=>this.convertDebuggerLocationToClient(e))),this.columnBreakpointsEnabled||e.breakpoints.forEach((e=>e.column=1))}stackTraceResponse(e){e.stackFrames.forEach((e=>this.convertDebuggerLocationToClient(e)))}breakpointResolved(e){this.convertDebuggerLocationToClient(e),this.columnBreakpointsEnabled||(e.column=void 0)}scopeResponse(e){e.scopes.forEach((e=>this.mapScopeLocations(e)))}mappedExceptionStack(e){this.convertDebuggerLocationToClient(e)}mapScopeLocations(e){if(this.convertDebuggerLocationToClient(e),"number"==typeof e.endLine){const t={line:e.endLine,column:e.endColumn};this.convertDebuggerLocationToClient(t),e.endLine=t.line,e.endColumn=t.column}}convertClientLocationToDebugger(e){"number"==typeof e.line&&(e.line=this.convertClientLineToDebugger(e.line)),"number"==typeof e.column&&(e.column=this.convertClientColumnToDebugger(e.column))}convertDebuggerLocationToClient(e){"number"==typeof e.line&&(e.line=this.convertDebuggerLineToClient(e.line)),"number"==typeof e.column&&(e.column=this.convertDebuggerColumnToClient(e.column))}convertClientLineToDebugger(e){return this._session.convertClientLineToDebugger(e)}convertDebuggerLineToClient(e){return this._session.convertDebuggerLineToClient(e)}convertClientColumnToDebugger(e){return this._session.convertClientColumnToDebugger(e)}convertDebuggerColumnToClient(e){return this._session.convertDebuggerColumnToClient(e)}}},9693:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9896),o=r(6928),s=r(8063),a=r(3201),c=r(4204),l=r(6665),u=r(4200).loadMessageBundle(__filename);class d extends c.UrlPathTransformer{launch(e){const t=e=>super[e];return n(this,void 0,void 0,(function*(){return yield t("launch").call(this,e),this.init(e)}))}attach(e){const t=e=>super[e];return n(this,void 0,void 0,(function*(){return yield t("attach").call(this,e),this.init(e)}))}init(e){return n(this,void 0,void 0,(function*(){if(e.localRoot&&!e.remoteRoot||e.remoteRoot&&!e.localRoot)throw new Error(u(0,null));this._remoteRoot=e.remoteRoot;let t=Promise.resolve();if(e.localRoot){const r=e.localRoot;if(!o.isAbsolute(r))return Promise.reject(a.attributePathRelative("localRoot",r));t=new Promise(((e,t)=>{i.exists(r,(n=>{n||t(a.attributePathNotExist("localRoot",r)),this._localRoot=r,e()}))}))}return t}))}scriptParsed(e){const t=e=>super[e];return n(this,void 0,void 0,(function*(){return this.shouldMapPaths(e)||(e=yield t("scriptParsed").call(this,e)),e=this.getClientPathFromTargetPath(e)||e}))}stackTraceResponse(e){return n(this,void 0,void 0,(function*(){yield Promise.all(e.stackFrames.map((e=>this.fixSource(e.source))))}))}fixSource(e){const t=e=>super[e];return n(this,void 0,void 0,(function*(){yield t("fixSource").call(this,e);const r=e&&e.path;if(r){const t=this.getClientPathFromTargetPath(r)||r;l.existsSync(t)&&(e.path=t,e.sourceReference=void 0,e.origin=void 0)}}))}shouldMapPaths(e){return!!this._localRoot&&!!this._remoteRoot&&(o.posix.isAbsolute(e)||o.win32.isAbsolute(e)||l.isFileUrl(e))}getClientPathFromTargetPath(e){if(e=super.getClientPathFromTargetPath(e)||e,e=l.fileUrlToPath(e),!this.shouldMapPaths(e))return"";const t=h(this._remoteRoot,e);if(t.startsWith("../"))return"";let r=p(this._localRoot,t);return r=l.fixDriveLetterAndSlashes(r),s.logger.log(`Mapped remoteToLocal: ${e} -> ${r}`),r}getTargetPathFromClientPath(e){if(e=super.getTargetPathFromClientPath(e)||e,!this.shouldMapPaths(e))return e;const t=h(this._localRoot,e);if(t.startsWith("../"))return"";let r=p(this._remoteRoot,t);return r=l.fixDriveLetterAndSlashes(r,!0),s.logger.log(`Mapped localToRemote: ${e} -> ${r}`),r}}function h(e,t){return e.match(/^[A-Za-z]:/)?o.win32.relative(e,t):o.posix.relative(e,t)}function p(e,t){return e.match(/^[A-Za-z]:/)?o.win32.join(e,t):l.forceForwardSlashes(o.posix.join(e,t))}t.RemotePathTransformer=d},4204:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9112),o=r(6665),s=r(8063),a=r(7992),c=r(6928);class l extends i.BasePathTransformer{constructor(){super(...arguments),this._clientPathToTargetUrl=new Map,this._targetUrlToClientPath=new Map}launch(e){return this._pathMapping=e.pathMapping,super.launch(e)}attach(e){return this._pathMapping=e.pathMapping,super.attach(e)}setBreakpoints(e){if(!e.path)return e;if(o.isURL(e.path))return s.logger.log(`Paths.setBP: ${e.path} is already a URL`),e;const t=o.canonicalizeUrl(e.path),r=this.getTargetPathFromClientPath(t);return r?(e.path=r,s.logger.log(`Paths.setBP: Resolved ${t} to ${e.path}`),e):(s.logger.log(`Paths.setBP: No target url cached yet for client path: ${t}.`),e.path=t,e)}clearTargetContext(){this._clientPathToTargetUrl=new Map,this._targetUrlToClientPath=new Map}scriptParsed(e){return n(this,void 0,void 0,(function*(){const t=yield this.targetUrlToClientPath(e);if(t){s.logger.log(`Paths.scriptParsed: resolved ${e} to ${t}. pathMapping/webroot: ${JSON.stringify(this._pathMapping)}`);const r=o.canonicalizeUrl(t);this._clientPathToTargetUrl.set(r,e),this._targetUrlToClientPath.set(e,t),e=t}else e.startsWith(a.EVAL_NAME_PREFIX)||s.logger.log(`Paths.scriptParsed: could not resolve ${e} to a file with pathMapping/webRoot: ${JSON.stringify(this._pathMapping)}. It may be external or served directly from the server's memory (and that's OK).`);return Promise.resolve(e)}))}stackTraceResponse(e){return n(this,void 0,void 0,(function*(){yield Promise.all(e.stackFrames.map((e=>this.fixSource(e.source))))}))}fixSource(e){return n(this,void 0,void 0,(function*(){if(e&&e.path){const t=this.getClientPathFromTargetPath(e.path)||(yield this.targetUrlToClientPath(e.path));t&&(e.path=t,e.sourceReference=void 0,e.origin=void 0,e.name=c.basename(t))}}))}getTargetPathFromClientPath(e){return c.isAbsolute(e)?this._clientPathToTargetUrl.get(o.canonicalizeUrl(e)):e}getClientPathFromTargetPath(e){return this._targetUrlToClientPath.get(e)}targetUrlToClientPath(e){return n(this,void 0,void 0,(function*(){return a.targetUrlToClientPath(e,this._pathMapping)}))}}t.UrlPathTransformer=l},6665:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(857),o=r(9896),s=r(9023),a=r(7016),c=r(6928),l=r(3577),u=r(8063),d=r(8611),h=r(5692);function p(e,t=1e3,r){return void 0===r&&(r=`Promise timed out after ${t}ms`),new Promise(((n,i)=>{e&&e.then(n,i),setTimeout((()=>{e?i(new Error(r)):n()}),t)}))}t.getPlatform=function(){const e=i.platform();return"darwin"===e?1:"win32"===e?0:2},t.existsSync=function(e){try{return o.statSync(e),!0}catch(e){return!1}},t.exists=function(e){return n(this,void 0,void 0,(function*(){try{return yield s.promisify(o.stat)(e),!0}catch(e){return!1}}))},t.existsAsync=function(e){return new Promise(((t,r)=>{try{o.access(e,(e=>{t(!e)}))}catch(e){t(!1)}}))},t.reversedArr=function(e){return e.reduce(((e,t)=>(e.unshift(t),e)),[])},t.promiseTimeout=p,t.retryAsync=function(e,t,r=0){const n=Date.now();return function i(){return e().catch((e=>Date.now()-n<t-r?p(null,r).then(i):w(e)))}()};let f=!0;function m(e){return e.startsWith("file:///")}function g(e){return m(e)&&(e=e.replace("file:///",""),"/"===(e=decodeURIComponent(e))[0]||e.match(/^[A-Za-z]:/)||(e="/"+e),e=v(e)),e}function y(e){return e.replace(/\\\//g,"/").replace(/\\/g,"/")}function v(e,t=!1){if(!e)return e;if((e=_(e,t)).match(/file:\/\/\/[A-Za-z]:/)){const t=8;e=e.substr(0,t+1)+e.substr(t+1).replace(/\//g,"\\")}else e.match(/^[A-Za-z]:/)&&(e=e.replace(/\//g,"\\"));return e}function _(e,t=!1){if(!e)return e;if(e.match(/file:\/\/\/[A-Za-z]:/)){const t=8;e="file:///"+e[t].toLowerCase()+e.substr(t+1)}else if(e.match(/^[A-Za-z]:/)){const r=t?e[0].toUpperCase():e[0].toLowerCase();e=r+e.substr(1)}return e}function b(e){return e.replace(/\/$/,"").replace(/\\$/,"")}function w(e){let t;return t=e?e.message?e:new Error(e):new Error("Unknown error"),Promise.reject(t)}function S(e){return e&&!c.isAbsolute(e)&&!!a.parse(e).protocol}function E(e){return c.posix.isAbsolute(e)||c.win32.isAbsolute(e)}function C(e,t){let r=y(e);t&&(r=c.normalize(r),r=y(r));const n=e.startsWith("\\\\")?"file:/":r.startsWith("/")?"file://":"file:///";return r=n+r,encodeURI(r)}function T(e){o.existsSync(e)||(T(c.dirname(e)),o.mkdirSync(e))}function k(e,t){for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function P(e){return"!"===e[0]}t.setCaseSensitivePaths=function(e){f=e},t.canonicalizeUrl=function(e){return null==e||((e=g(e)).indexOf("?")>=0&&(e=e.split("?")[0]),e=v(e=b(e)),f||(e=function(e){return e.match(/[A-z]:[\\\/][^\\\/]/)?e.toLowerCase():e}(e))),e},t.isFileUrl=m,t.fileUrlToPath=g,t.fileUrlToNetworkPath=function(e){return m(e)&&(e=(e=e.replace("file:///","\\\\")).replace(/\//g,"\\"),e=e=decodeURIComponent(e)),e},t.forceForwardSlashes=y,t.fixDriveLetterAndSlashes=v,t.fixDriveLetter=_,t.stripTrailingSlash=b,t.errP=w,t.getURL=function(e,t={}){return new Promise(((r,n)=>{const i=a.parse(e);("https:"===i.protocol?h.get:d.get)(t=Object.assign({rejectUnauthorized:!1},i,t),(e=>{let t="";e.on("data",(e=>t+=e)),e.on("end",(()=>{200===e.statusCode?r(t):(u.logger.log("HTTP GET failed with: "+e.statusCode.toString()+" "+e.statusMessage.toString()),n(new Error(t.trim())))}))})).on("error",(e=>{u.logger.log("HTTP GET failed: "+e.toString()),n(e)}))}))},t.isURL=S,t.isAbsolute=E,t.lstrip=function(e,t){return e.startsWith(t)?e.substr(t.length):e},t.pathToFileURL=C,t.fsReadDirP=function(e){return new Promise(((t,r)=>{o.readdir(e,((e,n)=>{e?r(e):t(n)}))}))},t.readFileP=function(e,t="utf8"){return new Promise(((r,n)=>{o.readFile(e,t,((e,t)=>{e?n(e):r(t)}))}))},t.writeFileP=function(e,t){return new Promise(((r,n)=>{T(c.dirname(e)),o.writeFile(e,t,(e=>{e?n(e):r(t)}))}))},t.mkdirs=T,t.extendObject=k,t.multiGlob=function(e,t){const r=[];t=k({cache:Object.create(null),statCache:Object.create(null),realpathCache:Object.create(null),symlinks:Object.create(null),ignore:[]},t);try{e.forEach(((n,i)=>{if(P(n))return;const o=e.slice(i).filter(P).map((e=>e.slice(1)));r.push({pattern:n,opts:k(k({},t),{ignore:t.ignore.concat(o)})})}))}catch(e){return Promise.reject(e)}return Promise.all(r.map((e=>new Promise(((t,r)=>{l(e.pattern,e.opts,((e,n)=>{e?r(e):t(n)}))}))))).then((e=>{const t=new Set;for(let r of e)for(let e of r)t.add(e);let r=[];return t.forEach((e=>r.push(v(e)))),r}))};class R extends u.Handles{constructor(){super(...arguments),this._reverseMap=new Map}create(e){const t=super.create(e);return this._reverseMap.set(e,t),t}lookup(e){return this._reverseMap.get(e)}lookupF(e){for(let t of this._reverseMap.keys())if(e(t))return this._reverseMap.get(t)}set(e,t){this._handleMap.set(e,t),this._reverseMap.set(t,e)}}t.ReverseHandles=R,t.pathToRegex=function(e){const t="file:///",r=e.startsWith(t),n=E(e);return r&&(e=e.substr(8)),e=S(e)||r||!n?M(e):`${M(e)}|${M(C(e))}`,e=f?e.replace(/(^|file:\\\/\\\/\\\/)([a-zA-Z]):/g,((e,t,r)=>`${t}[${r.toUpperCase()}${r.toLowerCase()}]:`)):e.replace(/[a-zA-Z]/g,(e=>`[${e.toLowerCase()}${e.toUpperCase()}]`)),r&&(e=M(t)+e),e},t.pathGlobToBlackboxedRegex=function(e){return M(e,"*").replace(/([^*]|^)\*([^*]|$)/g,"$1.*$2").replace(/\*\*(\\\/|\\\\)?/g,"(.*\\/)?").replace(/\.\*\\\/\.\*/g,".*").replace(/\.\*\.\*/g,".*").replace(/\\\/|\\\\/g,"[/\\\\]")};const x="/\\.?*()^${}|[]+";function M(e,t){const r=x.split("").filter((e=>!t||t.indexOf(e)<0)).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${r}]`,"g");return e.replace(n,"\\$&")}function O(e){return`(?!${M(e)})`}function D(e,t=0){return e.split("\n")[t]}t.escapeRegexSpecialChars=M,t.trimLastNewline=function(e){return e.replace(/(\n|\r\n)$/,"")},t.prettifyNewlines=function(e){return e.replace(/(\n|\r\n)/,"\\n")},t.makeRegexNotMatchPath=function(e,t){if(e.test(t)){const r=e.source.replace(/^\^/,""),n=`^${O(t)}.*(${r})`;return new RegExp(n,"i")}return e},t.makeRegexMatchPath=function(e,t){const r=O(t);if(e.source.indexOf(r)>=0){const t=e.source.replace(r,"");return new RegExp(t,"i")}return e},t.uppercaseFirstLetter=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},t.getLine=D,t.firstLine=function(e){return D(e||"")},t.isNumber=function(e){return"number"==typeof e},t.toVoidP=function(e){return e.then((()=>{}))},t.promiseDefer=function(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}},t.calculateElapsedTime=function(e){const t=process.hrtime(e);return(1e9*t[0]+t[1])/1e6};const I=/[A-z]:(?:[\\/][^:]*)+[\\/]([^:]*:)/g;t.fillErrorDetails=function(e,t){if(e.exceptionMessage=t.message||t.toString(),t.name&&(e.exceptionName=t.name),"string"==typeof t.stack){let r=t.stack;try{r=r.replace(I,"$1")}catch(e){}e.exceptionStack=r}t.id&&(e.exceptionId=t.id.toString())},t.properJoin=function(...e){return c.posix.isAbsolute(e[0])?c.posix.join(...e):c.win32.isAbsolute(e[0])?c.win32.join(...e):c.join(...e)},t.properResolve=function(...e){return c.posix.isAbsolute(e[0])?c.posix.resolve(...e):c.win32.isAbsolute(e[0])?c.win32.resolve(...e):c.resolve(...e)}},4379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSession=t.ErrorDestination=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ExitedEvent=t.TerminatedEvent=t.InitializedEvent=t.ContinuedEvent=t.StoppedEvent=t.CompletionItem=t.Module=t.Breakpoint=t.Variable=t.Thread=t.StackFrame=t.Scope=t.Source=void 0;const n=r(646),i=r(7998),o=r(6763),s=r(7016);t.Source=class{constructor(e,t,r=0,n,i){this.name=e,this.path=t,this.sourceReference=r,n&&(this.origin=n),i&&(this.adapterData=i)}},t.Scope=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}},t.StackFrame=class{constructor(e,t,r,n=0,i=0){this.id=e,this.source=r,this.line=n,this.column=i,this.name=t}},t.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}},t.Variable=class{constructor(e,t,r=0,n,i){this.name=e,this.value=t,this.variablesReference=r,"number"==typeof i&&(this.namedVariables=i),"number"==typeof n&&(this.indexedVariables=n)}},t.Breakpoint=class{constructor(e,t,r,n){this.verified=e;const i=this;"number"==typeof t&&(i.line=t),"number"==typeof r&&(i.column=r),n&&(i.source=n)}setId(e){this.id=e}},t.Module=class{constructor(e,t){this.id=e,this.name=t}},t.CompletionItem=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};class a extends i.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},"number"==typeof t&&(this.body.threadId=t),"string"==typeof r&&(this.body.text=r)}}t.StoppedEvent=a;class c extends i.Event{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}}t.ContinuedEvent=c;class l extends i.Event{constructor(){super("initialized")}}t.InitializedEvent=l;class u extends i.Event{constructor(e){super("terminated"),("boolean"==typeof e||e)&&(this.body={restart:e})}}t.TerminatedEvent=u;class d extends i.Event{constructor(e){super("exited"),this.body={exitCode:e}}}t.ExitedEvent=d;class h extends i.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},void 0!==r&&(this.body.data=r)}}t.OutputEvent=h;class p extends i.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}}t.ThreadEvent=p;class f extends i.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}}t.BreakpointEvent=f;class m extends i.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}}t.ModuleEvent=m;class g extends i.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}}t.LoadedSourceEvent=g;class y extends i.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}}t.CapabilitiesEvent=y;class v extends i.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},"string"==typeof r&&(this.body.message=r)}}t.ProgressStartEvent=v;class _ extends i.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressUpdateEvent=_;class b extends i.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressEndEvent=b;class w extends i.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}}var S;t.InvalidatedEvent=w,function(e){e[e.User=1]="User",e[e.Telemetry=2]="Telemetry"}(S=t.ErrorDestination||(t.ErrorDestination={}));class E extends n.ProtocolServer{constructor(e,t){super();const r="boolean"==typeof e&&e;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer="boolean"==typeof t&&t,this.on("close",(()=>{this.shutdown()})),this.on("error",(e=>{this.shutdown()}))}setDebuggerPathFormat(e){this._debuggerPathsAreURIs="path"!==e}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,o.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout((()=>{process.exit(0)}),100)}sendErrorResponse(e,t,r,n,i=S.User){let o;"number"==typeof t?(o={id:t,format:r},n&&(o.variables=n),i&S.User&&(o.showUser=!0),i&S.Telemetry&&(o.sendTelemetry=!0)):o=t,e.success=!1,e.message=E.formatPII(o.format,!0,o.variables),e.body||(e.body={}),e.body.error=o,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){const t=new i.Response(e);try{if("initialize"===e.command){var r=e.arguments;if("boolean"==typeof r.linesStartAt1&&(this._clientLinesStartAt1=r.linesStartAt1),"boolean"==typeof r.columnsStartAt1&&(this._clientColumnsStartAt1=r.columnsStartAt1),"path"!==r.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,S.Telemetry);else{const e=t;e.body={},this.initializeRequest(e,r)}}else"launch"===e.command?this.launchRequest(t,e.arguments,e):"attach"===e.command?this.attachRequest(t,e.arguments,e):"disconnect"===e.command?this.disconnectRequest(t,e.arguments,e):"terminate"===e.command?this.terminateRequest(t,e.arguments,e):"restart"===e.command?this.restartRequest(t,e.arguments,e):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments,e):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments,e):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments,e):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments,e):"continue"===e.command?this.continueRequest(t,e.arguments,e):"next"===e.command?this.nextRequest(t,e.arguments,e):"stepIn"===e.command?this.stepInRequest(t,e.arguments,e):"stepOut"===e.command?this.stepOutRequest(t,e.arguments,e):"stepBack"===e.command?this.stepBackRequest(t,e.arguments,e):"reverseContinue"===e.command?this.reverseContinueRequest(t,e.arguments,e):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments,e):"goto"===e.command?this.gotoRequest(t,e.arguments,e):"pause"===e.command?this.pauseRequest(t,e.arguments,e):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments,e):"scopes"===e.command?this.scopesRequest(t,e.arguments,e):"variables"===e.command?this.variablesRequest(t,e.arguments,e):"setVariable"===e.command?this.setVariableRequest(t,e.arguments,e):"setExpression"===e.command?this.setExpressionRequest(t,e.arguments,e):"source"===e.command?this.sourceRequest(t,e.arguments,e):"threads"===e.command?this.threadsRequest(t,e):"terminateThreads"===e.command?this.terminateThreadsRequest(t,e.arguments,e):"evaluate"===e.command?this.evaluateRequest(t,e.arguments,e):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments,e):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments,e):"completions"===e.command?this.completionsRequest(t,e.arguments,e):"exceptionInfo"===e.command?this.exceptionInfoRequest(t,e.arguments,e):"loadedSources"===e.command?this.loadedSourcesRequest(t,e.arguments,e):"dataBreakpointInfo"===e.command?this.dataBreakpointInfoRequest(t,e.arguments,e):"setDataBreakpoints"===e.command?this.setDataBreakpointsRequest(t,e.arguments,e):"readMemory"===e.command?this.readMemoryRequest(t,e.arguments,e):"writeMemory"===e.command?this.writeMemoryRequest(t,e.arguments,e):"disassemble"===e.command?this.disassembleRequest(t,e.arguments,e):"cancel"===e.command?this.cancelRequest(t,e.arguments,e):"breakpointLocations"===e.command?this.breakpointLocationsRequest(t,e.arguments,e):"setInstructionBreakpoints"===e.command?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack},S.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,n){this.sendErrorResponse(t,1014,"unrecognized request",null,S.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?E.uri2path(e):E.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?E.uri2path(e):E.path2uri(e):e}static path2uri(e){"win32"===process.platform&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new s.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new s.URL(e),r=decodeURIComponent(t.pathname);return"win32"===process.platform&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(E._formatPIIRegexp,(function(e,n){return t&&n.length>0&&"_"!==n[0]?e:r[n]&&r.hasOwnProperty(n)?r[n]:e}))}}t.DebugSession=E,E._formatPIIRegexp=/{([^}]+)}/g},8079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=void 0,t.Handles=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle="number"==typeof e?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}}},6083:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalLogger=void 0;const i=r(9896),o=r(6928),s=r(3480),a=r(3846);function c(){let e=new Date;return l(2,String(e.getUTCHours()))+":"+l(2,String(e.getUTCMinutes()))+":"+l(2,String(e.getUTCSeconds()))+"."+l(3,String(e.getUTCMilliseconds()))+" UTC"}function l(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.InternalLogger=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=a.LogLevel.Warn,this.disposeCallback=(e,t)=>{this.dispose(),t=t||2,t+=128,process.exit(t)}}setup(e){return n(this,void 0,void 0,(function*(){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(o.isAbsolute(e.logFilePath)){const t=t=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${t.toString()}\n`,a.LogLevel.Error);try{yield s(o.dirname(e.logFilePath)),this.log("Verbose logs are written to:\n",a.LogLevel.Warn),this.log(e.logFilePath+"\n",a.LogLevel.Warn),this._logFileStream=i.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",(e=>{t(e)}))}catch(e){t(e)}}else this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,a.LogLevel.Error)}))}logDateTime(){let e=new Date;const t=e.getUTCFullYear()+"-"+`${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+c();this.log(t+"\n",a.LogLevel.Verbose,!1)}setupShutdownListeners(){process.addListener("beforeExit",this.beforeExitCallback),process.addListener("SIGTERM",this.disposeCallback),process.addListener("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise((e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()}))}log(e,t,r=!0){if(this._minLogLevel!==a.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){const r=t===a.LogLevel.Error?console.error:t===a.LogLevel.Warn?console.warn:null;r&&r((0,a.trimLastNewline)(e))}t===a.LogLevel.Error&&(e=`[${a.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+c()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){const t=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",t&&(e+="\n")}if(this._logCallback){const r=new a.LogOutputEvent(e,t);this._logCallback(r)}}}},3846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimLastNewline=t.LogOutputEvent=t.logger=t.Logger=t.LogLevel=void 0;const n=r(6083),i=r(4379);var o;!function(e){e[e.Verbose=0]="Verbose",e[e.Log=1]="Log",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Stop=4]="Stop"}(o=t.LogLevel||(t.LogLevel={}));class s{constructor(){this._pendingLogQ=[]}log(e,t=o.Log){e+="\n",this._write(e,t)}verbose(e){this.log(e,o.Verbose)}warn(e){this.log(e,o.Warn)}error(e){this.log(e,o.Error)}dispose(){if(this._currentLogger){const e=this._currentLogger.dispose();return this._currentLogger=null,e}return Promise.resolve()}_write(e,t=o.Log){e+="",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){const n="string"==typeof t?t:t&&this._logFilePathFromInit;if(this._currentLogger){const t={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:r};this._currentLogger.setup(t).then((()=>{if(this._pendingLogQ){const e=this._pendingLogQ;this._pendingLogQ=null,e.forEach((e=>this._write(e.msg,e.level)))}}))}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new n.InternalLogger(e,r),this._logFilePathFromInit=t}}t.Logger=s,t.logger=new s;class a extends i.OutputEvent{constructor(e,t){super(e,t===o.Error?"stderr":t===o.Warn?"console":"stdout")}}t.LogOutputEvent=a,t.trimLastNewline=function(e){return e.replace(/(\n|\r\n)$/,"")}},9432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDebugSession=void 0;const n=r(3846),i=n.logger,o=r(4379);class s extends o.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",(e=>{i.error(e.body)}))}start(e,t){super.start(e,t),i.init((e=>this.sendEvent(e)),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof n.LogOutputEvent)){let t=e;e instanceof o.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t=Object.assign({},e),t.body=Object.assign(Object.assign({},e.body),{output:"<output not logged>"})),i.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,n){i.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,n)}sendResponse(e){i.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){i.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}}t.LoggingDebugSession=s},8063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=t.Response=t.Event=t.ErrorDestination=t.CompletionItem=t.Module=t.Source=t.Breakpoint=t.Variable=t.Scope=t.StackFrame=t.Thread=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ContinuedEvent=t.StoppedEvent=t.ExitedEvent=t.TerminatedEvent=t.InitializedEvent=t.logger=t.Logger=t.LoggingDebugSession=t.DebugSession=void 0;const n=r(4379);Object.defineProperty(t,"DebugSession",{enumerable:!0,get:function(){return n.DebugSession}}),Object.defineProperty(t,"InitializedEvent",{enumerable:!0,get:function(){return n.InitializedEvent}}),Object.defineProperty(t,"TerminatedEvent",{enumerable:!0,get:function(){return n.TerminatedEvent}}),Object.defineProperty(t,"ExitedEvent",{enumerable:!0,get:function(){return n.ExitedEvent}}),Object.defineProperty(t,"StoppedEvent",{enumerable:!0,get:function(){return n.StoppedEvent}}),Object.defineProperty(t,"ContinuedEvent",{enumerable:!0,get:function(){return n.ContinuedEvent}}),Object.defineProperty(t,"OutputEvent",{enumerable:!0,get:function(){return n.OutputEvent}}),Object.defineProperty(t,"ThreadEvent",{enumerable:!0,get:function(){return n.ThreadEvent}}),Object.defineProperty(t,"BreakpointEvent",{enumerable:!0,get:function(){return n.BreakpointEvent}}),Object.defineProperty(t,"ModuleEvent",{enumerable:!0,get:function(){return n.ModuleEvent}}),Object.defineProperty(t,"LoadedSourceEvent",{enumerable:!0,get:function(){return n.LoadedSourceEvent}}),Object.defineProperty(t,"CapabilitiesEvent",{enumerable:!0,get:function(){return n.CapabilitiesEvent}}),Object.defineProperty(t,"ProgressStartEvent",{enumerable:!0,get:function(){return n.ProgressStartEvent}}),Object.defineProperty(t,"ProgressUpdateEvent",{enumerable:!0,get:function(){return n.ProgressUpdateEvent}}),Object.defineProperty(t,"ProgressEndEvent",{enumerable:!0,get:function(){return n.ProgressEndEvent}}),Object.defineProperty(t,"InvalidatedEvent",{enumerable:!0,get:function(){return n.InvalidatedEvent}}),Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return n.Thread}}),Object.defineProperty(t,"StackFrame",{enumerable:!0,get:function(){return n.StackFrame}}),Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return n.Variable}}),Object.defineProperty(t,"Breakpoint",{enumerable:!0,get:function(){return n.Breakpoint}}),Object.defineProperty(t,"Source",{enumerable:!0,get:function(){return n.Source}}),Object.defineProperty(t,"Module",{enumerable:!0,get:function(){return n.Module}}),Object.defineProperty(t,"CompletionItem",{enumerable:!0,get:function(){return n.CompletionItem}}),Object.defineProperty(t,"ErrorDestination",{enumerable:!0,get:function(){return n.ErrorDestination}});const i=r(9432);Object.defineProperty(t,"LoggingDebugSession",{enumerable:!0,get:function(){return i.LoggingDebugSession}});const o=r(3846);t.Logger=o;const s=r(7998);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return s.Response}});const a=r(8079);Object.defineProperty(t,"Handles",{enumerable:!0,get:function(){return a.Handles}});const c=o.logger;t.logger=c},7998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.Response=t.Message=void 0;class r{constructor(e){this.seq=0,this.type=e}}t.Message=r,t.Response=class extends r{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}},t.Event=class extends r{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}},646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolServer=void 0;const n=r(4434),i=r(7998);class o{get event(){return this._event||(this._event=(e,t)=>{let r;return this._listener=e,this._this=t,r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch(e){}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}}class s extends n.EventEmitter{constructor(){super(),this._sendMessage=new o,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",(e=>this._handleData(e))),e.on("close",(()=>{this._emitEvent(new i.Event("close"))})),e.on("error",(e=>{this._emitEvent(new i.Event("error","inStream error: "+(e&&e.message)))})),t.on("error",(e=>{this._emitEvent(new i.Event("error","outStream error: "+(e&&e.message)))})),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,n){const o={command:e};if(t&&Object.keys(t).length>0&&(o.arguments=t),this._send("request",o),n){this._pendingRequests.set(o.seq,n);const e=setTimeout((()=>{clearTimeout(e);const t=this._pendingRequests.get(o.seq);t&&(this._pendingRequests.delete(o.seq),t(new i.Response(o,"timeout")))}),r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){const e=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(e,"utf8")}\r\n\r\n${e}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){const e=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,e.length>0)try{let t=JSON.parse(e);this.handleMessage(t)}catch(e){this._emitEvent(new i.Event("error","Error handling data: "+(e&&e.message)))}continue}}else{const e=this._rawData.indexOf(s.TWO_CRLF);if(-1!==e){const t=this._rawData.toString("utf8",0,e).split("\r\n");for(let e=0;e<t.length;e++){const r=t[e].split(/: +/);"Content-Length"==r[0]&&(this._contentLength=+r[1])}this._rawData=this._rawData.slice(e+s.TWO_CRLF.length);continue}}break}}}t.ProtocolServer=s,s.TWO_CRLF="\r\n\r\n"},6763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runDebugAdapter=void 0;const n=r(9278);t.runDebugAdapter=function(e){let t=0;if(process.argv.slice(2).forEach((function(e,r,n){const i=/^--server=(\d{4,5})$/.exec(e);i&&(t=parseInt(i[1],10))})),t>0)console.error(`waiting for debug protocol on port ${t}`),n.createServer((t=>{console.error(">> accepted connection from client"),t.on("end",(()=>{console.error(">> client connection closed\n")}));const r=new e(!1,!0);r.setRunAsServer(!0),r.start(t,t)})).listen(t);else{const t=new e(!1);process.on("SIGTERM",(()=>{t.shutdown()})),t.start(process.stdin,process.stdout)}}},5575:(e,t,r)=>{var n=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&d(e,r,t[r]);if(a)for(var r of a(t))u.call(t,r)&&d(e,r,t[r]);return e},p=e=>i(e,"__esModule",{value:!0}),f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),m=e=>((e,t,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of s(t))!l.call(e,n)&&"default"!==n&&i(e,n,{get:()=>t[n],enumerable:!(r=o(t,n))||r.enumerable});return e})(p(i(null!=e?n(c(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),g=f(((e,t)=>{"use strict";var r=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();t.exports=r})),y=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var n=un(),i=r(4434),o=function(){function e(){}return e.prototype.active=function(){var e=this,r=n.CorrelationContextManager.getCurrentContext();return t(t({},r),{getValue:function(t){return e._activeSymbol?t===e._activeSymbol&&r:(e._activeSymbol=t,r)},setValue:function(){}})},e.prototype.with=function(t,r){var i=t.parentSpanId,o=t.name,s=e._spanToContext(t,i,o);return n.CorrelationContextManager.runWithContext(s,r)()},e.prototype.bind=function(e){return"function"==typeof e?n.CorrelationContextManager.wrapCallback(e):(e instanceof i.EventEmitter&&n.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return n.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return n.CorrelationContextManager.disable(),this},e._spanToContext=function(e,r,i){var o=r?"|"+e.spanContext().traceId+"."+r+".":e.spanContext().traceId,s=t(t({},e.spanContext()),{traceFlags:e.spanContext().traceFlags});return n.CorrelationContextManager.spanToContextObject(s,o,i)},e}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o})),v=f(((e,t)=>{var r;e=t.exports=K,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var l=a++;s[l]="[0-9]+";var u=a++;s[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var h=a++;s[h]="("+s[l]+")\\.("+s[l]+")\\.("+s[l]+")";var p=a++;s[p]="(?:"+s[c]+"|"+s[u]+")";var f=a++;s[f]="(?:"+s[l]+"|"+s[u]+")";var m=a++;s[m]="(?:-("+s[p]+"(?:\\."+s[p]+")*))";var g=a++;s[g]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var y=a++;s[y]="[0-9A-Za-z-]+";var v=a++;s[v]="(?:\\+("+s[y]+"(?:\\."+s[y]+")*))";var _=a++,b="v?"+s[d]+s[m]+"?"+s[v]+"?";s[_]="^"+b+"$";var w="[v=\\s]*"+s[h]+s[g]+"?"+s[v]+"?",S=a++;s[S]="^"+w+"$";var E=a++;s[E]="((?:<|>)?=?)";var C=a++;s[C]=s[l]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var k=a++;s[k]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[m]+")?"+s[v]+"?)?)?";var P=a++;s[P]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[g]+")?"+s[v]+"?)?)?";var R=a++;s[R]="^"+s[E]+"\\s*"+s[k]+"$";var x=a++;s[x]="^"+s[E]+"\\s*"+s[P]+"$";var M=a++;s[M]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var O=a++;s[O]="(?:~>?)";var D=a++;s[D]="(\\s*)"+s[O]+"\\s+",o[D]=new RegExp(s[D],"g");var I=a++;s[I]="^"+s[O]+s[k]+"$";var A=a++;s[A]="^"+s[O]+s[P]+"$";var N=a++;s[N]="(?:\\^)";var L=a++;s[L]="(\\s*)"+s[N]+"\\s+",o[L]=new RegExp(s[L],"g");var F=a++;s[F]="^"+s[N]+s[k]+"$";var j=a++;s[j]="^"+s[N]+s[P]+"$";var q=a++;s[q]="^"+s[E]+"\\s*("+w+")$|^$";var U=a++;s[U]="^"+s[E]+"\\s*("+b+")$|^$";var B=a++;s[B]="(\\s*)"+s[E]+"\\s*("+w+"|"+s[k]+")",o[B]=new RegExp(s[B],"g");var $=a++;s[$]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var W=a++;s[W]="^\\s*("+s[P]+")\\s+-\\s+("+s[P]+")\\s*$";var H,V=a++;for(s[V]="(<|>)?=?\\s*\\*",H=0;H<35;H++)r(H,s[H]),o[H]||(o[H]=new RegExp(s[H]));function G(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?o[S]:o[_]).test(e))return null;try{return new K(e,t)}catch(e){return null}}function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof K))return new K(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[S]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=G,e.valid=function(e,t){var r=G(e,t);return r?r.version:null},e.clean=function(e,t){var r=G(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof K||(e=new K(e,this.options)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return X(n,i)}while(++t)},K.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new K(e,r).inc(t,n).version}catch(e){return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=G(e),n=G(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},e.compareIdentifiers=X;var z=/^[0-9]+$/;function X(e,t){var r=z.test(e),n=z.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new K(e,r).compare(new K(t,r))}function Y(e,t,r){return J(e,t,r)>0}function Q(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function ee(e,t,r){return 0!==J(e,t,r)}function te(e,t,r){return J(e,t,r)>=0}function re(e,t,r){return J(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return Y(e,r,n);case">=":return te(e,r,n);case"<":return Q(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new K(e,t).major},e.minor=function(e,t){return new K(e,t).minor},e.patch=function(e,t){return new K(e,t).patch},e.compare=J,e.compareLoose=function(e,t){return J(e,t,!0)},e.rcompare=function(e,t,r){return J(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=Y,e.lt=Q,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=ie;var oe={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,i,o,s,a,c,l,u,d,h){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(l)?"<"+(+c+1)+".0.0":ae(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function le(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ue(e,t,r){try{t=new se(t,r)}catch(e){return!1}return t.test(e)}function de(e,t,r,n){var i,o,s,a,c;switch(e=new K(e,n),t=new se(t,n),r){case">":i=Y,o=re,s=Q,a=">",c=">=";break;case"<":i=Q,o=te,s=Y,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],d=null,h=null;if(u.forEach((function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,h=h||e,i(e.semver,d.semver,n)?d=e:s(e.semver,h.semver,n)&&(h=e)})),d.operator===a||d.operator===c||(!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===c&&s(e,h.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[q]:o[U],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new K(r[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new K(e,this.options)),ne(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),ue(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),ue(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[W]:o[$];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),r("comparator trim",e,o[B]),e=(e=(e=e.replace(o[D],"$1~")).replace(o[L],"$1^")).split(/\s+/).join(" ");var i=t?o[q]:o[U],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[j]:o[F];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[A]:o[I];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[x]:o[R];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=ae(i),l=c||ae(o),u=l||ae(s);return"="===n&&u&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(l&&(o=0),s=0,">"===n?(n=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":u&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[V],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new ie(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new K(e,this.options));for(var t=0;t<this.set.length;t++)if(le(this.set[t],e,this.options))return!0;return!1},e.satisfies=ue,e.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(!n||-1===i.compare(e))&&(i=new K(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(!n||1===i.compare(e))&&(i=new K(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new K("0.0.0");if(e.test(r)||(r=new K("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new K(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||Y(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=G(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof K)return e;if("string"!=typeof e)return null;var t=e.match(o[M]);return null==t?null:G(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),_=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=r(6928),n=v(),i=r(3339),o=Object.keys(process.binding("natives")),s=i.prototype.require;e.makePatchingRequire=function(e){var r={};return function(a){var c=s.apply(this,arguments);if(e[a]){var l=i._resolveFilename(a,this);if(r.hasOwnProperty(l))return r[l];var u=void 0;if(o.indexOf(a)<0)try{u=s.call(this,t.join(a,"package.json")).version}catch(e){return c}else u=process.version.substring(1);var d=u.indexOf("-");d>=0&&(u=u.substring(0,d));for(var h=c,p=0,f=e[a];p<f.length;p++){var m=f[p];n.satisfies(u,m.versionSpecifier)&&(h=m.patch(h,l))}return r[l]=h}return c}}})),b=f(((e,t)=>{t.exports={_args:[["diagnostic-channel@1.0.0","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"diagnostic-channel@1.0.0",_id:"diagnostic-channel@1.0.0",_inBundle:!1,_integrity:"sha512-v7Clmg5HG9XwIhqgbBRfwFzwZhxjvESZ33uu1cgcCLkdb9ZxgtY78eAgQMEQ39UecQ//4K5W75iq6LFBtAQD8w==",_location:"/diagnostic-channel",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"diagnostic-channel@1.0.0",name:"diagnostic-channel",escapedName:"diagnostic-channel",rawSpec:"1.0.0",saveSpec:null,fetchSpec:"1.0.0"},_requiredBy:["/applicationinsights"],_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-1.0.0.tgz",_spec:"1.0.0",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},dependencies:{semver:"^5.3.0"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],homepage:"https://github.com/Microsoft/node-diagnostic-channel",license:"MIT",main:"./dist/src/channel.js",name:"diagnostic-channel",repository:{type:"git",url:"git+https://github.com/Microsoft/node-diagnostic-channel.git"},scripts:{build:"tsc",clean:"rimraf ./dist",lint:"tslint -c tslint.json -p tsconfig.json",test:"mocha ./dist/tests/**/*.js"},types:"./dist/src/channel.d.ts",version:"1.0.0"}})),w=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=_(),n=_();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return n.makePatchingRequire}});var i=function(e){return!0},o=function(){function e(){this.version=b().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var r=this.subscribers[e];if(r){var n={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,r.forEach((function(e){var t=e.listener,r=e.filter;try{r&&r(!0)&&t(n)}catch(e){}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,r){void 0===r&&(r=i),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:r})},e.prototype.unsubscribe=function(e,t,r){void 0===r&&(r=i);var n=this.subscribers[e];if(n)for(var o=0;o<n.length;++o)if(n[o].listener===t&&n[o].filter===r)return n.splice(o,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(r){return e(t(r))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new o,r(3339).prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),e.channel=global.diagnosticsSource})),S=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),E=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),i=0,o=t;i<o.length;i++){var s=o[i];n._entries.delete(s)}return n},e.prototype.clear=function(){return new e},e}();e.BaggageImpl=t})),C=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")})),T=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=me(),r=E(),n=C();e.createBaggage=function(e){return void 0===e&&(e={}),new r.BaggageImpl(new Map(Object.entries(e)))},e.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(t.diag.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return e}}}})),k=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),P=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),R=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];e.DiagConsoleLogger=function(){function e(e){return function(){var t=arguments;if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var r=0;r<t.length;r++)this[t[r].n]=e(t[r].c)}})),x=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(t=e.DiagLogLevel||(e.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})),M=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(R(),e),r(x(),e)})),O=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},e.defaultTextMapSetter={set:function(e,t,r){null!=e&&(e[t]=r)}}})),D=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),I=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),A=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(e){return Symbol.for(e)};e.ROOT_CONTEXT=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var i=new e(r._currentContext);return i._currentContext.set(t,n),i},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}}})),N=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(t=e.TraceFlags||(e.TraceFlags={}))[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})),L=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=F(),r=N(),n=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(t){return n.test(t)&&t!==e.INVALID_TRACEID}function s(t){return i.test(t)&&t!==e.INVALID_SPANID}e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:r.TraceFlags.NONE},e.isValidTraceId=o,e.isValidSpanId=s,e.isSpanContextValid=function(e){return o(e.traceId)&&s(e.spanId)},e.wrapSpanContext=function(e){return new t.NonRecordingSpan(e)}})),F=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=L(),r=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();e.NonRecordingSpan=r})),j=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=A(),r=F(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function i(e){return e.getValue(n)||void 0}function o(e,t){return e.setValue(n,t)}e.getSpan=i,e.setSpan=o,e.deleteSpan=function(e){return e.deleteValue(n)},e.setSpanContext=function(e,t){return o(e,new r.NonRecordingSpan(t))},e.getSpanContext=function(e){var t;return null===(t=i(e))||void 0===t?void 0:t.spanContext()}})),q=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=me(),r=j(),n=F(),i=L(),o=function(){function e(){}return e.prototype.startSpan=function(e,t,o){if(Boolean(null==t?void 0:t.root))return new n.NonRecordingSpan;var s=o&&r.getSpanContext(o);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(s)&&i.isSpanContextValid(s)?new n.NonRecordingSpan(s):new n.NonRecordingSpan},e.prototype.startActiveSpan=function(e,n,i,o){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=n:3===arguments.length?(s=n,c=i):(s=n,a=i,c=o);var l=null!=a?a:t.context.active(),u=this.startSpan(e,s,l),d=r.setSpan(l,u);return t.context.with(d,c,void 0,u)}},e}();e.NoopTracer=o})),U=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=q(),r=function(){function e(e,t,r){this._provider=e,this.name=t,this.version=r}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):new t.NoopTracer},e}();e.ProxyTracer=r})),B=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=q(),r=function(){function e(){}return e.prototype.getTracer=function(e,r){return new t.NoopTracer},e}();e.NoopTracerProvider=r})),$=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=U(),r=new(B().NoopTracerProvider),n=function(){function e(){}return e.prototype.getTracer=function(e,r){var n;return null!==(n=this.getDelegateTracer(e,r))&&void 0!==n?n:new t.ProxyTracer(this,e,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:r},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t)},e}();e.ProxyTracerProvider=n})),W=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),H=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(t=e.SamplingDecision||(e.SamplingDecision={}))[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})),V=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),G=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(t=e.SpanKind||(e.SpanKind={}))[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})),K=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),z=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),X=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(t=e.SpanStatusCode||(e.SpanStatusCode={}))[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})),J=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Y=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Q=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Z=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ee=f((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=A(),n=function(){function e(){}return e.prototype.active=function(){return r.ROOT_CONTEXT},e.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,t([n],i))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();e.NoopContextManager=n})),te=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis="object"==typeof globalThis?globalThis:global})),re=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(te(),e)})),ne=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(re(),e)})),ie=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.1"})),oe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=ie(),r=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function n(e){var t=new Set([e]),n=new Set,i=e.match(r);if(!i)return function(){return!1};var o=+i[1],s=+i[2],a=+i[3];function c(e){return n.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var i=e.match(r);if(!i)return c(e);var u=+i[1],d=+i[2],h=+i[3];return o!==u?c(e):0===o?s===d&&a<=h?l(e):c(e):s<=d?l(e):c(e)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)})),se=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=ne(),r=ie(),n=oe(),i=r.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=t._globalThis;e.registerGlobal=function(e,t,n,i){var a;void 0===i&&(i=!1);var c=s[o]=null!==(a=s[o])&&void 0!==a?a:{version:r.VERSION};if(!i&&c[e]){var l=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(l.stack||l.message),!1}return c.version!==r.VERSION?(l=new Error("@opentelemetry/api: All API registration versions must match"),n.error(l.stack||l.message),!1):(c[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+r.VERSION+"."),!0)},e.getGlobal=function(e){var t,r,i=null===(t=s[o])||void 0===t?void 0:t.version;if(i&&n.isCompatible(i))return null===(r=s[o])||void 0===r?void 0:r[e]},e.unregisterGlobal=function(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+r.VERSION+".");var n=s[o];n&&delete n[e]}})),ae=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=se(),r=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("verbose",this._namespace,e)},e}();function n(e,r,n){var i=t.getGlobal("diag");if(i)return n.unshift(r),i[e].apply(i,n)}e.DiagComponentLogger=r})),ce=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=x();e.createLogLevelDiagLogger=function(e,r){function n(t,n){var i=r[t];return"function"==typeof i&&e>=n?i.bind(r):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),r=r||{},{error:n("error",t.DiagLogLevel.ERROR),warn:n("warn",t.DiagLogLevel.WARN),info:n("info",t.DiagLogLevel.INFO),debug:n("debug",t.DiagLogLevel.DEBUG),verbose:n("verbose",t.DiagLogLevel.VERBOSE)}}})),le=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=ae(),r=ce(),n=x(),i=se(),o=function(){function e(){function e(e){return function(){var t=i.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var o=this;o.setLogger=function(e,t){var s,a;if(void 0===t&&(t=n.DiagLogLevel.INFO),e===o){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return o.error(null!==(s=c.stack)&&void 0!==s?s:c.message),!1}var l=i.getGlobal("diag"),u=r.createLogLevelDiagLogger(t,e);if(l){var d=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+d),u.warn("Current logger will overwrite one already registered from "+d)}return i.registerGlobal("diag",u,o,!0)},o.disable=function(){i.unregisterGlobal("diag",o)},o.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},o.verbose=e("verbose"),o.debug=e("debug"),o.info=e("info"),o.warn=e("warn"),o.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.DiagAPI=o})),ue=f((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=ee(),n=se(),i=le(),o="context",s=new r.NoopContextManager,a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return n.registerGlobal(o,e,i.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,t([e,r,n],o))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return n.getGlobal(o)||s},e.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(o,i.DiagAPI.instance())},e}();e.ContextAPI=a})),de=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=se(),r=$(),n=L(),i=j(),o=le(),s="trace",a=function(){function e(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){return this._proxyTracerProvider.setDelegate(e),t.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance())},e.prototype.getTracerProvider=function(){return t.getGlobal(s)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){t.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},e}();e.TraceAPI=a})),he=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();e.NoopTextMapPropagator=t})),pe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=A().createContextKey("OpenTelemetry Baggage Key");e.getBaggage=function(e){return e.getValue(t)||void 0},e.setBaggage=function(e,r){return e.setValue(t,r)},e.deleteBaggage=function(e){return e.deleteValue(t)}})),fe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=se(),r=he(),n=O(),i=pe(),o=T(),s=le(),a="propagation",c=new r.NoopTextMapPropagator,l=function(){function e(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return t.registerGlobal(a,e,s.DiagAPI.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=n.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=n.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){t.unregisterGlobal(a,s.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},e}();e.PropagationAPI=l})),me=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.baggageEntryMetadataFromString=void 0,r(S(),e);var n=T();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(k(),e),r(P(),e),r(M(),e),r(O(),e),r(D(),e),r(I(),e),r(U(),e),r($(),e),r(W(),e),r(H(),e),r(V(),e),r(G(),e),r(K(),e),r(z(),e),r(X(),e),r(N(),e),r(J(),e),r(Y(),e),r(Q(),e);var i=L();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}}),r(A(),e),r(Z(),e);var o=ue();e.context=o.ContextAPI.getInstance();var s=de();e.trace=s.TraceAPI.getInstance();var a=fe();e.propagation=a.PropagationAPI.getInstance();var c=le();e.diag=c.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}})),ge=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=me().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");e.suppressTracing=function(e){return e.setValue(t,!0)},e.unsuppressTracing=function(e){return e.deleteValue(t)},e.isTracingSuppressed=function(e){return!0===e.getValue(t)}})),ye=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192})),ve=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=me(),r=ye();e.serializeKeyPairs=e=>e.reduce(((e,t)=>{let n=`${e}${""!==e?r.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return n.length>r.BAGGAGE_MAX_TOTAL_LENGTH?e:n}),""),e.getKeyPairs=e=>e.getAllEntries().map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`)),e.parsePairKeyValue=e=>{let n=e.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(n.length<=0)return;let i=n.shift();if(!i)return;let o=i.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==o.length)return;let s,a=decodeURIComponent(o[0].trim()),c=decodeURIComponent(o[1].trim());return n.length>0&&(s=t.baggageEntryMetadataFromString(n.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:a,value:c,metadata:s}},e.parseKeyPairsIntoRecord=t=>"string"!=typeof t||0===t.length?{}:t.split(r.BAGGAGE_ITEMS_SEPARATOR).map((t=>e.parsePairKeyValue(t))).filter((e=>void 0!==e&&e.value.length>0)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})})),_e=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=me(),r=ge(),n=ye(),i=ve();e.HttpBaggagePropagator=class{inject(e,o,s){let a=t.propagation.getBaggage(e);if(!a||r.isTracingSuppressed(e))return;let c=i.getKeyPairs(a).filter((e=>e.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),l=i.serializeKeyPairs(c);l.length>0&&s.set(o,n.BAGGAGE_HEADER,l)}extract(e,r,o){let s=o.get(r,n.BAGGAGE_HEADER);if(!s)return e;let a={};return 0===s.length||(s.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{let t=i.parsePairKeyValue(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),a[t.key]=e}})),0===Object.entries(a).length)?e:t.propagation.setBaggage(e,t.propagation.createBaggage(a))}fields(){return[n.BAGGAGE_HEADER]}}})),be=f((e=>{"use strict";function t(e){return null==e||(Array.isArray(e)?function(e){let t;for(let n of e)if(null!=n){if(!t){if(r(n)){t=typeof n;continue}return!1}if(typeof n!==t)return!1}return!0}(e):r(e))}function r(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0,e.sanitizeAttributes=function(e){let r={};if(null==e||"object"!=typeof e)return r;for(let[n,i]of Object.entries(e))t(i)&&(Array.isArray(i)?r[n]=i.slice():r[n]=i);return r},e.isAttributeValue=t})),we=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=me();e.loggingErrorHandler=function(){return e=>{t.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){let t={},r=e;for(;null!==r;)Object.getOwnPropertyNames(r).forEach((e=>{if(t[e])return;let n=r[e];n&&(t[e]=String(n))})),r=Object.getPrototypeOf(r);return t}(e))}(e))}}})),Se=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=we().loggingErrorHandler();e.setGlobalErrorHandler=function(e){t=e},e.globalErrorHandler=e=>{try{t(e)}catch(e){}}})),Ee=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})),Ce=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=me(),r=Ee(),n=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function i(e){return n.indexOf(e)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function s(e){return o.indexOf(e)>-1}function a(e,t,r,n=-1/0,i=1/0){if(void 0!==r[e]){let o=Number(r[e]);isNaN(o)||(t[e]=o<n?n:o>i?i:o)}}function c(e,t,r,n=","){let i=r[e];"string"==typeof i&&(t[e]=i.split(n).map((e=>e.trim())))}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var l={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function u(e,t,r){let n=r[e];if("string"==typeof n){let r=l[n.toUpperCase()];null!=r&&(t[e]=r)}}e.parseEnvironment=function(t){let r={};for(let n in e.DEFAULT_ENVIRONMENT){let e=n;if("OTEL_LOG_LEVEL"===e)u(e,r,t);else if(i(e))a(e,r,t);else if(s(e))c(e,r,t);else{let n=t[e];null!=n&&(r[e]=String(n))}}return r}})),Te=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=r(857),n=Ce();e.getEnv=function(){let e=n.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},n.DEFAULT_ENVIRONMENT,e)}})),ke=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0,e.hexToBase64=function(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let t=e.substring(n,n+2),i=parseInt(t,16);r+=String.fromCharCode(i)}return Buffer.from(r,"ascii").toString("base64")}})),Pe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0,e.RandomIdGenerator=class{constructor(){this.generateTraceId=r(16),this.generateSpanId=r(8)}};var t=Buffer.allocUnsafe(16);function r(e){return function(){for(let r=0;r<e/4;r++)t.writeUInt32BE(Math.random()*2**32>>>0,4*r);for(let r=0;r<e&&!(t[r]>0);r++)r===e-1&&(t[e-1]=1);return t.toString("hex",0,e)}}})),Re=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=r(2987);e.otperformance=t.performance})),xe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"})),Me=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(t=e.DbSystemValues||(e.DbSystemValues={})).OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch",t.MEMCACHED="memcached",t.COCKROACHDB="cockroachdb",function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"}(e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={})),function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"}(e.FaasTriggerValues||(e.FaasTriggerValues={})),function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"}(e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={})),function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"}(e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={})),function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"}(e.NetTransportValues||(e.NetTransportValues={})),function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"}(e.HttpFlavorValues||(e.HttpFlavorValues={})),function(e){e.QUEUE="queue",e.TOPIC="topic"}(e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={})),function(e){e.RECEIVE="receive",e.PROCESS="process"}(e.MessagingOperationValues||(e.MessagingOperationValues={})),function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))})),Oe=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Me(),e)})),De=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(t=e.CloudProviderValues||(e.CloudProviderValues={})).AWS="aws",t.AZURE="azure",t.GCP="gcp",function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"}(e.CloudPlatformValues||(e.CloudPlatformValues={})),function(e){e.EC2="ec2",e.FARGATE="fargate"}(e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={})),function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"}(e.HostArchValues||(e.HostArchValues={})),function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"}(e.OsTypeValues||(e.OsTypeValues={})),function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"}(e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))})),Ie=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(De(),e)})),Ae=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Oe(),e),r(Ie(),e)})),Ne=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=xe(),r=Ae();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}})),Le=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0,e.unrefTimer=function(e){e.unref()}})),Fe=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Te(),e),r(ke(),e),r(Pe(),e),r(Re(),e),r(Ne(),e),r(Le(),e)})),je=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Fe(),e)})),qe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=je(),r=9,n=Math.pow(10,r);function i(e){let t=e/1e3,i=Math.trunc(t);return[i,Number((t-i).toFixed(r))*n]}function o(){let e=t.otperformance.timeOrigin;if("number"!=typeof e){let r=t.otperformance;e=r.timing&&r.timing.fetchStart}return e}function s(e){let r=i(o()),s=i("number"==typeof e?e:t.otperformance.now()),a=r[0]+s[0],c=r[1]+s[1];return c>n&&(c-=n,a+=1),[a,c]}function a(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}e.hrTime=s,e.timeInputToHrTime=function(e){if(a(e))return e;if("number"==typeof e)return e<o()?s(e):i(e);if(e instanceof Date)return i(e.getTime());throw TypeError("Invalid input type")},e.hrTimeDuration=function(e,t){let r=t[0]-e[0],i=t[1]-e[1];return i<0&&(r-=1,i+=n),[r,i]},e.hrTimeToTimeStamp=function(e){let t=r,n=`${"0".repeat(t)}${e[1]}Z`,i=n.substr(n.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",i)},e.hrTimeToNanoseconds=function(e){return e[0]*n+e[1]},e.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},e.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},e.isTimeInputHrTime=a,e.isTimeInput=function(e){return a(e)||"number"==typeof e||e instanceof Date}})),Ue=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Be=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0,(t=e.ExportResultCode||(e.ExportResultCode={}))[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})),$e=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=me();e.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((e=>"function"==typeof e.fields?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,r,n){for(let i of this._propagators)try{i.inject(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}}extract(e,r,n){return this._propagators.reduce(((e,i)=>{try{return i.extract(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}})),We=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=new RegExp(`^(?:[a-z]${t}{0,255}|[a-z0-9]${t}{0,240}@[a-z]${t}{0,13})$`),n=/^[ -~]{0,255}[!-~]$/,i=/,|=/;e.validateKey=function(e){return r.test(e)},e.validateValue=function(e){return n.test(e)&&!i.test(e)}})),He=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=We(),r=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,r)=>{let n=r.trim(),i=n.indexOf("=");if(-1!==i){let o=n.slice(0,i),s=n.slice(i+1,r.length);t.validateKey(o)&&t.validateValue(s)&&e.set(o,s)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new r;return e._internalState=new Map(this._internalState),e}};e.TraceState=r})),Ve=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=me(),r=ge(),n=He();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var i=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function o(e){let t=i.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}e.parseTraceParent=o,e.HttpTraceContextPropagator=class{inject(n,i,o){let s=t.trace.getSpanContext(n);if(!s||r.isTracingSuppressed(n)||!t.isSpanContextValid(s))return;let a=`00-${s.traceId}-${s.spanId}-0${Number(s.traceFlags||t.TraceFlags.NONE).toString(16)}`;o.set(i,e.TRACE_PARENT_HEADER,a),s.traceState&&o.set(i,e.TRACE_STATE_HEADER,s.traceState.serialize())}extract(r,i,s){let a=s.get(i,e.TRACE_PARENT_HEADER);if(!a)return r;let c=Array.isArray(a)?a[0]:a;if("string"!=typeof c)return r;let l=o(c);if(!l)return r;l.isRemote=!0;let u=s.get(i,e.TRACE_STATE_HEADER);if(u){let e=Array.isArray(u)?u.join(","):u;l.traceState=new n.TraceState("string"==typeof e?e:void 0)}return t.trace.setSpanContext(r,l)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}}})),Ge=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ke=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=me().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(e.RPCType||(e.RPCType={})).HTTP="http",e.setRPCMetadata=function(e,r){return e.setValue(t,r)},e.deleteRPCMetadata=function(e){return e.deleteValue(t)},e.getRPCMetadata=function(e){return e.getValue(t)}})),ze=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=me();e.AlwaysOffSampler=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}})),Xe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=me();e.AlwaysOnSampler=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}})),Je=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=me(),r=Se(),n=ze(),i=Xe();e.ParentBasedSampler=class{constructor(e){var t,o,s,a;this._root=e.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new i.AlwaysOnSampler,this._remoteParentNotSampled=null!==(o=e.remoteParentNotSampled)&&void 0!==o?o:new n.AlwaysOffSampler,this._localParentSampled=null!==(s=e.localParentSampled)&&void 0!==s?s:new i.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new n.AlwaysOffSampler}shouldSample(e,r,n,i,o,s){let a=t.trace.getSpanContext(e);return a&&t.isSpanContextValid(a)?a.isRemote?a.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s):this._root.shouldSample(e,r,n,i,o,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}})),Ye=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=me();e.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,r){return{decision:t.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){let n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t}}})),Qe=f((e=>{"use strict";function t(e,t){return"string"==typeof t?e===t:t.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0,e.urlMatches=t,e.isUrlIgnored=function(e,r){if(!r)return!1;for(let n of r)if(t(e,n))return!0;return!1}})),Ze=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0,e.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}})),et=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r(_e(),e),r(be(),e),r(Se(),e),r(we(),e),r(qe(),e),r(Ue(),e),r(Be(),e),r(xe(),e),e.baggageUtils=ve(),r(je(),e),r($e(),e),r(Ve(),e),r(Ge(),e),r(Ke(),e),r(ze(),e),r(Xe(),e),r(Je(),e),r(Ye(),e),r(ge(),e),r(He(),e),r(Ce(),e),r(Ee(),e),r(Qe(),e),r(Ze(),e),r(xe(),e)})),tt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"})),rt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=me(),r=et(),n=Ae(),i=tt();e.Span=class{constructor(e,n,i,o,s,a,c=[],l=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=i,this._spanContext=o,this.parentSpanId=a,this.kind=s,this.links=c,this.startTime=r.timeInputToHrTime(l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}spanContext(){return this._spanContext}setAttribute(e,n){return null==n||this._isSpanEnded()?this:0===e.length?(t.diag.warn(`Invalid attribute key: ${e}`),this):r.isAttributeValue(n)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=n),this):(t.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[t,r]of Object.entries(e))this.setAttribute(t,r);return this}addEvent(e,n,i){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(n)&&(void 0===i&&(i=n),n=void 0),void 0===i&&(i=r.hrTime()),this.events.push({name:e,attributes:n,time:r.timeInputToHrTime(i)})),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e=r.hrTime()){this._isSpanEnded()?t.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=r.timeInputToHrTime(e),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,o=r.hrTime()){let s={};"string"==typeof e?s[n.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?s[n.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(s[n.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(s[n.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(s[n.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),s[n.SemanticAttributes.EXCEPTION_TYPE]||s[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,s,o):t.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}})),nt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=me(),r=et(),n=r.getEnv(),i=r.TracesSamplerValues.AlwaysOn;function o(e=r.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(e));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(e))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new r.AlwaysOnSampler}}e.DEFAULT_CONFIG={sampler:o(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},e.buildSamplerFromEnv=o;var s=1;function a(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let r=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(r)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):r<0||r>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):r}})),it=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=nt();e.mergeConfig=function(e){let r={sampler:t.buildSamplerFromEnv()},n=Object.assign({},t.DEFAULT_CONFIG,r,e);return n.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),n}})),ot=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=me(),r=et(),n=rt(),i=it();e.Tracer=class{constructor(e,t,n){this._tracerProvider=n;let o=i.mergeConfig(t);this._sampler=o.sampler,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new r.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=e}startSpan(e,i={},o=t.context.active()){var s,a;if(r.isTracingSuppressed(o))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let c,l,u,d=function(e,r){if(!e.root)return t.trace.getSpanContext(r)}(i,o),h=this._idGenerator.generateSpanId();d&&t.trace.isSpanContextValid(d)?(c=d.traceId,l=d.traceState,u=d.spanId):c=this._idGenerator.generateTraceId();let p=null!==(s=i.kind)&&void 0!==s?s:t.SpanKind.INTERNAL,f=null!==(a=i.links)&&void 0!==a?a:[],m=r.sanitizeAttributes(i.attributes),g=this._sampler.shouldSample(i.root?t.trace.setSpanContext(o,t.INVALID_SPAN_CONTEXT):o,c,e,p,m,f),y={traceId:c,spanId:h,traceFlags:g.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,traceState:l};if(g.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(y);let v=new n.Span(this,o,e,y,p,u,f,i.startTime);return v.setAttributes(Object.assign(m,g.attributes)),v}startActiveSpan(e,r,n,i){let o,s,a;if(arguments.length<2)return;2===arguments.length?a=r:3===arguments.length?(o=r,a=n):(o=r,s=n,a=i);let c=null!=s?s:t.context.active(),l=this.startSpan(e,o,c),u=t.trace.setSpan(c,l);return t.context.with(u,a,void 0,l)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}})),st=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0,e.defaultServiceName=function(){return`unknown_service:${process.argv0}`}})),at=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=pt(),n=me(),i=r(9023);e.detectResources=async(e={})=>{let r=Object.assign(e),i=await Promise.all((r.detectors||[]).map((async e=>{try{let t=await e.detect(r);return n.diag.debug(`${e.constructor.name} found resource.`,t),t}catch(r){return n.diag.debug(`${e.constructor.name} failed: ${r.message}`),t.Resource.empty()}})));return o(i),i.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};var o=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){let t=i.inspect(e.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});n.diag.verbose(t)}}))}})),ct=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=me(),r=et(),n=Ae(),i=gt();e.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){let o={},s=r.getEnv(),a=s.OTEL_RESOURCE_ATTRIBUTES,c=s.OTEL_SERVICE_NAME;if(a)try{let e=this._parseResourceAttributes(a);Object.assign(o,e)}catch(e){t.diag.debug(`EnvDetector failed: ${e.message}`)}return c&&(o[n.ResourceAttributes.SERVICE_NAME]=c),new i.Resource(o)}_parseResourceAttributes(e){if(!e)return{};let t={},r=e.split(this._COMMA_SEPARATOR,-1);for(let e of r){let r=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==r.length)continue;let[n,i]=r;if(n=n.trim(),i=i.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(n))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(i))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[n]=i}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let t=0;t<e.length;t++){let r=e.charAt(t);if(r<=" "||r>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}})),lt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=me(),r=Ae(),n=gt();e.processDetector=new class{async detect(e){let t={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,i){return""===e[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[r.ResourceAttributes.PROCESS_COMMAND]||""===e[r.ResourceAttributes.PROCESS_COMMAND_LINE]?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},e))}}})),ut=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(ct(),e),r(lt(),e)})),dt=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(st(),e),r(at(),e),r(ut(),e)})),ht=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(dt(),e)})),pt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=Ae(),r=et(),n=ht(),i=class{constructor(e){this.attributes=e}static empty(){return i.EMPTY}static default(){return new i({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let t=Object.assign({},this.attributes,e.attributes);return new i(t)}};e.Resource=i,i.EMPTY=new i({})})),ft=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),mt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),gt=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(pt(),e),r(ht(),e),r(ft(),e),r(mt(),e)})),yt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=et();e.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise((r=>{Promise.all(e).then((()=>{r()})).catch((e=>{t.globalErrorHandler(e||new Error("MultiSpanProcessor: forceFlush failed")),r()}))}))}onStart(e,t){for(let r of this._spanProcessors)r.onStart(e,t)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise(((t,r)=>{Promise.all(e).then((()=>{t()}),r)}))}}})),vt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0,e.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}})),_t=f(((e,t)=>{var r="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Null]",l="[object Object]",u="[object Proxy]",d="[object Undefined]",h=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[i]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f[s]=f["[object Map]"]=f["[object Number]"]=f[l]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1;var m,g="object"==typeof global&&global&&global.Object===Object&&global,y="object"==typeof self&&self&&self.Object===Object&&self,v=g||y||Function("return this")(),_="object"==typeof e&&e&&!e.nodeType&&e,b=_&&"object"==typeof t&&t&&!t.nodeType&&t,w=b&&b.exports===_,S=w&&g.process,E=function(){try{return b&&b.require&&b.require("util").types||S&&S.binding&&S.binding("util")}catch(e){}}(),C=E&&E.isTypedArray,T=Array.prototype,k=Function.prototype,P=Object.prototype,R=v["__core-js_shared__"],x=k.toString,M=P.hasOwnProperty,O=(m=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",D=P.toString,I=x.call(Object),A=RegExp("^"+x.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=w?v.Buffer:void 0,L=v.Symbol,F=v.Uint8Array,j=(N&&N.allocUnsafe,function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object)),q=Object.create,U=P.propertyIsEnumerable,B=T.splice,$=L?L.toStringTag:void 0,W=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),H=N?N.isBuffer:void 0,V=Math.max,G=Date.now,K=ue(v,"Map"),z=ue(Object,"create"),X=function(){function e(){}return function(t){if(!Se(t))return{};if(q)return q(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function J(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=this.__data__=new Y(e);this.size=t.size}function ee(e,t,r){(void 0!==r&&!me(e[t],r)||void 0===r&&!(t in e))&&ne(e,t,r)}function te(e,t,r){var n=e[t];(!M.call(e,t)||!me(n,r)||void 0===r&&!(t in e))&&ne(e,t,r)}function re(e,t){for(var r=e.length;r--;)if(me(e[r][0],t))return r;return-1}function ne(e,t,r){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}J.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},J.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},J.prototype.get=function(e){var t=this.__data__;if(z){var n=t[e];return n===r?void 0:n}return M.call(t,e)?t[e]:void 0},J.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:M.call(t,e)},J.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=z&&void 0===t?r:t,this},Y.prototype.clear=function(){this.__data__=[],this.size=0},Y.prototype.delete=function(e){var t=this.__data__,r=re(t,e);return!(r<0||(r==t.length-1?t.pop():B.call(t,r,1),--this.size,0))},Y.prototype.get=function(e){var t=this.__data__,r=re(t,e);return r<0?void 0:t[r][1]},Y.prototype.has=function(e){return re(this.__data__,e)>-1},Y.prototype.set=function(e,t){var r=this.__data__,n=re(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Q.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(K||Y),string:new J}},Q.prototype.delete=function(e){var t=le(this,e).delete(e);return this.size-=t?1:0,t},Q.prototype.get=function(e){return le(this,e).get(e)},Q.prototype.has=function(e){return le(this,e).has(e)},Q.prototype.set=function(e,t){var r=le(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Z.prototype.clear=function(){this.__data__=new Y,this.size=0},Z.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Z.prototype.get=function(e){return this.__data__.get(e)},Z.prototype.has=function(e){return this.__data__.has(e)},Z.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Y){var n=r.__data__;if(!K||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Q(n)}return r.set(e,t),this.size=r.size,this};var ie=function(e,t,r){for(var n=-1,i=Object(e),o=r(e),s=o.length;s--;){var a=o[++n];if(!1===t(i[a],a,i))break}return e};function oe(e){return null==e?void 0===e?d:c:$&&$ in Object(e)?function(e){var t=M.call(e,$),r=e[$];try{e[$]=void 0;var n=!0}catch(e){}var i=D.call(e);return n&&(t?e[$]=r:delete e[$]),i}(e):function(e){return D.call(e)}(e)}function se(e){return Ee(e)&&oe(e)==i}function ae(e,t,r,n,i){e!==t&&ie(t,(function(o,s){if(i||(i=new Z),Se(o))!function(e,t,r,n,i,o,s){var a=pe(e,r),c=pe(t,r),u=s.get(c);if(u)ee(e,r,u);else{var d=o?o(a,c,r+"",e,t,s):void 0,h=void 0===d;if(h){var p=ye(c),f=!p&&_e(c),m=!p&&!f&&Ce(c);d=c,p||f||m?ye(a)?d=a:function(e){return Ee(e)&&ve(e)}(a)?d=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(a):f?(h=!1,d=function(e){return e.slice()}(c)):m?(h=!1,d=function(e){var t=function(e){var t=new e.constructor(e.byteLength);return new F(t).set(new F(e)),t}(e.buffer);return new e.constructor(t,e.byteOffset,e.length)}(c)):d=[]:function(e){if(!Ee(e)||oe(e)!=l)return!1;var t=j(e);if(null===t)return!0;var r=M.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&x.call(r)==I}(c)||ge(c)?(d=a,ge(a)?d=function(e){return function(e,t,r){var n=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=void 0;void 0===a&&(a=e[s]),n?ne(r,s,a):te(r,s,a)}return r}(e,Te(e))}(a):(!Se(a)||be(a))&&(d=function(e){return"function"!=typeof e.constructor||he(e)?{}:X(j(e))}(c))):h=!1}h&&(s.set(c,d),i(d,c,n,o,s),s.delete(c)),ee(e,r,d)}}(e,t,s,r,ae,n,i);else{var a=n?n(pe(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),ee(e,s,a)}}),Te)}var ce=W?function(e,t){return W(e,"toString",{configurable:!0,enumerable:!1,value:Pe(t),writable:!0})}:Re;function le(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function ue(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Se(e)||function(e){return!!O&&O in e}(e))&&(be(e)?A:h).test(function(e){if(null!=e){try{return x.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r)?r:void 0}function de(e,t){var r=typeof e;return!!(t=null==t?n:t)&&("number"==r||"symbol"!=r&&p.test(e))&&e>-1&&e%1==0&&e<t}function he(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||P)}function pe(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var fe=function(e){var t=0,r=0;return function(){var n=G(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ce);function me(e,t){return e===t||e!=e&&t!=t}var ge=se(function(){return arguments}())?se:function(e){return Ee(e)&&M.call(e,"callee")&&!U.call(e,"callee")},ye=Array.isArray;function ve(e){return null!=e&&we(e.length)&&!be(e)}var _e=H||function(){return!1};function be(e){if(!Se(e))return!1;var t=oe(e);return t==s||t==a||t==o||t==u}function we(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ee(e){return null!=e&&"object"==typeof e}var Ce=C?function(e){return function(t){return e(t)}}(C):function(e){return Ee(e)&&we(e.length)&&!!f[oe(e)]};function Te(e){return ve(e)?function(e,t){var r=ye(e),n=!r&&ge(e),i=!r&&!n&&_e(e),o=!r&&!n&&!i&&Ce(e),s=r||n||i||o,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var l in e)(t||M.call(e,l))&&(!s||!("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||de(l,c)))&&a.push(l);return a}(e,!0):function(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=he(e),r=[];for(var n in e)"constructor"==n&&(t||!M.call(e,n))||r.push(n);return r}(e)}var ke=function(e){return function(e,t){return fe(function(e,t,r){return t=V(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=V(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,a)}}(e,t,Re),e+"")}((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&function(e,t,r){if(!Se(r))return!1;var n=typeof t;return!!("number"==n?ve(r)&&de(t,r.length):"string"==n&&t in r)&&me(r[t],e)}(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n)}return t}))}((function(e,t,r){ae(e,t,r)}));function Pe(e){return function(){return e}}function Re(e){return e}t.exports=ke})),bt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=me(),r=et();e.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=r.getEnv();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{let r=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)r.push(this._flushOneBatch());Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,n)=>{let i=setTimeout((()=>{n(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),(()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),(t=>{var o;clearTimeout(i),t.code===r.ExportResultCode.SUCCESS?e():n(null!==(o=t.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{r.globalErrorHandler(e)}))}),this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}})),wt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=bt(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r})),St=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(wt(),e)})),Et=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(St(),e)})),Ct=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t,r,n=me(),i=et(),o=gt(),s=It(),a=nt(),c=yt(),l=vt(),u=_t(),d=Et();(r=t=e.ForceFlushState||(e.ForceFlushState={}))[r.resolved=0]="resolved",r[r.timeout=1]="timeout",r[r.error=2]="error",r[r.unresolved=3]="unresolved";var h=class{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;let r=u({},a.DEFAULT_CONFIG,e);this.resource=null!==(t=r.resource)&&void 0!==t?t:o.Resource.empty(),this.resource=o.Resource.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});let n=this._buildExporterFromEnv();if(void 0!==n){let e=new d.BatchSpanProcessor(n);this.activeSpanProcessor=e}else this.activeSpanProcessor=new l.NoopSpanProcessor}getTracer(e,t){let r=`${e}@${t||""}`;return this._tracers.has(r)||this._tracers.set(r,new s.Tracer({name:e,version:t},this._config,this)),this._tracers.get(r)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>n.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){n.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&n.context.setGlobalContextManager(e.contextManager),e.propagator&&n.propagation.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map((r=>new Promise((n=>{let i,o=setTimeout((()=>{n(new Error(`Span processor did not completed within timeout period of ${e} ms`)),i=t.timeout}),e);r.forceFlush().then((()=>{clearTimeout(o),i!==t.timeout&&(i=t.resolved,n(i))})).catch((e=>{clearTimeout(o),i=t.error,n(e)}))}))));return new Promise(((e,n)=>{Promise.all(r).then((r=>{let i=r.filter((e=>e!==t.resolved));i.length>0?n(i):e()})).catch((e=>n([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=h._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=h._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){let e=Array.from(new Set(i.getEnv().OTEL_PROPAGATORS)),t=e.map((e=>{let t=this._getPropagator(e);return t||n.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);if(0!==t.length)return 1===e.length?t[0]:new i.CompositePropagator({propagators:t})}_buildExporterFromEnv(){let e=i.getEnv().OTEL_TRACES_EXPORTER;if("none"===e)return;let t=this._getSpanExporter(e);return t||n.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}};e.BasicTracerProvider=h,h._registeredPropagators=new Map([["tracecontext",()=>new i.HttpTraceContextPropagator],["baggage",()=>new i.HttpBaggagePropagator]]),h._registeredExporters=new Map})),Tt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=et();e.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:t.hrTimeToMicroseconds(e.startTime),duration:t.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,r){for(let t of e)console.log(this._exportInfo(t));if(r)return r({code:t.ExportResultCode.SUCCESS})}}})),kt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=et();e.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,r){if(this._stopped)return r({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>r({code:t.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}})),Pt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Rt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=me(),r=et();e.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),(()=>{this._exporter.export([e],(e=>{var t;e.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))}))}))}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}}})),xt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ot=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Dt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),It=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(ot(),e),r(Ct(),e),r(Et(),e),r(Tt(),e),r(kt(),e),r(Pt(),e),r(Rt(),e),r(xt(),e),r(vt(),e),r(rt(),e),r(Mt(),e),r(Ot(),e),r(Dt(),e)})),At=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=w();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1;e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(n){if(r)return n;try{var i=It(),o=me(),s=(new i.BasicTracerProvider).getTracer("applicationinsights tracer"),a=n.setTracer;n.setTracer=function(r){var n=r.startSpan;r.startSpan=function(e,r,i){var o=n.call(this,e,r,i),s=o.end;return o.end=function(){var e=s.apply(this,arguments);return t.channel.publish("azure-coretracing",o),e},o},r[e.AzureMonitorSymbol]=!0,a.call(this,r)},o.trace.getSpan(o.context.active()),n.setTracer(s),r=!0}catch(e){}return n}},e.enable=function(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}})),Nt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=w();e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var r=e.prototype._emit;return e.prototype._emit=function(e,n){var i=r.apply(this,arguments);if(!n){var o=i;o||(o=r.call(this,e,!0)),t.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},e.enable=function(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}})),Lt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=w(),n=r(2203);e.console={versionSpecifier:">= 4.0.0",patch:function(e){var r=new n.Writable,i=new n.Writable;r.write=function(e){if(!e)return!0;var r=e.toString();return t.channel.publish("console",{message:r}),!0},i.write=function(e){if(!e)return!0;var r=e.toString();return t.channel.publish("console",{message:r,stderr:!0}),!0};for(var o=new e.Console(r,i),s=function(t){var r=e[t];r&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch(e){}return r.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},e.enable=function(){t.channel.registerMonkeyPatch("console",e.console),r(4236)}})),Ft=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=w();e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var r=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=r.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=t.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=t.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},e.enable=function(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}})),jt=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=w();e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var n=e.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext((function(e){return e()}))}}}),i={};return n.on("started",(function(e){i[e.requestId]||(i[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),n.on("failed",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var n=e.instrument(),i={},o={};return n.on("started",(function(e){i[e.requestId]||(o[e.requestId]=r.channel.bindToContext((function(e){return e()})),i[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),n.on("failed",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e}}(e);var t=e.instrument(),n={},i={};return t.on("started",(function(e){n[e.requestId]||(i[e.requestId]=r.channel.bindToContext((function(e){return e()})),n[e.requestId]=e)})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},e.enable=function(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}})),qt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=w(),n=r(6928);e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,i){var o=function(e,r){return function(r,n){var i=e[r];i&&(e[r]=function(){for(var e=arguments.length-1,r=arguments.length-1;r>=0;--r){if("function"==typeof arguments[r]){e=r;break}if(void 0!==arguments[r])break}var o=arguments[e],s={result:null,startTime:null,startDate:null};"function"==typeof o&&(n?(s.startTime=process.hrtime(),s.startDate=new Date,arguments[e]=t.channel.bindToContext(n(s,o))):arguments[e]=t.channel.bindToContext(o));var a=i.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=r(7437)(n.dirname(i)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return s(a)(e)})),o(a)("createQuery",(function(e,r){return function(n){var i=process.hrtime(e.startTime),o=1e3*i[0]+i[1]/1e6|0;t.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:o,time:e.startDate}),r.apply(this,arguments)}}));var c=r(6967)(n.dirname(i)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return s(c)(e)})),e}},e.enable=function(){t.channel.registerMonkeyPatch("mysql",e.mysql)}})),Ut=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=w();e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var r=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=t.channel.bindToContext(e)),r.apply(this,arguments)},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}})),Bt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=w(),n=r(4434);e.postgres6={versionSpecifier:"6.*",patch:function(e,r){var i=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,r,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},l=process.hrtime();function u(e){e&&e[o]&&(e=e[o]);var r=t.channel.bindToContext((function(r,i){var o=process.hrtime(l);if(c.result=i&&{rowCount:i.rowCount,command:i.command},c.error=r,c.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",c),r){if(e)return e.apply(this,arguments);a&&a instanceof n.EventEmitter&&a.emit("error",r)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(r,o,{value:e}),r}catch(t){return e}}try{"string"==typeof e?r instanceof Array?(c.query.preparable={text:e,args:r},s=u(s)):(c.query.text=e,s?s=u(s):r=u(r)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=u(s):r?r=u(r):e.callback=u(e.callback))}catch(e){return i.apply(this,arguments)}return arguments[0]=e,arguments[1]=r,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=i.apply(this,arguments)},e}},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,r){var i=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,r,s){var a,c=this,l=!!s,u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime();function h(e){e&&e[o]&&(e=e[o]);var r=t.channel.bindToContext((function(r,i){var o=process.hrtime(d);if(u.result=i&&{rowCount:i.rowCount,command:i.command},u.error=r,u.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",u),r){if(e)return e.apply(this,arguments);a&&a instanceof n.EventEmitter&&a.emit("error",r)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(r,o,{value:e}),r}catch(t){return e}}try{"string"==typeof e?r instanceof Array?(u.query.preparable={text:e,args:r},s=(l="function"==typeof s)?h(s):s):(u.query.text=e,s?s=(l="function"==typeof s)?h(s):s:r=(l="function"==typeof r)?h(r):r):("string"==typeof e.name?u.query.plan=e.name:e.values instanceof Array?u.query.preparable={text:e.text,args:e.values}:u.query.text=e.text,s?(l="function"==typeof s,s=h(s)):r?r=(l="function"==typeof r)?h(r):r:(l="function"==typeof e.callback,e.callback=l?h(e.callback):e.callback))}catch(e){return i.apply(this,arguments)}return arguments[0]=e,arguments[1]=r,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=i.apply(this,arguments),l?a:a.then((function(e){return h()(void 0,e),new c._Promise((function(t,r){t(e)}))})).catch((function(e){return h()(e,void 0),new c._Promise((function(t,r){r(e)}))}))},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}})),$t=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=w();e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var r=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;e.callback=t.channel.bindToContext((function(r,a){var c=process.hrtime(o),l=1e3*c[0]+c[1]/1e6|0;t.channel.publish("redis",{duration:l,address:i,commandObj:e,err:r,result:a,time:s}),"function"==typeof n&&n.apply(this,arguments)})),e.callback.pubsubBound=!0}}return r.call(this,e)},e}},e.enable=function(){t.channel.registerMonkeyPatch("redis",e.redis)}})),Wt=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=w();e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var n=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){var e,i,o,s=arguments[0];arguments[0].callback=(e=s.callback,i=process.hrtime(),o={query:{},database:{host:null,port:null},result:null,error:null,duration:0},r.channel.bindToContext((function(n,s,a){var c=process.hrtime(i);o=t(t({},o),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!n&&{rowCount:s,rows:a},query:{text:this.parametersByName.statement.value},error:n,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),r.channel.publish("tedious",o),e.call(this,n,s,a)}))),n.apply(this,arguments)},e}},e.enable=function(){r.channel.registerMonkeyPatch("tedious",e.tedious)}})),Ht=f((e=>{"use strict";var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),n=e&&e.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var i=w();e.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,r){var n=e.call(this,r)||this;return n.winston=t,n}return r(t,e),t.prototype.log=function(e,t){var r=e.message,o=e.level,s=e.meta,a=n(e,["message","level","meta"]);o="function"==typeof Symbol.for?e[Symbol.for("level")]:o,r=e instanceof Error?e:r;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,o);for(var l in s=s||{},a)a.hasOwnProperty(l)&&(s[l]=a[l]);i.channel.publish("winston",{message:r,level:o,levelKind:c,meta:s}),t()},t}(e.Transport);function o(){var r,n=arguments[0].levels||e.config.npm.levels;for(var i in n)n.hasOwnProperty(i)&&(r=void 0===r||n[i]>n[r]?i:r);this.add(new t(e,{level:r}))}var s=e.createLogger;e.createLogger=function(){var r,n=arguments[0].levels||e.config.npm.levels;for(var i in n)n.hasOwnProperty(i)&&(r=void 0===r||n[i]>n[r]?i:r);var a=s.apply(this,arguments);a.add(new t(e,{level:r}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),o.apply(this,arguments)},a};var a=e.configure;return e.configure=function(){a.apply(this,arguments),o.apply(this,arguments)},e.add(new t(e)),e}},e.winston2={versionSpecifier:"2.x",patch:function(e){var t,r=e.Logger.prototype.log,n=function(r,n,o){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",i.channel.publish("winston",{level:r,message:n,meta:o,levelKind:s}),n};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter((function(e){return e!==n})),this.filters.push(n)):this.filters=[n],r.apply(this,arguments)},e}},e.enable=function(){i.channel.registerMonkeyPatch("winston",e.winston2),i.channel.registerMonkeyPatch("winston",e.winston3)}})),Vt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=At();e.azuresdk=t;var r=Nt();e.bunyan=r;var n=Lt();e.console=n;var i=Ft();e.mongodbCore=i;var o=jt();e.mongodb=o;var s=qt();e.mysql=s;var a=Ut();e.pgPool=a;var c=Bt();e.pg=c;var l=$t();e.redis=l;var u=Wt();e.tedious=u;var d=Ht();e.winston=d,e.enable=function(){r.enable(),n.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),l.enable(),d.enable(),t.enable(),u.enable()}})),Gt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=y(),r=g();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n,i,o,s,a="DiagnosticChannel";if(e.IsInitialized){for(s in n=Vt(),i=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),o={bunyan:n.bunyan,console:n.console,mongodb:n.mongodb,mongodbCore:n.mongodbCore,mysql:n.mysql,redis:n.redis,pg:n.pg,pgPool:n.pgPool,winston:n.winston,azuresdk:n.azuresdk})-1===i.indexOf(s)&&(o[s].enable(),r.info(a,"Subscribed to "+s+" events"));i.length>0&&r.info(a,"Some modules will not be patched",i)}else r.info(a,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");e.registerContextPreservation=function(r){if(e.IsInitialized){var n=w();n.channel.addContextPreservation(r),n.channel.spanContextPropagator=t.AsyncScopeManager}}})),Kt=f(((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}})),zt=f(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=r(8611),o=r(5692),s=r(7016),a=r(9140),c=g(),l=Kt(),u=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&"string"==typeof r)for(var i=t+"=",o=r.split(";"),s=0;s<o.length;s++)if(r=o[s],(r=e.trim(r))&&0===r.indexOf(i)){n=r.substring(i.length,o[s].length);break}return n},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},r=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),n=(Buffer.from?Buffer.from(r,"binary"):new Buffer(r,"binary")).toString("base64");return n.substr(0,n.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",i=0;i<4;i++)n+=r[15&(t=e.random32())]+r[t>>4&15]+r[t>>8&15]+r[t>>12&15]+r[t>>16&15]+r[t>>20&15]+r[t>>24&15]+r[t>>28&15];var o=r[8+4*Math.random()|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+o+n.substr(16,3)+n.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),r=""+Math.floor(e/6e4)%60,n=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,r=r.length<2?"0"+r:r,(i>0?i+".":"")+(n=n.length<2?"0"+n:n)+":"+r+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var r={};for(var n in t){var i="",o=t[n],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(null===o||"undefined"===s)i="";else{if("function"===s){c.info("key: "+n+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{i=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){i=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return r}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var r=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!r||0==r.length||!t)return!0;for(var n=0;n<r.length;n++)if(new RegExp(r[n].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1;return!0},e.getCorrelationContextTarget=function(e,t){var r=e.headers&&e.headers[l.requestContextHeader];if(r)for(var n=r.split(","),i=0;i<n.length;++i){var o=n[i].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,r,a,l){r&&0===r.indexOf("//")&&(r="https:"+r);var u=s.parse(r),d=n(n({},a),{host:u.hostname,port:u.port,path:u.pathname}),h=void 0;if("https:"===u.protocol&&(h=t.proxyHttpsUrl||void 0),"http:"===u.protocol&&(h=t.proxyHttpUrl||void 0),h){0===h.indexOf("//")&&(h="http:"+h);var p=s.parse(h);"https:"===p.protocol?(c.info("Proxies that use HTTPS are not supported"),h=void 0):d=n(n({},d),{host:p.hostname,port:p.port||"80",path:r,headers:n(n({},d.headers),{Host:u.hostname})})}var f="https:"===u.protocol&&!h;return f&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:f||void 0===t.httpAgent?f&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,f?o.request(d,l):i.request(d,l)},e.safeIncludeCorrelationHeader=function(t,r,n){var i;if("string"==typeof n)i=n;else if(n instanceof Array)i=n.join(",");else if(n&&"function"==typeof n.toString)try{i=n.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,n)}i?e.addCorrelationIdHeaderFromString(t,r,i):r.setHeader(l.requestContextHeader,l.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":JSON.stringify(e))},e.addCorrelationIdHeaderFromString=function(e,t,r){var n=r.split(","),i=l.requestContextSourceKey+"=";n.some((function(e){return e.substring(0,i.length)===i}))||t.setHeader(l.requestContextHeader,r+","+l.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();t.exports=u})),Xt=f(((e,t)=>{"use strict";var r=zt(),n=g(),i=function(){function e(){}return e.queryCorrelationId=function(t,i){var o=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(o))i(e.completedLookups[o]);else if(e.pendingLookups[o])e.pendingLookups[o].push(i);else{e.pendingLookups[o]=[i];var s=function(){if(e.pendingLookups[o]){var i={method:"GET",disableAppInsightsAutoCollection:!0};n.info(e.TAG,i);var a=r.makeRequest(t,o,i,(function(r){if(200===r.statusCode){var i="";r.setEncoding("utf-8"),r.on("data",(function(e){i+=e})),r.on("end",(function(){n.info(e.TAG,i);var t=e.correlationIdPrefix+i;e.completedLookups[o]=t,e.pendingLookups[o]&&e.pendingLookups[o].forEach((function(e){return e(t)})),delete e.pendingLookups[o]}))}else r.statusCode>=400&&r.statusCode<500?(e.completedLookups[o]=void 0,delete e.pendingLookups[o]):setTimeout(s,t.correlationIdRetryIntervalMs)}));a&&(a.on("error",(function(t){n.warn(e.TAG,t)})),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[n];i&&(e.pendingLookups[n]=i.filter((function(e){return e!=r})),0==e.pendingLookups[n].length&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var r="|"===e[0]?1:0;return e.substring(r,t)},e.generateRootId=function(){return"|"+r.w3cTraceId()+"."},e.appendSuffix=function(t,n,i){if(t.length+n.length<e.requestIdMaxLength)return t+n+i;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(n=r.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,o)+n+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=r.randomu32(),e}();t.exports=i})),Jt=f(((e,t)=>{"use strict";var r=zt(),n=Xt(),i=function(){function e(t,i){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var o=t.trim().split("-"),s=o.length;s>=4?(this.version=o[0],this.traceId=o[1],this.spanId=o[2],this.traceFlag=o[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(i){this.parentId=i.slice();var a=n.getRootId(i);e.isValidTraceId(a)||(this.legacyRootId=a,a=r.w3cTraceId()),-1!==i.indexOf("|")&&(i=i.substring(1+i.substring(0,i.length-1).lastIndexOf("."),i.length-1)),this.traceId=a,this.spanId=i}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();t.exports=i})),Yt=f(((e,t)=>{"use strict";var r=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var r=t[0].trim(),n=t[1].trim(),i=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return i&&o}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var r=[],n={},i=t.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length||!e.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=!0,r.push(a)}}return r},e.strict=!0,e}();t.exports=r})),Qt=f(((e,t)=>{"use strict";t.exports=function(){}})),Zt=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(Qt());t.exports=i})),er=f(((e,t)=>{"use strict";t.exports=function(){}})),tr=f(((e,t)=>{"use strict";t.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}})),rr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){return e.call(this)||this}return n(t,e),t}(er());t.exports=i})),nr=f(((e,t)=>{"use strict";var r,n;(n=r||(r={}))[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation",t.exports=r})),ir=f(((e,t)=>{"use strict";var r=nr();t.exports=function(){this.kind=r.Measurement}})),or=f(((e,t)=>{"use strict";t.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}})),sr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(Qt());t.exports=i})),ar=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return n(t,e),t}(Qt());t.exports=i})),cr=f(((e,t)=>{"use strict";t.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}})),lr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return n(t,e),t}(Qt());t.exports=i})),ur=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return n(t,e),t}(Qt());t.exports=i})),dr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(sr());t.exports=i})),hr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return n(t,e),t}(Qt());t.exports=i})),pr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(Qt());t.exports=i})),fr=f(((e,t)=>{"use strict";var r,n;(n=r||(r={}))[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical",t.exports=r})),mr=f(((e,t)=>{"use strict";t.exports=function(){}})),gr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=Zt(),e.Base=er(),e.ContextTagKeys=tr(),e.Data=rr(),e.DataPoint=ir(),e.DataPointType=nr(),e.Domain=Qt(),e.Envelope=or(),e.EventData=sr(),e.ExceptionData=ar(),e.ExceptionDetails=cr(),e.MessageData=lr(),e.MetricData=ur(),e.PageViewData=dr(),e.RemoteDependencyData=hr(),e.RequestData=pr(),e.SeverityLevel=fr(),e.StackFrame=mr()})),yr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=gr(),r=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();e.RemoteDependencyDataConstants=r,e.domainSupportsProperties=function(e){return"properties"in e||e instanceof t.EventData||e instanceof t.ExceptionData||e instanceof t.MessageData||e instanceof t.MetricData||e instanceof t.PageViewData||e instanceof t.RemoteDependencyData||e instanceof t.RequestData}})),vr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),_r=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),br=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),wr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Sr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Er=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Cr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Tr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),kr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Pr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Rr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),xr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mr=f((e=>{"use strict";var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0,e.telemetryTypeToBaseType=function(e){switch(e){case t.Event:return"EventData";case t.Exception:return"ExceptionData";case t.Trace:return"MessageData";case t.Metric:return"MetricData";case t.Request:return"RequestData";case t.Dependency:return"RemoteDependencyData";case t.Availability:return"AvailabilityData";case t.PageView:return"PageViewData"}},e.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return t.Event;case"ExceptionData":return t.Exception;case"MessageData":return t.Trace;case"MetricData":return t.Metric;case"RequestData":return t.Request;case"RemoteDependencyData":return t.Dependency;case"AvailabilityData":return t.Availability;case"PageViewData":return t.PageView}},e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(r=t=e.TelemetryType||(e.TelemetryType={}))[r.Event=0]="Event",r[r.Exception=1]="Exception",r[r.Trace=2]="Trace",r[r.Metric=3]="Metric",r[r.Request=4]="Request",r[r.Dependency=5]="Dependency",r[r.Availability=6]="Availability",r[r.PageView=7]="PageView"})),Or=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(vr(),e),r(_r(),e),r(br(),e),r(wr(),e),r(Sr(),e),r(Er(),e),r(Cr(),e),r(Tr(),e),r(kr(),e),r(Pr(),e),r(Rr(),e),r(xr(),e),r(Mr(),e)})),Dr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ir=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ar=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Nr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Lr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Fr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),jr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),qr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ur=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Dr(),e),r(Ir(),e),r(Ar(),e),r(Nr(),e),r(Lr(),e),r(Fr(),e),r(jr(),e),r(qr(),e)})),Br=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(yr(),e),r(gr(),e),r(Or(),e),r(Ur(),e)})),$r=f(((e,t)=>{"use strict";var r=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var r=+new Date;this.duration=r-this.startTime,this.statusCode=e;var n=this.properties||{};if(t)if("string"==typeof t)n.error=t;else if(t instanceof Error)n.error=t.message;else if("object"==typeof t)for(var i in t)n[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=n},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();t.exports=r})),Wr=f(((e,t)=>{"use strict";var n,i=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r(7016),s=Br(),a=zt(),c=Kt(),l=$r(),u=Xt(),d=Yt(),h=Jt(),p=function(e){function t(t,r){var n=e.call(this)||this;return t&&(n.method=t.method,n.url=n._getAbsoluteUrl(t),n.startTime=+new Date,n.socketRemoteAddress=t.socket&&t.socket.remoteAddress,n.parseHeaders(t,r),t.connection&&(n.connectionRemoteAddress=t.connection.remoteAddress,n.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),n}return i(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?t.time=e.time:this.startTime&&(t.time=new Date(this.startTime)),e){for(var r in e)t[r]||(t[r]=e[r]);if(e.properties)for(var r in e.properties)t.properties[r]=e.properties[r]}return t},t.prototype.getRequestTags=function(e){var r={};for(var n in e)r[n]=e[n];return r[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),r[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),r[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),r[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),r[t.keys.operationName]=this.getOperationName(e),r[t.keys.operationParentId]=this.getOperationParentId(e),r[t.keys.operationId]=this.getOperationId(e),r},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+o.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,r=o.parse(e.url),n=r.pathname,i=r.search,s=t||"https"==e.headers["x-forwarded-proto"]?"https":"http";return o.format({protocol:s,host:e.headers.host,pathname:n,search:i})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var r=e.exec(t);if(r)return r[0]},r=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!r&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(r="127.0.0.1"),r},t.prototype._getId=function(e){var r=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,r))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var r=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,n=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,i=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,o=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,s=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,u.w3cEnabled&&(n||r)?(this.traceparent=new h(n?n.toString():null),this.tracestate=n&&r&&new d(r?r.toString():null),this.setBackCompatFromThisTraceContext()):i?u.w3cEnabled?(this.traceparent=new h(null,i),this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=u.generateRequestId(this.parentId),this.operationId=u.getRootId(this.requestId)):u.w3cEnabled?(this.traceparent=new h,this.traceparent.parentId=o,this.traceparent.legacyRootId=s||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=u.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=u.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=u.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(l);t.exports=p})),Hr=f(((e,t)=>{"use strict";function r(e){return"function"==typeof e}var n=console.error.bind(console);function i(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function o(e){e&&e.logger&&(r(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function s(e,t,o){if(e&&e[t]){if(!o)return n("no wrapper function"),void n((new Error).stack);if(r(e[t])&&r(o)){var s=e[t],a=o(s,t);return i(a,"__original",s),i(a,"__unwrap",(function(){e[t]===a&&i(e,t,s)})),i(a,"__wrapped",!0),i(e,t,a),a}n("original object and wrapper must be functions")}else n("no original function "+t+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}o.wrap=s,o.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},o.unwrap=a,o.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):n("must provide one or more functions to unwrap on modules")},t.exports=o})),Vr=f(((e,t)=>{"use strict";var r=Hr(),n=r.wrap,i=r.unwrap,o="wrap@before";function s(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function a(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r=r?[r]:[]),r}function c(e,t){if(e){var r=e;if("function"==typeof e)r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}t.exports=function(e,t,r){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!r)throw new Error("must have function to wrap listeners when emitting");function l(e){return function(t,r){var i=a(this,t).slice();try{var s=e.call(this,t,r);return function(e,t,r){var n=a(e,t).filter((function(e){return-1===r.indexOf(e)}));n.length>0&&function(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n],s=e[o];if("function"==typeof s)s(i);else if(Array.isArray(s))for(var a=s.length,c=0;c<a;c++)s[c](i)}}(e,n)}(this,t,i),s}finally{this.on.__wrapped||n(this,"on",l),this.addListener.__wrapped||n(this,"addListener",l)}}}e[o]?"function"==typeof e[o]?s(e,o,[e[o],t]):Array.isArray(e[o])&&e[o].push(t):s(e,o,t),e.__wrapped||(n(e,"addListener",l),n(e,"on",l),n(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var o=this._events[t];n(this,"removeListener",(function(e){return function(){this._events[t]=o;try{return e.apply(this,arguments)}finally{o=this._events[t],this._events[t]=c(o,r)}}}));try{return this._events[t]=c(o,r),e.apply(this,arguments)}finally{i(this,"removeListener"),this._events[t]=o}}})),s(e,"__unwrap",(function(){i(e,"addListener"),i(e,"on"),i(e,"emit"),delete e[o],delete e.__wrapped})),s(e,"__wrapped",!0))}})),Gr=f(((e,t)=>{"use strict";var n=r(9023),i=r(2613),o=Vr(),s=r(290),a="cls@contexts",c="error@context",l=process.env.DEBUG_CLS_HOOKED,u=-1;function d(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function h(e){return process.namespaces[e]}function p(e){let t=h(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function f(...e){l&&process._rawDebug(`${n.format(...e)}`)}t.exports={getNamespace:h,createNamespace:function(e){i.ok(e,"namespace must be given a name."),l&&f(`NS-CREATING NAMESPACE (${e})`);let t=new d(e);return t.id=u,s.createHook({init(r,i,o,a){if(u=s.executionAsyncId(),t.active)t._contexts.set(r,t.active),l&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${i}] (${e}) asyncId:${r} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`);else if(0===u){let o=s.triggerAsyncId(),c=t._contexts.get(o);c?(t._contexts.set(r,c),l&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${r} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)):l&&f(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${r} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}if(l&&"PROMISE"===i){f(n.inspect(a,{showHidden:!0}));let s=a.parentId;f(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${s} asyncId:${r} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(r){let i;if(u=s.executionAsyncId(),i=t._contexts.get(r)||t._contexts.get(u),i){if(l){let o=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${r} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(i)}`),t._indent+=2}t.enter(i)}else if(l){let i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${r} currentUid:${u} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${n.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(r){let i;if(u=s.executionAsyncId(),i=t._contexts.get(r)||t._contexts.get(u),i){if(l){let o=s.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${r} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(i)}`)}t.exit(i)}else if(l){let o=s.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${r} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(i)}`)}},destroy(r){if(u=s.executionAsyncId(),l){let i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${u} asyncId:${r} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(t._contexts.get(u))}`)}t._contexts.delete(r)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:p,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){p(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},d.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,l&&f(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+u+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},d.prototype.get=function(e){if(this.active){if(l){let t=s.executionAsyncId(),r=s.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);f(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+u+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),f(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${u} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} active:${n.inspect(this.active)}`)}return this.active[e]}if(l){let t=s.currentId(),r=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${u} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length}`)}},d.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=u,l){let t=s.executionAsyncId(),r=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${u} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} context:${n.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},d.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(l){let e=s.triggerAsyncId(),r=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${u} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} context:${n.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(l){let e=s.triggerAsyncId(),r=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${u} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} ${n.inspect(t)}`)}this.exit(t)}},d.prototype.runAndReturn=function(e){let t;return this.run((function(r){t=e(r)})),t},d.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return l&&f("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(l&&f("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,l&&f("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},d.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{r.exit(t)}}},d.prototype.enter=function(e){if(i.ok(e,"context must be provided for entering"),l){let t=s.executionAsyncId(),r=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${u} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}this._set.push(this.active),this.active=e},d.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),l){let t=s.executionAsyncId(),r=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${u} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}if(this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(l&&f("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},d.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;o(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,r=e[a];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},d.prototype.fromException=function(e){return e[c]},process.namespaces={}})),Kr=f(((e,t)=>{"use strict";function r(){}t.exports=function(){let e=this._hooks,t=this._state,n=process.nextTick;process.nextTick=function(){if(!t.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let e=0;e<arguments.length;e++)i[e]=arguments[e];let o=i[0];if("function"!=typeof o)throw new TypeError("callback is not a function");let s=new r,a=--t.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}})),zr=f(((e,t)=>{"use strict";function r(){}t.exports=function(){let e=this._hooks,t=this._state,n=global.Promise,i=n.prototype.then;function o(t,r,n,i){return"function"!=typeof t?i?function(t){return function(r){return e.destroy.call(null,t),r}}(n):function(t){return function(r){throw e.destroy.call(null,t),r}}(n):function(){e.pre.call(r,n);try{return t.apply(this,arguments)}finally{e.post.call(r,n,!1),e.destroy.call(null,n)}}}n.prototype.then=function(n,s){if(!t.enabled)return i.call(this,n,s);let a=new r,c=--t.counter;return e.init.call(a,c,0,null,null),i.call(this,o(n,a,c,!0),o(s,a,c,!1))}}})),Xr=f(((e,t)=>{"use strict";var n=r(3557);function i(){}function o(){}function s(){}var a=new Map,c=new Map,l=new Map,u=null,d=!1;function h(e,t,r,i,o,s,a){let c=n[r],l=n[i];n[r]=function(){if(!t.enabled)return c.apply(n,arguments);let r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];let i=r[0];if("function"!=typeof i)throw new TypeError('"callback" argument must be a function');let l,h=new o,p=--t.counter;return e.init.call(h,p,0,null,null),r[0]=function(){u=l,e.pre.call(h,p);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(h,p,!0),s.delete(l),e.destroy.call(null,p)}))}e.post.call(h,p,!1),u=null,(a||d)&&(d=!1,s.delete(l),e.destroy.call(null,p))},l=c.apply(n,r),s.set(l,p),l},n[i]=function(t){if(u===t&&null!==t)d=!0;else if(s.has(t)){let r=s.get(t);s.delete(t),e.destroy.call(null,r)}l.apply(n,arguments)}}t.exports=function(){h(this._hooks,this._state,"setTimeout","clearTimeout",i,a,!0),h(this._hooks,this._state,"setInterval","clearInterval",o,c,!1),h(this._hooks,this._state,"setImmediate","clearImmediate",s,l,!0),global.setTimeout=n.setTimeout,global.setInterval=n.setInterval,global.setImmediate=n.setImmediate,global.clearTimeout=n.clearTimeout,global.clearInterval=n.clearInterval,global.clearImmediate=n.clearImmediate}})),Jr=f(((e,t)=>{t.exports={_args:[["async-hook-jl@1.7.6","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"async-hook-jl@1.7.6",_id:"async-hook-jl@1.7.6",_inBundle:!1,_integrity:"sha512-gFaHkFfSxTjvoxDMYqDuGHlcRyUuamF8s+ZTtJdDzqjws4mCt7v0vuV79/E2Wr2/riMQgtG4/yUtXWs1gZ7JMg==",_location:"/async-hook-jl",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"async-hook-jl@1.7.6",name:"async-hook-jl",escapedName:"async-hook-jl",rawSpec:"1.7.6",saveSpec:null,fetchSpec:"1.7.6"},_requiredBy:["/cls-hooked"],_resolved:"https://registry.npmjs.org/async-hook-jl/-/async-hook-jl-1.7.6.tgz",_spec:"1.7.6",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/jeff-lewis/async-hook-jl/issues"},dependencies:{"stack-chain":"^1.3.7"},description:"Inspect the life of handle objects in node",devDependencies:{async:"1.5.x","cli-color":"1.1.x",endpoint:"0.4.x",eslint:"^3.4.0"},engines:{node:"^4.7 || >=6.9 || >=7.3"},homepage:"https://github.com/jeff-lewis/async-hook-jl#readme",keywords:["async","async hooks","inspect","async wrap"],license:"MIT",main:"./index.js",name:"async-hook-jl",repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},scripts:{test:"node ./test/runner.js && eslint ."},version:"1.7.6"}})),Yr=f(((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,i={nextTick:Kr(),promise:zr(),timers:Xr()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],i=this.destroyFns=[];this.init=function(t,r,i,s){if(r!==n)for(let n of e)n(t,this,r,i,s);else o.add(t)},this.pre=function(e){if(!o.has(e))for(let r of t)r(e,this)},this.post=function(e,t){if(!o.has(e))for(let n of r)n(e,this,t)},this.destroy=function(e){if(o.has(e))o.delete(e);else for(let t of i)t(e)}}function c(e,t){let r=e.indexOf(t);-1!==r&&e.splice(r,1)}function l(){this._state=new s,this._hooks=new a,this.version=Jr().version,this.providers=r.Providers;for(let e of Object.keys(i))i[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}a.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},a.prototype.remove=function(e){e.init&&c(this.initFns,e.init),e.pre&&c(this.preFns,e.pre),e.post&&c(this.postFns,e.post),e.destroy&&c(this.destroyFns,e.destroy)},t.exports=l,l.prototype.addHooks=function(e){this._hooks.add(e)},l.prototype.removeHooks=function(e){this._hooks.remove(e)},l.prototype.enable=function(){this._state.enabled=!0,r.enable()},l.prototype.disable=function(){this._state.enabled=!1,r.disable()}})),Qr=f(((e,t)=>{t.exports={_args:[["stack-chain@1.3.7","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"stack-chain@1.3.7",_id:"stack-chain@1.3.7",_inBundle:!1,_integrity:"sha1-0ZLJ/06moiyUxN1FkXHj8AzqEoU=",_location:"/stack-chain",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"stack-chain@1.3.7",name:"stack-chain",escapedName:"stack-chain",rawSpec:"1.3.7",saveSpec:null,fetchSpec:"1.3.7"},_requiredBy:["/async-hook-jl"],_resolved:"https://registry.npmjs.org/stack-chain/-/stack-chain-1.3.7.tgz",_spec:"1.3.7",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/AndreasMadsen/stack-chain/issues"},description:"API for combining call site modifiers",devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},homepage:"https://github.com/AndreasMadsen/stack-chain#readme",keywords:["stack","chain","trace","call site","concat","format"],license:"MIT",name:"stack-chain",repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},scripts:{test:"tap ./test/simple"},version:"1.3.7"}})),Zr=f(((e,t)=>{t.exports=function(e,t){var r=[];r.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch(e){return"<error>"}}}(e));for(var n=0;n<t.length;n++){var i,o=t[n];try{i=o.toString()}catch(e){try{i="<error: "+e+">"}catch(e){i="<error>"}}r.push("    at "+i)}return r.join("\n")}})),en=f(((e,t)=>{var r=Zr();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=Qr().version}var i=!1;n.prototype.callSite=function e(t){t||(t={}),i=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return i=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var o=new n;function s(){this._modifiers=[]}function a(){this._formater=r,this._previous=void 0}s.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t},s.prototype.attach=function(e){this._modifiers.push(e)},s.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},a.prototype.replace=function(e){e?this._formater=e:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function l(e,t){if(i)return t;if(c)return r(e,t);var n=t.concat();n=o.extend._modify(e,n),n=(n=o.filter._modify(e,n)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:n}),c=!0;var s=o.format._formater(e,n);return c=!1,s}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(e){e===l?o.format._roolback():(o.format._backup(),o.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),t.exports=o})),tn=f(((e,t)=>{if(global._stackChain){if(global._stackChain.version!==Qr().version)throw new Error("Conflicting version of stack-chain found");t.exports=global._stackChain}else t.exports=global._stackChain=en()})),rn=f(((e,t)=>{"use strict";var r=Yr();if(global._asyncHook){if(global._asyncHook.version!==Jr().version)throw new Error("Conflicting version of async-hook-jl found");t.exports=global._asyncHook}else tn().filter.attach((function(e,t){return t.filter((function(e){let t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),t.exports=global._asyncHook=new r})),nn=f(((e,t)=>{"use strict";var n=r(9023),i=r(2613),o=Vr(),s=rn(),a="cls@contexts",c="error@context",l=[];for(let e in s.providers)l[s.providers[e]]=e;var u,d,h=process.env.DEBUG_CLS_HOOKED,p=-1;function f(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function m(e){return process.namespaces[e]}function g(e){let t=m(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function y(e){process.env.DEBUG&&process._rawDebug(e)}function v(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(t.exports={getNamespace:m,createNamespace:function(e){i.ok(e,"namespace must be given a name."),h&&y("CREATING NAMESPACE "+e);let t=new f(e);return t.id=p,s.addHooks({init(r,i,o,s,a){p=r,s?(t._contexts.set(r,t._contexts.get(s)),h&&y("PARENTID: "+e+" uid:"+r+" parent:"+s+" provider:"+o)):t._contexts.set(p,t.active),h&&y("INIT "+e+" uid:"+r+" parent:"+s+" provider:"+l[o]+" active:"+n.inspect(t.active,!0))},pre(r,i){p=r;let o=t._contexts.get(r);o?(h&&y(" PRE "+e+" uid:"+r+" handle:"+v(i)+" context:"+n.inspect(o)),t.enter(o)):h&&y(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+v(i))},post(r,i){p=r;let o=t._contexts.get(r);o?(h&&y(" POST "+e+" uid:"+r+" handle:"+v(i)+" context:"+n.inspect(o)),t.exit(o)):h&&y(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+v(i))},destroy(r){p=r,h&&y("DESTROY "+e+" uid:"+r+" context:"+n.inspect(t._contexts.get(p))+" active:"+n.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t},destroyNamespace:g,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){g(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},f.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return h&&y("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+p+" active:"+n.inspect(this.active,!0)),this.active[e]=t,t},f.prototype.get=function(e){if(this.active)return h&&y("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+p+" active:"+n.inspect(this.active,!0)),this.active[e];h&&y("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+p+" active:"+n.inspect(this.active,!0))},f.prototype.createContext=function(){h&&y("   CREATING Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  active:"+n.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=p,h&&y("   CREATED Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  context:"+n.inspect(e,!0,2,!0)),e},f.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return h&&y(" BEFORE RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+n.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{h&&y(" AFTER RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t)}},f.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},f.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return h&&y(" BEFORE runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(h&&y(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,h&&y(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},f.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{r.exit(t)}}},f.prototype.enter=function(e){i.ok(e,"context must be provided for entering"),h&&y("  ENTER "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+n.inspect(e)),this._set.push(this.active),this.active=e},f.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),h&&y("  EXIT "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+n.inspect(e)),this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(h&&y("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},f.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;o(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,r=e[a];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},f.prototype.fromException=function(e){return e[c]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),h)for(d in(u=tn()).filter._modifiers)u.filter.deattach(d)})),on=f(((e,t)=>{"use strict";var r=v();process&&r.gte(process.versions.node,"8.0.0")?t.exports=Gr():t.exports=nn()})),sn=f(((e,t)=>{var r,n,i,o,s,a=Hr().wrap,c=1,l=2,u=4,d=8,h=[],p=0,f=!1,m=[];function g(e,t){var r=e.length,n=t.length,i=[];if(0===r&&0===n)return i;for(var o=0;o<r;o++)i[o]=e[o];if(0===n)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&i.push(t[s])}return i}function y(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=c),"function"==typeof e.before&&(this.before=e.before,this.flags|=l),"function"==typeof e.after&&(this.after=e.after,this.flags|=u),"function"==typeof e.error&&(this.error=e.error,this.flags|=d),this.uid=++p,this.data=void 0===t?null:t}function v(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof y?e:new y(e,t)}process._fatalException?(i=!1,r=function(e){var t=h.length;if(i||0===t)return!1;var r=!1;i=!0;for(var n=0;n<t;++n){var s=h[n];if(s.flags&d){var a=o&&o[s.uid];r=s.error(a,e)||r}}return i=!1,m.length>0&&(h=m.pop()),o=void 0,r&&!f},n=function(e,t,r){var n=[];f=!0;for(var i=0;i<r;++i){var s=t[i];if(n[s.uid]=s.data,s.flags&c){var a=s.create(s.data);void 0!==a&&(n[s.uid]=a)}}return f=!1,function(){o=n,m.push(h),h=g(t,h),f=!0;for(var i=0;i<r;++i)(t[i].flags&l)>0&&t[i].before(this,n[t[i].uid]);f=!1;var s=e.apply(this,arguments);for(f=!0,i=0;i<r;++i)(t[i].flags&u)>0&&t[i].after(this,n[t[i].uid]);return f=!1,h=m.pop(),o=void 0,s}},a(process,"_fatalException",(function(e){return function(t){return r(t)||e(t)}}))):(s=!1,r=function(e){if(s)throw e;for(var t=!1,r=h.length,n=0;n<r;++n){var i=h[n];i.flags&d&&(t=i.error(null,e)||t)}if(!t&&f)throw e},n=function(e,t,n){var i=[];f=!0;for(var o=0;o<n;++o){var a=t[o];if(i[a.uid]=a.data,a.flags&c){var p=a.create(a.data);void 0!==p&&(i[a.uid]=p)}}return f=!1,function(){var o,a=!1,c=!1;m.push(h),h=g(t,h),f=!0;for(var p=0;p<n;++p)(t[p].flags&l)>0&&t[p].before(this,i[t[p].uid]);f=!1;try{o=e.apply(this,arguments)}catch(e){for(a=!0,p=0;p<n;++p)if(h[p].flags&d)try{c=h[p].error(i[t[p].uid],e)||c}catch(e){throw s=!0,e}if(!c)throw process.removeListener("uncaughtException",r),process._originalNextTick((function(){process.addListener("uncaughtException",r)})),e}finally{if(!a||c){for(f=!0,p=0;p<n;++p)(t[p].flags&u)>0&&t[p].after(this,i[t[p].uid]);f=!1}h=m.pop()}return o}},process.addListener("uncaughtException",r)),y.prototype.create=void 0,y.prototype.before=void 0,y.prototype.after=void 0,y.prototype.error=void 0,y.prototype.data=void 0,y.prototype.uid=0,y.prototype.flags=0,process.createAsyncListener=v,process.addAsyncListener=function(e,t){var r;r=e instanceof y?e:v(e,t);for(var n=!1,i=0;i<h.length;i++)if(r===h[i]){n=!0;break}return n||h.push(r),r},process.removeAsyncListener=function(e){for(var t=0;t<h.length;t++)if(e===h[t]){h.splice(t,1);break}},t.exports=function(e){var t=h.length;if(0===t)return e;for(var r=h.slice(),i=0;i<t;++i)if(r[i].flags>0)return n(e,r,t);return function(e,t,r){f=!0;for(var n=0;n<r;++n){var i=t[n];i.create&&i.create(i.data)}return f=!1,function(){m.push(h),h=g(t,h);var r=e.apply(this,arguments);return h=m.pop(),r}}(e,r,t)}})),an=f(((e,t)=>{"use strict";t.exports=(e,t)=>class extends e{constructor(e){var r,n;super((function(e,o){r=this,n=[function(r){return t(i,!1),e(r)},function(e){return t(i,!1),o(e)}]}));var i=this;try{e.apply(r,n)}catch(e){n[1](e)}return i}}})),cn=f((()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=Hr(),t=v(),n=e.wrap,i=e.massWrap,o=sn(),s=r(9023),a=t.gte(process.version,"6.0.0"),c=t.gte(process.version,"7.0.0"),l=t.gte(process.version,"8.0.0"),u=t.gte(process.version,"11.0.0"),d=r(9278);function h(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=o(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function p(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=o(t._originalOnread)}}c&&!d._normalizeArgs?d._normalizeArgs=function(e){if(0===e.length)return[{},null];var t=e[0],r={};"object"==typeof t&&null!==t?r=t:function(e){return"string"==typeof e&&!1===function(e){return(e=Number(e))>=0&&e}(e)}(t)?r.path=t:(r.port=t,e.length>1&&"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"!=typeof n?[r,null]:[r,n]}:!c&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(e){var t,r={};"object"==typeof e[0]&&null!==e[0]?r=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?r.path=e[0]:(r.port=e[0],"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"==typeof n?[r,n]:[r]}),"_setUpListenHandle"in d.Server.prototype?n(d.Server.prototype,"_setUpListenHandle",h):n(d.Server.prototype,"_listen2",h),n(d.Socket.prototype,"connect",(function(e){return function(){var t;(t=l&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:c?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments))[1]&&(t[1]=o(t[1]));var r=e.apply(this,t);return p(this),r}}));var f=r(8611);n(f.Agent.prototype,"addRequest",(function(e){return function(t){var r=t.onSocket;return t.onSocket=o((function(e){return p(e),r.apply(this,arguments)})),e.apply(this,arguments)}}));var m=r(5317);function g(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=o(e._handle.onread),n(e._handle,"close",O))})),e._handle&&(e._handle.onexit=o(e._handle.onexit))}m.ChildProcess?n(m.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return g(this),t}})):i(m,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return g(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var y=[];process._nextDomainTick&&y.push("_nextDomainTick"),process._tickDomainCallback&&y.push("_tickDomainCallback"),i(process,y,M),n(process,"nextTick",O);var _=["setTimeout","setInterval"];global.setImmediate&&_.push("setImmediate");var b=r(3557),w=global.setTimeout===b.setTimeout;i(b,_,O),w&&i(global,_,O);var S=r(2250);i(S,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],M),S.resolveNaptr&&n(S,"resolveNaptr",M);var E,C,T,k=r(9896);i(k,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],M),k.lchown&&n(k,"lchown",M),k.lchmod&&n(k,"lchmod",M),k.ftruncate&&n(k,"ftruncate",M);try{E=r(3106)}catch(e){}E&&E.Deflate&&E.Deflate.prototype&&((C=Object.getPrototypeOf(E.Deflate.prototype))._transform?n(C,"_transform",M):C.write&&C.flush&&C.end&&i(C,["write","flush","end"],M));try{T=r(6982)}catch(e){}T&&(P=["pbkdf2","randomBytes"],u||P.push("pseudoRandomBytes"),i(T,P,M));var P,R,x=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function M(e){var t=function(){var t,r=arguments.length-1;if("function"==typeof arguments[r]){t=Array(arguments.length);for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n];t[r]=o(arguments[r])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,r,n))};case 3:return function(r,n,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,r,n,i))};case 4:return function(r,n,i,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=o(s)),e.call(this,r,n,i,s))};case 5:return function(r,n,i,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=o(a)),e.call(this,r,n,i,s,a))};case 6:return function(r,n,i,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=o(c)),e.call(this,r,n,i,s,a,c))};default:return t}}function O(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=o(arguments[0]);for(var r=1;r<arguments.length;r++)t[r]=arguments[r]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n))};case 3:return function(r,n,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n,i))};case 4:return function(r,n,i,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n,i,s))};case 5:return function(r,n,i,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n,i,s,a))};case 6:return function(r,n,i,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n,i,s,a,c))};default:return t}}x&&(R=process.addAsyncListener({create:function(){x=!1}}),global.Promise.resolve(!0).then((function(){x=!1})),process.removeAsyncListener(R)),x&&function(){var e=global.Promise;function t(n){if(!(this instanceof t))return e(n);if("function"!=typeof n)return new e(n);var i,o,s=new e((function(e,t){i=this,o=[function(t){return r(s,!1),e(t)},function(e){return r(s,!1),t(e)}]}));s.__proto__=t.prototype;try{n.apply(i,o)}catch(e){o[1](e)}return s}function r(e,t){(!e.__asl_wrapper||t)&&(e.__asl_wrapper=o(i))}function i(t,n,o,s){var a;try{return{returnVal:a=n.call(t,o),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){return(a.__asl_wrapper||i).apply(this,arguments)}:r(s,!0)}}function c(e){return function(){var t=this,r=e.apply(t,Array.prototype.map.call(arguments,(function(e){return"function"!=typeof e?e:o((function(n){var o=(t.__asl_wrapper||i)(this,e,n,r);if(o.error)throw o.errorVal;return o.returnVal}))})));return r.__asl_wrapper=function(e,n,o,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,r),r.__asl_wrapper(e,n,o,s)):i(e,n,o,s)},r}}s.inherits(t,e),n(e.prototype,"then",c),e.prototype.chain&&n(e.prototype,"chain",c),a?global.Promise=an()(e,r):(["all","race","reject","resolve","accept","defer"].forEach((function(r){"function"==typeof e[r]&&(t[r]=e[r])})),global.Promise=t)}()})),ln=f(((e,t)=>{"use strict";var n=r(2613),i=Vr(),o="cls@contexts",s="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function l(e){var t=c(e);n.ok(t,"can't delete nonexistent namespace!"),n.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){l(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||cn(),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{r.exit(t)}}},a.prototype.enter=function(e){n.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(n.ok(e,"context must be provided for exiting"),this.active===e)return n.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);n.ok(t>=0,"context not currently entered; can't exit"),n.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){n.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;i(e,(function(e){!e||(e[o]||(e[o]=Object.create(null)),e[o][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[o])return e;var t=e,r=e[o];return Object.keys(r).forEach((function(e){var n=r[e];t=n.namespace.bind(t,n.context)})),t}))},a.prototype.fromException=function(e){return e[s]},process.namespaces||u(),t.exports={getNamespace:c,createNamespace:function(e){n.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,r){r&&t.enter(r)},after:function(e,r){r&&t.exit(r)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:l,reset:u}})),un=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=g(),r=Gt(),n=Jt(),i=Yt(),o=Wr(),s=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,r,n,i,o){return t=t||e,this.enabled?{operation:{name:r,id:e,parentId:t,traceparent:i,tracestate:o},customProperties:new a(n)}:null},e.spanToContextObject=function(t,r,i){var o=new n;return o.traceId=t.traceId,o.spanId=t.spanId,o.traceFlag=n.formatOpenTelemetryTraceFlags(t.traceFlags)||n.DEFAULT_TRACE_FLAG,o.parentId=r,e.generateContextObject(o.traceId,o.parentId,i,null,o)},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,((n={})[e.CONTEXT_NAME]=t,n))():r()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?((n={})[e.CONTEXT_NAME]=r,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,void 0===this.cls&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=on():this.cls=ln()),e.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0}},e.startOperation=function(r,s){var a=r&&r.traceContext||null,c=r&&r.traceId?r:null,l=r&&r.headers;if(c){var u=new n("00-"+c.traceId+"-"+c.spanId+"-01"),d=new i(c.traceState?c.traceState.serialize():null);return e.generateContextObject(c.traceId,"|"+c.traceId+"."+c.spanId+".","string"==typeof s?s:"",void 0,u,d)}if(a){u=new n(a.traceparent),d=new i(a.tracestate);var h="object"==typeof s?new o(s):null;return e.generateContextObject(u.traceId,u.parentId,"string"==typeof s?s:h.getOperationName({}),h&&h.getCorrelationContextHeader()||void 0,u,d)}return l?(u=new n(l.traceparent?l.traceparent.toString():null),d=new i(l.tracestate?l.tracestate.toString():null),h=new o(r),e.generateContextObject(u.traceId,u.parentId,h.getOperationName({}),h.getCorrelationContextHeader(),u,d)):(t.warn("startOperation was called with invalid arguments",arguments),null)},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,r=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,n=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&r)&&n},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();e.CorrelationContextManager=s;var a=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var r=this.props[t];if(r.key===e)return r.value}},e.prototype.setProperty=function(r,n){if(e.bannedCharacters.test(r)||e.bannedCharacters.test(n))t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+r+" and value: "+n);else{for(var i=0;i<this.props.length;++i){var o=this.props[i];if(o.key===r)return void(o.value=n)}this.props.push({key:r,value:n})}},e.bannedCharacters=/[,=]/,e}()})),dn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Br(),r=w(),n=[],i=function(e){var r=e.data.message;n.forEach((function(n){r instanceof Error?n.trackException({exception:r}):(r.lastIndexOf("\n")==r.length-1&&(r=r.substring(0,r.length-1)),n.trackTrace({message:r,severity:e.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("console",i),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("console",i)},e.dispose=function(){r.channel.unsubscribe("console",i),n=[]}})),hn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Br(),r=w(),n=[],i={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},o=function(e){var t=e.data.result;n.forEach((function(r){var n=i[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("bunyan",o),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("bunyan",o)},e.dispose=function(){r.channel.unsubscribe("bunyan",o),n=[]}})),pn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Br(),r=w(),n=[],i={syslog:function(e){var r={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return void 0===r[e]?t.SeverityLevel.Information:r[e]},npm:function(e){var r={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return void 0===r[e]?t.SeverityLevel.Information:r[e]},unknown:function(e){return t.SeverityLevel.Information}},o=function(e){var t=e.data.message;n.forEach((function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=i[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("winston",o),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("winston",o)},e.dispose=function(){r.channel.unsubscribe("winston",o),n=[]}})),fn=f(((e,t)=>{"use strict";var r=Gt(),n=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){r.IsInitialized&&(dn().enable(e&&t,this._client),hn().enable(e,this._client),pn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();t.exports=n})),mn=f(((e,t)=>{"use strict";var r=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||13===parseInt(r[0])&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(t,n,i){void 0===i&&(i=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:i}),r._client.flush({isAppCrashing:!0}),t&&n&&1===process.listeners(n).length&&(console.error(i),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();t.exports=r})),gn=f((e=>{"use strict";var t,r,n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(n=r=e.QuickPulseCounter||(e.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",n.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",n.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",n.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",n.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",n.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",n.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",n.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",n.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(i=e.PerformanceCounter||(e.PerformanceCounter={})),function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"}(e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=((t={})[i.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[i.REQUEST_RATE]=r.REQUEST_RATE,t[i.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"})),yn=f(((e,t)=>{"use strict";var n=r(857),i=gn(),o=function(){function e(t,r,n){void 0===r&&(r=6e4),void 0===n&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var i=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=n.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval((function(){return i.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalRequestExecutionTime+=n,!1===r&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalDependencyExecutionTime+=n,!1===r&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=n.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,r=0,o=0,s=0,a=0,c=0;e&&c<e.length;c++){var l=e[c],u=this._lastCpus[c],d=(l.model,l.speed,l.times),h=u.times;t+=d.user-h.user||0,r+=d.sys-h.sys||0,o+=d.nice-h.nice||0,s+=d.idle-h.idle||0,a+=d.irq-h.irq||0}var p=void 0;if("function"==typeof process.cpuUsage){var f=process.cpuUsage(),m=process.hrtime(),g=f.user-this._lastAppCpuUsage.user+(f.system-this._lastAppCpuUsage.system)||0;void 0!==this._lastHrtime&&2===this._lastHrtime.length&&(p=100*g/((1e6*(m[0]-this._lastHrtime[0])+(m[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=f,this._lastHrtime=m}var y=t+r+o+s+a||1;this._client.trackMetric({name:i.PerformanceCounter.PROCESSOR_TIME,value:(y-s)/y*100}),this._client.trackMetric({name:i.PerformanceCounter.PROCESS_TIME,value:p||t/y*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=n.freemem(),t=process.memoryUsage().rss,r=n.totalmem()-e;this._client.trackMetric({name:i.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:i.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.COMMITTED_BYTES,value:r})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,o=r.totalFailedRequestCount-t.totalFailedRequestCount||0,s=r.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var l=n/a,u=o/a;this._client.trackMetric({name:i.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:i.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,o=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=r.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var l=n/a,u=o/a;this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,o=r.time-t.time;if(o>0){var s=n/(o/1e3);this._client.trackMetric({name:i.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();t.exports=o})),vn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;e.AggregatedMetricCounter=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}})),_n=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}})),bn=f(((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},n=gn(),i=vn(),o=_n(),s=function(){function e(t,r){void 0===r&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r}return e.prototype.enable=function(e,t){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return r.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,r){if(e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._requestCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}i.intervalExecutionTime+=n,i.totalCount++}},e.countDependency=function(t,r){if(e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._dependencyCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}i.intervalExecutionTime+=n,i.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var r=!1,n=0;n<t.length;n++){if(e===t[n].dimensions)return t[n];if(Object.keys(e).length===Object.keys(t[n].dimensions).length){for(var o in e)if(e[o]!=t[n].dimensions[o]){r=!0;break}if(!r)return t[n];r=!1}}var s=new i.AggregatedMetricCounter(e);return t.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date;var i=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/i||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:s,count:i,aggregationInterval:o,metricType:n.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date;var i=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/i||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:s,count:i,aggregationInterval:o,metricType:n.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],i=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:i,count:i,aggregationInterval:o,metricType:n.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],i=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:i,count:i,aggregationInterval:o,metricType:n.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var n in e.dimensions)t[o.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];t=r(r({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();t.exports=s})),wn=f(((e,t)=>{"use strict";var n=r(857),i=r(9896),o=r(6928),s=Br(),a=g(),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(i.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.appVersion[t]=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=n&&n.hostname(),this.tags[this.keys.deviceOSVersion]=n&&n.type()+" "+n.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=n&&n.arch(),this.tags["ai.device.osPlatform"]=n&&n.platform()},e.prototype._loadInternalContext=function(){var t=o.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(i.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.sdkVersion=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();t.exports=c})),Sn=f(((e,t)=>{"use strict";var n,i=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r(7016),s=Br(),a=zt(),c=Kt(),l=$r(),u=Xt(),d=function(e){function t(r,n){var i=e.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=t._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return i(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var r=o.parse(this.url);r.search=void 0,r.hash=void 0;var n=this.method.toUpperCase()+" "+r.pathname,i=s.RemoteDependencyDataConstants.TYPE_HTTP,a=r.hostname;r.port&&(a+=":"+r.port),this.correlationId?(i=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==u.correlationIdPrefix&&(a+=" | "+this.correlationId)):i=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:n,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:i,target:a};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var l in e)c[l]||(c[l]=e[l]);if(e.properties)for(var l in e.properties)c.properties[l]=e.properties[l]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))e=o.parse(e);else{var r=o.parse(e);e="443"===r.host?o.parse("https://"+e):o.parse("http://"+e)}else{if(e&&"function"==typeof o.URL&&e instanceof o.URL)return o.format(e);var n=e;e={},n&&Object.keys(n).forEach((function(t){e[t]=n[t]}))}if(e.path){var i=o.parse(e.path);e.pathname=i.pathname,e.search=i.search}return e.host&&e.port&&!o.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host),e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(l);t.exports=d})),En=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=me(),n=gn();function i(e){var r=t({},e);return Object.keys(n.SpanAttribute).forEach((function(e){delete r[e]})),r}e.spanToTelemetryContract=function(e){var o="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",s=Math.round(1e3*e._duration[0]+e._duration[1]/1e6),a=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",c=e.attributes.component?e.attributes.component.toString():"",l=c.toUpperCase()===n.DependencyTypeName.Http||!!e.attributes[n.SpanAttribute.HttpUrl],u=c.toLowerCase()===n.DependencyTypeName.Grpc;if(l){var d=e.attributes[n.SpanAttribute.HttpMethod]||"GET",h=new URL(e.attributes[n.SpanAttribute.HttpUrl].toString()),p=e.attributes[n.SpanAttribute.HttpHost]||h.host,f=e.attributes[n.SpanAttribute.HttpPort]||h.port||null,m=d+" "+(h.pathname||"/"),g=n.DependencyTypeName.Http,y=f?(p+":"+f).toString():p.toString(),v=h.toString(),_=e.attributes[n.SpanAttribute.HttpStatusCode]||e.status.code||0;return{id:o,name:m,dependencyTypeName:g,target:y,data:v,success:_<400,duration:s,url:v,resultCode:String(_),properties:i(e.attributes)}}if(u){d=e.attributes[n.SpanAttribute.GrpcMethod]||"rpc";var b=e.attributes[n.SpanAttribute.GrpcService],w=b?d+" "+b:e.name;return{id:o,duration:s,name:w,target:b.toString(),data:b.toString()||w,url:b.toString()||w,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:0===e.status.code,properties:i(e.attributes)}}var S=e.name,E=e.links&&e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return{id:o,duration:s,name:S,target:a,data:a||S,url:a||S,dependencyTypeName:e.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:c||e.name,resultCode:String(e.status.code||0),success:0===e.status.code,properties:t(t({},i(e.attributes)),{"_MS.links":E||void 0})}}})),Cn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=me(),r=w(),n=Jt(),i=En(),o=y(),s=[];e.subscriber=function(e){var r=e.data,a=i.spanToTelemetryContract(r),c=r.spanContext(),l=new n;l.traceId=c.traceId,l.spanId=c.spanId,l.traceFlag=n.formatOpenTelemetryTraceFlags(c.traceFlags),l.parentId=r.parentSpanId?"|"+c.traceId+"."+r.parentSpanId+".":null,o.AsyncScopeManager.with(r,(function(){s.forEach((function(e){r.kind===t.SpanKind.SERVER?e.trackRequest(a):(r.kind===t.SpanKind.CLIENT||r.kind===t.SpanKind.INTERNAL)&&e.trackDependency(a)}))}))},e.enable=function(t,n){t?(0===s.length&&r.channel.subscribe("azure-coretracing",e.subscriber),s.push(n)):0===(s=s.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("azure-coretracing",e.subscriber)}})),Tn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=w(),r=[];e.subscriber=function(e){"ismaster"!==e.data.event.commandName&&r.forEach((function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},e.enable=function(n,i){n?(0===r.length&&t.channel.subscribe("mongodb",e.subscriber),r.push(i)):0===(r=r.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("mongodb",e.subscriber)}})),kn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=w(),r=[];e.subscriber=function(e){r.forEach((function(t){var r=e.data.query||{},n=r.sql||"Unknown query",i=!e.data.err,o=(r._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},e.enable=function(n,i){n?(0===r.length&&t.channel.subscribe("mysql",e.subscriber),r.push(i)):0===(r=r.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("mysql",e.subscriber)}})),Pn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=w(),r=[];e.subscriber=function(e){r.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},e.enable=function(n,i){n?(0===r.length&&t.channel.subscribe("redis",e.subscriber),r.push(i)):0===(r=r.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("redis",e.subscriber)}})),Rn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=w(),r=[];e.subscriber=function(e){r.forEach((function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},e.enable=function(n,i){n?(0===r.length&&t.channel.subscribe("postgres",e.subscriber),r.push(i)):0===(r=r.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("postgres",e.subscriber)}})),xn=f(((e,t)=>{"use strict";var n=e&&e.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},i=r(8611),o=r(5692),s=g(),a=zt(),c=Kt(),l=Sn(),u=un(),d=Xt(),h=Jt(),p=Gt(),f=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(Cn().enable(!0,this._client),Tn().enable(e,this._client),kn().enable(e,this._client),Pn().enable(e,this._client),Rn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=i.request,s=o.request,a=function(r,n){var i=!n[e.disableCollectionRequestOption]&&!r[e.alreadyAutoCollectedFlag];n.headers&&n.headers["user-agent"]&&-1!==n.headers["user-agent"].toString().indexOf("azsdk-js")&&(i=!1),r[e.alreadyAutoCollectedFlag]=!0,r&&n&&i&&(u.CorrelationContextManager.wrapEmitter(r),e.trackRequest(t._client,{options:n,request:r}))};i.request=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var s=r.call.apply(r,n([i,e],t));return a(s,e),s},o.request=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=s.call.apply(s,n([o,e],t));return a(i,e),i},i.get=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=(t=i.request).call.apply(t,n([i,e],r));return s.end(),s},o.get=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(t=o.request).call.apply(t,n([o,e],r));return s.end(),s}},e.trackRequest=function(t,r){if(r.options&&r.request&&t){var n,i,o=new l(r.options,r.request),p=u.CorrelationContextManager.getCurrentContext();if(p&&p.operation&&p.operation.traceparent&&h.isValidTraceId(p.operation.traceparent.traceId)?(p.operation.traceparent.updateSpanId(),n=p.operation.traceparent.getBackCompatRequestId()):d.w3cEnabled?(i=(m=new h).toString(),n=m.getBackCompatRequestId()):n=p&&p.operation&&p.operation.parentId+e.requestNumber+++".",a.canIncludeCorrelationHeader(t,o.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var f=r.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,r.request,f)}catch(e){s.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(p&&p.operation)try{if(r.request.setHeader(c.requestIdHeader,n),t.config.ignoreLegacyHeaders||(r.request.setHeader(c.parentIdHeader,p.operation.id),r.request.setHeader(c.rootIdHeader,n)),i||p.operation.traceparent)r.request.setHeader(c.traceparentHeader,i||p.operation.traceparent.toString());else if(d.w3cEnabled){var m=(new h).toString();r.request.setHeader(c.traceparentHeader,m)}if(p.operation.tracestate){var g=p.operation.tracestate.toString();g&&r.request.setHeader(c.traceStateHeader,g)}var y=p.customProperties.serializeToHeader();y&&r.request.setHeader(c.correlationContextHeader,y)}catch(e){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}r.request.on&&(r.request.on("response",(function(e){o.onResponse(e);var i=o.getDependencyTelemetry(r,n);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=r.options,i.contextObjects["http.ClientRequest"]=r.request,i.contextObjects["http.ClientResponse"]=e,t.trackDependency(i)})),r.request.on("error",(function(e){o.onError(e);var i=o.getDependencyTelemetry(r,n);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=r.options,i.contextObjects["http.ClientRequest"]=r.request,i.contextObjects.Error=e,t.trackDependency(i)})),r.request.on("abort",(function(){o.onError(new Error);var e=o.getDependencyTelemetry(r,n);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=r.options,e.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(e)})))}else s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=f})),Mn=f(((e,t)=>{"use strict";var n=r(857),i=gn(),o=zt(),s=wn(),a=xn(),c=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e,t){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return r.trackHeartBeat(t,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var r=this,o=!1,a={},c=s.sdkVersion;a.sdk=c,a.osType=n.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(void 0===this._isVM?(o=!0,this._getAzureComputeMetadata(e,(function(){r._isVM&&Object.keys(r._vmData).length>0&&(a.azInst_vmId=r._vmData.vmId||"",a.azInst_subscriptionId=r._vmData.subscriptionId||"",a.azInst_osType=r._vmData.osType||"",r._azInst_vmId=r._vmData.vmId||"",r._azInst_subscriptionId=r._vmData.subscriptionId||"",r._azInst_osType=r._vmData.osType||""),r._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:a}),t()}))):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),o||(this._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:a}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(e,t){var r,n=this,i=((r={method:"GET"})[a.disableCollectionRequestOption]=!0,r.headers={Metadata:"True"},r),s=o.makeRequest(e,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",i,(function(e){if(200===e.statusCode){n._isVM=!0;var r="";e.on("data",(function(e){r+=e})),e.on("end",(function(){n._vmData=n._isJSON(r)?JSON.parse(r):{},t()}))}else t()}));s&&(s.on("error",(function(e){e&&e.message&&e.message.indexOf("ENETUNREACH")>-1&&(n._isVM=!1),t()})),s.end())},e.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch(e){return!1}},e}();t.exports=c})),On=f(((e,t)=>{"use strict";var n=r(8611),i=r(5692),o=g(),s=zt(),a=Kt(),c=Wr(),l=un(),u=yn(),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?l.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&l.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return l.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(r){if(r){if("function"!=typeof r)throw new Error("onRequest handler must be a function");return function(n,i){l.CorrelationContextManager.wrapEmitter(n),l.CorrelationContextManager.wrapEmitter(i);var o=n&&!n[e.alreadyAutoCollectedFlag];if(n&&o){var s=new c(n),a=t._generateCorrelationContext(s);l.CorrelationContextManager.runWithContext(a,(function(){t._isEnabled&&(n[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:n,response:i},s)),"function"==typeof r&&r(n,i)}))}else"function"==typeof r&&r(n,i)}}},o=function(e){var t=e.addListener.bind(e);e.addListener=function(e,n){switch(e){case"request":case"checkContinue":return t(e,r(n));default:return t(e,n)}},e.on=e.addListener},s=n.createServer;n.createServer=function(e,t){if(t&&"function"==typeof t){var n=s(e,r(t));return o(n),n}return n=s(r(e)),o(n),n};var a=i.createServer;i.createServer=function(e,t){var n=a(e,r(t));return o(n),n}},e.trackRequestSync=function(t,r){if(r.request&&r.response&&t){e.addResponseCorrelationIdHeader(t,r.response);var n=l.CorrelationContextManager.getCurrentContext(),i=new c(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(t.context.tags)||n.operation.id,n.operation.name=i.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,r,r.duration,r.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t)},e.trackRequest=function(t,r,n){if(r.request&&r.response&&t){var i=l.CorrelationContextManager.getCurrentContext(),a=n||new c(r.request,i&&i.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),i&&!n&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",(function(){e.endRequest(t,a,r,null,null)})),r.request.on&&r.request.on("error",(function(n){e.endRequest(t,a,r,null,n)})),r.request.on&&r.request.on("aborted",(function(){e.endRequest(t,a,r,null,"The request has been aborted and the network socket has closed.")}))}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var r=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,r)}},e.endRequest=function(e,t,r,n,i){i?t.onError(i,n):t.onResponse(r.response,n);var o=t.getRequestTelemetry(r);if(o.tagOverrides=t.getRequestTags(e.context.tags),r.tagOverrides)for(var s in r.tagOverrides)o.tagOverrides[s]=r.tagOverrides[s];var a=t.getLegacyRootId();a&&(o.properties.ai_legacyRootId=a),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=r.request,o.contextObjects["http.ServerResponse"]=r.response,e.trackRequest(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,l.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=d})),Dn=f(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=r(857),o=Br(),s=gn(),a=zt(),c=g(),l=a.w3cTraceId(),u=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,r,n){var o=i&&"function"==typeof i.hostname&&i.hostname()||"Unknown",s=n.tags&&n.keys&&n.keys.cloudRoleInstance&&n.tags[n.keys.cloudRoleInstance]||o,a=n.tags&&n.keys&&n.keys.cloudRole&&n.tags[n.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:r.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:n.tags[n.keys.internalSdkVersion],StreamId:l,MachineName:o,Instance:s,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case o.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case o.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case o.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case o.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case o.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData.name;return n(n({},r),{Name:i})},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData.severityLevel||0;return n(n({},r),{Message:t.data.baseData.message,SeverityLevel:o.SeverityLevel[i]})},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData.exceptions,o="",s="",a="";return i&&i.length>0&&(i[0].parsedStack&&i[0].parsedStack.length>0?i[0].parsedStack.forEach((function(e){o+=e.assembly+"\n"})):i[0].stack&&i[0].stack.length>0&&(o=i[0].stack),s=i[0].message,a=i[0].typeName),n(n({},r),{Exception:o,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData;return n(n({},r),{Name:i.name,Success:i.success,Duration:i.duration,ResponseCode:i.responseCode,OperationName:i.name})},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData;return n(n({},r),{Name:i.name,Target:i.target,Success:i.success,Duration:i.duration,ResultCode:i.resultCode,CommandName:i.data,OperationName:r.OperationId,DependencyTypeName:i.type})},e.createQuickPulseDocument=function(t){var r,n;return t.data.baseType?(n=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:r,__type:n,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],r=e.data.baseData.measurements||{};for(var n in r)if(r.hasOwnProperty(n)){var i={key:n,value:r[n]};t.push(i)}var o=e.data.baseData.properties||{};for(var n in o)o.hasOwnProperty(n)&&(i={key:n,value:o[n]},t.push(i));return t},e.keys=new o.ContextTagKeys,e}();t.exports=u})),In=f(((e,t)=>{"use strict";t.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}})),An=f(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=r(5692),s=xn(),a=g(),c=In(),l=zt(),u="x-ms-qps-service-polling-interval-hint",d="x-ms-qps-service-endpoint-redirect",h=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t,r){var n=[{name:"x-ms-qps-stream-id",value:e.StreamId},{name:"x-ms-qps-machine-name",value:e.MachineName},{name:"x-ms-qps-role-name",value:e.RoleName},{name:"x-ms-qps-instance-name",value:e.Instance},{name:"x-ms-qps-invariant-version",value:e.InvariantVersion.toString()}];this._submitData(e,t,r,"ping",n)},e.prototype.post=function(e,t,r){return n(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this._submitData([e],t,r,"post")];case 1:return n.sent(),[2]}}))}))},e.prototype._submitData=function(e,t,r,a,h){return n(this,void 0,void 0,(function(){var n,p,f,m,g,y=this;return i(this,(function(i){return n=JSON.stringify(e),(m={})[s.disableCollectionRequestOption]=!0,m.host=t&&t.length>0?t:this._config.quickPulseHost,m.method="POST",m.path="/QuickPulseService.svc/"+a+"?ikey="+this._config.instrumentationKey,m.headers=((g={Expect:"100-continue"})["x-ms-qps-transmission-time"]=c.getTransmissionTime(),g["Content-Type"]="application/json",g["Content-Length"]=Buffer.byteLength(n),g),p=m,h&&h.length>0&&h.forEach((function(e){return p.headers[e.name]=e.value})),this._config.httpsAgent?p.agent=this._config.httpsAgent:p.agent=l.tlsRestrictedAgent,(f=o.request(p,(function(e){if(200==e.statusCode){var t="true"===e.headers["x-ms-qps-subscribed"],n=e.headers[d]?e.headers[d].toString():null,i=e.headers[u]?parseInt(e.headers[u].toString()):null;y._consecutiveErrors=0,r(t,e,n,i)}else y._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),r()}))).on("error",(function(e){y._onError(e),r()})),f.write(n),f.end(),[2]}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,r,t)):a.info(e.TAG,r,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();t.exports=h})),Nn=f(((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=g(),o=Dn(),s=An(),a=gn(),c=wn(),l=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new c,this._sender=new s(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=o.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,r=e.count||1,n=a.PerformanceToQuickPulseCounter[e.name];n&&(this._metrics[n]?(this._metrics[n].Value=(this._metrics[n].Value*this._metrics[n].Weight+t*r)/(this._metrics[n].Weight+r),this._metrics[n].Weight+=r):(this._metrics[n]=o.createQuickPulseMetric(e),this._metrics[n].Name=n,this._metrics[n].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return r(this,void 0,void 0,(function(){var t,r,i,s,a=this;return n(this,(function(n){switch(n.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),r=o.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return n.sent(),[3,3];case 2:this._ping(r),n.label=3;case 3:return i=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,s=this._isCollectingData?e.POST_INTERVAL:i,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,s=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(s=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),s),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,r,n){null!=e?(this._isCollectingData!==e&&(i.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,r&&r.length>0&&(this._redirectedHost=r,i.info("Redirecting endpoint to: ",r)),n&&n>0&&(this._pollingIntervalHint=n),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();t.exports=l})),Ln=f(((e,t)=>{"use strict";var r=gn(),n=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR).reduce((function(t,r){var n=r.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===n.length){var i=n[0].toLowerCase(),o=n[1];t[i]=o}return t}),{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();t.exports=n})),Fn=f(((e,t)=>{"use strict";var n=Xt(),i=Ln(),o=(g(),gn()),s=r(7016),a=function(){function e(t){var r=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],a=i.parse(t),c=i.parse(n),l=!a.instrumentationkey&&Object.keys(a).length>0?null:t;this.instrumentationKey=a.instrumentationkey||l||c.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(a.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return r.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=a.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=a.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){n.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=n.correlationIdPrefix,n.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();t.exports=a})),jn=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var n=Fn(),i=wn(),o=g(),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,n,i){var s=this;if(void 0===n&&(n={}),void 0===i&&(i=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=r(4597);e._emitter=new a,e._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch(t){return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=n,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,i),this._handle||(this._handle=setInterval((function(){return s._trackNativeMetrics()}),i),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var r=process.env[n.ENV_nativeMetricsDisableAll],i=process.env[n.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++)s[c[a]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:t(t({},e),s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var o=r[n].metrics,s=n+" Garbage Collection Duration",a=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:s,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData().loopUsage;if(0!=r.count){var n=Math.sqrt(r.sumSquares/r.count-Math.pow(r.total/r.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:r.total,count:r.count,min:r.min,max:r.max,stdDev:n,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,r;if(!this._disabledMetrics.heap){var n=process.memoryUsage(),o=n.heapUsed,s=n.heapTotal,a=n.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,r)})}},e}();e.AutoCollectNativePerformance=s})),qn=f(((e,t)=>{"use strict";var r=g(),n=function(){function e(e,t,r,n){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=r,this._sender=n}return e.prototype.setUseDiskRetryCaching=function(e,t,r){this._sender.setDiskRetryMode(e,t,r)},e.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e)return void r.warn("Cannot send null/undefined telemetry");if(this._buffer.push(e),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(e,t){var r=this._buffer.length<1;r||(e?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,r&&"function"==typeof t&&t("no data to send")},e}();t.exports=n})),Un=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0,e.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}})),Bn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=Br();function r(e){var t=2147483647,r=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)r=((r<<5)+r|0)+e.charCodeAt(n)|0;return(r=r<=-2147483648?t:Math.abs(r))/t*100}e.samplingTelemetryProcessor=function(e,n){var i=e.sampleRate;return!!(null==i||i>=100||e.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(e.data.baseType))||(n.correlationContext&&n.correlationContext.operation?r(n.correlationContext.operation.id)<i:100*Math.random()<i)},e.getSamplingHashCode=r})),$n=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=yn(),r=Br();e.performanceMetricsTelemetryProcessor=function(e,n){switch(n&&n.addDocument(e),e.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var i=e.data.baseData;t.countRequest(i.duration,i.success);break;case r.TelemetryTypeString.Dependency:var o=e.data.baseData;t.countDependency(o.duration,o.success)}return!0}})),Wn=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=Br(),n=bn(),i=Br();e.preAggregatedMetricsTelemetryProcessor=function(e,o){if(n.isEnabled())switch(e.data.baseType){case i.TelemetryTypeString.Exception:var s=e.data.baseData;s.properties=t(t({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole]};n.countException(a);break;case i.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var l={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[c.severity]};n.countTrace(l);break;case i.TelemetryTypeString.Request:var u=e.data.baseData;u.properties=t(t({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var d={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],requestSuccess:u.success,requestResultCode:u.responseCode};n.countRequest(u.duration,d);break;case i.TelemetryTypeString.Dependency:var h=e.data.baseData;h.properties=t(t({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var p={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],dependencySuccess:h.success,dependencyType:h.type,dependencyTarget:h.target,dependencyResultCode:h.resultCode};n.countDependency(h.duration,p)}return!0}})),Hn=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Un(),e),r(Bn(),e),r($n(),e),r(Wn(),e)})),Vn=f(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=r(9896),s=r(857),a=r(6928),c=r(3106),l=r(5317),u=g(),d=xn(),h=zt(),p=function(){function e(t,r,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=a.join(s.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=o.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||u.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof r&&r>=0&&(this._resendInterval=Math.floor(r)),"number"==typeof n&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){i._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,r){return n(this,void 0,void 0,(function(){var n,o,s,a,l=this;return i(this,(function(i){return t&&(n=this._redirectedHost||this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s="",t.forEach((function(e){var t=l._stringify(e);"string"==typeof t&&(s+=t+"\n")})),s.length>0&&(s=s.substring(0,s.length-1)),a=Buffer.from?Buffer.from(s):new Buffer(s),c.gzip(a,(function(i,s){var c=s;i?(u.warn(i),c=a,o.headers["Content-Length"]=a.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=s.length.toString()),u.info(e.TAG,o),o[d.disableCollectionRequestOption]=!0;var p=h.makeRequest(l._config,n,o,(function(n){n.setEncoding("utf-8");var i="";n.on("data",(function(e){i+=e})),n.on("end",(function(){if(l._numConsecutiveFailures=0,l._enableDiskRetryMode)if(200===n.statusCode)l._resendTimer||(l._resendTimer=setTimeout((function(){l._resendTimer=null,l._sendFirstFileOnDisk()}),l._resendInterval),l._resendTimer.unref());else if(l._isRetriable(n.statusCode))try{var o=JSON.parse(i),s=[];o.errors.forEach((function(e){l._isRetriable(e.statusCode)&&s.push(t[e.index])})),s.length>0&&l._storeToDisk(s)}catch(e){l._storeToDisk(t)}if(307===n.statusCode||308===n.statusCode)if(l._numConsecutiveRedirects++,l._numConsecutiveRedirects<10){var a=n.headers.location?n.headers.location.toString():null;a&&(l._redirectedHost=a,l.send(t,r))}else"function"==typeof r&&r("Error sending telemetry because of circular redirects.");else l._numConsecutiveRedirects=0,"function"==typeof r&&r(i),u.info(e.TAG,i),"function"==typeof l._onSuccess&&l._onSuccess(i)}))}));p.on("error",(function(n){if(l._numConsecutiveFailures++,!l._enableDiskRetryMode||l._numConsecutiveFailures>0&&l._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var i="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";l._enableDiskRetryMode&&(i="Ingestion endpoint could not be reached "+l._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(e.TAG,i,h.dumpObj(n))}else i="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",u.info(e.TAG,i,h.dumpObj(n));l._onErrorHelper(n),"function"==typeof r&&(n&&r(h.dumpObj(n)),r("Error sending telemetry")),l._enableDiskRetryMode&&l._storeToDisk(t)})),p.write(c),p.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(e))},e.prototype._isRetriable=function(e){return 206===e||408===e||429===e||439===e||500===e||503===e},e.prototype._runICACLS=function(t,r){var n=l.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",(function(e){return r(e)})),n.on("close",(function(e,t){return r(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!l.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var r=l.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(0!==r.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=l.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",(function(e){return n+=e})),r.on("error",(function(e){return t(e,null)})),r.on("close",(function(r,i){return e.ACL_IDENTITY=n&&n.trim(),t(0===r?null:new Error("Getting ACL identity did not succeed (PS returned code "+r+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(l.spawnSync){var t=l.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(i,o){if(i)return e.ACLED_DIRECTORIES[t]=!1,r(i);n._runICACLS(n._getACLArguments(t,o),(function(n){return e.ACLED_DIRECTORIES[t]=!n,r(n)}))}))):r(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var r=this;o.lstat(e,(function(n,i){n&&"ENOENT"===n.code?o.mkdir(e,(function(n){n&&"EEXIST"!==n.code?t(n):r._applyACLRules(e,t)})):!n&&i.isDirectory()?r._applyACLRules(e,t):t(n||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){o.readdir(e,(function(r,n){if(r)return t(r,-1);var i=null,s=0,c=0;if(0!==n.length)for(var l=0;l<n.length;l++)o.stat(a.join(e,n[l]),(function(e,r){c++,e?i=e:r.isFile()&&(s+=r.size),c===n.length&&t(i,i?-1:s)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=o.readdirSync(e),r=0,n=0;n<t.length;n++)r+=o.statSync(a.join(e,t[n])).size;return r},e.prototype._storeToDisk=function(t){var r=this;u.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(n){if(n)return u.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),void r._onErrorHelper(n);r._getShallowDirectorySize(r._tempDir,(function(n,i){if(n||i<0)return u.warn(e.TAG,"Error while checking directory size: "+(n&&n.message)),void r._onErrorHelper(n);if(i>r._maxBytesOnDisk)u.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+i);else{var s=(new Date).getTime()+".ai.json",c=a.join(r._tempDir,s);u.info(e.TAG,"saving data to disk at: "+c),o.writeFile(c,r._stringify(t),{mode:384},(function(e){return r._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){try{u.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk)return void u.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);var n=(new Date).getTime()+".ai.json",i=a.join(this._tempDir,n);u.info(e.TAG,"saving data before crash to disk at: "+i),o.writeFileSync(i,t,{mode:384})}catch(t){u.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var e=this;o.exists(this._tempDir,(function(t){t&&o.readdir(e._tempDir,(function(t,r){if(t)e._onErrorHelper(t);else if((r=r.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0){var n=r[0],i=a.join(e._tempDir,n);o.readFile(i,(function(t,r){t?e._onErrorHelper(t):o.unlink(i,(function(t){if(t)e._onErrorHelper(t);else try{var n=JSON.parse(r.toString());e.send(n)}catch(e){u.warn("Failed to read persisted file",e)}}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){u.warn("Failed to serialize payload",t,e)}},e.prototype._fileCleanupTask=function(){var t=this;o.exists(this._tempDir,(function(r){r&&o.readdir(t._tempDir,(function(r,n){r?t._onErrorHelper(r):(n=n.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0&&n.forEach((function(r){var n=new Date(parseInt(r.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>n){var i=a.join(t._tempDir,r);o.unlink(i,(function(e){e&&t._onErrorHelper(e)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===s.type(),e}();t.exports=p})),Gn=f(((e,t)=>{"use strict";var r=Br(),n=zt(),i=un(),o=function(){function e(){}return e.createEnvelope=function(t,i,o,s,a){var c=null;switch(i){case r.TelemetryType.Trace:c=e.createTraceData(t);break;case r.TelemetryType.Dependency:c=e.createDependencyData(t);break;case r.TelemetryType.Event:c=e.createEventData(t);break;case r.TelemetryType.Exception:c=e.createExceptionData(t);break;case r.TelemetryType.Request:c=e.createRequestData(t);break;case r.TelemetryType.Metric:c=e.createMetricData(t);break;case r.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case r.TelemetryType.PageView:c=e.createPageViewData(t)}if(o&&r.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var l in o)c.baseData.properties[l]||(c.baseData.properties[l]=o[l]);else c.baseData.properties=o;c.baseData.properties=n.validateStringMap(c.baseData.properties)}var u=a&&a.instrumentationKey||"",d=new r.Envelope;return d.data=c,d.iKey=u,d.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),d.tags=this.getTags(s,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,i===r.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new r.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Information:t.severityLevel=e.severity;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new r.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=n.w3cTraceId();var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),i.baseData=t,i},e.createEventData=function(e){var t=new r.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new r.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var i=e.exception.stack,o=new r.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(i),o.hasFullStack=n.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new r.RequestData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=n.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),i.baseData=t,i},e.createMetricData=function(e){var t=new r.MetricData;t.metrics=[];var n=new r.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=r.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),i.baseData=t,i},e.createAvailabilityData=function(e){var t=new r.AvailabilityData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),i.baseData=t,i},e.createPageViewData=function(e){var t=new r.PageViewData;t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),i.baseData=t,i},e.getTags=function(e,t){var r=i.CorrelationContextManager.getCurrentContext(),n={};if(e&&e.tags)for(var o in e.tags)n[o]=e.tags[o];if(t)for(var o in t)n[o]=t[o];return r&&(n[e.keys.operationId]=n[e.keys.operationId]||r.operation.id,n[e.keys.operationName]=n[e.keys.operationName]||r.operation.name,n[e.keys.operationParentId]=n[e.keys.operationParentId]||r.operation.parentId),n},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var r=e.split("\n");t=[];for(var n=0,i=0,o=0;o<=r.length;o++){var a=r[o];if(s.regex.test(a)){var c=new s(r[o],n++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var l=0,u=t.length-1,d=0,h=l,p=u;l<u;){if((d+=t[l].sizeInBytes+t[u].sizeInBytes)>32768){var f=p-h+1;t.splice(h,f);break}h=l,p=u,l++,u--}}return t},e}(),s=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=n.trim(t);var i=t.match(e.regex);i&&i.length>=5&&(this.method=n.trim(i[2])||this.method,this.fileName=n.trim(i[4])||"<no_filename>",this.line=parseInt(i[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();t.exports=o})),Kn=f(((e,t)=>{"use strict";var n=r(7016),i=Fn(),o=wn(),s=Br(),a=qn(),c=Hn(),l=un(),u=Vn(),d=zt(),h=g(),p=Gn(),f=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new i(e);this.config=t,this.context=new o,this.commonProperties={};var r=new u(this.config);this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),r)}return e.prototype.trackAvailability=function(e){this.track(e,s.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,s.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=n.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var r=p.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(r.time=e.time.toISOString()),this._enableAzureProperties&&c.azureRoleEnvironmentTelemetryProcessor(r,this.context);var n=this.runTelemetryProcessors(r,e.contextObjects);n=n&&c.samplingTelemetryProcessor(r,{correlationContext:l.CorrelationContextManager.getCurrentContext()}),c.preAggregatedMetricsTelemetryProcessor(r,this.context),n&&(c.performanceMetricsTelemetryProcessor(r,this.quickPulseClient),this.channel.send(r))}else h.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var r=!0,n=this._telemetryProcessors.length;if(0===n)return r;(t=t||{}).correlationContext=l.CorrelationContextManager.getCurrentContext();for(var i=0;i<n;++i)try{var o=this._telemetryProcessors[i];if(o&&!1===o.apply(null,[e,t])){r=!1;break}}catch(t){r=!0,h.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return r&&(e&&e.tags&&(e.tags=d.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=d.validateStringMap(e.data.baseData.properties))),r},e}();t.exports=f})),zn=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=Kn(),o=On(),s=xn(),a=g(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?o.trackRequestSync(this,e):a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?o.trackRequest(this,e):a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?s.trackRequest(this,e):a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(i);t.exports=c})),Xn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Jn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t,r,n=un(),i=fn(),o=mn(),s=yn(),a=bn(),c=Mn(),l=xn(),u=On(),d=Xt(),h=g(),p=Nn(),f=jn();e.TelemetryClient=zn(),e.Contracts=Br(),e.azureFunctionsTypes=Xn(),(r=t=e.DistributedTracingModes||(e.DistributedTracingModes={}))[r.AI=0]="AI",r[r.AI_AND_W3C=1]="AI_AND_W3C";var m,y,v,_,b,w,S,E,C,T,k,P=!0,R=!1,x=!0,M=!0,O=!0,D=!1,I=!0,A=!0,N=!0,L=!0,F=!1,j=!0,q=void 0,U=void 0,B=!1;function $(){return e.defaultClient?(B=!0,v.enable(P,R),_.enable(x),b.enable(M),w.enable(O),S.enable(D,e.defaultClient.config),E.enable(j,y),C.useAutoCorrelation(L,m),C.enable(I),T.enable(A),e.liveMetricsClient&&F&&e.liveMetricsClient.enable(F)):h.warn("Start cannot be called before setup"),W}e.setup=function(t){return e.defaultClient?h.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(t),v=new i(e.defaultClient),_=new o(e.defaultClient),b=new s(e.defaultClient),w=new a(e.defaultClient),S=new c(e.defaultClient),C=new u(e.defaultClient),T=new l(e.defaultClient),E||(E=new f.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(N,q,U),W},e.start=$,e.getCorrelationContext=function(){return L?n.CorrelationContextManager.getCurrentContext():null},e.startOperation=function(e,t){return n.CorrelationContextManager.startOperation(e,t)},e.wrapWithCorrelationContext=function(e,t){return n.CorrelationContextManager.wrapCallback(e,t)};var W=function(){function r(){}return r.setDistributedTracingMode=function(e){return d.w3cEnabled=e===t.AI_AND_W3C,r},r.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),P=e,R=t,B&&v.enable(e,t),r},r.setAutoCollectExceptions=function(e){return x=e,B&&_.enable(e),r},r.setAutoCollectPerformance=function(e,t){void 0===t&&(t=!0),M=e;var n=f.AutoCollectNativePerformance.parseEnabled(t);return j=n.isEnabled,y=n.disabledMetrics,B&&(b.enable(e),E.enable(n.isEnabled,n.disabledMetrics)),r},r.setAutoCollectPreAggregatedMetrics=function(e){return O=e,B&&w.enable(e),r},r.setAutoCollectHeartbeat=function(t){return D=t,B&&S.enable(t,e.defaultClient.config),r},r.setAutoCollectRequests=function(e){return I=e,B&&C.enable(e),r},r.setAutoCollectDependencies=function(e){return A=e,B&&T.enable(e),r},r.setAutoDependencyCorrelation=function(e,t){return L=e,m=t,B&&C.useAutoCorrelation(e,t),r},r.setUseDiskRetryCaching=function(t,n,i){return N=t,q=n,U=i,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(t,n,i),r},r.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),h.enableDebug=e,h.disableWarnings=!t,r},r.setSendLiveMetrics=function(t){return void 0===t&&(t=!1),e.defaultClient?(!e.liveMetricsClient&&t?(e.liveMetricsClient=new p(e.defaultClient.config,null),k=new s(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(k),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(t),F=t,r):(h.warn("Live metrics client cannot be setup without the default client"),r)},r.start=$,r}();e.Configuration=W,e.dispose=function(){d.w3cEnabled=!0,e.defaultClient=null,B=!1,v&&v.dispose(),_&&_.dispose(),b&&b.dispose(),w&&w.dispose(),S&&S.dispose(),E&&E.dispose(),C&&C.dispose(),T&&T.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),F=!1,e.liveMetricsClient=void 0)}}));((e,t)=>{for(var r in p(e),t)i(e,r,{get:t[r],enumerable:!0})})(t,{default:()=>si});var Yn,Qn,Zn=m(r(857)),ei=m(r(1398)),ti=m(r(1398)),ri=m(r(1398));function ni(){if(ri.env.isTelemetryEnabled)return Yn.ON;let e=ri.workspace.getConfiguration("telemetry"),t=e.get("telemetryLevel"),r=e.get("enableTelemetry");return t||(r?Yn.ON:Yn.OFF)}(Qn=Yn||(Yn={})).ON="on",Qn.ERROR="error",Qn.OFF="off";var ii=class{constructor(e,t,r,n,i){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),void 0!==ti.env.onDidChangeTelemetryEnabled?(this.disposables.push(ti.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(ti.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(ti.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=ni();this.userOptIn=e===Yn.ON,this.errorOptIn=e===Yn.ERROR||e===Yn.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach((r=>{0===e.indexOf(`${r}+`)&&(t=r)})),t}get extension(){return void 0===this._extension&&(this._extension=ti.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return!(!1===this.errorOptIn||this.firstParty&&"other"===this.cleanRemoteName(ti.env.remoteName)&&(void 0===this.extension||this.extension.extensionKind===ti.ExtensionKind.Workspace||ti.env.uiKind===ti.UIKind.Web))}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,ti&&ti.env){switch(e["common.vscodemachineid"]=ti.env.machineId,e["common.vscodesessionid"]=ti.env.sessionId,e["common.vscodeversion"]=ti.version,e["common.isnewappinstall"]=ti.env.isNewAppInstall.toString(),e["common.product"]=ti.env.appHost,ti.env.uiKind){case ti.UIKind.Web:e["common.uikind"]="web";break;case ti.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(ti.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(null==e)return"";let n=[];""!==ti.env.appRoot&&n.push(new RegExp(ti.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=e;if(t){let t=[];for(let i of n)for(;(r=i.exec(e))&&r;)t.push([r.index,i.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(i="";(r=s.exec(e))&&r;)r[0]&&!o.test(r[0])&&t.every((([e,t])=>r.index<e||r.index>=t))&&(i+=e.substring(a,r.index)+"<REDACTED: user-file-path>",a=s.lastIndex);a<e.length&&(i+=e.substr(a))}for(let e of n)i=i.replace(e,"");return i}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t=Object.create(null);for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(n.toLowerCase())?t[r]="<REDACTED: secret>":i.test(n)?t[r]="<REDACTED: email>":t[r]=n}return t}sendTelemetryEvent(e,t,r){if(this.userOptIn&&""!==e){t=h(h({},t),this.getCommonProperties());let n=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendTelemetryErrorEvent(e,t,r,n){if(this.errorOptIn&&""!==e){t=h(h({},t),this.getCommonProperties());let i=this.cloneAndChange(t,((e,t)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(t,this.firstParty):void 0===n||-1!==n.indexOf(e)?"REDACTED":this.anonymizeFilePaths(t,this.firstParty)));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:r})}}sendTelemetryException(e,t,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&e){t=h(h({},t),this.getCommonProperties());let n=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}},oi=class{constructor(e){this._key=e,this._isInstantiated=!1,ni()!==Yn.OFF&&this.instantiateAppender()}logEvent(e,t){!this._appInsightsClient||this._appInsightsClient.trackEvent({name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}logException(e,t){!this._appInsightsClient||this._appInsightsClient.trackException({exception:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}flush(){return this._appInsightsClient&&(this._appInsightsClient.flush(),this._appInsightsClient=void 0),Promise.resolve(void 0)}instantiateAppender(){this._isInstantiated||Promise.resolve().then((()=>m(Jn()))).then((e=>{e.defaultClient?(this._appInsightsClient=new e.TelemetryClient(this._key),this._appInsightsClient.channel.setUseDiskRetryCaching(!0)):(e.setup(this._key).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this._appInsightsClient=e.defaultClient),ei&&ei.env&&(this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.userId]=ei.env.machineId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.sessionId]=ei.env.sessionId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRole]=ei.env.appName,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRoleInstance]=ei.env.appName),this._key&&0===this._key.indexOf("AIF-")&&(this._appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1"),this._isInstantiated=!0}))}},si=class extends ii{constructor(e,t,r,n){let i=new oi(r);r&&0===r.indexOf("AIF-")&&(n=!0),super(e,t,i,{release:Zn.release(),platform:Zn.platform()},n)}}},7437:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=7437,e.exports=t},6967:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6967,e.exports=t},3281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=void 0;const n=r(6177);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return n.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return n.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return n.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return n.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return n.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return n.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return n.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return n.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return n.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return n.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return n.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return n.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return n.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return n.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return n.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return n.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return n.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return n.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return n.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return n.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return n.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return n.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return n.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return n.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return n.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return n.ParameterStructures}});const i=r(3352);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return i.Touch}});const o=r(4019);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=r(2676);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=r(9850);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=r(4996);Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return c.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return c.SharedArrayReceiverStrategy}});const l=r(9085);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return l.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return l.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return l.ReadableStreamMessageReader}});const u=r(5574);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return u.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return u.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return u.WriteableStreamMessageWriter}});const d=r(9244);Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return d.AbstractMessageBuffer}});const h=r(577);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return h.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return h.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return h.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return h.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return h.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return h.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return h.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return h.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return h.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return h.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return h.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return h.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return h.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return h.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return h.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return h.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return h.MessageStrategy}});const p=r(9590);t.RAL=p.default},9850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const n=r(9590),i=r(966),o=r(2676);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const r=t;return r&&(r===e.None||r===e.Cancelled||i.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}}(s||(t.CancellationToken=s={}));const a=Object.freeze((function(e,t){const r=(0,n.default)().timer.setTimeout(e.bind(t),0);return{dispose(){r.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const n=r(9590),i=r(966),o=r(6177),s=r(3352),a=r(2676),c=r(9850);var l,u,d,h,p,f,m,g,y,v,_,b,w,S,E,C,T,k,P;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(l||(l={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(u||(t.ProgressToken=u={})),function(e){e.type=new o.NotificationType("$/progress")}(d||(d={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(h||(h={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(p||(t.Trace=p={})),function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"}(f||(t.TraceValues=f={})),function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(p||(t.Trace=p={})),function(e){e.Text="text",e.JSON="json"}(m||(t.TraceFormat=m={})),function(e){e.fromString=function(t){return i.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(m||(t.TraceFormat=m={})),function(e){e.type=new o.NotificationType("$/setTrace")}(g||(t.SetTraceNotification=g={})),function(e){e.type=new o.NotificationType("$/logTrace")}(y||(t.LogTraceNotification=y={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(v||(t.ConnectionErrors=v={}));class R extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,R.prototype)}}t.ConnectionError=R,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(_||(t.ConnectionStrategy=_={})),function(e){e.is=function(e){const t=e;return t&&(void 0===t.kind||"id"===t.kind)&&i.func(t.createCancellationTokenSource)&&(void 0===t.dispose||i.func(t.dispose))}}(b||(t.IdCancellationReceiverStrategy=b={})),function(e){e.is=function(e){const t=e;return t&&"request"===t.kind&&i.func(t.createCancellationTokenSource)&&(void 0===t.dispose||i.func(t.dispose))}}(w||(t.RequestCancellationReceiverStrategy=w={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){return b.is(e)||w.is(e)}}(S||(t.CancellationReceiverStrategy=S={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(l.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(E||(t.CancellationSenderStrategy=E={})),function(e){e.Message=Object.freeze({receiver:S.Message,sender:E.Message}),e.is=function(e){const t=e;return t&&S.is(t.receiver)&&E.is(t.sender)}}(C||(t.CancellationStrategy=C={})),function(e){e.is=function(e){const t=e;return t&&i.func(t.handleMessage)}}(T||(t.MessageStrategy=T={})),function(e){e.is=function(e){const t=e;return t&&(C.is(t.cancellationStrategy)||_.is(t.connectionStrategy)||T.is(t.messageStrategy))}}(k||(t.ConnectionOptions=k={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(P||(P={})),t.createMessageConnection=function(e,r,f,_){const w=void 0!==f?f:t.NullLogger;let S=0,E=0,k=0;const x="2.0";let M;const O=new Map;let D;const I=new Map,A=new Map;let N,L,F=new s.LinkedMap,j=new Map,q=new Set,U=new Map,B=p.Off,$=m.Text,W=P.New;const H=new a.Emitter,V=new a.Emitter,G=new a.Emitter,K=new a.Emitter,z=new a.Emitter,X=_&&_.cancellationStrategy?_.cancellationStrategy:C.Message;function J(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function Y(e){}function Q(){return W===P.Listening}function Z(){return W===P.Closed}function ee(){return W===P.Disposed}function te(){W!==P.New&&W!==P.Listening||(W=P.Closed,V.fire(void 0))}function re(){N||0===F.size||(N=(0,n.default)().timer.setImmediate((()=>{N=void 0,function(){if(0===F.size)return;const e=F.shift();try{const t=_?.messageStrategy;T.is(t)?t.handleMessage(e,ne):ne(e)}finally{re()}}()})))}function ne(e){o.Message.isRequest(e)?function(e){if(ee())return;function t(t,n,i){const s={jsonrpc:x,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,se(s,n,i),r.write(s).catch((()=>w.error("Sending response failed.")))}function n(t,n,i){const o={jsonrpc:x,id:e.id,error:t.toJson()};se(o,n,i),r.write(o).catch((()=>w.error("Sending response failed.")))}!function(e){if(B!==p.Off&&L)if($===m.Text){let t;B!==p.Verbose&&B!==p.Compact||!e.params||(t=`Params: ${oe(e.params)}\n\n`),L.log(`Received request '${e.method} - (${e.id})'.`,t)}else ce("receive-request",e)}(e);const s=O.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const l=Date.now();if(c||M){const s=e.id??String(Date.now()),u=b.is(X.receiver)?X.receiver.createCancellationTokenSource(s):X.receiver.createCancellationTokenSource(e);null!==e.id&&q.has(e.id)&&u.cancel(),null!==e.id&&U.set(s,u);try{let d;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void n(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,l);d=c(u.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void n(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);d=c(...e.params,u.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void n(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);d=c(e.params,u.token)}else M&&(d=M(e.method,e.params,u.token));const h=d;d?h.then?h.then((r=>{U.delete(s),t(r,e.method,l)}),(t=>{U.delete(s),t instanceof o.ResponseError?n(t,e.method,l):t&&i.string(t.message)?n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(U.delete(s),t(d,e.method,l)):(U.delete(s),function(t,n,i){void 0===t&&(t=null);const o={jsonrpc:x,id:e.id,result:t};se(o,n,i),r.write(o).catch((()=>w.error("Sending response failed.")))}(d,e.method,l))}catch(r){U.delete(s),r instanceof o.ResponseError?t(r,e.method,l):r&&i.string(r.message)?n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${r.message}`),e.method,l):n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else n(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.Message.isNotification(e)?function(e){if(ee())return;let t,r;if(e.method===l.type.method){const t=e.params.id;return q.delete(t),void ae(e)}{const n=I.get(e.method);n&&(r=n.handler,t=n.type)}if(r||D)try{if(ae(e),r)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),r();else if(Array.isArray(e.params)){const n=e.params;e.method===d.type.method&&2===n.length&&u.is(n[0])?r({token:n[0],value:n[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${n.length} arguments`)),r(...n))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&w.error(`Notification ${e.method} defines parameters by position but received parameters by name`),r(e.params);else D&&D(e.method,e.params)}catch(t){t.message?w.error(`Notification handler '${e.method}' failed with message: ${t.message}`):w.error(`Notification handler '${e.method}' failed unexpectedly.`)}else G.fire(e)}(e):o.Message.isResponse(e)?function(e){if(!ee())if(null===e.id)e.error?w.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):w.error("Received response message without id. No further error information provided.");else{const t=e.id,r=j.get(t);if(function(e,t){if(B!==p.Off&&L)if($===m.Text){let r;if(B!==p.Verbose&&B!==p.Compact||(e.error&&e.error.data?r=`Error data: ${oe(e.error.data)}\n\n`:e.result?r=`Result: ${oe(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),t){const n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";L.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,r)}else L.log(`Received response ${e.id} without active response promise.`,r)}else ce("receive-response",e)}(e,r),void 0!==r){j.delete(t);try{if(e.error){const t=e.error;r.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?w.error(`Response handler '${r.method}' failed with message: ${e.message}`):w.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void w.error("Received empty message.");w.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=t.id,r=j.get(e);r&&r.reject(new Error("The received response has neither a result nor an error property."))}}(e)}e.onClose(te),e.onError((function(e){H.fire([e,void 0,void 0])})),r.onClose(te),r.onError((function(e){H.fire(e)}));const ie=e=>{try{if(o.Message.isNotification(e)&&e.method===l.type.method){const t=e.params.id,n=J(t),i=F.get(n);if(o.Message.isRequest(i)){const o=_?.connectionStrategy,s=o&&o.cancelUndispatched?o.cancelUndispatched(i,Y):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return F.delete(n),U.delete(t),s.id=i.id,se(s,e.method,Date.now()),void r.write(s).catch((()=>w.error("Sending response for canceled message failed.")))}const s=U.get(t);if(void 0!==s)return s.cancel(),void ae(e);q.add(t)}!function(e,t){var r;o.Message.isRequest(t)?e.set(J(t.id),t):o.Message.isResponse(t)?e.set(null===(r=t.id)?"res-unknown-"+(++k).toString():"res-"+r.toString(),t):e.set("not-"+(++E).toString(),t)}(F,e)}finally{re()}};function oe(e){if(null!=e)switch(B){case p.Verbose:return JSON.stringify(e,null,4);case p.Compact:return JSON.stringify(e);default:return}}function se(e,t,r){if(B!==p.Off&&L)if($===m.Text){let n;B!==p.Verbose&&B!==p.Compact||(e.error&&e.error.data?n=`Error data: ${oe(e.error.data)}\n\n`:e.result?n=`Result: ${oe(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),L.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-r}ms`,n)}else ce("send-response",e)}function ae(e){if(B!==p.Off&&L&&e.method!==y.type.method)if($===m.Text){let t;B!==p.Verbose&&B!==p.Compact||(t=e.params?`Params: ${oe(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Received notification '${e.method}'.`,t)}else ce("receive-notification",e)}function ce(e,t){if(!L||B===p.Off)return;const r={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};L.log(r)}function le(){if(Z())throw new R(v.Closed,"Connection is closed.");if(ee())throw new R(v.Disposed,"Connection is disposed.")}function ue(e){return void 0===e?null:e}function de(e){return null===e?void 0:e}function he(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function pe(e,t){switch(e){case o.ParameterStructures.auto:return he(t)?de(t):[ue(t)];case o.ParameterStructures.byName:if(!he(t))throw new Error("Received parameters by name but param is not an object literal.");return de(t);case o.ParameterStructures.byPosition:return[ue(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function fe(e,t){let r;const n=e.numberOfParams;switch(n){case 0:r=void 0;break;case 1:r=pe(e.parameterStructures,t[0]);break;default:r=[];for(let e=0;e<t.length&&e<n;e++)r.push(ue(t[e]));if(t.length<n)for(let e=t.length;e<n;e++)r.push(null)}return r}const me={sendNotification:(e,...t)=>{let n,s;if(le(),i.string(e)){n=e;const r=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(r)&&(i=1,a=r);let c=t.length;const l=c-i;switch(l){case 0:s=void 0;break;case 1:s=pe(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map((e=>ue(e)))}}else{const r=t;n=e.method,s=fe(e,r)}const a={jsonrpc:x,method:n,params:s};return function(e){if(B!==p.Off&&L)if($===m.Text){let t;B!==p.Verbose&&B!==p.Compact||(t=e.params?`Params: ${oe(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Sending notification '${e.method}'.`,t)}else ce("send-notification",e)}(a),r.write(a).catch((e=>{throw w.error("Sending notification failed."),e}))},onNotification:(e,t)=>{let r;return le(),i.func(e)?D=e:t&&(i.string(e)?(r=e,I.set(e,{type:void 0,handler:t})):(r=e.method,I.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==r?I.delete(r):D=void 0}}},onProgress:(e,t,r)=>{if(A.has(t))throw new Error(`Progress handler for token ${t} already registered`);return A.set(t,r),{dispose:()=>{A.delete(t)}}},sendProgress:(e,t,r)=>me.sendNotification(d.type,{token:t,value:r}),onUnhandledProgress:K.event,sendRequest:(e,...t)=>{let n,s,a;if(le(),function(){if(!Q())throw new Error("Call listen() first.")}(),i.string(e)){n=e;const r=t[0],i=t[t.length-1];let l=0,u=o.ParameterStructures.auto;o.ParameterStructures.is(r)&&(l=1,u=r);let d=t.length;c.CancellationToken.is(i)&&(d-=1,a=i);const h=d-l;switch(h){case 0:s=void 0;break;case 1:s=pe(u,t[l]);break;default:if(u===o.ParameterStructures.byName)throw new Error(`Received ${h} parameters for 'by Name' request parameter structure.`);s=t.slice(l,d).map((e=>ue(e)))}}else{const r=t;n=e.method,s=fe(e,r);const i=e.numberOfParams;a=c.CancellationToken.is(r[i])?r[i]:void 0}const l=S++;let u;a&&(u=a.onCancellationRequested((()=>{const e=X.sender.sendCancellation(me,l);return void 0===e?(w.log(`Received no promise from cancellation strategy when cancelling id ${l}`),Promise.resolve()):e.catch((()=>{w.log(`Sending cancellation messages for id ${l} failed`)}))})));const d={jsonrpc:x,id:l,method:n,params:s};return function(e){if(B!==p.Off&&L)if($===m.Text){let t;B!==p.Verbose&&B!==p.Compact||!e.params||(t=`Params: ${oe(e.params)}\n\n`),L.log(`Sending request '${e.method} - (${e.id})'.`,t)}else ce("send-request",e)}(d),"function"==typeof X.sender.enableCancellation&&X.sender.enableCancellation(d),new Promise((async(e,t)=>{const i={method:n,timerStart:Date.now(),resolve:t=>{e(t),X.sender.cleanup(l),u?.dispose()},reject:e=>{t(e),X.sender.cleanup(l),u?.dispose()}};try{await r.write(d),j.set(l,i)}catch(e){throw w.error("Sending request failed."),i.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),e}}))},onRequest:(e,t)=>{le();let r=null;return h.is(e)?(r=void 0,M=e):i.string(e)?(r=null,void 0!==t&&(r=e,O.set(e,{handler:t,type:void 0}))):void 0!==t&&(r=e.method,O.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==r&&(void 0!==r?O.delete(r):M=void 0)}}},hasPendingResponse:()=>j.size>0,trace:async(e,t,r)=>{let n=!1,o=m.Text;void 0!==r&&(i.boolean(r)?n=r:(n=r.sendNotification||!1,o=r.traceFormat||m.Text)),B=e,$=o,L=B===p.Off?void 0:t,!n||Z()||ee()||await me.sendNotification(g.type,{value:p.toString(e)})},onError:H.event,onClose:V.event,onUnhandledNotification:G.event,onDispose:z.event,end:()=>{r.end()},dispose:()=>{if(ee())return;W=P.Disposed,z.fire(void 0);const t=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of j.values())e.reject(t);j=new Map,U=new Map,q=new Set,F=new s.LinkedMap,i.func(r.dispose)&&r.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{le(),function(){if(Q())throw new R(v.AlreadyListening,"Connection is already listening")}(),W=P.Listening,e.listen(ie)},inspect:()=>{(0,n.default)().console.log("inspect")}};return me.onNotification(y.type,(e=>{if(B===p.Off||!L)return;const t=B===p.Verbose||B===p.Compact;L.log(e.message,t?e.verbose:void 0)})),me.onNotification(d.type,(e=>{const t=A.get(e.token);t?t(e.value):K.fire(e)})),me}},4019:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,function(e){e.create=function(e){return{dispose:e}}}(r||(t.Disposable=r={}))},2676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const n=r(9590);var i;!function(e){const t={dispose(){}};e.None=function(){return t}}(i||(t.Event=i={}));class o{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{t.push(r[o].apply(i[o],e))}catch(e){(0,n.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class s{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new o),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const n={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),n.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(n),n}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=s,s._noop=function(){}},966:(e,t)=>{"use strict";function r(e){return"string"==typeof e||e instanceof String}function n(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=n,t.stringArray=function(e){return n(e)&&e.every((e=>r(e)))}},3352:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(n||(t.Touch=n={}));class i{constructor(){this[r]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=n.None){const r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const r=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}[(r=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,r)=>{e.push([r,t])})),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}}t.LinkedMap=i,t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},9244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(0===this._chunks.length)return;let t=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){const e=this._chunks[r];for(n=0;n<e.length;){switch(e[n]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,n++;break e;default:t=0}break;default:t=0}n++}i+=e.byteLength,r++}if(4!==t)return;const o=this._read(i+n),s=new Map,a=this.toString(o,"ascii").split("\r\n");if(a.length<2)return s;for(let t=0;t<a.length-2;t++){const r=a[t],n=r.indexOf(":");if(-1===n)throw new Error(`Message header must separate key and value using ':'\n${r}`);const i=r.substr(0,n),o=r.substr(n+1).trim();s.set(e?i.toLowerCase():i,o)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],r=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,r}const t=this.allocNative(e);let r=0;for(;e>0;){const n=this._chunks[0];if(n.byteLength>e){const i=n.slice(0,e);t.set(i,r),r+=e,this._chunks[0]=n.slice(e),this._totalLength-=e,e-=e}else t.set(n,r),r+=n.byteLength,this._chunks.shift(),this._totalLength-=n.byteLength,e-=n.byteLength}return t}}},9085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const n=r(9590),i=r(966),o=r(2676),s=r(4323);var a,c;!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(a||(t.MessageReader=a={}));class l{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l,function(e){e.fromOptions=function(e){let t,r;const i=new Map;let o;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(r=e.contentDecoder,i.set(r.name,r)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=(0,n.default)().applicationJson.decoder,s.set(o.name,o)),{charset:t,contentDecoder:r,contentDecoders:i,contentTypeDecoder:o,contentTypeDecoders:s}}}(c||(c={})),t.ReadableStreamMessageReader=class extends l{constructor(e,t){super(),this.readable=e,this.options=c.fromOptions(t),this.buffer=(0,n.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new s.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){try{for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders(!0);if(!e)return;const t=e.get("content-length");if(!t)return void this.fireError(new Error(`Header must provide a Content-Length property.\n${JSON.stringify(Object.fromEntries(e))}`));const r=parseInt(t);if(isNaN(r))return void this.fireError(new Error(`Content-Length value must be a number. Got ${t}`));this.nextMessageLength=r}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock((async()=>{const t=void 0!==this.options.contentDecoder?await this.options.contentDecoder.decode(e):e,r=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(r)})).catch((e=>{this.fireError(e)}))}}catch(e){this.fireError(e)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,n.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},5574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const n=r(9590),i=r(966),o=r(4323),s=r(2676);var a,c;!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(a||(t.MessageWriter=a={}));class l{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=l,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,n.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,n.default)().applicationJson.encoder}}}(c||(c={})),t.WriteableStreamMessageWriter=class extends l{constructor(e,t){super(),this.writable=e,this.options=c.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const r=[];return r.push("Content-Length: ",t.byteLength.toString(),"\r\n"),r.push("\r\n"),this.doWrite(e,r,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},6177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const n=r(966);var i,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(i||(t.ErrorCodes=i={}));class s extends Error{constructor(e,t,r){super(t),this.code=n.number(e)?e:i.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c,t.RequestType0=class extends c{constructor(e){super(e,0)}},t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends c{constructor(e){super(e,2)}},t.RequestType3=class extends c{constructor(e){super(e,3)}},t.RequestType4=class extends c{constructor(e){super(e,4)}},t.RequestType5=class extends c{constructor(e){super(e,5)}},t.RequestType6=class extends c{constructor(e){super(e,6)}},t.RequestType7=class extends c{constructor(e){super(e,7)}},t.RequestType8=class extends c{constructor(e){super(e,8)}},t.RequestType9=class extends c{constructor(e){super(e,9)}},t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends c{constructor(e){super(e,0)}},t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends c{constructor(e){super(e,2)}},t.NotificationType3=class extends c{constructor(e){super(e,3)}},t.NotificationType4=class extends c{constructor(e){super(e,4)}},t.NotificationType5=class extends c{constructor(e){super(e,5)}},t.NotificationType6=class extends c{constructor(e){super(e,6)}},t.NotificationType7=class extends c{constructor(e){super(e,7)}},t.NotificationType8=class extends c{constructor(e){super(e,8)}},t.NotificationType9=class extends c{constructor(e){super(e,9)}},function(e){e.isRequest=function(e){const t=e;return t&&n.string(t.method)&&(n.string(t.id)||n.number(t.id))},e.isNotification=function(e){const t=e;return t&&n.string(t.method)&&void 0===e.id},e.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(n.string(t.id)||n.number(t.id)||null===t.id)}}(o||(t.Message=o={}))},9590:(e,t)=>{"use strict";let r;function n(){if(void 0===r)throw new Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");r=e}}(n||(n={})),t.default=n},4323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const n=r(9590);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,n.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},4996:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=void 0;const n=r(9850);var i;!function(e){e.Continue=0,e.Cancelled=1}(i||(i={})),t.SharedArraySenderStrategy=class{constructor(){this.buffers=new Map}enableCancellation(e){if(null===e.id)return;const t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=i.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){const r=this.buffers.get(t);if(void 0===r)return;const n=new Int32Array(r,0,1);Atomics.store(n,0,i.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};class o{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===i.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class s{constructor(e){this.token=new o(e)}cancel(){}dispose(){}}t.SharedArrayReceiverStrategy=class{constructor(){this.kind="request"}createCancellationTokenSource(e){const t=e.$cancellationData;return void 0===t?new n.CancellationTokenSource:new s(t)}}},7123:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.PortMessageWriter=t.PortMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const o=r(9571);o.default.install();const s=r(6928),a=r(857),c=r(6982),l=r(9278),u=r(3281);i(r(3281),t);class d extends u.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){return this.process.on("message",e),u.Disposable.create((()=>this.process.off("message",e)))}}t.IPCMessageReader=d;class h extends u.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;const t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,(t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0})),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=h;class p extends u.AbstractMessageReader{constructor(e){super(),this.onData=new u.Emitter,e.on("close",(()=>this.fireClose)),e.on("error",(e=>this.fireError(e))),e.on("message",(e=>{this.onData.fire(e)}))}listen(e){return this.onData.event(e)}}t.PortMessageReader=p;class f extends u.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",(()=>this.fireClose())),e.on("error",(e=>this.fireError(e)))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.PortMessageWriter=f;class m extends u.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,o.default)().stream.asReadableStream(e),t)}}t.SocketMessageReader=m;class g extends u.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=g;class y extends u.ReadableStreamMessageReader{constructor(e,t){super((0,o.default)().stream.asReadableStream(e),t)}}t.StreamMessageReader=y;class v extends u.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t)}}t.StreamMessageWriter=v;const _=process.env.XDG_RUNTIME_DIR,b=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){const e=(0,c.randomBytes)(21).toString("hex");if("win32"===process.platform)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=_?s.join(_,`vscode-ipc-${e}.sock`):s.join(a.tmpdir(),`vscode-${e}.sock`);const r=b.get(process.platform);return void 0!==r&&t.length>r&&(0,o.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t},t.createClientPipeTransport=function(e,t="utf-8"){let r;const n=new Promise(((e,t)=>{r=e}));return new Promise(((i,o)=>{let s=(0,l.createServer)((e=>{s.close(),r([new m(e,t),new g(e,t)])}));s.on("error",o),s.listen(e,(()=>{s.removeListener("error",o),i({onConnected:()=>n})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const r=(0,l.createConnection)(e);return[new m(r,t),new g(r,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let r;const n=new Promise(((e,t)=>{r=e}));return new Promise(((i,o)=>{const s=(0,l.createServer)((e=>{s.close(),r([new m(e,t),new g(e,t)])}));s.on("error",o),s.listen(e,"127.0.0.1",(()=>{s.removeListener("error",o),i({onConnected:()=>n})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const r=(0,l.createConnection)(e,"127.0.0.1");return[new m(r,t),new g(r,t)]},t.createMessageConnection=function(e,t,r,n){r||(r=u.NullLogger);const i=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new y(e):e,o=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new v(t):t;return u.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,u.createMessageConnection)(i,o,r,n)}},9571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9023),i=r(3281);class o extends i.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return o.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new n.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}o.emptyBuffer=Buffer.allocUnsafe(0);class s{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),i.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),i.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),i.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),i.Disposable.create((()=>this.stream.off("data",e)))}}class a{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),i.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),i.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),i.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((r,n)=>{const i=e=>{null==e?r():n(e)};"string"==typeof e?this.stream.write(e,t,i):this.stream.write(e,i)}))}end(){this.stream.end()}}const c=Object.freeze({messageBuffer:Object.freeze({create:e=>new o(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new n.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new s(e),asWritableStream:e=>new a(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){const n=setTimeout(e,t,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(e,...t){const r=setImmediate(e,...t);return{dispose:()=>clearImmediate(r)}},setInterval(e,t,...r){const n=setInterval(e,t,...r);return{dispose:()=>clearInterval(n)}}})});function l(){return c}!function(e){e.install=function(){i.RAL.install(c)}}(l||(l={})),t.default=l},2067:(e,t,r)=>{"use strict";e.exports=r(7123)},6353:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticPullMode=t.vsdiag=void 0,i(r(7354),t),i(r(4294),t);var o=r(9214);Object.defineProperty(t,"vsdiag",{enumerable:!0,get:function(){return o.vsdiag}}),Object.defineProperty(t,"DiagnosticPullMode",{enumerable:!0,get:function(){return o.DiagnosticPullMode}}),i(r(9538),t)},490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,r){const n=this.client,o=this.middleware,s=(e,t,r)=>{const o=n.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return n.sendRequest(i.CallHierarchyPrepareRequest.type,o,r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyItems(e,r)),(e=>n.handleFailedRequest(i.CallHierarchyPrepareRequest.type,r,e,null)))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){const r=this.client,n=this.middleware,o=(e,t)=>{const n={item:r.code2ProtocolConverter.asCallHierarchyItem(e)};return r.sendRequest(i.CallHierarchyIncomingCallsRequest.type,n,t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(e,t)),(e=>r.handleFailedRequest(i.CallHierarchyIncomingCallsRequest.type,t,e,null)))};return n.provideCallHierarchyIncomingCalls?n.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){const r=this.client,n=this.middleware,o=(e,t)=>{const n={item:r.code2ProtocolConverter.asCallHierarchyItem(e)};return r.sendRequest(i.CallHierarchyOutgoingCallsRequest.type,n,t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(e,t)),(e=>r.handleFailedRequest(i.CallHierarchyOutgoingCallsRequest.type,t,e,null)))};return n.provideCallHierarchyOutgoingCalls?n.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}}class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){const t=e;(0,o.ensure)((0,o.ensure)(t,"textDocument"),"callHierarchy").dynamicRegistration=!0}initialize(e,t){const[r,n]=this.getRegistration(t,e.callHierarchyProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=this._client,r=new s(t);return[n.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}}t.CallHierarchyFeature=a},9538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.BaseLanguageClient=t.MessageTransports=t.SuspendMode=t.State=t.CloseAction=t.ErrorAction=t.RevealOutputChannelOn=void 0;const n=r(1398),i=r(7354),o=r(1798),s=r(7605),a=r(8319),c=r(483),l=r(9032),u=r(9403),d=r(4294),h=r(9214),p=r(1872),f=r(5199),m=r(1596),g=r(6535),y=r(1507),v=r(600),_=r(1400),b=r(9014),w=r(9228),S=r(8312),E=r(420),C=r(8430),T=r(8140),k=r(7298),P=r(875),R=r(7656),x=r(9073),M=r(9084),O=r(3515),D=r(191),I=r(5432),A=r(6804),N=r(3963),L=r(7061),F=r(6258),j=r(9870),q=r(490),U=r(7691),B=r(2485),$=r(4913),W=r(4622),H=r(3131),V=r(2767),G=r(3370);var K,z,X,J,Y,Q,Z,ee,te;!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(K||(t.RevealOutputChannelOn=K={})),function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(z||(t.ErrorAction=z={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(X||(t.CloseAction=X={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(J||(t.State=J={})),function(e){e.off="off",e.on="on"}(Y||(t.SuspendMode=Y={})),function(e){e.sanitizeIsTrusted=function(e){return null!=e&&!!("boolean"==typeof e||"object"==typeof e&&null!==e&&a.stringArray(e.enabledCommands))&&e}}(Q||(Q={}));class re{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?{action:z.Continue}:{action:z.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:X.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?{action:X.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:X.Restart})}}!function(e){e.Initial="initial",e.Starting="starting",e.StartFailed="startFailed",e.Running="running",e.Stopping="stopping",e.Stopped="stopped"}(Z||(Z={})),function(e){e.is=function(e){return e&&i.MessageReader.is(e.reader)&&i.MessageWriter.is(e.writer)}}(ee||(t.MessageTransports=ee={}));class ne{constructor(e,t,r){this._traceFormat=i.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new c.Semaphore(1),this._id=e,this._name=t;const n={isTrusted:!1,supportHtml:!1};void 0!==(r=r||{}).markdown&&(n.isTrusted=Q.sanitizeIsTrusted(r.markdown.isTrusted),n.supportHtml=!0===r.markdown.supportHtml),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??K.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:n,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Z.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new c.Semaphore(1),this._pendingChangeDelayer=new c.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new c.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new i.Emitter,this._stateChangeEmitter=new i.Emitter,this._trace=i.Trace.Off,this._tracer={log:(e,t)=>{a.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=o.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=s.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=n.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){switch(this.$state){case Z.Starting:return J.Starting;case Z.Running:return J.Running;default:return J.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new i.ResponseError(i.ErrorCodes.ConnectionInactive,"Client is not running"));const r=await this.$start();this._didChangeTextDocumentFeature.syncKind===i.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r);const n=this._clientOptions.middleware?.sendRequest;if(void 0!==n){let o,s;return 1===t.length?i.CancellationToken.is(t[0])?s=t[0]:o=t[0]:2===t.length&&(o=t[0],s=t[1]),n(e,o,s,((e,t,n)=>{const i=[];return void 0!==t&&i.push(t),void 0!==n&&i.push(n),r.sendRequest(e,...i)}))}return r.sendRequest(e,...t)}onRequest(e,t){const r="string"==typeof e?e:e.method;this._requestHandlers.set(r,t);const n=this.activeConnection();let i;return void 0!==n?(this._requestDisposables.set(r,n.onRequest(e,t)),i={dispose:()=>{const e=this._requestDisposables.get(r);void 0!==e&&(e.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,t),i={dispose:()=>{this._pendingRequestHandlers.delete(r);const e=this._requestDisposables.get(r);void 0!==e&&(e.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),i.dispose()}}}async sendNotification(e,t){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new i.ResponseError(i.ErrorCodes.ConnectionInactive,"Client is not running"));const r=this._didChangeTextDocumentFeature.syncKind===i.TextDocumentSyncKind.Full;let n;r&&"string"!=typeof e&&e.method===i.DidOpenTextDocumentNotification.method&&(n=t?.textDocument.uri,this._pendingOpenNotifications.add(n));const o=await this.$start();r&&await this.sendPendingFullTextDocumentChanges(o),void 0!==n&&this._pendingOpenNotifications.delete(n);const s=this._clientOptions.middleware?.sendNotification;return s?s(e,o.sendNotification.bind(o),t):o.sendNotification(e,t)}onNotification(e,t){const r="string"==typeof e?e:e.method;this._notificationHandlers.set(r,t);const n=this.activeConnection();let i;return void 0!==n?(this._notificationDisposables.set(r,n.onNotification(e,t)),i={dispose:()=>{const e=this._notificationDisposables.get(r);void 0!==e&&(e.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,t),i={dispose:()=>{this._pendingNotificationHandlers.delete(r);const e=this._notificationDisposables.get(r);void 0!==e&&(e.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),i.dispose()}}}async sendProgress(e,t,r){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new i.ResponseError(i.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,r)}catch(e){throw this.error(`Sending progress for token ${t} failed.`,e),e}}onProgress(e,t,r){this._progressHandlers.set(t,{type:e,handler:r});const n=this.activeConnection();let o;const s=this._clientOptions.middleware?.handleWorkDoneProgress,a=i.WorkDoneProgress.is(e)&&void 0!==s?e=>{s(t,e,(()=>r(e)))}:r;return void 0!==n?(this._progressDisposables.set(t,n.onProgress(e,t,a)),o={dispose:()=>{const e=this._progressDisposables.get(t);void 0!==e&&(e.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:r}),o={dispose:()=>{this._pendingProgressHandlers.delete(t);const e=this._progressDisposables.get(t);void 0!==e&&(e.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),o.dispose()}}}createDefaultErrorHandler(e){if(void 0!==e&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new re(this,e??4)}async setTrace(e){this._trace=e;const t=this.activeConnection();void 0!==t&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof i.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?a.string(e.stack)?e.stack:e.message:a.string(e)?e:e.toString()}debug(e,t,r=!0){this.logOutputMessage(i.MessageType.Debug,K.Debug,"Debug",e,t,r)}info(e,t,r=!0){this.logOutputMessage(i.MessageType.Info,K.Info,"Info",e,t,r)}warn(e,t,r=!0){this.logOutputMessage(i.MessageType.Warning,K.Warn,"Warn",e,t,r)}error(e,t,r=!0){this.logOutputMessage(i.MessageType.Error,K.Error,"Error",e,t,r)}logOutputMessage(e,t,r,n,i,o){this.outputChannel.appendLine(`[${r.padEnd(5)} - ${(new Date).toLocaleTimeString()}] ${n}`),null!=i&&this.outputChannel.appendLine(this.data2String(i)),("force"===o||o&&this._clientOptions.revealOutputChannelOn<=t)&&this.showNotificationMessage(e,n)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===i.MessageType.Error?n.window.showErrorMessage:e===i.MessageType.Warning?n.window.showWarningMessage:n.window.showInformationMessage)(t,"Go to output").then((e=>{void 0!==e&&this.outputChannel.show(!0)}))}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Z.Initial||this.$state===Z.Stopping||this.$state===Z.Stopped}needsStop(){return this.$state===Z.Starting||this.$state===Z.Running}activeConnection(){return this.$state===Z.Running&&void 0!==this._connection?this._connection:void 0}isRunning(){return this.$state===Z.Running}async start(){if("disposing"===this._disposed||"disposed"===this._disposed)throw new Error("Client got disposed and can't be restarted.");if(this.$state===Z.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(void 0!==this._onStart)return this._onStart;const[e,t,r]=this.createOnStartPromise();this._onStart=e,void 0===this._diagnostics&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?n.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):n.languages.createDiagnosticCollection());for(const[e,t]of this._notificationHandlers)this._pendingNotificationHandlers.has(e)||this._pendingNotificationHandlers.set(e,t);for(const[e,t]of this._requestHandlers)this._pendingRequestHandlers.has(e)||this._pendingRequestHandlers.set(e,t);for(const[e,t]of this._progressHandlers)this._pendingProgressHandlers.has(e)||this._pendingProgressHandlers.set(e,t);this.$state=Z.Starting;try{const e=await this.createConnection();e.onNotification(i.LogMessageNotification.type,(e=>{switch(e.type){case i.MessageType.Error:this.error(e.message,void 0,!1);break;case i.MessageType.Warning:this.warn(e.message,void 0,!1);break;case i.MessageType.Info:this.info(e.message,void 0,!1);break;case i.MessageType.Debug:this.debug(e.message,void 0,!1);break;default:this.outputChannel.appendLine(e.message)}})),e.onNotification(i.ShowMessageNotification.type,(e=>{switch(e.type){case i.MessageType.Error:n.window.showErrorMessage(e.message);break;case i.MessageType.Warning:n.window.showWarningMessage(e.message);break;case i.MessageType.Info:default:n.window.showInformationMessage(e.message)}})),e.onRequest(i.ShowMessageRequest.type,(e=>{let t;switch(e.type){case i.MessageType.Error:t=n.window.showErrorMessage;break;case i.MessageType.Warning:t=n.window.showWarningMessage;break;case i.MessageType.Info:default:t=n.window.showInformationMessage}let r=e.actions||[];return t(e.message,...r)})),e.onNotification(i.TelemetryEventNotification.type,(e=>{this._telemetryEmitter.fire(e)})),e.onRequest(i.ShowDocumentRequest.type,(async e=>{const t=async e=>{const t=this.protocol2CodeConverter.asUri(e.uri);try{if(!0===e.external)return{success:await n.env.openExternal(t)};{const r={};return void 0!==e.selection&&(r.selection=this.protocol2CodeConverter.asRange(e.selection)),void 0===e.takeFocus||!1===e.takeFocus?r.preserveFocus=!0:!0===e.takeFocus&&(r.preserveFocus=!1),await n.window.showTextDocument(t,r),{success:!0}}}catch(e){return{success:!1}}},r=this._clientOptions.middleware.window?.showDocument;return void 0!==r?r(e,t):t(e)})),e.listen(),await this.initialize(e),t()}catch(e){this.$state=Z.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,e,"force"),r(e)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise(((r,n)=>{e=r,t=n})),e,t]}async initialize(e){this.refreshTrace(e,!1);const t=this._clientOptions.initializationOptions,[r,o]=void 0!==this._clientOptions.workspaceFolder?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:n.env.appName,version:n.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(n.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:i.Trace.toString(this._trace),workspaceFolders:o};if(this.fillInitializeParams(s),!this._clientOptions.progressOnInitialization)return this.doInitialize(e,s);{const t=l.generateUuid(),r=new u.ProgressPart(e,t);s.workDoneToken=t;try{const t=await this.doInitialize(e,s);return r.done(),t}catch(e){throw r.cancel(),e}}}async doInitialize(e,t){try{const r=await e.initialize(t);if(void 0!==r.capabilities.positionEncoding&&r.capabilities.positionEncoding!==i.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);let n;this._initializeResult=r,this.$state=Z.Running,a.number(r.capabilities.textDocumentSync)?n=r.capabilities.textDocumentSync===i.TextDocumentSyncKind.None?{openClose:!1,change:i.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==r.capabilities.textDocumentSync&&null!==r.capabilities.textDocumentSync&&(n=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:n}),e.onNotification(i.PublishDiagnosticsNotification.type,(e=>this.handleDiagnostics(e))),e.onRequest(i.RegistrationRequest.type,(e=>this.handleRegistrationRequest(e))),e.onRequest("client/registerFeature",(e=>this.handleRegistrationRequest(e))),e.onRequest(i.UnregistrationRequest.type,(e=>this.handleUnregistrationRequest(e))),e.onRequest("client/unregisterFeature",(e=>this.handleUnregistrationRequest(e))),e.onRequest(i.ApplyWorkspaceEditRequest.type,(e=>this.handleApplyWorkspaceEdit(e)));for(const[t,r]of this._pendingNotificationHandlers)this._notificationDisposables.set(t,e.onNotification(t,r));this._pendingNotificationHandlers.clear();for(const[t,r]of this._pendingRequestHandlers)this._requestDisposables.set(t,e.onRequest(t,r));this._pendingRequestHandlers.clear();for(const[t,r]of this._pendingProgressHandlers)this._progressDisposables.set(t,e.onProgress(r.type,t,r.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(i.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(t){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):this.stop():t instanceof i.ResponseError&&t.data&&t.data.retry?n.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then((t=>{t&&"retry"===t.id?this.initialize(e):this.stop()})):(t&&t.message&&n.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop()),t}}_clientGetRootPath(){let e=n.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===Z.Stopped||this.$state===Z.Initial)return;if(this.$state===Z.Stopping){if(void 0!==this._onStop)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}const r=this.activeConnection();if(void 0===r||this.$state!==Z.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Z.Stopping,this.cleanUp(e);const n=new Promise((e=>{(0,i.RAL)().timer.setTimeout(e,t)})),o=(async e=>(await e.shutdown(),await e.exit(),e))(r);return this._onStop=Promise.race([n,o]).then((e=>{if(void 0===e)throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out");e.end(),e.dispose()}),(e=>{throw this.error("Stopping server failed",e,!1),e})).finally((()=>{this.$state=Z.Stopped,"stop"===e&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()}))}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();const t=this._listeners.splice(0,this._listeners.length);for(const e of t)e.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(const e of Array.from(this._features.entries()).map((e=>e[1])).reverse())e.clear();"stop"===e&&void 0!==this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0),void 0!==this._idleInterval&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){void 0!==this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){const t=this;async function r(e){return t._fileEvents.push(e),t._fileEventDelayer.trigger((async()=>{await t.sendNotification(i.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]}))}const n=this.clientOptions.middleware?.workspace;(n?.didChangeWatchedFile?n.didChangeWatchedFile(e,r):r(e)).catch((e=>{t.error("Notify file events failed.",e)}))}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock((async()=>{try{const t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(0===t.length)return;for(const r of t){const t=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification(i.DidChangeTextDocumentNotification.type,t),this._didChangeTextDocumentFeature.notificationSent(r,i.DidChangeTextDocumentNotification.type,t)}}catch(e){throw this.error("Sending pending changes failed",e,!1),e}}))}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger((async()=>{const e=this.activeConnection();void 0!==e?await this.sendPendingFullTextDocumentChanges(e):this.triggerPendingChangeDelivery()})).catch((e=>this.error("Delivering pending changes failed",e,!1)))}handleDiagnostics(e){if(!this._diagnostics)return;const t=e.uri;"busy"===this._diagnosticQueueState.state&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,i.RAL)().timer.setImmediate((()=>{this.workDiagnosticQueue()}))}workDiagnosticQueue(){if("busy"===this._diagnosticQueueState.state)return;const e=this._diagnosticQueue.entries().next();if(!0===e.done)return;const[t,r]=e.value;this._diagnosticQueue.delete(t);const i=new n.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then((e=>{if(!i.token.isCancellationRequested){const r=this._p2c.asUri(t),n=this.clientOptions.middleware;n.handleDiagnostics?n.handleDiagnostics(r,e,((e,t)=>this.setDiagnostics(e,t))):this.setDiagnostics(r,e)}})).finally((()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()}))}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}getLocale(){return n.env.language}async $start(){if(this.$state===Z.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();const e=this.activeConnection();if(void 0===e)throw new Error("Starting server failed");return e}async createConnection(){const e=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=function(e,t,r,n,o){const s=new ie,c=(0,i.createProtocolConnection)(e,t,s,o);return c.onError((e=>{r(e[0],e[1],e[2])})),c.onClose(n),{listen:()=>c.listen(),sendRequest:c.sendRequest,onRequest:c.onRequest,hasPendingResponse:c.hasPendingResponse,sendNotification:c.sendNotification,onNotification:c.onNotification,onProgress:c.onProgress,sendProgress:c.sendProgress,trace:(e,t,r)=>{const n={sendNotification:!1,traceFormat:i.TraceFormat.Text};return void 0===r?c.trace(e,t,n):(a.boolean(r),c.trace(e,t,r))},initialize:e=>c.sendRequest(i.InitializeRequest.type,e),shutdown:()=>c.sendRequest(i.ShutdownRequest.type,void 0),exit:()=>c.sendNotification(i.ExitNotification.type),end:()=>c.end(),dispose:()=>c.dispose()}}(e.reader,e.writer,((e,t,r)=>{this.handleConnectionError(e,t,r).catch((e=>this.error("Handling connection error failed",e)))}),(()=>{this.handleConnectionClosed().catch((e=>this.error("Handling connection close failed",e)))}),this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===Z.Stopped)return;try{void 0!==this._connection&&this._connection.dispose()}catch(e){}let e={action:X.DoNotRestart};if(this.$state!==Z.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch(e){}this._connection=void 0,e.action===X.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,!0!==e.handled&&"force"),this.cleanUp("stop"),this.$state===Z.Starting?this.$state=Z.StartFailed:this.$state=Z.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===X.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=Z.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch((e=>this.error("Restarting server failed",e,"force"))))}async handleConnectionError(e,t,r){const n=await this._clientOptions.errorHandler.error(e,t,r);n.action===z.Shutdown?(this.error(n.message??`Client ${this._name}: connection to server is erroring.\n${e.message}\nShutting down server.`,void 0,!0!==n.handled&&"force"),this.stop().catch((e=>{this.error("Stopping server failed",e,!1)}))):this.error(n.message??`Client ${this._name}: connection to server is erroring.\n${e.message}`,void 0,!0!==n.handled&&"force")}hookConfigurationChanged(e){this._listeners.push(n.workspace.onDidChangeConfiguration((()=>{this.refreshTrace(e,!0)})))}refreshTrace(e,t=!1){const r=n.workspace.getConfiguration(this._id);let o=i.Trace.Off,s=i.TraceFormat.Text;if(r){const e=r.get("trace.server","off");"string"==typeof e?o=i.Trace.fromString(e):(o=i.Trace.fromString(r.get("trace.server.verbosity","off")),s=i.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=o,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch((e=>{this.error("Updating trace failed with error",e,!1)}))}hookFileEvents(e){let t,r=this._clientOptions.synchronize.fileEvents;r&&(t=a.array(r)?r:[r],t&&this._dynamicFeatures.get(i.DidChangeWatchedFilesNotification.type.method).registerRaw(l.generateUuid(),t))}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),d.DynamicFeature.is(e)){const t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){const t=this.getFeature(i.NotebookDocumentSyncRegistrationType.method);return void 0!==t&&t instanceof p.NotebookDocumentSyncFeature&&t.handles(e)}registerBuiltinFeatures(){const e=new Map;this.registerFeature(new f.ConfigurationFeature(this)),this.registerFeature(new m.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new m.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded((()=>{this.triggerPendingChangeDelivery()})),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new m.WillSaveFeature(this)),this.registerFeature(new m.WillSaveWaitUntilFeature(this)),this.registerFeature(new m.DidSaveTextDocumentFeature(this)),this.registerFeature(new m.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new M.FileSystemWatcherFeature(this,(e=>this.notifyFileEvent(e)))),this.registerFeature(new g.CompletionItemFeature(this)),this.registerFeature(new y.HoverFeature(this)),this.registerFeature(new _.SignatureHelpFeature(this)),this.registerFeature(new v.DefinitionFeature(this)),this.registerFeature(new E.ReferencesFeature(this)),this.registerFeature(new b.DocumentHighlightFeature(this)),this.registerFeature(new w.DocumentSymbolFeature(this)),this.registerFeature(new S.WorkspaceSymbolFeature(this)),this.registerFeature(new C.CodeActionFeature(this)),this.registerFeature(new T.CodeLensFeature(this)),this.registerFeature(new k.DocumentFormattingFeature(this)),this.registerFeature(new k.DocumentRangeFormattingFeature(this)),this.registerFeature(new k.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new P.RenameFeature(this)),this.registerFeature(new R.DocumentLinkFeature(this)),this.registerFeature(new x.ExecuteCommandFeature(this)),this.registerFeature(new f.SyncConfigurationFeature(this)),this.registerFeature(new I.TypeDefinitionFeature(this)),this.registerFeature(new D.ImplementationFeature(this)),this.registerFeature(new O.ColorProviderFeature(this)),void 0===this.clientOptions.workspaceFolder&&this.registerFeature(new A.WorkspaceFoldersFeature(this)),this.registerFeature(new N.FoldingRangeFeature(this)),this.registerFeature(new L.DeclarationFeature(this)),this.registerFeature(new F.SelectionRangeFeature(this)),this.registerFeature(new j.ProgressFeature(this)),this.registerFeature(new q.CallHierarchyFeature(this)),this.registerFeature(new U.SemanticTokensFeature(this)),this.registerFeature(new $.LinkedEditingFeature(this)),this.registerFeature(new B.DidCreateFilesFeature(this)),this.registerFeature(new B.DidRenameFilesFeature(this)),this.registerFeature(new B.DidDeleteFilesFeature(this)),this.registerFeature(new B.WillCreateFilesFeature(this)),this.registerFeature(new B.WillRenameFilesFeature(this)),this.registerFeature(new B.WillDeleteFilesFeature(this)),this.registerFeature(new W.TypeHierarchyFeature(this)),this.registerFeature(new H.InlineValueFeature(this)),this.registerFeature(new V.InlayHintsFeature(this)),this.registerFeature(new h.DiagnosticFeature(this)),this.registerFeature(new p.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(te.createAll(this))}fillInitializeParams(e){for(let t of this._features)a.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){const e={};(0,d.ensure)(e,"workspace").applyEdit=!0;const t=(0,d.ensure)((0,d.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[i.ResourceOperationKind.Create,i.ResourceOperationKind.Rename,i.ResourceOperationKind.Delete],t.failureHandling=i.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};const r=(0,d.ensure)((0,d.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[i.DiagnosticTag.Unnecessary,i.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;const n=(0,d.ensure)(e,"window");(0,d.ensure)(n,"showMessage").messageActionItem={additionalPropertiesSupport:!0},(0,d.ensure)(n,"showDocument").support=!0;const o=(0,d.ensure)(e,"general");o.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ne.RequestsToCancelOnContentModified)},o.regularExpressions={engine:"ECMAScript",version:"ES2020"},o.markdown={parser:"marked",version:"1.1.0"},o.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(o.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){const t=this._clientOptions.documentSelector;for(const e of this._features)a.func(e.preInitialize)&&e.preInitialize(this._capabilities,t);for(const e of this._features)e.initialize(this._capabilities,t)}async handleRegistrationRequest(e){const t=this.clientOptions.middleware?.handleRegisterCapability;return t?t(e,(e=>this.doRegisterCapability(e))):this.doRegisterCapability(e)}async doRegisterCapability(e){if(this.isRunning())for(const t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(void 0===e)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const r=t.registerOptions??{};r.documentSelector=r.documentSelector??this._clientOptions.documentSelector;const n={id:t.id,registerOptions:r};try{e.register(n)}catch(e){return Promise.reject(e)}}else for(const t of e.registrations)this._ignoredRegistrations.add(t.id)}async handleUnregistrationRequest(e){const t=this.clientOptions.middleware?.handleUnregisterCapability;return t?t(e,(e=>this.doUnregisterCapability(e))):this.doUnregisterCapability(e)}async doUnregisterCapability(e){for(const t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;const e=this._dynamicFeatures.get(t.method);if(!e)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}}async handleApplyWorkspaceEdit(e){const t=e.edit,r=await this.workspaceEditLock.lock((()=>this._p2c.asWorkspaceEdit(t))),o=new Map;n.workspace.textDocuments.forEach((e=>o.set(e.uri.toString(),e)));let s=!1;if(t.documentChanges)for(const e of t.documentChanges)if(i.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){const t=this._p2c.asUri(e.textDocument.uri).toString(),r=o.get(t);if(r&&r.version!==e.textDocument.version){s=!0;break}}return s?Promise.resolve({applied:!1}):a.asPromise(n.workspace.applyEdit(r).then((e=>({applied:e}))))}handleFailedRequest(e,t,r,o,s=!0){if(r instanceof i.ResponseError){if(r.code===i.ErrorCodes.PendingResponseRejected||r.code===i.ErrorCodes.ConnectionInactive)return o;if(r.code===i.LSPErrorCodes.RequestCancelled||r.code===i.LSPErrorCodes.ServerCancelled){if(void 0!==t&&t.isCancellationRequested)return o;throw void 0!==r.data?new d.LSPCancellationError(r.data):new n.CancellationError}if(r.code===i.LSPErrorCodes.ContentModified){if(ne.RequestsToCancelOnContentModified.has(e.method)||ne.CancellableResolveCalls.has(e.method))throw new n.CancellationError;return o}}throw this.error(`Request ${e.method} failed.`,r,s),r}}t.BaseLanguageClient=ne,ne.RequestsToCancelOnContentModified=new Set([i.SemanticTokensRequest.method,i.SemanticTokensRangeRequest.method,i.SemanticTokensDeltaRequest.method]),ne.CancellableResolveCalls=new Set([i.CompletionResolveRequest.method,i.CodeLensResolveRequest.method,i.CodeActionResolveRequest.method,i.InlayHintResolveRequest.method,i.DocumentLinkResolveRequest.method,i.WorkspaceSymbolResolveRequest.method]);class ie{error(e){(0,i.RAL)().console.error(e)}warn(e){(0,i.RAL)().console.warn(e)}info(e){(0,i.RAL)().console.info(e)}log(e){(0,i.RAL)().console.log(e)}}!function(e){e.createAll=function(e){return[new G.InlineCompletionItemFeature(e)]}}(te||(t.ProposedFeatures=te={}))},8430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeActionFeature=void 0;const n=r(1398),i=r(7354),o=r(9032),s=r(4294);class a extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.CodeActionRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[i.CodeActionKind.Empty,i.CodeActionKind.QuickFix,i.CodeActionKind.Refactor,i.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorRewrite,i.CodeActionKind.Source,i.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.codeActionProvider);r&&this.register({id:o.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideCodeActions:(e,t,r,n)=>{const o=this._client,s=async(e,t,r,n)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:o.code2ProtocolConverter.asCodeActionContextSync(r)};return o.sendRequest(i.CodeActionRequest.type,s,n).then((e=>n.isCancellationRequested||null==e?null:o.protocol2CodeConverter.asCodeActionResult(e,n)),(e=>o.handleFailedRequest(i.CodeActionRequest.type,n,e,null)))},a=o.middleware;return a.provideCodeActions?a.provideCodeActions(e,t,r,n,s):s(e,t,r,n)},resolveCodeAction:e.resolveProvider?(e,t)=>{const r=this._client,n=this._client.middleware,o=async(e,t)=>r.sendRequest(i.CodeActionResolveRequest.type,r.code2ProtocolConverter.asCodeActionSync(e),t).then((n=>t.isCancellationRequested?e:r.protocol2CodeConverter.asCodeAction(n,t)),(n=>r.handleFailedRequest(i.CodeActionResolveRequest.type,t,n,e)));return n.resolveCodeAction?n.resolveCodeAction(e,t,o):o(e,t)}:void 0};return[n.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}}t.CodeActionFeature=a},1798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=void 0;const n=r(1398),i=r(7354),o=r(8319),s=r(483),a=r(7652),c=r(5588),l=r(7424),u=r(9206),d=r(7894),h=r(8717),p=r(7321),f=r(6144),m=r(7511);var g;!function(e){e.is=function(e){const t=e;return t&&!!t.inserting&&!!t.replacing}}(g||(g={})),t.createConverter=function(e){const t=e||(e=>e.toString());function r(e){return t(e)}function y(e){return{uri:t(e.uri)}}function v(e){return{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}function _(e){switch(e){case n.TextDocumentSaveReason.Manual:return i.TextDocumentSaveReason.Manual;case n.TextDocumentSaveReason.AfterDelay:return i.TextDocumentSaveReason.AfterDelay;case n.TextDocumentSaveReason.FocusOut:return i.TextDocumentSaveReason.FocusOut}return i.TextDocumentSaveReason.Manual}function b(e){switch(e){case n.CompletionTriggerKind.TriggerCharacter:return i.CompletionTriggerKind.TriggerCharacter;case n.CompletionTriggerKind.TriggerForIncompleteCompletions:return i.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return i.CompletionTriggerKind.Invoked}}function w(e){switch(e){case n.SignatureHelpTriggerKind.Invoke:return i.SignatureHelpTriggerKind.Invoked;case n.SignatureHelpTriggerKind.TriggerCharacter:return i.SignatureHelpTriggerKind.TriggerCharacter;case n.SignatureHelpTriggerKind.ContentChange:return i.SignatureHelpTriggerKind.ContentChange}}function S(e){return{label:e.label}}function E(e){return{label:e.label,parameters:(t=e.parameters,t.map(S))};var t}function C(e){return{line:e.line,character:e.character}}function T(e){return null==e?e:{line:e.line>i.uinteger.MAX_VALUE?i.uinteger.MAX_VALUE:e.line,character:e.character>i.uinteger.MAX_VALUE?i.uinteger.MAX_VALUE:e.character}}function k(e){return null==e?e:{start:T(e.start),end:T(e.end)}}function P(e){return null==e?e:i.Location.create(r(e.uri),k(e.range))}function R(e){switch(e){case n.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case n.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case n.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case n.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}}function x(e){switch(e){case n.DiagnosticTag.Unnecessary:return i.DiagnosticTag.Unnecessary;case n.DiagnosticTag.Deprecated:return i.DiagnosticTag.Deprecated;default:return}}function M(e){return{message:e.message,location:P(e.location)}}function O(e){const t=i.Diagnostic.create(k(e.range),e.message),n=e instanceof d.ProtocolDiagnostic?e:void 0;void 0!==n&&void 0!==n.data&&(t.data=n.data);const s=function(e){if(null!=e)return o.number(e)||o.string(e)?e:{value:e.value,target:r(e.target)}}(e.code);return d.DiagnosticCode.is(s)?void 0!==n&&n.hasDiagnosticCode?t.code=s:(t.code=s.value,t.codeDescription={href:s.target}):t.code=s,o.number(e.severity)&&(t.severity=R(e.severity)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let r of e){let e=x(r);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(M)),e.source&&(t.source=e.source),t}function D(e,t){return null==e?e:s.map(e,O,t)}function I(e){return null==e?e:e.map(O)}function A(e){if(e===n.CompletionItemTag.Deprecated)return i.CompletionItemTag.Deprecated}function N(e){return{range:k(e.range),newText:e.newText}}function L(e){return null==e?e:e.map(N)}function F(e){return e<=n.SymbolKind.TypeParameter?e+1:i.SymbolKind.Property}function j(e){return e}function q(e){return e.map(j)}function U(e){switch(e){case n.CodeActionTriggerKind.Invoke:return i.CodeActionTriggerKind.Invoked;case n.CodeActionTriggerKind.Automatic:return i.CodeActionTriggerKind.Automatic;default:return}}function B(e){if(null!=e)return e.value}function $(e){let t=i.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}function W(e){const t=i.InlayHintLabelPart.create(e.value);return void 0!==e.location&&(t.location=P(e.location)),void 0!==e.command&&(t.command=$(e.command)),void 0!==e.tooltip&&(t.tooltip=H(e.tooltip)),t}function H(e){return"string"==typeof e?e:{kind:i.MarkupKind.Markdown,value:e.value}}return{asUri:r,asTextDocumentIdentifier:y,asTextDocumentItem:v,asVersionedTextDocumentIdentifier:function(e){return{uri:t(e.uri),version:e.version}},asOpenTextDocumentParams:function(e){return{textDocument:v(e)}},asChangeTextDocumentParams:function(e,r,n){if(function(e){const t=e;return!!t.uri&&!!t.version}(e))return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};if(function(e){const t=e;return!!t.document&&!!t.contentChanges}(e)){const i=n;return{textDocument:{uri:t(r),version:i},contentChanges:e.contentChanges.map((e=>{const t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}}))}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:y(e)}},asSaveTextDocumentParams:function(e,t=!1){let r={textDocument:y(e)};return t&&(r.text=e.getText()),r},asWillSaveTextDocumentParams:function(e){return{textDocument:y(e.document),reason:_(e.reason)}},asDidCreateFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asDidRenameFilesParams:function(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}},asDidDeleteFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asWillCreateFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asWillRenameFilesParams:function(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}},asWillDeleteFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asTextDocumentPositionParams:function(e,t){return{textDocument:y(e),position:C(t)}},asCompletionParams:function(e,t,r){return{textDocument:y(e),position:C(t),context:{triggerKind:b(r.triggerKind),triggerCharacter:r.triggerCharacter}}},asSignatureHelpParams:function(e,t,r){return{textDocument:y(e),position:C(t),context:{isRetrigger:r.isRetrigger,triggerCharacter:r.triggerCharacter,triggerKind:w(r.triggerKind),activeSignatureHelp:(n=r.activeSignatureHelp,void 0===n?n:{signatures:(i=n.signatures,i.map(E)),activeSignature:n.activeSignature,activeParameter:n.activeParameter})}};var n,i},asWorkerPosition:C,asRange:k,asRanges:function(e){return e.map(k)},asPosition:T,asPositions:function(e,t){return s.map(e,T,t)},asPositionsSync:function(e){return e.map(T)},asLocation:P,asDiagnosticSeverity:R,asDiagnosticTag:x,asDiagnostic:O,asDiagnostics:D,asDiagnosticsSync:I,asCompletionItem:function(e,t=!1){let r,s;o.string(e.label)?r=e.label:(r=e.label.label,!t||void 0===e.label.detail&&void 0===e.label.description||(s={detail:e.label.detail,description:e.label.description}));let c={label:r};void 0!==s&&(c.labelDetails=s);let l=e instanceof a.default?e:void 0;var u,d;e.detail&&(c.detail=e.detail),e.documentation&&(l&&"$string"!==l.documentationFormat?c.documentation=function(e,t){switch(e){case"$string":return t;case i.MarkupKind.PlainText:return{kind:e,value:t};case i.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(l.documentationFormat,e.documentation):c.documentation=e.documentation),e.filterText&&(c.filterText=e.filterText),function(e,t){let r,o,s=i.InsertTextFormat.PlainText;t.textEdit?(r=t.textEdit.newText,o=t.textEdit.range):t.insertText instanceof n.SnippetString?(s=i.InsertTextFormat.Snippet,r=t.insertText.value):r=t.insertText,t.range&&(o=t.range),e.insertTextFormat=s,t.fromEdit&&void 0!==r&&void 0!==o?e.textEdit=function(e,t){return g.is(t)?i.InsertReplaceEdit.create(e,k(t.inserting),k(t.replacing)):{newText:e,range:k(t)}}(r,o):e.insertText=r}(c,e),o.number(e.kind)&&(c.kind=(u=e.kind,void 0!==(d=l&&l.originalItemKind)?d:u+1)),e.sortText&&(c.sortText=e.sortText),e.additionalTextEdits&&(c.additionalTextEdits=L(e.additionalTextEdits)),e.commitCharacters&&(c.commitCharacters=e.commitCharacters.slice()),e.command&&(c.command=$(e.command)),!0!==e.preselect&&!1!==e.preselect||(c.preselect=e.preselect);const h=function(e){if(void 0===e)return e;const t=[];for(let r of e){const e=A(r);void 0!==e&&t.push(e)}return t}(e.tags);if(l){if(void 0!==l.data&&(c.data=l.data),!0===l.deprecated||!1===l.deprecated){if(!0===l.deprecated&&void 0!==h&&h.length>0){const e=h.indexOf(n.CompletionItemTag.Deprecated);-1!==e&&h.splice(e,1)}c.deprecated=l.deprecated}void 0!==l.insertTextMode&&(c.insertTextMode=l.insertTextMode)}return void 0!==h&&h.length>0&&(c.tags=h),void 0===c.insertTextMode&&!0===e.keepWhitespace&&(c.insertTextMode=i.InsertTextMode.adjustIndentation),c},asTextEdit:N,asSymbolKind:F,asSymbolTag:j,asSymbolTags:q,asReferenceParams:function(e,t,r){return{textDocument:y(e),position:C(t),context:{includeDeclaration:r.includeDeclaration}}},asCodeAction:async function(e,t){let r=i.CodeAction.create(e.title);if(e instanceof u.default&&void 0!==e.data&&(r.data=e.data),void 0!==e.kind&&(r.kind=B(e.kind)),void 0!==e.diagnostics&&(r.diagnostics=await D(e.diagnostics,t)),void 0!==e.edit)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return void 0!==e.command&&(r.command=$(e.command)),void 0!==e.isPreferred&&(r.isPreferred=e.isPreferred),void 0!==e.disabled&&(r.disabled={reason:e.disabled.reason}),r},asCodeActionSync:function(e){let t=i.CodeAction.create(e.title);if(e instanceof u.default&&void 0!==e.data&&(t.data=e.data),void 0!==e.kind&&(t.kind=B(e.kind)),void 0!==e.diagnostics&&(t.diagnostics=I(e.diagnostics)),void 0!==e.edit)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return void 0!==e.command&&(t.command=$(e.command)),void 0!==e.isPreferred&&(t.isPreferred=e.isPreferred),void 0!==e.disabled&&(t.disabled={reason:e.disabled.reason}),t},asCodeActionContext:async function(e,t){if(null==e)return e;let r;return e.only&&o.string(e.only.value)&&(r=[e.only.value]),i.CodeActionContext.create(await D(e.diagnostics,t),r,U(e.triggerKind))},asCodeActionContextSync:function(e){if(null==e)return e;let t;return e.only&&o.string(e.only.value)&&(t=[e.only.value]),i.CodeActionContext.create(I(e.diagnostics),t,U(e.triggerKind))},asInlineValueContext:function(e){return null==e?e:i.InlineValueContext.create(e.frameId,k(e.stoppedLocation))},asCommand:$,asCodeLens:function(e){let t=i.CodeLens.create(k(e.range));return e.command&&(t.command=$(e.command)),e instanceof c.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e,t){const r={tabSize:e.tabSize,insertSpaces:e.insertSpaces};return t.trimTrailingWhitespace&&(r.trimTrailingWhitespace=!0),t.trimFinalNewlines&&(r.trimFinalNewlines=!0),t.insertFinalNewline&&(r.insertFinalNewline=!0),r},asDocumentSymbolParams:function(e){return{textDocument:y(e)}},asCodeLensParams:function(e){return{textDocument:y(e)}},asDocumentLink:function(e){let t=i.DocumentLink.create(k(e.range));e.target&&(t.target=r(e.target)),void 0!==e.tooltip&&(t.tooltip=e.tooltip);let n=e instanceof l.default?e:void 0;return n&&n.data&&(t.data=n.data),t},asDocumentLinkParams:function(e){return{textDocument:y(e)}},asCallHierarchyItem:function(e){const t={name:e.name,kind:F(e.kind),uri:r(e.uri),range:k(e.range),selectionRange:k(e.selectionRange)};return void 0!==e.detail&&e.detail.length>0&&(t.detail=e.detail),void 0!==e.tags&&(t.tags=q(e.tags)),e instanceof h.default&&void 0!==e.data&&(t.data=e.data),t},asTypeHierarchyItem:function(e){const t={name:e.name,kind:F(e.kind),uri:r(e.uri),range:k(e.range),selectionRange:k(e.selectionRange)};return void 0!==e.detail&&e.detail.length>0&&(t.detail=e.detail),void 0!==e.tags&&(t.tags=q(e.tags)),e instanceof p.default&&void 0!==e.data&&(t.data=e.data),t},asInlayHint:function(e){const t="string"==typeof e.label?e.label:e.label.map(W),r=i.InlayHint.create(T(e.position),t);return void 0!==e.kind&&(r.kind=e.kind),void 0!==e.textEdits&&(r.textEdits=L(e.textEdits)),void 0!==e.tooltip&&(r.tooltip=H(e.tooltip)),void 0!==e.paddingLeft&&(r.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(r.paddingRight=e.paddingRight),e instanceof m.default&&void 0!==e.data&&(r.data=e.data),r},asWorkspaceSymbol:function(e){const r=e instanceof f.default?{name:e.name,kind:F(e.kind),location:e.hasRange?P(e.location):{uri:t(e.location.uri)},data:e.data}:{name:e.name,kind:F(e.kind),location:P(e.location)};return void 0!==e.tags&&(r.tags=q(e.tags)),""!==e.containerName&&(r.containerName=e.containerName),r},asInlineCompletionParams:function(e,t,r){return{context:i.InlineCompletionContext.create(r.triggerKind,r.selectedCompletionInfo),textDocument:y(e),position:T(t)}}}}},8140:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeLensFeature=void 0;const n=r(1398),i=r(7354),o=r(9032),s=r(4294);class a extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.CodeLensRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,s.ensure)((0,s.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(i.CodeLensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeCodeLensEmitter.fire()}));const r=this.getRegistrationOptions(t,e.codeLensProvider);r&&this.register({id:o.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r=new n.EventEmitter,o={onDidChangeCodeLenses:r.event,provideCodeLenses:(e,t)=>{const r=this._client,n=(e,t)=>r.sendRequest(i.CodeLensRequest.type,r.code2ProtocolConverter.asCodeLensParams(e),t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asCodeLenses(e,t)),(e=>r.handleFailedRequest(i.CodeLensRequest.type,t,e,null))),o=r.middleware;return o.provideCodeLenses?o.provideCodeLenses(e,t,n):n(e,t)},resolveCodeLens:e.resolveProvider?(e,t)=>{const r=this._client,n=(e,t)=>r.sendRequest(i.CodeLensResolveRequest.type,r.code2ProtocolConverter.asCodeLens(e),t).then((n=>t.isCancellationRequested?e:r.protocol2CodeConverter.asCodeLens(n)),(n=>r.handleFailedRequest(i.CodeLensResolveRequest.type,t,n,e))),o=r.middleware;return o.resolveCodeLens?o.resolveCodeLens(e,t,n):n(e,t)}:void 0};return[n.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),o),{provider:o,onDidChangeCodeLensEmitter:r}]}}t.CodeLensFeature=a},3515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorProviderFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentColorRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,n]=this.getRegistration(t,e.colorProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r={provideColorPresentations:(e,t,r)=>{const n=this._client,o=(e,t,r)=>{const o={color:e,textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(t.document),range:n.code2ProtocolConverter.asRange(t.range)};return n.sendRequest(i.ColorPresentationRequest.type,o,r).then((e=>r.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(e,r)),(e=>n.handleFailedRequest(i.ColorPresentationRequest.type,r,e,null)))},s=n.middleware;return s.provideColorPresentations?s.provideColorPresentations(e,t,r,o):o(e,t,r)},provideDocumentColors:(e,t)=>{const r=this._client,n=(e,t)=>{const n={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e)};return r.sendRequest(i.DocumentColorRequest.type,n,t).then((e=>t.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(e,t)),(e=>r.handleFailedRequest(i.DocumentColorRequest.type,t,e,null)))},o=r.middleware;return o.provideDocumentColors?o.provideDocumentColors(e,t,n):n(e,t)}};return[n.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}}t.ColorProviderFeature=s},6535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionItemFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032),a=[i.CompletionItemKind.Text,i.CompletionItemKind.Method,i.CompletionItemKind.Function,i.CompletionItemKind.Constructor,i.CompletionItemKind.Field,i.CompletionItemKind.Variable,i.CompletionItemKind.Class,i.CompletionItemKind.Interface,i.CompletionItemKind.Module,i.CompletionItemKind.Property,i.CompletionItemKind.Unit,i.CompletionItemKind.Value,i.CompletionItemKind.Enum,i.CompletionItemKind.Keyword,i.CompletionItemKind.Snippet,i.CompletionItemKind.Color,i.CompletionItemKind.File,i.CompletionItemKind.Reference,i.CompletionItemKind.Folder,i.CompletionItemKind.EnumMember,i.CompletionItemKind.Constant,i.CompletionItemKind.Struct,i.CompletionItemKind.Event,i.CompletionItemKind.Operator,i.CompletionItemKind.TypeParameter];class c extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[i.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[i.InsertTextMode.asIs,i.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=i.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:a},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(e,t){const r=this.getRegistrationOptions(t,e.completionProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);const r=e.triggerCharacters??[],o=e.allCommitCharacters,s=e.documentSelector,a={provideCompletionItems:(e,t,r,n)=>{const s=this._client,a=this._client.middleware,c=(e,t,r,n)=>s.sendRequest(i.CompletionRequest.type,s.code2ProtocolConverter.asCompletionParams(e,t,r),n).then((e=>n.isCancellationRequested?null:s.protocol2CodeConverter.asCompletionResult(e,o,n)),(e=>s.handleFailedRequest(i.CompletionRequest.type,n,e,null)));return a.provideCompletionItem?a.provideCompletionItem(e,t,n,r,c):c(e,t,n,r)},resolveCompletionItem:e.resolveProvider?(e,r)=>{const n=this._client,o=this._client.middleware,s=(e,r)=>n.sendRequest(i.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(e,!!this.labelDetailsSupport.get(t)),r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asCompletionItem(e)),(t=>n.handleFailedRequest(i.CompletionResolveRequest.type,r,t,e)));return o.resolveCompletionItem?o.resolveCompletionItem(e,r,s):s(e,r)}:void 0};return[n.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),a,...r),a]}}t.CompletionItemFeature=c},5199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncConfigurationFeature=t.toJSONObject=t.ConfigurationFeature=void 0;const n=r(1398),i=r(7354),o=r(8319),s=r(9032),a=r(4294);function c(e){if(e){if(Array.isArray(e))return e.map(c);if("object"==typeof e){const t=Object.create(null);for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=c(e[r]));return t}}return e}t.ConfigurationFeature=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(i.ConfigurationRequest.type,((t,r)=>{let n=e=>{let t=[];for(let r of e.items){let e=void 0!==r.scopeUri&&null!==r.scopeUri?this._client.protocol2CodeConverter.asUri(r.scopeUri):void 0;t.push(this.getConfiguration(e,null!==r.section?r.section:void 0))}return t},i=e.middleware.workspace;return i&&i.configuration?i.configuration(t,r,n):n(t)}))}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(-1===i)r=c(n.workspace.getConfiguration(void 0,e).get(t));else{let o=n.workspace.getConfiguration(t.substr(0,i),e);o&&(r=c(o.get(t.substr(i+1))))}}else{let t=n.workspace.getConfiguration(void 0,e);r={};for(let e of Object.keys(t))t.has(e)&&(r[e]=c(t.get(e)))}return void 0===r&&(r=null),r}clear(){}},t.toJSONObject=c,t.SyncConfigurationFeature=class{constructor(e){this._client=e,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return i.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,a.ensure)((0,a.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let e=this._client.clientOptions.synchronize?.configurationSection;void 0!==e&&this.register({id:s.generateUuid(),registerOptions:{section:e}})}register(e){let t=n.workspace.onDidChangeConfiguration((t=>{this.onDidChangeConfiguration(e.registerOptions.section,t)}));this._listeners.set(e.id,t),void 0!==e.registerOptions.section&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}clear(){for(const e of this._listeners.values())e.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(e,t){if(this.isCleared)return;let r;if(r=o.string(e)?[e]:e,void 0!==r&&void 0!==t&&!r.some((e=>t.affectsConfiguration(e))))return;const n=async e=>void 0===e?this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)});let s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(r,n):n(r)).catch((e=>{this._client.error(`Sending notification ${i.DidChangeConfigurationNotification.type.method} failed`,e)}))}extractSettingsInformation(e){function t(e,t){let r=e;for(let e=0;e<t.length-1;e++){let n=r[t[e]];n||(n=Object.create(null),r[t[e]]=n),r=n}return r}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),l=null;if(l=a>=0?n.workspace.getConfiguration(s.substr(0,a),r).get(s.substr(a+1)):n.workspace.getConfiguration(void 0,r).get(s),l){let r=e[o].split(".");t(i,r)[r[r.length-1]]=c(l)}}return i}}},7061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DeclarationRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const[r,n]=this.getRegistration(t,e.declarationProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r={provideDeclaration:(e,t,r)=>{const n=this._client,o=(e,t,r)=>n.sendRequest(i.DeclarationRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asDeclarationResult(e,r)),(e=>n.handleFailedRequest(i.DeclarationRequest.type,r,e,null))),s=n.middleware;return s.provideDeclaration?s.provideDeclaration(e,t,r,o):o(e,t,r)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.DeclarationFeature=s},600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefinitionFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.definitionProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideDefinition:(e,t,r)=>{const n=this._client,o=(e,t,r)=>n.sendRequest(i.DefinitionRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asDefinitionResult(e,r)),(e=>n.handleFailedRequest(i.DefinitionRequest.type,r,e,null))),s=n.middleware;return s.provideDefinition?s.provideDefinition(e,t,r,o):o(e,t,r)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.DefinitionFeature=a},9214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticFeature=t.DiagnosticPullMode=t.vsdiag=void 0;const n=r(6045),i=r(1398),o=r(7354),s=r(9032),a=r(4294);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var l,u,d,h,p;!function(e){let t;!function(e){e.full="full",e.unChanged="unChanged"}(t=e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={}))}(l||(t.vsdiag=l={})),function(e){e.onType="onType",e.onSave="onSave"}(u||(t.DiagnosticPullMode=u={})),function(e){e.active="open",e.reschedule="reschedule",e.outDated="drop"}(d||(d={}));class f{constructor(){this.open=new Set,this._onOpen=new i.EventEmitter,this._onClose=new i.EventEmitter,f.fillTabResources(this.open);void 0!==i.window.tabGroups.onDidChangeTabs?this.disposable=i.window.tabGroups.onDidChangeTabs((e=>{if(0===e.closed.length&&0===e.opened.length)return;const t=this.open,r=new Set;f.fillTabResources(r);const n=new Set,o=new Set(r);for(const e of t.values())r.has(e)?o.delete(e):n.add(e);if(this.open=r,n.size>0){const e=new Set;for(const t of n)e.add(i.Uri.parse(t));this._onClose.fire(e)}if(o.size>0){const e=new Set;for(const t of o)e.add(i.Uri.parse(t));this._onOpen.fire(e)}})):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof i.Uri?i.window.activeTextEditor?.document.uri===e:i.window.activeTextEditor?.document===e}isVisible(e){const t=e instanceof i.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){const e=new Set;return f.fillTabResources(new Set,e),e}static fillTabResources(e,t){const r=e??new Set;for(const e of i.window.tabGroups.all)for(const n of e.tabs){const e=n.input;let o;e instanceof i.TabInputText?o=e.uri:e instanceof i.TabInputTextDiff?o=e.modified:e instanceof i.TabInputCustom&&(o=e.uri),void 0===o||r.has(o.toString())||(r.add(o.toString()),void 0!==t&&t.add(o))}}}!function(e){e[e.document=1]="document",e[e.workspace=2]="workspace"}(h||(h={})),function(e){e.asKey=function(e){return e instanceof i.Uri?e.toString():e.uri.toString()}}(p||(p={}));class m{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){const n=e===h.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=t instanceof i.Uri?[t.toString(),t,r]:[t.uri.toString(),t.uri,t.version];let c=n.get(o);return void 0===c&&(c={document:s,pulledVersion:a,resultId:void 0},n.set(o,c)),c}update(e,t,r,n){const o=e===h.document?this.documentPullStates:this.workspacePullStates,[s,a,c,l]=t instanceof i.Uri?[t.toString(),t,r,n]:[t.uri.toString(),t.uri,t.version,r];let u=o.get(s);void 0===u?(u={document:a,pulledVersion:c,resultId:l},o.set(s,u)):(u.pulledVersion=c,u.resultId=l)}unTrack(e,t){const r=p.asKey(t);(e===h.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,t){const r=p.asKey(t);return(e===h.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){const r=p.asKey(t),n=e===h.document?this.documentPullStates:this.workspacePullStates;return n.get(r)?.resultId}getAllResultIds(){const e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&&(r=this.documentPullStates.get(t)),void 0!==r.resultId&&e.push({uri:t,value:r.resultId});return e}}class g{constructor(e,t,r){this.client=e,this.tabs=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new i.EventEmitter,this.provider=this.createProvider(),this.diagnostics=i.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new m,this.workspaceErrorCounter=0}knows(e,t){const r=t instanceof i.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(r.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;const r=e instanceof i.Uri?e:e.uri;this.pullAsync(e).then((()=>{t&&t()}),(e=>{this.client.error(`Document pull failed for text document ${r.toString()}`,e,!1)}))}async pullAsync(e,t){if(this.isDisposed)return;const r=e instanceof i.Uri,n=r?e:e.uri,s=n.toString();t=r?t:e.version;const c=this.openRequests.get(s),u=r?this.documentStates.track(h.document,e,t):this.documentStates.track(h.document,e);if(void 0===c){const r=new i.CancellationTokenSource;let c,p;this.openRequests.set(s,{state:d.active,document:e,version:t,tokenSource:r});try{c=await this.provider.provideDiagnostics(e,u.resultId,r.token)??{kind:l.DocumentDiagnosticReportKind.full,items:[]}}catch(t){if(t instanceof a.LSPCancellationError&&o.DiagnosticServerCancellationData.is(t.data)&&!1===t.data.retriggerRequest&&(p={state:d.outDated,document:e}),!(void 0===p&&t instanceof i.CancellationError))throw t;p={state:d.reschedule,document:e}}if(p=p??this.openRequests.get(s),void 0===p)return this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),void this.diagnostics.delete(n);if(this.openRequests.delete(s),!this.tabs.isVisible(e))return void this.documentStates.unTrack(h.document,e);if(p.state===d.outDated)return;void 0!==c&&(c.kind===l.DocumentDiagnosticReportKind.full&&this.diagnostics.set(n,c.items),u.pulledVersion=t,u.resultId=c.resultId),p.state===d.reschedule&&this.pull(e)}else c.state===d.active?(c.tokenSource.cancel(),this.openRequests.set(s,{state:d.reschedule,document:c.document})):c.state===d.outDated&&this.openRequests.set(s,{state:d.reschedule,document:c.document})}forgetDocument(e){const t=e instanceof i.Uri?e:e.uri,r=t.toString(),n=this.openRequests.get(r);this.options.workspaceDiagnostics?void 0!==n?this.openRequests.set(r,{state:d.reschedule,document:e}):this.pull(e,(()=>{this.forget(h.document,e)})):(void 0!==n&&(n.state===d.active&&n.tokenSource.cancel(),this.openRequests.set(r,{state:d.outDated,document:e})),this.diagnostics.delete(t),this.forget(h.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then((()=>{this.workspaceTimeout=(0,o.RAL)().timer.setTimeout((()=>{this.pullWorkspace()}),2e3)}),(e=>{e instanceof a.LSPCancellationError||o.DiagnosticServerCancellationData.is(e.data)||(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,o.RAL)().timer.setTimeout((()=>{this.pullWorkspace()}),2e3))}))}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;void 0!==this.workspaceCancellation&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new i.CancellationTokenSource;const e=this.documentStates.getAllResultIds().map((e=>({uri:this.client.protocol2CodeConverter.asUri(e.uri),value:e.value})));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,(e=>{if(e&&!this.isDisposed)for(const t of e.items)t.kind===l.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(h.document,t.uri)||this.diagnostics.set(t.uri,t.items)),this.documentStates.update(h.workspace,t.uri,t.version??void 0,t.resultId)}))}createProvider(){const e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(e,t,r)=>{const n=(e,t,r)=>{const n={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(e instanceof i.Uri?e:e.uri)},previousResultId:t};return!0!==this.isDisposed&&this.client.isRunning()?this.client.sendRequest(o.DocumentDiagnosticRequest.type,n,r).then((async e=>null==e||this.isDisposed||r.isCancellationRequested?{kind:l.DocumentDiagnosticReportKind.full,items:[]}:e.kind===o.DocumentDiagnosticReportKind.Full?{kind:l.DocumentDiagnosticReportKind.full,resultId:e.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(e.items,r)}:{kind:l.DocumentDiagnosticReportKind.unChanged,resultId:e.resultId}),(e=>this.client.handleFailedRequest(o.DocumentDiagnosticRequest.type,r,e,{kind:l.DocumentDiagnosticReportKind.full,items:[]}))):{kind:l.DocumentDiagnosticReportKind.full,items:[]}},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(e,t,r,n):n(e,t,r)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(e,t,r)=>{const n=async e=>e.kind===o.DocumentDiagnosticReportKind.Full?{kind:l.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(e.uri),resultId:e.resultId,version:e.version,items:await this.client.protocol2CodeConverter.asDiagnostics(e.items,t)}:{kind:l.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(e.uri),resultId:e.resultId,version:e.version},i=e=>{const t=[];for(const r of e)t.push({uri:this.client.code2ProtocolConverter.asUri(r.uri),value:r.value});return t},a=(e,t)=>{const a=(0,s.generateUuid)(),c=this.client.onProgress(o.WorkspaceDiagnosticRequest.partialResult,a,(async e=>{if(null==e)return void r(null);const t={items:[]};for(const r of e.items)try{t.items.push(await n(r))}catch(e){this.client.error("Converting workspace diagnostics failed.",e)}r(t)})),l={identifier:this.options.identifier,previousResultIds:i(e),partialResultToken:a};return!0!==this.isDisposed&&this.client.isRunning()?this.client.sendRequest(o.WorkspaceDiagnosticRequest.type,l,t).then((async e=>{if(t.isCancellationRequested)return{items:[]};const i={items:[]};for(const t of e.items)i.items.push(await n(t));return c.dispose(),r(i),{items:[]}}),(e=>(c.dispose(),this.client.handleFailedRequest(o.DocumentDiagnosticRequest.type,t,e,{items:[]})))):{items:[]}},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(e,t,r,a):a(e,t)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(const[e,t]of this.openRequests)t.state===d.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:d.outDated,document:t.document});this.diagnostics.dispose()}}class y{constructor(e){this.diagnosticRequestor=e,this.documents=new o.LinkedMap,this.isDisposed=!1}add(e){if(!0===this.isDisposed)return;const t=p.asKey(e);this.documents.has(t)||(this.documents.set(t,e,o.Touch.Last),this.trigger())}remove(e){const t=p.asKey(e);this.documents.delete(t),0===this.documents.size?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){!0!==this.isDisposed&&(void 0===this.intervalHandle?(this.endDocument=this.documents.last,this.intervalHandle=(0,o.RAL)().timer.setInterval((()=>{const e=this.documents.first;if(void 0!==e){const t=p.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,o.Touch.Last),t===this.endDocumentKey()&&this.stop()}}),200)):this.endDocument=this.documents.last)}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return void 0!==this.endDocument?p.asKey(this.endDocument):void 0}}class v{constructor(e,t,r){const s=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},a=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),c=[],l=e=>e instanceof i.Uri?(e=>{const t=r.documentSelector;if(void 0!==s.match)return s.match(t,e);for(const r of t)if(o.TextDocumentFilter.is(r)){if("string"==typeof r)return!1;if(void 0!==r.language&&"*"!==r.language)return!1;if(void 0!==r.scheme&&"*"!==r.scheme&&r.scheme!==e.scheme)return!1;if(void 0!==r.pattern){const t=new n.Minimatch(r.pattern,{noext:!0});if(!t.makeRe())return!1;if(!t.match(e.fsPath))return!1}}return!0})(e):i.languages.match(a,e)>0&&t.isVisible(e),d=e=>e instanceof i.Uri?this.activeTextDocument?.uri.toString()===e.toString():this.activeTextDocument===e;this.diagnosticRequestor=new g(e,t,r),this.backgroundScheduler=new y(this.diagnosticRequestor);const p=e=>{l(e)&&r.interFileDependencies&&!d(e)&&this.backgroundScheduler.add(e)};this.activeTextDocument=i.window.activeTextEditor?.document,i.window.onDidChangeActiveTextEditor((e=>{const t=this.activeTextDocument;this.activeTextDocument=e?.document,void 0!==t&&p(t),void 0!==this.activeTextDocument&&this.backgroundScheduler.remove(this.activeTextDocument)}));const f=e.getFeature(o.DidOpenTextDocumentNotification.method);c.push(f.onNotificationSent((e=>{const t=e.textDocument;this.diagnosticRequestor.knows(h.document,t)||l(t)&&this.diagnosticRequestor.pull(t,(()=>{p(t)}))}))),c.push(t.onOpen((e=>{for(const t of e){if(this.diagnosticRequestor.knows(h.document,t))continue;const e=t.toString();let r;for(const t of i.workspace.textDocuments)if(e===t.uri.toString()){r=t;break}void 0!==r&&l(r)&&this.diagnosticRequestor.pull(r,(()=>{p(r)}))}})));const m=new Set;for(const e of i.workspace.textDocuments)l(e)&&(this.diagnosticRequestor.pull(e,(()=>{p(e)})),m.add(e.uri.toString()));if(!0===s.onTabs)for(const e of t.getTabResources())!m.has(e.toString())&&l(e)&&this.diagnosticRequestor.pull(e,(()=>{p(e)}));if(!0===s.onChange){const t=e.getFeature(o.DidChangeTextDocumentNotification.method);c.push(t.onNotificationSent((async e=>{const t=e.textDocument;void 0!==s.filter&&s.filter(t,u.onType)||!this.diagnosticRequestor.knows(h.document,t)||this.diagnosticRequestor.pull(t,(()=>{this.backgroundScheduler.trigger()}))})))}if(!0===s.onSave){const t=e.getFeature(o.DidSaveTextDocumentNotification.method);c.push(t.onNotificationSent((e=>{const t=e.textDocument;void 0!==s.filter&&s.filter(t,u.onSave)||!this.diagnosticRequestor.knows(h.document,t)||this.diagnosticRequestor.pull(e.textDocument,(()=>{this.backgroundScheduler.trigger()}))})))}const v=e.getFeature(o.DidCloseTextDocumentNotification.method);c.push(v.onNotificationSent((e=>{this.cleanUpDocument(e.textDocument)}))),t.onClose((e=>{for(const t of e)this.cleanUpDocument(t)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event((()=>{for(const e of i.workspace.textDocuments)l(e)&&this.diagnosticRequestor.pull(e)})),!0===r.workspaceDiagnostics&&"da348dc5-c30a-4515-9d98-31ff3be38d14"!==r.identifier&&this.diagnosticRequestor.pullWorkspace(),this.disposable=i.Disposable.from(...c,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(h.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}}class _ extends a.TextDocumentLanguageFeature{constructor(e){super(e,o.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,c(c(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(o.DiagnosticRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeDiagnosticsEmitter.fire()}));let[r,n]=this.getRegistration(t,e.diagnosticProvider);r&&n&&this.register({id:r,registerOptions:n})}clear(){void 0!==this.tabs&&(this.tabs.dispose(),this.tabs=void 0),super.clear()}registerLanguageProvider(e){void 0===this.tabs&&(this.tabs=new f);const t=new v(this._client,this.tabs,e);return[t.disposable,t]}}t.DiagnosticFeature=_},9014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentHighlightFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.documentHighlightProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideDocumentHighlights:(e,t,r)=>{const n=this._client,o=(e,t,r)=>n.sendRequest(i.DocumentHighlightRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asDocumentHighlights(e,r)),(e=>n.handleFailedRequest(i.DocumentHighlightRequest.type,r,e,null))),s=n.middleware;return s.provideDocumentHighlights?s.provideDocumentHighlights(e,t,r,o):o(e,t,r)}};return[n.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}}t.DocumentHighlightFeature=a},7656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentLinkFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentLinkRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.documentLinkProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideDocumentLinks:(e,t)=>{const r=this._client,n=(e,t)=>r.sendRequest(i.DocumentLinkRequest.type,r.code2ProtocolConverter.asDocumentLinkParams(e),t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asDocumentLinks(e,t)),(e=>r.handleFailedRequest(i.DocumentLinkRequest.type,t,e,null))),o=r.middleware;return o.provideDocumentLinks?o.provideDocumentLinks(e,t,n):n(e,t)},resolveDocumentLink:e.resolveProvider?(e,t)=>{const r=this._client;let n=(e,t)=>r.sendRequest(i.DocumentLinkResolveRequest.type,r.code2ProtocolConverter.asDocumentLink(e),t).then((n=>t.isCancellationRequested?e:r.protocol2CodeConverter.asDocumentLink(n)),(n=>r.handleFailedRequest(i.DocumentLinkResolveRequest.type,t,n,e)));const o=r.middleware;return o.resolveDocumentLink?o.resolveDocumentLink(e,t,n):n(e,t)}:void 0};return[n.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}}t.DocumentLinkFeature=a},9228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentSymbolFeature=t.SupportedSymbolTags=t.SupportedSymbolKinds=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);t.SupportedSymbolKinds=[i.SymbolKind.File,i.SymbolKind.Module,i.SymbolKind.Namespace,i.SymbolKind.Package,i.SymbolKind.Class,i.SymbolKind.Method,i.SymbolKind.Property,i.SymbolKind.Field,i.SymbolKind.Constructor,i.SymbolKind.Enum,i.SymbolKind.Interface,i.SymbolKind.Function,i.SymbolKind.Variable,i.SymbolKind.Constant,i.SymbolKind.String,i.SymbolKind.Number,i.SymbolKind.Boolean,i.SymbolKind.Array,i.SymbolKind.Object,i.SymbolKind.Key,i.SymbolKind.Null,i.SymbolKind.EnumMember,i.SymbolKind.Struct,i.SymbolKind.Event,i.SymbolKind.Operator,i.SymbolKind.TypeParameter],t.SupportedSymbolTags=[i.SymbolTag.Deprecated];class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:t.SupportedSymbolKinds},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:t.SupportedSymbolTags},r.labelSupport=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.documentSymbolProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideDocumentSymbols:(e,t)=>{const r=this._client,n=async(e,t)=>{try{const n=await r.sendRequest(i.DocumentSymbolRequest.type,r.code2ProtocolConverter.asDocumentSymbolParams(e),t);if(t.isCancellationRequested||null==n)return null;if(0===n.length)return[];{const e=n[0];return i.DocumentSymbol.is(e)?await r.protocol2CodeConverter.asDocumentSymbols(n,t):await r.protocol2CodeConverter.asSymbolInformations(n,t)}}catch(e){return r.handleFailedRequest(i.DocumentSymbolRequest.type,t,e,null)}},o=r.middleware;return o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,n):n(e,t)}},o=void 0!==e.label?{label:e.label}:void 0;return[n.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,o),r]}}t.DocumentSymbolFeature=a},9073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecuteCommandFeature=void 0;const n=r(1398),i=r(7354),o=r(9032),s=r(4294);t.ExecuteCommandFeature=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return i.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:o.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){const t=this._client,r=t.middleware,o=(e,r)=>{let n={command:e,arguments:r};return t.sendRequest(i.ExecuteCommandRequest.type,n).then(void 0,(e=>t.handleFailedRequest(i.ExecuteCommandRequest.type,void 0,e,void 0)))};if(e.registerOptions.commands){const t=[];for(const i of e.registerOptions.commands)t.push(n.commands.registerCommand(i,((...e)=>r.executeCommand?r.executeCommand(i,e,o):o(i,e))));this._commands.set(e.id,t)}}unregister(e){let t=this._commands.get(e);t&&t.forEach((e=>e.dispose()))}clear(){this._commands.forEach((e=>{e.forEach((e=>e.dispose()))})),this._commands.clear()}}},4294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFeature=t.TextDocumentLanguageFeature=t.TextDocumentEventFeature=t.DynamicDocumentFeature=t.DynamicFeature=t.StaticFeature=t.ensure=t.LSPCancellationError=void 0;const n=r(1398),i=r(7354),o=r(8319),s=r(9032);class a extends n.CancellationError{constructor(e){super(),this.data=e}}var c,l;t.LSPCancellationError=a,t.ensure=function(e,t){return void 0===e[t]&&(e[t]={}),e[t]},function(e){e.is=function(e){const t=e;return null!=t&&o.func(t.fillClientCapabilities)&&o.func(t.initialize)&&o.func(t.getState)&&o.func(t.clear)&&(void 0===t.fillInitializeParams||o.func(t.fillInitializeParams))}}(c||(t.StaticFeature=c={})),function(e){e.is=function(e){const t=e;return null!=t&&o.func(t.fillClientCapabilities)&&o.func(t.initialize)&&o.func(t.getState)&&o.func(t.clear)&&(void 0===t.fillInitializeParams||o.func(t.fillInitializeParams))&&o.func(t.register)&&o.func(t.unregister)&&void 0!==t.registrationType}}(l||(t.DynamicFeature=l={}));class u{constructor(e){this._client=e}getState(){const e=this.getDocumentSelectors();let t=0;for(const r of e){t++;for(const e of n.workspace.textDocuments)if(n.languages.match(r,e)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}const r=t>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}}t.DynamicDocumentFeature=u,t.TextDocumentEventFeature=class extends u{static textDocumentFilter(e,t){for(const r of e)if(n.languages.match(r,t)>0)return!0;return!1}constructor(e,t,r,i,o,s,a){super(e),this._event=t,this._type=r,this._middleware=i,this._createParams=o,this._textDocument=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new n.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event((e=>{this.callback(e).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed.`,e)}))}))),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){const t=async e=>{const t=this._createParams(e);await this._client.sendNotification(this._type,t),this.notificationSent(this.getTextDocument(e),this._type,t)};if(this.matches(e)){const r=this._middleware();return r?r(e,(e=>t(e))):t(e)}}matches(e){return!this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))&&(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(const t of this._selectors.values())if(n.languages.match(t,e)>0)return{send:e=>this.callback(e)}}},t.TextDocumentLanguageFeature=class extends u{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(const e of this._registrations.values()){const t=e.data.registerOptions.documentSelector;null!==t&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}clear(){this._registrations.forEach((e=>{e.disposable.dispose()})),this._registrations.clear()}getRegistration(e,t){if(!t)return[void 0,void 0];if(i.TextDocumentRegistrationOptions.is(t)){const r=i.StaticRegistrationOptions.hasId(t)?t.id:s.generateUuid(),n=t.documentSelector??e;if(n)return[r,Object.assign({},t,{documentSelector:n})]}else if(o.boolean(t)&&!0===t||i.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];const r=o.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[s.generateUuid(),r]}return[void 0,void 0]}getRegistrationOptions(e,t){if(e&&t)return o.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(const t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(null!==r&&n.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return t.provider}}getAllProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}},t.WorkspaceFeature=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){const e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){const t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}clear(){this._registrations.forEach((e=>{e.disposable.dispose()})),this._registrations.clear()}getProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}}},2485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesFeature=t.WillRenameFilesFeature=t.WillCreateFilesFeature=t.DidDeleteFilesFeature=t.DidRenameFilesFeature=t.DidCreateFilesFeature=void 0;const n=r(1398),i=r(6045),o=r(7354),s=r(9032);function a(e,t){return void 0===e[t]&&(e[t]={}),e[t]}function c(e,t,r){e[t]=r}class l{constructor(e,t,r,n,i){this._client=e,this._event=t,this._registrationType=r,this._clientCapability=n,this._serverCapability=i,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){const t=a(a(e,"workspace"),"fileOperations");c(t,"dynamicRegistration",!0),c(t,this._clientCapability,!0)}initialize(e){const t=e.workspace?.fileOperations,r=void 0!==t?t[this._serverCapability]:void 0;if(void 0!==r?.filters)try{this.register({id:s.generateUuid(),registerOptions:{filters:r.filters}})}catch(e){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${e}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));const t=e.registerOptions.filters.map((e=>{const t=new i.Minimatch(e.pattern.glob,l.asMinimatchOptions(e.pattern.options));if(!t.makeRe())throw new Error(`Invalid pattern ${e.pattern.glob}!`);return{scheme:e.scheme,matcher:t,kind:e.pattern.matches}}));this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),0===this._filters.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return l.getFileType(e)}async filter(e,t){const r=await Promise.all(e.files.map((async e=>{const r=t(e),i=r.fsPath.replace(/\\/g,"/");for(const e of this._filters.values())for(const t of e)if(void 0===t.scheme||t.scheme===r.scheme)if(t.matcher.match(i)){if(void 0===t.kind)return!0;const e=await this.getFileType(r);if(void 0===e)return this._client.error(`Failed to determine file type for ${r.toString()}.`),!0;if(e===n.FileType.File&&t.kind===o.FileOperationPatternKind.file||e===n.FileType.Directory&&t.kind===o.FileOperationPatternKind.folder)return!0}else if(t.kind===o.FileOperationPatternKind.folder&&await l.getFileType(r)===n.FileType.Directory&&t.matcher.match(`${i}/`))return!0;return!1}))),i=e.files.filter(((e,t)=>r[t]));return{...e,files:i}}static async getFileType(e){try{return(await n.workspace.fs.stat(e)).type}catch(e){return}}static asMinimatchOptions(e){const t={dot:!0};return!0===e?.ignoreCase&&(t.nocase=!0),t}}class u extends l{constructor(e,t,r,n,i,o,s){super(e,t,r,n,i),this._notificationType=r,this._accessUri=o,this._createParams=s}async send(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const e=async e=>this._client.sendNotification(this._notificationType,this._createParams(e));return this.doSend(t,e)}}}class d extends u{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){const t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);const r=await l.getFileType(e);return r&&this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),0===this.filterSize()&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}clear(){super.clear(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}}t.DidCreateFilesFeature=class extends u{constructor(e){super(e,n.workspace.onDidCreateFiles,o.DidCreateFilesNotification.type,"didCreate","didCreate",(e=>e),e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){const r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}},t.DidRenameFilesFeature=class extends d{constructor(e){super(e,n.workspace.onDidRenameFiles,o.DidRenameFilesNotification.type,"didRename","didRename",(e=>e.oldUri),e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=n.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,(e=>e.oldUri)))}doSend(e,t){this.clearFileTypeCache();const r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}},t.DidDeleteFilesFeature=class extends d{constructor(e){super(e,n.workspace.onDidDeleteFiles,o.DidDeleteFilesNotification.type,"didDelete","didDelete",(e=>e),e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=n.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,(e=>e)))}doSend(e,t){this.clearFileTypeCache();const r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};class h extends l{constructor(e,t,r,n,i,o,s){super(e,t,r,n,i),this._requestType=r,this._accessUri=o,this._createParams=s}async send(e){const t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const e=e=>this._client.sendRequest(this._requestType,this._createParams(e),e.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,e)}}}t.WillCreateFilesFeature=class extends h{constructor(e){super(e,n.workspace.onWillCreateFiles,o.WillCreateFilesRequest.type,"willCreate","willCreate",(e=>e),e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){const r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}},t.WillRenameFilesFeature=class extends h{constructor(e){super(e,n.workspace.onWillRenameFiles,o.WillRenameFilesRequest.type,"willRename","willRename",(e=>e.oldUri),e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){const r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}},t.WillDeleteFilesFeature=class extends h{constructor(e){super(e,n.workspace.onWillDeleteFiles,o.WillDeleteFilesRequest.type,"willDelete","willDelete",(e=>e),e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){const r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}}},9084:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystemWatcherFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);t.FileSystemWatcherFeature=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return i.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;const t=[];for(const r of e.registerOptions.watchers){const e=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(void 0===e)continue;let o=!0,s=!0,a=!0;void 0!==r.kind&&null!==r.kind&&(o=!!(r.kind&i.WatchKind.Create),s=!!(r.kind&i.WatchKind.Change),a=!!(r.kind&i.WatchKind.Delete));const c=n.workspace.createFileSystemWatcher(e,!o,!s,!a);this.hookListeners(c,o,s,a,t),t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let e of t)this.hookListeners(e,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,n,o){t&&e.onDidCreate((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Created})),null,o),r&&e.onDidChange((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Changed})),null,o),n&&e.onDidDelete((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Deleted})),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}clear(){this._watchers.forEach((e=>{for(let t of e)t.dispose()})),this._watchers.clear()}}},3963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[i.FoldingRangeKind.Comment,i.FoldingRangeKind.Imports,i.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1},(0,o.ensure)((0,o.ensure)(e,"workspace"),"foldingRange").refreshSupport=!0}initialize(e,t){this._client.onRequest(i.FoldingRangeRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeFoldingRange.fire()}));let[r,n]=this.getRegistration(t,e.foldingRangeProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r=new n.EventEmitter,o={onDidChangeFoldingRanges:r.event,provideFoldingRanges:(e,t,r)=>{const n=this._client,o=(e,t,r)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(i.FoldingRangeRequest.type,o,r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asFoldingRanges(e,r)),(e=>n.handleFailedRequest(i.FoldingRangeRequest.type,r,e,null)))},s=n.middleware;return s.provideFoldingRanges?s.provideFoldingRanges(e,t,r,o):o(e,0,r)}};return[n.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),o),{provider:o,onDidChangeFoldingRange:r}]}}t.FoldingRangeFeature=s},7298:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentOnTypeFormattingFeature=t.DocumentRangeFormattingFeature=t.DocumentFormattingFeature=void 0;const n=r(1398),i=r(7354),o=r(9032),s=r(4294);var a;!function(e){e.fromConfiguration=function(e){const t=n.workspace.getConfiguration("files",e);return{trimTrailingWhitespace:t.get("trimTrailingWhitespace"),trimFinalNewlines:t.get("trimFinalNewlines"),insertFinalNewline:t.get("insertFinalNewline")}}}(a||(a={}));class c extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.documentFormattingProvider);r&&this.register({id:o.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideDocumentFormattingEdits:(e,t,r)=>{const n=this._client,o=(e,t,r)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),options:n.code2ProtocolConverter.asFormattingOptions(t,a.fromConfiguration(e))};return n.sendRequest(i.DocumentFormattingRequest.type,o,r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asTextEdits(e,r)),(e=>n.handleFailedRequest(i.DocumentFormattingRequest.type,r,e,null)))},s=n.middleware;return s.provideDocumentFormattingEdits?s.provideDocumentFormattingEdits(e,t,r,o):o(e,t,r)}};return[n.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}}t.DocumentFormattingFeature=c;class l extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"rangeFormatting");t.dynamicRegistration=!0,t.rangesSupport=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);r&&this.register({id:o.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(e,t,r,n)=>{const o=this._client,s=(e,t,r,n)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),options:o.code2ProtocolConverter.asFormattingOptions(r,a.fromConfiguration(e))};return o.sendRequest(i.DocumentRangeFormattingRequest.type,s,n).then((e=>n.isCancellationRequested?null:o.protocol2CodeConverter.asTextEdits(e,n)),(e=>o.handleFailedRequest(i.DocumentRangeFormattingRequest.type,n,e,null)))},c=o.middleware;return c.provideDocumentRangeFormattingEdits?c.provideDocumentRangeFormattingEdits(e,t,r,n,s):s(e,t,r,n)}};return e.rangesSupport&&(r.provideDocumentRangesFormattingEdits=(e,t,r,n)=>{const o=this._client,s=(e,t,r,n)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),ranges:o.code2ProtocolConverter.asRanges(t),options:o.code2ProtocolConverter.asFormattingOptions(r,a.fromConfiguration(e))};return o.sendRequest(i.DocumentRangesFormattingRequest.type,s,n).then((e=>n.isCancellationRequested?null:o.protocol2CodeConverter.asTextEdits(e,n)),(e=>o.handleFailedRequest(i.DocumentRangesFormattingRequest.type,n,e,null)))},c=o.middleware;return c.provideDocumentRangesFormattingEdits?c.provideDocumentRangesFormattingEdits(e,t,r,n,s):s(e,t,r,n)}),[n.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}}t.DocumentRangeFormattingFeature=l;class u extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);r&&this.register({id:o.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideOnTypeFormattingEdits:(e,t,r,n,o)=>{const s=this._client,c=(e,t,r,n,o)=>{let c={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),position:s.code2ProtocolConverter.asPosition(t),ch:r,options:s.code2ProtocolConverter.asFormattingOptions(n,a.fromConfiguration(e))};return s.sendRequest(i.DocumentOnTypeFormattingRequest.type,c,o).then((e=>o.isCancellationRequested?null:s.protocol2CodeConverter.asTextEdits(e,o)),(e=>s.handleFailedRequest(i.DocumentOnTypeFormattingRequest.type,o,e,null)))},l=s.middleware;return l.provideOnTypeFormattingEdits?l.provideOnTypeFormattingEdits(e,t,r,n,o,c):c(e,t,r,n,o)}},o=e.moreTriggerCharacter||[];return[n.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.firstTriggerCharacter,...o),r]}}t.DocumentOnTypeFormattingFeature=u},1507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HoverFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.HoverRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[i.MarkupKind.Markdown,i.MarkupKind.PlainText]}initialize(e,t){const r=this.getRegistrationOptions(t,e.hoverProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideHover:(e,t,r)=>{const n=this._client,o=(e,t,r)=>n.sendRequest(i.HoverRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asHover(e)),(e=>n.handleFailedRequest(i.HoverRequest.type,r,e,null))),s=n.middleware;return s.provideHover?s.provideHover(e,t,r,o):o(e,t,r)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.HoverFeature=a},191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,n]=this.getRegistration(t,e.implementationProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r={provideImplementation:(e,t,r)=>{const n=this._client,o=(e,t,r)=>n.sendRequest(i.ImplementationRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asDefinitionResult(e,r)),(e=>n.handleFailedRequest(i.ImplementationRequest.type,r,e,null))),s=n.middleware;return s.provideImplementation?s.provideImplementation(e,t,r,o):o(e,t,r)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.ImplementationFeature=s},2767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintsFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.InlayHintRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,o.ensure)((0,o.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(i.InlayHintRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeInlayHints.fire()}));const[r,n]=this.getRegistration(t,e.inlayHintProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r=new n.EventEmitter,o={onDidChangeInlayHints:r.event,provideInlayHints:(e,t,r)=>{const n=this._client,o=async(e,t,r)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),range:n.code2ProtocolConverter.asRange(t)};try{const e=await n.sendRequest(i.InlayHintRequest.type,o,r);return r.isCancellationRequested?null:n.protocol2CodeConverter.asInlayHints(e,r)}catch(e){return n.handleFailedRequest(i.InlayHintRequest.type,r,e,null)}},s=n.middleware;return s.provideInlayHints?s.provideInlayHints(e,t,r,o):o(e,t,r)}};return o.resolveInlayHint=!0===e.resolveProvider?(e,t)=>{const r=this._client,n=async(e,t)=>{try{const n=await r.sendRequest(i.InlayHintResolveRequest.type,r.code2ProtocolConverter.asInlayHint(e),t);if(t.isCancellationRequested)return null;const o=r.protocol2CodeConverter.asInlayHint(n,t);return t.isCancellationRequested?null:o}catch(e){return r.handleFailedRequest(i.InlayHintResolveRequest.type,t,e,null)}},o=r.middleware;return o.resolveInlayHint?o.resolveInlayHint(e,t,n):n(e,t)}:void 0,[this.registerProvider(t,o),{provider:o,onDidChangeInlayHints:r}]}registerProvider(e,t){return n.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.InlayHintsFeature=s},3370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCompletionItemFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.InlineCompletionRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"inlineCompletion").dynamicRegistration=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.inlineCompletionProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideInlineCompletionItems:(e,t,r,n)=>{const o=this._client,s=this._client.middleware,a=(e,t,r,n)=>o.sendRequest(i.InlineCompletionRequest.type,o.code2ProtocolConverter.asInlineCompletionParams(e,t,r),n).then((e=>n.isCancellationRequested?null:o.protocol2CodeConverter.asInlineCompletionResult(e,n)),(e=>o.handleFailedRequest(i.InlineCompletionRequest.type,n,e,null)));return s.provideInlineCompletionItems?s.provideInlineCompletionItems(e,t,r,n,a):a(e,t,r,n)}};return[n.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}}t.InlineCompletionItemFeature=a},3131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.InlineValueRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(i.InlineValueRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeInlineValues.fire()}));const[r,n]=this.getRegistration(t,e.inlineValueProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r=new n.EventEmitter,o={onDidChangeInlineValues:r.event,provideInlineValues:(e,t,r,n)=>{const o=this._client,s=(e,t,r,n)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:o.code2ProtocolConverter.asInlineValueContext(r)};return o.sendRequest(i.InlineValueRequest.type,s,n).then((e=>n.isCancellationRequested?null:o.protocol2CodeConverter.asInlineValues(e,n)),(e=>o.handleFailedRequest(i.InlineValueRequest.type,n,e,null)))},a=o.middleware;return a.provideInlineValues?a.provideInlineValues(e,t,r,n,s):s(e,t,r,n)}};return[this.registerProvider(t,o),{provider:o,onDidChangeInlineValues:r}]}registerProvider(e,t){return n.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.InlineValueFeature=s},4913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"linkedEditingRange").dynamicRegistration=!0}initialize(e,t){let[r,n]=this.getRegistration(t,e.linkedEditingRangeProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r={provideLinkedEditingRanges:(e,t,r)=>{const n=this._client,o=(e,t,r)=>n.sendRequest(i.LinkedEditingRangeRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asLinkedEditingRanges(e,r)),(e=>n.handleFailedRequest(i.LinkedEditingRangeRequest.type,r,e,null))),s=n.middleware;return s.provideLinkedEditingRange?s.provideLinkedEditingRange(e,t,r,o):o(e,t,r)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.LinkedEditingFeature=s},1872:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDocumentSyncFeature=void 0;const n=r(1398),i=r(6045),o=r(7354),s=r(9032),a=r(8319);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var l,u,d,h,p;!function(e){let t;!function(t){function r(e,t){return e.map((e=>s(e,t)))}function i(e){return c(new Set,e)}function s(e,t){const r=o.NotebookCell.create(function(e){switch(e){case n.NotebookCellKind.Markup:return o.NotebookCellKind.Markup;case n.NotebookCellKind.Code:return o.NotebookCellKind.Code}}(e.kind),t.asUri(e.document.uri));return Object.keys(e.metadata).length>0&&(r.metadata=i(e.metadata)),void 0!==e.executionSummary&&a.number(e.executionSummary.executionOrder)&&a.boolean(e.executionSummary.success)&&(r.executionSummary={executionOrder:e.executionSummary.executionOrder,success:e.executionSummary.success}),r}function c(e,t){if(e.has(t))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(t)){const r=[];for(const n of t)if(null!==n&&"object"==typeof n||Array.isArray(n))r.push(c(e,n));else{if(n instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");r.push(n)}return r}{const r=Object.keys(t),n=Object.create(null);for(const i of r){const r=t[i];if(null!==r&&"object"==typeof r||Array.isArray(r))n[i]=c(e,r);else{if(r instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");n[i]=r}}return n}}t.asVersionedNotebookDocumentIdentifier=function(e,t){return{version:e.version,uri:t.asUri(e.uri)}},t.asNotebookDocument=function(e,t,n){const s=o.NotebookDocument.create(n.asUri(e.uri),e.notebookType,e.version,r(t,n));return Object.keys(e.metadata).length>0&&(s.metadata=i(e.metadata)),s},t.asNotebookCells=r,t.asMetadata=i,t.asNotebookCell=s,t.asTextContentChange=function(e,t){const r=t.asChangeTextDocumentParams(e,e.document.uri,e.document.version);return{document:r.textDocument,changes:r.contentChanges}},t.asNotebookDocumentChangeEvent=function(t,r){const n=Object.create(null);if(t.metadata&&(n.metadata=e.c2p.asMetadata(t.metadata)),void 0!==t.cells){const i=Object.create(null),o=t.cells;o.structure&&(i.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:void 0!==o.structure.array.cells?o.structure.array.cells.map((t=>e.c2p.asNotebookCell(t,r))):void 0},didOpen:void 0!==o.structure.didOpen?o.structure.didOpen.map((e=>r.asOpenTextDocumentParams(e.document).textDocument)):void 0,didClose:void 0!==o.structure.didClose?o.structure.didClose.map((e=>r.asCloseTextDocumentParams(e.document).textDocument)):void 0}),void 0!==o.data&&(i.data=o.data.map((t=>e.c2p.asNotebookCell(t,r)))),void 0!==o.textContent&&(i.textContent=o.textContent.map((t=>e.c2p.asTextContentChange(t,r)))),Object.keys(i).length>0&&(n.cells=i)}return n}}(t=e.c2p||(e.c2p={}))}(l||(l={})),function(e){function t(e,t,n=!0){return!(e.kind!==t.kind||e.document.uri.toString()!==t.document.uri.toString()||e.document.languageId!==t.document.languageId||!function(e,t){return e===t||void 0!==e&&void 0!==t&&(e.executionOrder===t.executionOrder&&e.success===t.success&&function(e,t){return e===t||void 0!==e&&void 0!==t&&(e.startTime===t.startTime&&e.endTime===t.endTime)}(e.timing,t.timing))}(e.executionSummary,t.executionSummary))&&(!n||n&&r(e.metadata,t.metadata))}function r(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;const i=Array.isArray(e),o=Array.isArray(t);if(i!==o)return!1;if(i&&o){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}if(n(e)&&n(t)){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(n.sort(),i.sort(),!r(n,i))return!1;for(let i=0;i<n.length;i++){const o=n[i];if(!r(e[o],t[o]))return!1}return!0}return!1}function n(e){return null!==e&&"object"==typeof e}e.computeDiff=function(e,r,n){const i=e.length,o=r.length;let s=0;for(;s<o&&s<i&&t(e[s],r[s],n);)s++;if(s<o&&s<i){let a=i-1,c=o-1;for(;a>=0&&c>=0&&t(e[a],r[c],n);)a--,c--;const l=a+1-s,u=s===c+1?void 0:r.slice(s,c+1);return void 0!==u?{start:s,deleteCount:l,cells:u}:{start:s,deleteCount:l}}return s<o?{start:s,deleteCount:0,cells:r.slice(s)}:s<i?{start:s,deleteCount:i-s}:void 0},e.isObjectLiteral=n}(u||(u={})),function(e){e.matchNotebook=function(e,t){if("string"==typeof e)return"*"===e||t.notebookType===e;if(void 0!==e.notebookType&&"*"!==e.notebookType&&t.notebookType!==e.notebookType)return!1;const r=t.uri;if(void 0!==e.scheme&&"*"!==e.scheme&&r.scheme!==e.scheme)return!1;if(void 0!==e.pattern){const t=new i.Minimatch(e.pattern,{noext:!0});if(!t.makeRe())return!1;if(!t.match(r.fsPath))return!1}return!0}}(d||(d={})),function(e){function t(e,t,r,n){return void 0===t&&void 0===r?{notebook:e,language:n}:{notebook:{notebookType:e,scheme:t,pattern:r},language:n}}e.asDocumentSelector=function(e){const r=e.notebookSelector,n=[];for(const e of r){const r=("string"==typeof e.notebook?e.notebook:e.notebook?.notebookType)??"*",i="string"==typeof e.notebook?void 0:e.notebook?.scheme,o="string"==typeof e.notebook?void 0:e.notebook?.pattern;if(void 0!==e.cells)for(const s of e.cells)n.push(t(r,i,o,s.language));else n.push(t(r,i,o,void 0))}return n}}(h||(h={})),function(e){e.create=function(e){return{cells:e,uris:new Set(e.map((e=>e.document.uri.toString())))}}}(p||(p={}));class f{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(h.asDocumentSelector(t)),n.workspace.onDidOpenNotebookDocument((e=>{this.notebookDidOpen.add(e.uri.toString()),this.didOpen(e)}),void 0,this.disposables);for(const e of n.workspace.notebookDocuments)this.notebookDidOpen.add(e.uri.toString()),this.didOpen(e);n.workspace.onDidChangeNotebookDocument((e=>this.didChangeNotebookDocument(e)),void 0,this.disposables),!0===this.options.save&&n.workspace.onDidSaveNotebookDocument((e=>this.didSave(e)),void 0,this.disposables),n.workspace.onDidCloseNotebookDocument((e=>{this.didClose(e),this.notebookDidOpen.delete(e.uri.toString())}),void 0,this.disposables)}getState(){for(const e of n.workspace.notebookDocuments)if(void 0!==this.getMatchingCells(e))return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return n.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(0===n.languages.match(this.selector,t.document))return;if(!this.notebookDidOpen.has(e.uri.toString()))return;const r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(void 0!==r){const n=r.uris.has(t.document.uri.toString());if(i&&n||!i&&!n)return;if(i){const t=this.getMatchingCells(e);if(void 0!==t){const n=this.asNotebookDocumentChangeEvent(e,void 0,r,t);void 0!==n&&this.doSendChange(n,t).catch((()=>{}))}}}else i&&this.doSendOpen(e,[t]).catch((()=>{}))}didChangeNotebookCellTextDocument(e,t){0!==n.languages.match(this.selector,t.document)&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch((()=>{}))}didCloseNotebookCellTextDocument(e,t){const r=this.notebookSyncInfo.get(e.uri.toString());if(void 0===r)return;const n=t.document.uri,i=r.cells.findIndex((e=>e.document.uri.toString()===n.toString()));if(-1!==i)if(0===i&&1===r.cells.length)this.doSendClose(e,r.cells).catch((()=>{}));else{const t=r.cells.slice(),n=t.splice(i,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:i,deleteCount:1},didClose:n}}},t).catch((()=>{}))}}dispose(){for(const e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(void 0!==r)if(void 0!==t){const n=this.asNotebookDocumentChangeEvent(e,void 0,r,t);void 0!==n&&this.doSendChange(n,t).catch((()=>{}))}else this.doSendClose(e,[]).catch((()=>{}));else{if(void 0===t)return;this.doSendOpen(e,t).catch((()=>{}))}}didChangeNotebookDocument(e){const t=e.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(void 0===r){if(0===e.contentChanges.length)return;const n=this.getMatchingCells(t);if(void 0===n)return;this.didOpen(t,n,r)}else{const n=this.getMatchingCells(t);if(void 0===n)return void this.didClose(t,r);const i=this.asNotebookDocumentChangeEvent(e.notebook,e,r,n);void 0!==i&&this.doSendChange(i,n).catch((()=>{}))}}didSave(e){void 0!==this.notebookSyncInfo.get(e.uri.toString())&&this.doSendSave(e).catch((()=>{}))}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(void 0===t)return;const r=e.getCells().filter((e=>t.uris.has(e.document.uri.toString())));this.doSendClose(e,r).catch((()=>{}))}async sendDidOpenNotebookDocument(e){const t=this.getMatchingCells(e);if(void 0!==t)return this.doSendOpen(e,t)}async doSendOpen(e,t){const r=async(e,t)=>{const r=l.c2p.asNotebookDocument(e,t,this.client.code2ProtocolConverter),n=t.map((e=>this.client.code2ProtocolConverter.asTextDocumentItem(e.document)));try{await this.client.sendNotification(o.DidOpenNotebookDocumentNotification.type,{notebookDocument:r,cellTextDocuments:n})}catch(e){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",e),e}},n=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),p.create(t)),void 0!==n?.didOpen?n.didOpen(e,t,r):r(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){const r=async e=>{try{await this.client.sendNotification(o.DidChangeNotebookDocumentNotification.type,{notebookDocument:l.c2p.asVersionedNotebookDocumentIdentifier(e.notebook,this.client.code2ProtocolConverter),change:l.c2p.asNotebookDocumentChangeEvent(e,this.client.code2ProtocolConverter)})}catch(e){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",e),e}},n=this.client.middleware?.notebooks;return void 0!==e.cells?.structure&&this.notebookSyncInfo.set(e.notebook.uri.toString(),p.create(t??[])),void 0!==n?.didChange?n?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){const t=async e=>{try{await this.client.sendNotification(o.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(e.uri)}})}catch(e){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",e),e}},r=this.client.middleware?.notebooks;return void 0!==r?.didSave?r.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){const r=async(e,t)=>{try{await this.client.sendNotification(o.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(e.uri)},cellTextDocuments:t.map((e=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document)))})}catch(e){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",e),e}},n=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),void 0!==n?.didClose?n.didClose(e,t,r):r(e,t)}asNotebookDocumentChangeEvent(e,t,r,n){if(void 0!==t&&t.notebook!==e)throw new Error("Notebook must be identical");const i={notebook:e};let o;if(void 0!==t?.metadata&&(i.metadata=l.c2p.asMetadata(t.metadata)),void 0!==t?.cellChanges&&t.cellChanges.length>0){const e=[];o=new Set(n.map((e=>e.document.uri.toString())));for(const r of t.cellChanges)!o.has(r.cell.document.uri.toString())||void 0===r.executionSummary&&void 0===r.metadata||e.push(r.cell);e.length>0&&(i.cells=i.cells??{},i.cells.data=e)}if((void 0!==t?.contentChanges&&t.contentChanges.length>0||void 0===t)&&void 0!==r&&void 0!==n){const e=r.cells,t=n,o=u.computeDiff(e,t,!1);let s,a;if(void 0!==o){s=void 0===o.cells?new Map:new Map(o.cells.map((e=>[e.document.uri.toString(),e]))),a=0===o.deleteCount?new Map:new Map(e.slice(o.start,o.start+o.deleteCount).map((e=>[e.document.uri.toString(),e])));for(const e of Array.from(a.keys()))s.has(e)&&(a.delete(e),s.delete(e));i.cells=i.cells??{};const t=[],r=[];if(s.size>0||a.size>0){for(const e of s.values())t.push(e);for(const e of a.values())r.push(e)}i.cells.structure={array:o,didOpen:t,didClose:r}}}return Object.keys(i).length>1?i:void 0}getMatchingCells(e,t=e.getCells()){if(void 0!==this.options.notebookSelector)for(const r of this.options.notebookSelector)if(void 0===r.notebook||d.matchNotebook(r.notebook,e)){const n=this.filterCells(e,t,r.cells);return 0===n.length?void 0:n}}cellMatches(e,t){const r=this.getMatchingCells(e,[t]);return void 0!==r&&r[0]===t}filterCells(e,t,r){const n=void 0!==r?t.filter((e=>{const t=e.document.languageId;return r.some((e=>"*"===e.language||t===e.language))})):t;return"function"==typeof this.client.clientOptions.notebookDocumentOptions?.filterCells?this.client.clientOptions.notebookDocumentOptions.filterCells(e,n):n}}class m{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=o.NotebookDocumentSyncRegistrationType.type,n.workspace.onDidOpenTextDocument((e=>{if(e.uri.scheme!==m.CellScheme)return;const[t,r]=this.findNotebookDocumentAndCell(e);if(void 0!==t&&void 0!==r)for(const e of this.registrations.values())e instanceof f&&e.didOpenNotebookCellTextDocument(t,r)})),n.workspace.onDidChangeTextDocument((e=>{if(0===e.contentChanges.length)return;const t=e.document;if(t.uri.scheme!==m.CellScheme)return;const[r]=this.findNotebookDocumentAndCell(t);if(void 0!==r)for(const t of this.registrations.values())t instanceof f&&t.didChangeNotebookCellTextDocument(r,e)})),n.workspace.onDidCloseTextDocument((e=>{if(e.uri.scheme!==m.CellScheme)return;const[t,r]=this.findNotebookDocumentAndCell(e);if(void 0!==t&&void 0!==r)for(const e of this.registrations.values())e instanceof f&&e.didCloseNotebookCellTextDocument(t,r)}))}getState(){if(0===this.registrations.size)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(const e of this.registrations.values()){const t=e.getState();if("document"===t.kind&&!0===t.registrations&&!0===t.matches)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){const t=c(c(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){const t=e.notebookDocumentSync;void 0!==t&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(h.asDocumentSelector(t)))}initialize(e){const t=e.notebookDocumentSync;if(void 0===t)return;const r=t.id??s.generateUuid();this.register({id:r,registerOptions:t})}register(e){const t=new f(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){const t=this.registrations.get(e);t&&t.dispose()}clear(){for(const e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==m.CellScheme)return!1;if(void 0!==this.dedicatedChannel&&n.languages.match(this.dedicatedChannel,e)>0)return!0;for(const t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(const t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){const t=e.uri.toString();for(const e of n.workspace.notebookDocuments)for(const r of e.getCells())if(r.document.uri.toString()===t)return[e,r];return[void 0,void 0]}}t.NotebookDocumentSyncFeature=m,m.CellScheme="vscode-notebook-cell"},9870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressFeature=void 0;const n=r(7354),i=r(9403);t.ProgressFeature=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:n.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){var t,r;(t=e,r="window",void 0===t[r]&&(t[r]=Object.create(null)),t[r]).workDoneProgress=!0}initialize(){const e=this._client,t=e=>{this.activeParts.delete(e)};e.onRequest(n.WorkDoneProgressCreateRequest.type,(e=>{this.activeParts.add(new i.ProgressPart(this._client,e.token,t))}))}clear(){for(const e of this.activeParts)e.done();this.activeParts.clear()}}},9403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressPart=void 0;const n=r(1398),i=r(7354),o=r(8319);t.ProgressPart=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(i.WorkDoneProgress.type,this._token,(e=>{switch(e.kind){case"begin":this.begin(e);break;case"report":this.report(e);break;case"end":this.done(),r&&r(this)}}))}begin(e){this._infinite=void 0===e.percentage,void 0!==this._lspProgressDisposable&&n.window.withProgress({location:n.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},(async(t,r)=>{if(void 0!==this._lspProgressDisposable)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested((()=>{this._client.sendNotification(i.WorkDoneProgressCancelNotification.type,{token:this._token})})),this.report(e),new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}))}report(e){if(this._infinite&&o.string(e.message))void 0!==this._progress&&this._progress.report({message:e.message});else if(o.number(e.percentage)){const t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,void 0!==this._progress&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),void 0!==this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),void 0!==this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){void 0!==this._lspProgressDisposable&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),void 0!==this._tokenDisposable&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}}},8717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1398);class i extends n.CallHierarchyItem{constructor(e,t,r,n,i,o,s){super(e,t,r,n,i,o),void 0!==s&&(this.data=s)}}t.default=i},9206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1398);class i extends n.CodeAction{constructor(e,t){super(e),this.data=t}}t.default=i},5588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1398);class i extends n.CodeLens{constructor(e){super(e)}}t.default=i},7652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1398);class i extends n.CompletionItem{constructor(e){super(e)}}t.default=i},7605:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=void 0;const n=r(1398),i=r(7354),o=r(8319),s=r(483),a=r(7652),c=r(5588),l=r(7424),u=r(9206),d=r(7894),h=r(8717),p=r(7321),f=r(6144),m=r(7511),g=r(7354);var y;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(y||(y={})),t.createConverter=function(e,t,r){const v=e||(e=>n.Uri.parse(e));function _(e){return v(e)}function b(e){let t=new d.ProtocolDiagnostic(E(e.range),e.message,T(e.severity),e.data);if(void 0!==e.code)if("string"==typeof e.code||"number"==typeof e.code)i.CodeDescription.is(e.codeDescription)?t.code={value:e.code,target:_(e.codeDescription.href)}:t.code=e.code;else if(d.DiagnosticCode.is(e.code)){t.hasDiagnosticCode=!0;const r=e.code;t.code={value:r.value,target:_(r.target)}}return e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=function(e){const t=new Array(e.length);for(let r=0;r<e.length;r++){const i=e[r];t[r]=new n.DiagnosticRelatedInformation(F(i.location),i.message)}return t}(e.relatedInformation)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let r of e){let e=w(r);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),t}function w(e){switch(e){case i.DiagnosticTag.Unnecessary:return n.DiagnosticTag.Unnecessary;case i.DiagnosticTag.Deprecated:return n.DiagnosticTag.Deprecated;default:return}}function S(e){return e?new n.Position(e.line,e.character):void 0}function E(e){return e?new n.Range(e.start.line,e.start.character,e.end.line,e.end.character):void 0}async function C(e,t){return s.map(e,(e=>new n.Range(e.start.line,e.start.character,e.end.line,e.end.character)),t)}function T(e){if(null==e)return n.DiagnosticSeverity.Error;switch(e){case i.DiagnosticSeverity.Error:return n.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return n.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return n.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return n.DiagnosticSeverity.Hint}return n.DiagnosticSeverity.Error}function k(e){if(o.string(e))return e;switch(e.kind){case i.MarkupKind.Markdown:return P(e.value);case i.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function P(e){let o;if(void 0===e||"string"==typeof e)o=new n.MarkdownString(e);else switch(e.kind){case i.MarkupKind.Markdown:o=new n.MarkdownString(e.value);break;case i.MarkupKind.PlainText:o=new n.MarkdownString,o.appendText(e.value);break;default:o=new n.MarkdownString,o.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`)}return o.isTrusted=t,o.supportHtml=r,o}function R(e){if(e===i.CompletionItemTag.Deprecated)return n.CompletionItemTag.Deprecated}function x(e,t,r,s,c,l){const u=function(e){if(null==e)return[];const t=[];for(const r of e){const e=R(r);void 0!==e&&t.push(e)}return t}(e.tags),d=function(e){return i.CompletionItemLabelDetails.is(e.labelDetails)?{label:e.label,detail:e.labelDetails.detail,description:e.labelDetails.description}:e.label}(e),h=new a.default(d);e.detail&&(h.detail=e.detail),e.documentation&&(h.documentation=k(e.documentation),h.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(h.filterText=e.filterText);const p=function(e,t,r){const o=e.insertTextFormat??r;if(void 0!==e.textEdit||void 0!==t){const[r,a]=void 0!==e.textEdit?(s=e.textEdit,i.InsertReplaceEdit.is(s)?[{inserting:E(s.insert),replacing:E(s.replace)},s.newText]:[E(s.range),s.newText]):[t,e.textEditText??e.label];return o===i.InsertTextFormat.Snippet?{text:new n.SnippetString(a),range:r,fromEdit:!0}:{text:a,range:r,fromEdit:!0}}return e.insertText?o===i.InsertTextFormat.Snippet?{text:new n.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0;var s}(e,r,c);if(p&&(h.insertText=p.text,h.range=p.range,h.fromEdit=p.fromEdit),o.number(e.kind)){let[t,r]=(f=e.kind,i.CompletionItemKind.Text<=f&&f<=i.CompletionItemKind.TypeParameter?[f-1,void 0]:[n.CompletionItemKind.Text,f]);h.kind=t,r&&(h.originalItemKind=r)}var f;e.sortText&&(h.sortText=e.sortText),e.additionalTextEdits&&(h.additionalTextEdits=D(e.additionalTextEdits));const m=void 0!==e.commitCharacters?o.stringArray(e.commitCharacters)?e.commitCharacters:void 0:t;m&&(h.commitCharacters=m.slice()),e.command&&(h.command=z(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(h.deprecated=e.deprecated,!0===e.deprecated&&u.push(n.CompletionItemTag.Deprecated)),!0!==e.preselect&&!1!==e.preselect||(h.preselect=e.preselect);const g=e.data??l;void 0!==g&&(h.data=g),u.length>0&&(h.tags=u);const y=e.insertTextMode??s;return void 0!==y&&(h.insertTextMode=y,y===i.InsertTextMode.asIs&&(h.keepWhitespace=!0)),h}function M(e){if(e)return new n.TextEdit(E(e.range),e.newText)}async function O(e,t){if(e)return s.map(e,M,t)}function D(e){if(!e)return;const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=M(e[r]);return t}async function I(e,t){return s.mapAsync(e,A,t)}async function A(e,t){let r=new n.SignatureInformation(e.label);return void 0!==e.documentation&&(r.documentation=k(e.documentation)),void 0!==e.parameters&&(r.parameters=await N(e.parameters,t)),void 0!==e.activeParameter&&(r.activeParameter=e.activeParameter),r}function N(e,t){return s.map(e,L,t)}function L(e){let t=new n.ParameterInformation(e.label);return e.documentation&&(t.documentation=k(e.documentation)),t}function F(e){return e?new n.Location(v(e.uri),E(e.range)):void 0}function j(e){if(!e)return;let t={targetUri:v(e.targetUri),targetRange:E(e.targetRange),originSelectionRange:E(e.originSelectionRange),targetSelectionRange:E(e.targetSelectionRange)};if(!t.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return t}async function q(e,t){if(e){if(o.array(e)){if(0===e.length)return[];if(i.LocationLink.is(e[0])){const r=e;return s.map(r,j,t)}{const r=e;return s.map(r,F,t)}}return i.LocationLink.is(e)?[j(e)]:F(e)}}function U(e){let t=new n.DocumentHighlight(E(e.range));return o.number(e.kind)&&(t.kind=B(e.kind)),t}function B(e){switch(e){case i.DocumentHighlightKind.Text:return n.DocumentHighlightKind.Text;case i.DocumentHighlightKind.Read:return n.DocumentHighlightKind.Read;case i.DocumentHighlightKind.Write:return n.DocumentHighlightKind.Write}return n.DocumentHighlightKind.Text}function $(e){return e<=i.SymbolKind.TypeParameter?e-1:n.SymbolKind.Property}function W(e){if(e===i.SymbolTag.Deprecated)return n.SymbolTag.Deprecated}function H(e){if(null==e)return;const t=[];for(const r of e){const e=W(r);void 0!==e&&t.push(e)}return 0===t.length?void 0:t}function V(e){const t=e.data,r=e.location,i=void 0===r.range||void 0!==t?new f.default(e.name,$(e.kind),e.containerName??"",void 0===r.range?v(r.uri):new n.Location(v(e.location.uri),E(r.range)),t):new n.SymbolInformation(e.name,$(e.kind),e.containerName??"",new n.Location(v(e.location.uri),E(r.range)));return K(i,e),i}function G(e){let t=new n.DocumentSymbol(e.name,e.detail||"",$(e.kind),E(e.range),E(e.selectionRange));if(K(t,e),void 0!==e.children&&e.children.length>0){let r=[];for(let t of e.children)r.push(G(t));t.children=r}return t}function K(e,t){e.tags=H(t.tags),t.deprecated&&(e.tags?e.tags.includes(n.SymbolTag.Deprecated)||(e.tags=e.tags.concat(n.SymbolTag.Deprecated)):e.tags=[n.SymbolTag.Deprecated])}function z(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const X=new Map;function J(e){if(null==e)return;let t=X.get(e);if(t)return t;let r=e.split(".");t=n.CodeActionKind.Empty;for(let e of r)t=t.append(e);return t}async function Y(e,t){if(null==e)return;let r=new u.default(e.title,e.data);return void 0!==e.kind&&(r.kind=J(e.kind)),void 0!==e.diagnostics&&(r.diagnostics=function(e){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=b(e[r]);return t}(e.diagnostics)),void 0!==e.edit&&(r.edit=await Z(e.edit,t)),void 0!==e.command&&(r.command=z(e.command)),void 0!==e.isPreferred&&(r.isPreferred=e.isPreferred),void 0!==e.disabled&&(r.disabled={reason:e.disabled.reason}),r}function Q(e){if(!e)return;let t=new c.default(E(e.range));return e.command&&(t.command=z(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}async function Z(e,t){if(!e)return;const r=new Map;if(void 0!==e.changeAnnotations){const n=e.changeAnnotations;await s.forEach(Object.keys(n),(e=>{const t=function(e){if(void 0!==e)return{label:e.label,needsConfirmation:!!e.needsConfirmation,description:e.description}}(n[e]);r.set(e,t)}),t)}const o=e=>void 0===e?void 0:r.get(e),a=new n.WorkspaceEdit;if(e.documentChanges){const r=e.documentChanges;await s.forEach(r,(e=>{if(i.CreateFile.is(e))a.createFile(v(e.uri),e.options,o(e.annotationId));else if(i.RenameFile.is(e))a.renameFile(v(e.oldUri),v(e.newUri),e.options,o(e.annotationId));else if(i.DeleteFile.is(e))a.deleteFile(v(e.uri),e.options,o(e.annotationId));else{if(!i.TextDocumentEdit.is(e))throw new Error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`);{const t=v(e.textDocument.uri);for(const r of e.edits)i.AnnotatedTextEdit.is(r)?a.replace(t,E(r.range),r.newText,o(r.annotationId)):a.replace(t,E(r.range),r.newText)}}}),t)}else if(e.changes){const r=e.changes;await s.forEach(Object.keys(r),(e=>{a.set(v(e),D(r[e]))}),t)}return a}function ee(e){let t=E(e.range),r=e.target?_(e.target):void 0,n=new l.default(t,r);return void 0!==e.tooltip&&(n.tooltip=e.tooltip),void 0!==e.data&&null!==e.data&&(n.data=e.data),n}function te(e){return new n.Color(e.red,e.green,e.blue,e.alpha)}function re(e){return new n.ColorInformation(E(e.range),te(e.color))}function ne(e){let t=new n.ColorPresentation(e.label);return t.additionalTextEdits=D(e.additionalTextEdits),e.textEdit&&(t.textEdit=M(e.textEdit)),t}function ie(e){if(e)switch(e){case i.FoldingRangeKind.Comment:return n.FoldingRangeKind.Comment;case i.FoldingRangeKind.Imports:return n.FoldingRangeKind.Imports;case i.FoldingRangeKind.Region:return n.FoldingRangeKind.Region}}function oe(e){return new n.FoldingRange(e.startLine,e.endLine,ie(e.kind))}function se(e){return new n.SelectionRange(E(e.range),e.parent?se(e.parent):void 0)}function ae(e){return i.InlineValueText.is(e)?new n.InlineValueText(E(e.range),e.text):i.InlineValueVariableLookup.is(e)?new n.InlineValueVariableLookup(E(e.range),e.variableName,e.caseSensitiveLookup):new n.InlineValueEvaluatableExpression(E(e.range),e.expression)}async function ce(e,t){const r="string"==typeof e.label?e.label:await s.map(e.label,le,t),n=new m.default(S(e.position),r);return void 0!==e.kind&&(n.kind=e.kind),void 0!==e.textEdits&&(n.textEdits=await O(e.textEdits,t)),void 0!==e.tooltip&&(n.tooltip=ue(e.tooltip)),void 0!==e.paddingLeft&&(n.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(n.paddingRight=e.paddingRight),void 0!==e.data&&(n.data=e.data),n}function le(e){const t=new n.InlayHintLabelPart(e.value);return void 0!==e.location&&(t.location=F(e.location)),void 0!==e.tooltip&&(t.tooltip=ue(e.tooltip)),void 0!==e.command&&(t.command=z(e.command)),t}function ue(e){return"string"==typeof e?e:P(e)}function de(e){if(null===e)return;const t=new h.default($(e.kind),e.name,e.detail||"",_(e.uri),E(e.range),E(e.selectionRange),e.data);return void 0!==e.tags&&(t.tags=H(e.tags)),t}async function he(e,t){return new n.CallHierarchyIncomingCall(de(e.from),await C(e.fromRanges,t))}async function pe(e,t){return new n.CallHierarchyOutgoingCall(de(e.to),await C(e.fromRanges,t))}function fe(e){return new n.SemanticTokensEdit(e.start,e.deleteCount,void 0!==e.data?new Uint32Array(e.data):void 0)}function me(e){if(null===e)return;let t=new p.default($(e.kind),e.name,e.detail||"",_(e.uri),E(e.range),E(e.selectionRange),e.data);return void 0!==e.tags&&(t.tags=H(e.tags)),t}function ge(e){let t,r;t="string"==typeof e.insertText?e.insertText:new n.SnippetString(e.insertText.value),e.command&&(r=z(e.command));const i=new n.InlineCompletionItem(t,E(e.range),r);return e.filterText&&(i.filterText=e.filterText),i}return X.set(i.CodeActionKind.Empty,n.CodeActionKind.Empty),X.set(i.CodeActionKind.QuickFix,n.CodeActionKind.QuickFix),X.set(i.CodeActionKind.Refactor,n.CodeActionKind.Refactor),X.set(i.CodeActionKind.RefactorExtract,n.CodeActionKind.RefactorExtract),X.set(i.CodeActionKind.RefactorInline,n.CodeActionKind.RefactorInline),X.set(i.CodeActionKind.RefactorRewrite,n.CodeActionKind.RefactorRewrite),X.set(i.CodeActionKind.Source,n.CodeActionKind.Source),X.set(i.CodeActionKind.SourceOrganizeImports,n.CodeActionKind.SourceOrganizeImports),{asUri:_,asDocumentSelector:function(e){const t=[];for(const r of e)if("string"==typeof r)t.push(r);else if(g.NotebookCellTextDocumentFilter.is(r))if("string"==typeof r.notebook)t.push({notebookType:r.notebook,language:r.language});else{const e=r.notebook.notebookType??"*";t.push({notebookType:e,scheme:r.notebook.scheme,pattern:r.notebook.pattern,language:r.language})}else g.TextDocumentFilter.is(r)&&t.push({language:r.language,scheme:r.scheme,pattern:r.pattern});return t},asDiagnostics:async function(e,t){return s.map(e,b,t)},asDiagnostic:b,asRange:E,asRanges:C,asPosition:S,asDiagnosticSeverity:T,asDiagnosticTag:w,asHover:function(e){if(e)return new n.Hover(function(e){if(o.string(e))return P(e);if(y.is(e))return P().appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let r of e){let e=P();y.is(r)?e.appendCodeblock(r.value,r.language):e.appendMarkdown(r),t.push(e)}return t}return P(e)}(e.contents),E(e.range))},asCompletionResult:async function(e,t,r){if(!e)return;if(Array.isArray(e))return s.map(e,(e=>x(e,t)),r);const o=e,{defaultRange:a,commitCharacters:c}=function(e,t){const r=e.itemDefaults?.editRange,n=e.itemDefaults?.commitCharacters??t;return i.Range.is(r)?{defaultRange:E(r),commitCharacters:n}:void 0!==r?{defaultRange:{inserting:E(r.insert),replacing:E(r.replace)},commitCharacters:n}:{defaultRange:void 0,commitCharacters:n}}(o,t),l=await s.map(o.items,(e=>x(e,c,a,o.itemDefaults?.insertTextMode,o.itemDefaults?.insertTextFormat,o.itemDefaults?.data)),r);return new n.CompletionList(l,o.isIncomplete)},asCompletionItem:x,asTextEdit:M,asTextEdits:O,asSignatureHelp:async function(e,t){if(!e)return;let r=new n.SignatureHelp;return o.number(e.activeSignature)?r.activeSignature=e.activeSignature:r.activeSignature=0,o.number(e.activeParameter)?r.activeParameter=e.activeParameter:r.activeParameter=0,e.signatures&&(r.signatures=await I(e.signatures,t)),r},asSignatureInformations:I,asSignatureInformation:A,asParameterInformations:N,asParameterInformation:L,asDeclarationResult:async function(e,t){if(e)return q(e,t)},asDefinitionResult:async function(e,t){if(e)return q(e,t)},asLocation:F,asReferences:async function(e,t){if(e)return s.map(e,F,t)},asDocumentHighlights:async function(e,t){if(e)return s.map(e,U,t)},asDocumentHighlight:U,asDocumentHighlightKind:B,asSymbolKind:$,asSymbolTag:W,asSymbolTags:H,asSymbolInformations:async function(e,t){if(e)return s.map(e,V,t)},asSymbolInformation:V,asDocumentSymbols:async function(e,t){if(null!=e)return s.map(e,G,t)},asDocumentSymbol:G,asCommand:z,asCommands:async function(e,t){if(e)return s.map(e,z,t)},asCodeAction:Y,asCodeActionKind:J,asCodeActionKinds:function(e){if(null!=e)return e.map((e=>J(e)))},asCodeActionResult:function(e,t){return s.mapAsync(e,(async e=>i.Command.is(e)?z(e):Y(e,t)),t)},asCodeLens:Q,asCodeLenses:async function(e,t){if(e)return s.map(e,Q,t)},asWorkspaceEdit:Z,asDocumentLink:ee,asDocumentLinks:async function(e,t){if(e)return s.map(e,ee,t)},asFoldingRangeKind:ie,asFoldingRange:oe,asFoldingRanges:async function(e,t){if(e)return s.map(e,oe,t)},asColor:te,asColorInformation:re,asColorInformations:async function(e,t){if(e)return s.map(e,re,t)},asColorPresentation:ne,asColorPresentations:async function(e,t){if(e)return s.map(e,ne,t)},asSelectionRange:se,asSelectionRanges:async function(e,t){return Array.isArray(e)?s.map(e,se,t):[]},asInlineValue:ae,asInlineValues:async function(e,t){return Array.isArray(e)?s.map(e,ae,t):[]},asInlayHint:ce,asInlayHints:async function(e,t){if(Array.isArray(e))return s.mapAsync(e,ce,t)},asSemanticTokensLegend:function(e){return e},asSemanticTokens:async function(e,t){if(null!=e)return new n.SemanticTokens(new Uint32Array(e.data),e.resultId)},asSemanticTokensEdit:fe,asSemanticTokensEdits:async function(e,t){if(null!=e)return new n.SemanticTokensEdits(e.edits.map(fe),e.resultId)},asCallHierarchyItem:de,asCallHierarchyItems:async function(e,t){if(null!==e)return s.map(e,de,t)},asCallHierarchyIncomingCall:he,asCallHierarchyIncomingCalls:async function(e,t){if(null!==e)return s.mapAsync(e,he,t)},asCallHierarchyOutgoingCall:pe,asCallHierarchyOutgoingCalls:async function(e,t){if(null!==e)return s.mapAsync(e,pe,t)},asLinkedEditingRanges:async function(e,t){if(null!=e)return new n.LinkedEditingRanges(await C(e.ranges,t),function(e){if(null!=e)return new RegExp(e)}(e.wordPattern))},asTypeHierarchyItem:me,asTypeHierarchyItems:async function(e,t){if(null!==e)return s.map(e,me,t)},asGlobPattern:function(e){if(o.string(e))return e;if(i.RelativePattern.is(e)){if(i.URI.is(e.baseUri))return new n.RelativePattern(_(e.baseUri),e.pattern);if(i.WorkspaceFolder.is(e.baseUri)){const t=n.workspace.getWorkspaceFolder(_(e.baseUri.uri));return void 0!==t?new n.RelativePattern(t,e.pattern):void 0}}},asInlineCompletionResult:async function(e,t){if(!e)return;if(Array.isArray(e))return s.map(e,(e=>ge(e)),t);const r=e,i=await s.map(r.items,(e=>ge(e)),t);return new n.InlineCompletionList(i)},asInlineCompletionItem:ge}}},7894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolDiagnostic=t.DiagnosticCode=void 0;const n=r(1398),i=r(8319);var o;!function(e){e.is=function(e){const t=e;return null!=t&&(i.number(t.value)||i.string(t.value))&&i.string(t.target)}}(o||(t.DiagnosticCode=o={}));class s extends n.Diagnostic{constructor(e,t,r,n){super(e,t,r),this.data=n,this.hasDiagnosticCode=!1}}t.ProtocolDiagnostic=s},7424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1398);class i extends n.DocumentLink{constructor(e,t){super(e,t)}}t.default=i},7511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1398);class i extends n.InlayHint{constructor(e,t,r){super(e,t,r)}}t.default=i},7321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1398);class i extends n.TypeHierarchyItem{constructor(e,t,r,n,i,o,s){super(e,t,r,n,i,o),void 0!==s&&(this.data=s)}}t.default=i},6144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1398);class i extends n.SymbolInformation{constructor(e,t,r,i,o){const s=!(i instanceof n.Uri);super(e,t,r,s?i:new n.Location(i,new n.Range(0,0,0,0))),this.hasRange=s,void 0!==o&&(this.data=o)}}t.default=i},420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReferencesFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.ReferencesRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.referencesProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,r={provideReferences:(e,t,r,n)=>{const o=this._client,s=(e,t,r,n)=>o.sendRequest(i.ReferencesRequest.type,o.code2ProtocolConverter.asReferenceParams(e,t,r),n).then((e=>n.isCancellationRequested?null:o.protocol2CodeConverter.asReferences(e,n)),(e=>o.handleFailedRequest(i.ReferencesRequest.type,n,e,null))),a=o.middleware;return a.provideReferences?a.provideReferences(e,t,r,n,s):s(e,t,r,n)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.ReferencesFeature=a},875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenameFeature=void 0;const n=r(1398),i=r(7354),o=r(9032),s=r(8319),a=r(4294);class c extends a.TextDocumentLanguageFeature{constructor(e){super(e,i.RenameRequest.type)}fillClientCapabilities(e){let t=(0,a.ensure)((0,a.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=i.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.renameProvider);r&&(s.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:o.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){const t=e.documentSelector,r={provideRenameEdits:(e,t,r,n)=>{const o=this._client,s=(e,t,r,n)=>{let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),newName:r};return o.sendRequest(i.RenameRequest.type,s,n).then((e=>n.isCancellationRequested?null:o.protocol2CodeConverter.asWorkspaceEdit(e,n)),(e=>o.handleFailedRequest(i.RenameRequest.type,n,e,null,!1)))},a=o.middleware;return a.provideRenameEdits?a.provideRenameEdits(e,t,r,n,s):s(e,t,r,n)},prepareRename:e.prepareProvider?(e,t,r)=>{const n=this._client,o=(e,t,r)=>{let o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),position:n.code2ProtocolConverter.asPosition(t)};return n.sendRequest(i.PrepareRenameRequest.type,o,r).then((e=>r.isCancellationRequested?null:i.Range.is(e)?n.protocol2CodeConverter.asRange(e):this.isDefaultBehavior(e)?!0===e.defaultBehavior?null:Promise.reject(new Error("The element can't be renamed.")):e&&i.Range.is(e.range)?{range:n.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:Promise.reject(new Error("The element can't be renamed."))),(e=>{throw"string"==typeof e.message?new Error(e.message):new Error("The element can't be renamed.")}))},s=n.middleware;return s.prepareRename?s.prepareRename(e,t,r,o):o(e,t,r)}:void 0};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){const t=e;return t&&s.boolean(t.defaultBehavior)}}t.RenameFeature=c},6258:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.SelectionRangeRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"selectionRange").dynamicRegistration=!0}initialize(e,t){const[r,n]=this.getRegistration(t,e.selectionRangeProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r={provideSelectionRanges:(e,t,r)=>{const n=this._client,o=async(e,t,r)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),positions:n.code2ProtocolConverter.asPositionsSync(t,r)};return n.sendRequest(i.SelectionRangeRequest.type,o,r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asSelectionRanges(e,r)),(e=>n.handleFailedRequest(i.SelectionRangeRequest.type,r,e,null)))},s=n.middleware;return s.provideSelectionRanges?s.provideSelectionRanges(e,t,r,o):o(e,t,r)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.SelectionRangeFeature=s},7691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(8319);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[i.SemanticTokenTypes.namespace,i.SemanticTokenTypes.type,i.SemanticTokenTypes.class,i.SemanticTokenTypes.enum,i.SemanticTokenTypes.interface,i.SemanticTokenTypes.struct,i.SemanticTokenTypes.typeParameter,i.SemanticTokenTypes.parameter,i.SemanticTokenTypes.variable,i.SemanticTokenTypes.property,i.SemanticTokenTypes.enumMember,i.SemanticTokenTypes.event,i.SemanticTokenTypes.function,i.SemanticTokenTypes.method,i.SemanticTokenTypes.macro,i.SemanticTokenTypes.keyword,i.SemanticTokenTypes.modifier,i.SemanticTokenTypes.comment,i.SemanticTokenTypes.string,i.SemanticTokenTypes.number,i.SemanticTokenTypes.regexp,i.SemanticTokenTypes.operator,i.SemanticTokenTypes.decorator],t.tokenModifiers=[i.SemanticTokenModifiers.declaration,i.SemanticTokenModifiers.definition,i.SemanticTokenModifiers.readonly,i.SemanticTokenModifiers.static,i.SemanticTokenModifiers.deprecated,i.SemanticTokenModifiers.abstract,i.SemanticTokenModifiers.async,i.SemanticTokenModifiers.modification,i.SemanticTokenModifiers.documentation,i.SemanticTokenModifiers.defaultLibrary],t.formats=[i.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,o.ensure)((0,o.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(i.SemanticTokensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeSemanticTokensEmitter.fire()}));const[r,n]=this.getRegistration(t,e.semanticTokensProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r=s.boolean(e.full)?e.full:void 0!==e.full,o=void 0!==e.full&&"boolean"!=typeof e.full&&!0===e.full.delta,a=new n.EventEmitter,c=r?{onDidChangeSemanticTokens:a.event,provideDocumentSemanticTokens:(e,t)=>{const r=this._client,n=r.middleware,o=(e,t)=>{const n={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e)};return r.sendRequest(i.SemanticTokensRequest.type,n,t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asSemanticTokens(e,t)),(e=>r.handleFailedRequest(i.SemanticTokensRequest.type,t,e,null)))};return n.provideDocumentSemanticTokens?n.provideDocumentSemanticTokens(e,t,o):o(e,t)},provideDocumentSemanticTokensEdits:o?(e,t,r)=>{const n=this._client,o=n.middleware,s=(e,t,r)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),previousResultId:t};return n.sendRequest(i.SemanticTokensDeltaRequest.type,o,r).then((async e=>r.isCancellationRequested?null:i.SemanticTokens.is(e)?await n.protocol2CodeConverter.asSemanticTokens(e,r):await n.protocol2CodeConverter.asSemanticTokensEdits(e,r)),(e=>n.handleFailedRequest(i.SemanticTokensDeltaRequest.type,r,e,null)))};return o.provideDocumentSemanticTokensEdits?o.provideDocumentSemanticTokensEdits(e,t,r,s):s(e,t,r)}:void 0}:void 0,l=!0===e.range?{provideDocumentRangeSemanticTokens:(e,t,r)=>{const n=this._client,o=n.middleware,s=(e,t,r)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),range:n.code2ProtocolConverter.asRange(t)};return n.sendRequest(i.SemanticTokensRangeRequest.type,o,r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asSemanticTokens(e,r)),(e=>n.handleFailedRequest(i.SemanticTokensRangeRequest.type,r,e,null)))};return o.provideDocumentRangeSemanticTokens?o.provideDocumentRangeSemanticTokens(e,t,r,s):s(e,t,r)}}:void 0,u=[],d=this._client,h=d.protocol2CodeConverter.asSemanticTokensLegend(e.legend),p=d.protocol2CodeConverter.asDocumentSelector(t);return void 0!==c&&u.push(n.languages.registerDocumentSemanticTokensProvider(p,c,h)),void 0!==l&&u.push(n.languages.registerDocumentRangeSemanticTokensProvider(p,l,h)),[new n.Disposable((()=>u.forEach((e=>e.dispose())))),{range:l,full:c,onDidChangeSemanticTokensEmitter:a}]}}t.SemanticTokensFeature=a},1400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignatureHelpFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){const r=this.getRegistrationOptions(t,e.signatureHelpProvider);r&&this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t={provideSignatureHelp:(e,t,r,n)=>{const o=this._client,s=(e,t,r,n)=>o.sendRequest(i.SignatureHelpRequest.type,o.code2ProtocolConverter.asSignatureHelpParams(e,t,r),n).then((e=>n.isCancellationRequested?null:o.protocol2CodeConverter.asSignatureHelp(e,n)),(e=>o.handleFailedRequest(i.SignatureHelpRequest.type,n,e,null))),a=o.middleware;return a.provideSignatureHelp?a.provideSignatureHelp(e,t,n,r,s):s(e,t,n,r)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){const r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(void 0===e.retriggerCharacters){const i=e.triggerCharacters||[];return n.languages.registerSignatureHelpProvider(r,t,...i)}{const i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return n.languages.registerSignatureHelpProvider(r,t,i)}}}t.SignatureHelpFeature=a},1596:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidSaveTextDocumentFeature=t.WillSaveWaitUntilFeature=t.WillSaveFeature=t.DidChangeTextDocumentFeature=t.DidCloseTextDocumentFeature=t.DidOpenTextDocumentFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9032);class a extends o.TextDocumentEventFeature{constructor(e,t){super(e,n.workspace.onDidOpenTextDocument,i.DidOpenTextDocumentNotification.type,(()=>e.middleware.didOpen),(t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){const r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:s.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return i.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;const t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);n.workspace.textDocuments.forEach((e=>{const r=e.uri.toString();if(!this._syncedDocuments.has(r)&&n.languages.match(t,e)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e)){const t=this._client.middleware,n=e=>this._client.sendNotification(this._type,this._createParams(e));(t.didOpen?t.didOpen(e,n):n(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e)})),this._syncedDocuments.set(r,e)}}))}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,r)}}t.DidOpenTextDocumentFeature=a;class c extends o.TextDocumentEventFeature{constructor(e,t,r){super(e,n.workspace.onDidCloseTextDocument,i.DidCloseTextDocumentNotification.type,(()=>e.middleware.didClose),(t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=r}get registrationType(){return i.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:s.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,r)}unregister(e){const t=this._selectors.get(e);super.unregister(e);const r=this._selectors.values();this._syncedDocuments.forEach((e=>{if(n.languages.match(t,e)>0&&!this._selectorFilter(r,e)&&!this._client.hasDedicatedTextSynchronizationFeature(e)){let t=this._client.middleware,r=e=>this._client.sendNotification(this._type,this._createParams(e));this._syncedDocuments.delete(e.uri.toString()),(t.didClose?t.didClose(e,r):r(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e)}))}}))}}t.DidCloseTextDocumentFeature=c;class l extends o.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new n.EventEmitter,this._onPendingChangeAdded=new n.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=i.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return i.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&void 0!==r.change&&r.change!==i.TextDocumentSyncKind.None&&this.register({id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=n.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(const e of this._changeData.values())yield e.documentSelector}async callback(e){if(0===e.contentChanges.length)return;const t=e.document.uri,r=e.document.version,o=[];for(const s of this._changeData.values())if(n.languages.match(s.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){const n=this._client.middleware;if(s.syncKind===i.TextDocumentSyncKind.Incremental){const s=async e=>{const n=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e,t,r);await this._client.sendNotification(i.DidChangeTextDocumentNotification.type,n),this.notificationSent(e.document,i.DidChangeTextDocumentNotification.type,n)};o.push(n.didChange?n.didChange(e,(e=>s(e))):s(e))}else if(s.syncKind===i.TextDocumentSyncKind.Full){const t=async e=>{const t=e.document.uri.toString();this._pendingTextDocumentChanges.set(t,e.document),this._onPendingChangeAdded.fire()};o.push(n.didChange?n.didChange(e,(e=>t(e))):t(e))}}return Promise.all(o).then(void 0,(e=>{throw this._client.error(`Sending document notification ${i.DidChangeTextDocumentNotification.type.method} failed`,e),e}))}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){if(this._changeData.delete(e),0===this._changeData.size)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=i.TextDocumentSyncKind.None;else{this._syncKind=i.TextDocumentSyncKind.None;for(const e of this._changeData.values())if(this.updateSyncKind(e.syncKind),this._syncKind===i.TextDocumentSyncKind.Full)break}}clear(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=i.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(0===this._pendingTextDocumentChanges.size)return[];let t;if(0===e.size)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(const r of this._pendingTextDocumentChanges)e.has(r[0])||(t.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return t}getProvider(e){for(const t of this._changeData.values())if(n.languages.match(t.documentSelector,e)>0)return{send:e=>this.callback(e)}}updateSyncKind(e){if(this._syncKind!==i.TextDocumentSyncKind.Full)switch(e){case i.TextDocumentSyncKind.Full:this._syncKind=e;break;case i.TextDocumentSyncKind.Incremental:this._syncKind===i.TextDocumentSyncKind.None&&(this._syncKind=i.TextDocumentSyncKind.Incremental)}}}t.DidChangeTextDocumentFeature=l;class u extends o.TextDocumentEventFeature{constructor(e){super(e,n.workspace.onWillSaveTextDocument,i.WillSaveTextDocumentNotification.type,(()=>e.middleware.willSave),(t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t)),(e=>e.document),((e,t)=>o.TextDocumentEventFeature.textDocumentFilter(e,t.document)))}get registrationType(){return i.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:s.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}}t.WillSaveFeature=u;class d extends o.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return i.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:s.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=n.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(o.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,r=e=>this._client.sendRequest(i.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then((async e=>{let t=await this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t}));e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}t.WillSaveWaitUntilFeature=d;class h extends o.TextDocumentEventFeature{constructor(e){super(e,n.workspace.onDidSaveTextDocument,i.DidSaveTextDocumentNotification.type,(()=>e.middleware.didSave),(t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText)),(e=>e),o.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return i.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){const r=e.resolvedTextDocumentSync;if(t&&r&&r.save){const e="boolean"==typeof r.save?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:s.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}}t.DidSaveTextDocumentFeature=h},5432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,n]=this.getRegistration(t,e.typeDefinitionProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,r={provideTypeDefinition:(e,t,r)=>{const n=this._client,o=(e,t,r)=>n.sendRequest(i.TypeDefinitionRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asDefinitionResult(e,r)),(e=>n.handleFailedRequest(i.TypeDefinitionRequest.type,r,e,null))),s=n.middleware;return s.provideTypeDefinition?s.provideTypeDefinition(e,t,r,o):o(e,t,r)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return n.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.TypeDefinitionFeature=s},4622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchyFeature=void 0;const n=r(1398),i=r(7354),o=r(4294);class s{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,r){const n=this.client,o=this.middleware,s=(e,t,r)=>{const o=n.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return n.sendRequest(i.TypeHierarchyPrepareRequest.type,o,r).then((e=>r.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(e,r)),(e=>n.handleFailedRequest(i.TypeHierarchyPrepareRequest.type,r,e,null)))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){const r=this.client,n=this.middleware,o=(e,t)=>{const n={item:r.code2ProtocolConverter.asTypeHierarchyItem(e)};return r.sendRequest(i.TypeHierarchySupertypesRequest.type,n,t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(e,t)),(e=>r.handleFailedRequest(i.TypeHierarchySupertypesRequest.type,t,e,null)))};return n.provideTypeHierarchySupertypes?n.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){const r=this.client,n=this.middleware,o=(e,t)=>{const n={item:r.code2ProtocolConverter.asTypeHierarchyItem(e)};return r.sendRequest(i.TypeHierarchySubtypesRequest.type,n,t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(e,t)),(e=>r.handleFailedRequest(i.TypeHierarchySubtypesRequest.type,t,e,null)))};return n.provideTypeHierarchySubtypes?n.provideTypeHierarchySubtypes(e,t,o):o(e,t)}}class a extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"typeHierarchy").dynamicRegistration=!0}initialize(e,t){const[r,n]=this.getRegistration(t,e.typeHierarchyProvider);r&&n&&this.register({id:r,registerOptions:n})}registerLanguageProvider(e){const t=this._client,r=new s(t);return[n.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}}t.TypeHierarchyFeature=a},483:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.mapAsync=t.map=t.clearTestMode=t.setTestMode=t.Semaphore=t.Delayer=void 0;const n=r(7354);t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e=>{this.onSuccess=e})).then((()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e}))),(t>=0||void 0===this.timeout)&&(this.timeout=(0,n.RAL)().timer.setTimeout((()=>{this.timeout=void 0,this.onSuccess(void 0)}),t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(this.timeout.dispose(),this.timeout=void 0)}},t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,n.RAL)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};let i=!1;t.setTestMode=function(){i=!0},t.clearTestMode=function(){i=!1};class o{constructor(e=15){this.yieldAfter=!0===i?Math.max(e,2):Math.max(e,15),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){const e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=2*this.total}}return!1}}t.map=async function(e,t,r,i){if(0===e.length)return[];const s=new Array(e.length),a=new o(i?.yieldAfter);function c(r){a.start();for(let n=r;n<e.length;n++)if(s[n]=t(e[n]),a.shouldYield())return i?.yieldCallback&&i.yieldCallback(),n+1;return-1}let l=c(0);for(;-1!==l&&(void 0===r||!r.isCancellationRequested);)l=await new Promise((e=>{(0,n.RAL)().timer.setImmediate((()=>{e(c(l))}))}));return s},t.mapAsync=async function(e,t,r,i){if(0===e.length)return[];const s=new Array(e.length),a=new o(i?.yieldAfter);async function c(n){a.start();for(let o=n;o<e.length;o++)if(s[o]=await t(e[o],r),a.shouldYield())return i?.yieldCallback&&i.yieldCallback(),o+1;return-1}let l=await c(0);for(;-1!==l&&(void 0===r||!r.isCancellationRequested);)l=await new Promise((e=>{(0,n.RAL)().timer.setImmediate((()=>{e(c(l))}))}));return s},t.forEach=async function(e,t,r,i){if(0===e.length)return;const s=new o(i?.yieldAfter);function a(r){s.start();for(let n=r;n<e.length;n++)if(t(e[n]),s.shouldYield())return i?.yieldCallback&&i.yieldCallback(),n+1;return-1}let c=a(0);for(;-1!==c&&(void 0===r||!r.isCancellationRequested);)c=await new Promise((e=>{(0,n.RAL)().timer.setImmediate((()=>{e(a(c))}))}))}},8319:(e,t)=>{"use strict";function r(e){return"string"==typeof e||e instanceof String}function n(e){return"function"==typeof e}function i(e){return Array.isArray(e)}function o(e){return e&&n(e.then)}Object.defineProperty(t,"__esModule",{value:!0}),t.asPromise=t.thenable=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=n,t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>r(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=o,t.asPromise=function(e){return e instanceof Promise?e:o(e)?new Promise(((t,r)=>{e.then((e=>t(e)),(e=>r(e)))})):Promise.resolve(e)}},9032:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.parse=t.isUUID=t.v4=t.empty=void 0;class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class n extends r{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}}function i(){return new n}n._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],n._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=i;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(e){return o.test(e)}t.isUUID=s,t.parse=function(e){if(!s(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return i().asHex()}},6804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFoldersFeature=t.arrayDiff=void 0;const n=r(9032),i=r(1398),o=r(7354);function s(e,t){if(null!=e)return e[t]}function a(e,t){return e.filter((e=>t.indexOf(e)<0))}t.arrayDiff=a,t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){const t=i.workspace.workspaceFolders;this.initializeWithFolders(t),e.workspaceFolders=void 0===t?null:t.map((e=>this.asProtocol(e)))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){const t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,(e=>{const r=()=>{const e=i.workspace.workspaceFolders;return void 0===e?null:e.map((e=>this.asProtocol(e)))},n=t.middleware.workspace;return n&&n.workspaceFolders?n.workspaceFolders(e,r):r()}));const r=s(s(s(e,"workspace"),"workspaceFolders"),"changeNotifications");let a;"string"==typeof r?a=r:!0===r&&(a=n.generateUuid()),a&&this.register({id:a,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){const r=a(this._initialFolders,e),n=a(e,this._initialFolders);(n.length>0||r.length>0)&&(t=this.doSendEvent(n,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));void 0!==t&&t.catch((e=>{this._client.error(`Sending notification ${o.DidChangeWorkspaceFoldersNotification.type.method} failed`,e)}))}doSendEvent(e,t){let r={event:{added:e.map((e=>this.asProtocol(e))),removed:t.map((e=>this.asProtocol(e)))}};return this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,n=i.workspace.onDidChangeWorkspaceFolders((e=>{let t=e=>this.doSendEvent(e.added,e.removed),n=r.middleware.workspace;(n&&n.didChangeWorkspaceFolders?n.didChangeWorkspaceFolders(e,t):t(e)).catch((e=>{this._client.error(`Sending notification ${o.DidChangeWorkspaceFoldersNotification.type.method} failed`,e)}))}));this._listeners.set(t,n),this.sendInitialEvent(i.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},8312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolFeature=void 0;const n=r(1398),i=r(7354),o=r(4294),s=r(9228),a=r(9032);class c extends o.WorkspaceFeature{constructor(e){super(e,i.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,o.ensure)((0,o.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:s.SupportedSymbolKinds},t.tagSupport={valueSet:s.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:a.generateUuid(),registerOptions:!0===e.workspaceSymbolProvider?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){const t={provideWorkspaceSymbols:(e,t)=>{const r=this._client,n=(e,t)=>r.sendRequest(i.WorkspaceSymbolRequest.type,{query:e},t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asSymbolInformations(e,t)),(e=>r.handleFailedRequest(i.WorkspaceSymbolRequest.type,t,e,null))),o=r.middleware;return o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,n):n(e,t)},resolveWorkspaceSymbol:!0===e.resolveProvider?(e,t)=>{const r=this._client,n=(e,t)=>r.sendRequest(i.WorkspaceSymbolResolveRequest.type,r.code2ProtocolConverter.asWorkspaceSymbol(e),t).then((e=>t.isCancellationRequested?null:r.protocol2CodeConverter.asSymbolInformation(e)),(e=>r.handleFailedRequest(i.WorkspaceSymbolResolveRequest.type,t,e,null))),o=r.middleware;return o.resolveWorkspaceSymbol?o.resolveWorkspaceSymbol(e,t,n):n(e,t)}:void 0};return[n.languages.registerWorkspaceSymbolProvider(t),t]}}t.WorkspaceSymbolFeature=c},99:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingMonitor=t.LanguageClient=t.TransportKind=void 0;const o=r(5317),s=r(9896),a=r(6928),c=r(1398),l=r(8319),u=r(9538),d=r(6745),h=r(948),p=r(144),f=r(7638);i(r(948),t),i(r(6353),t);const m="^1.82.0";var g,y,v,_,b,w;!function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(g||(t.TransportKind=g={})),function(e){e.isSocket=function(e){const t=e;return t&&t.kind===g.socket&&l.number(t.port)}}(y||(y={})),function(e){e.is=function(e){return l.string(e.command)}}(v||(v={})),function(e){e.is=function(e){return l.string(e.module)}}(_||(_={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(b||(b={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(w||(w={}));class S extends u.BaseLanguageClient{constructor(e,t,r,n,i){let o,s,a,c,u;l.string(t)?(o=e,s=t,a=r,c=n,u=!!i):(o=e.toLowerCase(),s=e,a=t,c=r,u=n),void 0===u&&(u=!1),super(o,s,c),this._serverOptions=a,this._forceDebug=u,this._isInDebugMode=u;try{this.checkVersion()}catch(e){throw l.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){const e=p(c.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${c.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!f(e,m))throw new Error(`The language client requires VS Code version ${m} but received version ${c.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise((e=>setTimeout(e,1e3))),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally((()=>{if(this._serverProcess){const e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}}))}checkProcessDied(e){e&&void 0!==e.pid&&setTimeout((()=>{try{void 0!==e.pid&&(process.kill(e.pid,0),(0,d.terminate)(e))}catch(e){}}),2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),null===e.processId&&(e.processId=process.pid)}createMessageTransports(e){function t(e,t){if(!e&&!t)return;const r=Object.create(null);return Object.keys(process.env).forEach((e=>r[e]=process.env[e])),t&&(r.ELECTRON_RUN_AS_NODE="1",r.ELECTRON_NO_ASAR="1"),e&&Object.keys(e).forEach((t=>r[t]=e[t])),r}const r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],n=["--debug","--debug-brk","--inspect","--inspect-brk"];function i(e){if(null===e.stdin||null===e.stdout||null===e.stderr)throw new Error("Process created without stdio streams")}const s=this._serverOptions;if(l.func(s))return s().then((t=>{if(u.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(b.is(t))return this._isDetached=!!t.detached,{reader:new h.StreamMessageReader(t.reader),writer:new h.StreamMessageWriter(t.writer)};{let r;return w.is(t)?(r=t.process,this._isDetached=t.detached):(r=t,this._isDetached=!1),r.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),{reader:new h.StreamMessageReader(r.stdout),writer:new h.StreamMessageWriter(r.stdin)}}}));let a,c=s;return c.run||c.debug?this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some((e=>r.some((t=>e.startsWith(t)))||n.some((t=>e===t))))}()?(a=c.debug,this._isInDebugMode=!0):(a=c.run,this._isInDebugMode=!1):a=s,this._getServerWorkingDir(a.options).then((r=>{if(_.is(a)&&a.module){let n=a,s=n.transport||g.stdio;if(!n.runtime){let a;return new Promise(((c,u)=>{const d=(n.args&&n.args.slice())??[];s===g.ipc?d.push("--node-ipc"):s===g.stdio?d.push("--stdio"):s===g.pipe?(a=(0,h.generateRandomPipeName)(),d.push(`--pipe=${a}`)):y.isSocket(s)&&d.push(`--socket=${s.port}`),d.push(`--clientProcessId=${process.pid.toString()}`);const p=n.options??Object.create(null);if(p.env=t(p.env,!0),p.execArgv=p.execArgv||[],p.cwd=r,p.silent=!0,s===g.ipc||s===g.stdio){const t=o.fork(n.module,d||[],p);i(t),this._serverProcess=t,t.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),s===g.ipc?(t.stdout.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),c({reader:new h.IPCMessageReader(this._serverProcess),writer:new h.IPCMessageWriter(this._serverProcess)})):c({reader:new h.StreamMessageReader(t.stdout),writer:new h.StreamMessageWriter(t.stdin)})}else s===g.pipe?(0,h.createClientPipeTransport)(a).then((t=>{const r=o.fork(n.module,d||[],p);i(r),this._serverProcess=r,r.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{c({reader:e[0],writer:e[1]})}),u)}),u):y.isSocket(s)&&(0,h.createClientSocketTransport)(s.port).then((t=>{const r=o.fork(n.module,d||[],p);i(r),this._serverProcess=r,r.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{c({reader:e[0],writer:e[1]})}),u)}),u)}))}{const i=[],a=n.options??Object.create(null);a.execArgv&&a.execArgv.forEach((e=>i.push(e))),i.push(n.module),n.args&&n.args.forEach((e=>i.push(e)));const c=Object.create(null);c.cwd=r,c.env=t(a.env,!1);const u=this._getRuntimePath(n.runtime,r);let d;if(s===g.ipc?(c.stdio=[null,null,null,"ipc"],i.push("--node-ipc")):s===g.stdio?i.push("--stdio"):s===g.pipe?(d=(0,h.generateRandomPipeName)(),i.push(`--pipe=${d}`)):y.isSocket(s)&&i.push(`--socket=${s.port}`),i.push(`--clientProcessId=${process.pid.toString()}`),s===g.ipc||s===g.stdio){const t=o.spawn(u,i,c);return t&&t.pid?(this._serverProcess=t,t.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),s===g.ipc?(t.stdout.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),Promise.resolve({reader:new h.IPCMessageReader(t),writer:new h.IPCMessageWriter(t)})):Promise.resolve({reader:new h.StreamMessageReader(t.stdout),writer:new h.StreamMessageWriter(t.stdin)})):E(t,`Launching server using runtime ${u} failed.`)}if(s===g.pipe)return(0,h.createClientPipeTransport)(d).then((t=>{const r=o.spawn(u,i,c);return r&&r.pid?(this._serverProcess=r,r.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),t.onConnected().then((e=>({reader:e[0],writer:e[1]})))):E(r,`Launching server using runtime ${u} failed.`)}));if(y.isSocket(s))return(0,h.createClientSocketTransport)(s.port).then((t=>{const r=o.spawn(u,i,c);return r&&r.pid?(this._serverProcess=r,r.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),t.onConnected().then((e=>({reader:e[0],writer:e[1]})))):E(r,`Launching server using runtime ${u} failed.`)}))}}else if(v.is(a)&&a.command){const t=a,n=void 0!==a.args?a.args.slice(0):[];let i;const s=a.transport;if(s===g.stdio)n.push("--stdio");else if(s===g.pipe)i=(0,h.generateRandomPipeName)(),n.push(`--pipe=${i}`);else if(y.isSocket(s))n.push(`--socket=${s.port}`);else if(s===g.ipc)throw new Error("Transport kind ipc is not support for command executable");const c=Object.assign({},t.options);if(c.cwd=c.cwd||r,void 0===s||s===g.stdio){const r=o.spawn(t.command,n,c);return r&&r.pid?(r.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),this._serverProcess=r,this._isDetached=!!c.detached,Promise.resolve({reader:new h.StreamMessageReader(r.stdout),writer:new h.StreamMessageWriter(r.stdin)})):E(r,`Launching server using command ${t.command} failed.`)}if(s===g.pipe)return(0,h.createClientPipeTransport)(i).then((r=>{const i=o.spawn(t.command,n,c);return i&&i.pid?(this._serverProcess=i,this._isDetached=!!c.detached,i.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),i.stdout.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),r.onConnected().then((e=>({reader:e[0],writer:e[1]})))):E(i,`Launching server using command ${t.command} failed.`)}));if(y.isSocket(s))return(0,h.createClientSocketTransport)(s.port).then((r=>{const i=o.spawn(t.command,n,c);return i&&i.pid?(this._serverProcess=i,this._isDetached=!!c.detached,i.stderr.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),i.stdout.on("data",(t=>this.outputChannel.append(l.string(t)?t:t.toString(e)))),r.onConnected().then((e=>({reader:e[0],writer:e[1]})))):E(i,`Launching server using command ${t.command} failed.`)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(s,null,4)))})).finally((()=>{void 0!==this._serverProcess&&this._serverProcess.on("exit",((e,t)=>{null!==e&&this.error(`Server process exited with code ${e}.`,void 0,!1),null!==t&&this.error(`Server process exited with signal ${t}.`,void 0,!1)}))}))}_getRuntimePath(e,t){if(a.isAbsolute(e))return e;const r=this._mainGetRootPath();if(void 0!==r){const t=a.join(r,e);if(s.existsSync(t))return t}if(void 0!==t){const r=a.join(t,e);if(s.existsSync(r))return r}return e}_mainGetRootPath(){let e=c.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise((e=>{s.lstat(t,((r,n)=>{e(!r&&n.isDirectory()?t:void 0)}))})):Promise.resolve(void 0)}}function E(e,t){return null===e?Promise.reject(t):new Promise(((r,n)=>{e.on("error",(e=>{n(`${t} ${e}`)})),setImmediate((()=>n(t)))}))}t.LanguageClient=S,t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return c.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new c.Disposable((()=>{this._client.needsStop()&&this._client.stop()}))}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,n=r?c.workspace.getConfiguration(t).get(r,!1):c.workspace.getConfiguration(t);n&&this._client.needsStart()?this._client.start().catch((e=>this._client.error("Start failed after configuration change",e,"force"))):!n&&this._client.needsStop()&&this._client.stop().catch((e=>this._client.error("Stop failed after configuration change",e,"force")))}}},6745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terminate=void 0;const n=r(5317),i=r(6928),o="win32"===process.platform,s="darwin"===process.platform,a="linux"===process.platform;t.terminate=function(e,t){if(o)try{let r={stdio:["pipe","pipe","ignore"]};return t&&(r.cwd=t),n.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],r),!0}catch(e){return!1}else{if(!a&&!s)return e.kill("SIGKILL"),!0;try{var r=(0,i.join)(__dirname,"terminateProcess.sh");return!n.spawnSync(r,[e.pid.toString()]).error}catch(e){return!1}}}},4720:(e,t,r)=>{"use strict";e.exports=r(99)},3818:(e,t,r)=>{var n=r(8505);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),g(function(e){return e.split("\\\\").join(i).split("\\{").join(o).split("\\}").join(s).split("\\,").join(a).split("\\.").join(c)}(e),!0).map(u)):[]};var i="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",s="\0CLOSE"+Math.random()+"\0",a="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function u(e){return e.split(i).join("\\").split(o).join("{").split(s).join("}").split(a).join(",").split(c).join(".")}function d(e){if(!e)return[""];var t=[],r=n("{","}",e);if(!r)return e.split(",");var i=r.pre,o=r.body,s=r.post,a=i.split(",");a[a.length-1]+="{"+o+"}";var c=d(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function h(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function m(e,t){return e>=t}function g(e,t){var r=[],i=n("{","}",e);if(!i)return[e];var o=i.pre,a=i.post.length?g(i.post,!1):[""];if(/\$$/.test(i.pre))for(var c=0;c<a.length;c++){var u=o+"{"+i.body+"}"+a[c];r.push(u)}else{var y,v,_=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),b=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),w=_||b,S=i.body.indexOf(",")>=0;if(!w&&!S)return i.post.match(/,.*\}/)?g(e=i.pre+"{"+i.body+s+i.post):[e];if(w)y=i.body.split(/\.\./);else if(1===(y=d(i.body)).length&&1===(y=g(y[0],!1).map(h)).length)return a.map((function(e){return i.pre+y[0]+e}));if(w){var E=l(y[0]),C=l(y[1]),T=Math.max(y[0].length,y[1].length),k=3==y.length?Math.abs(l(y[2])):1,P=f;C<E&&(k*=-1,P=m);var R=y.some(p);v=[];for(var x=E;P(x,C);x+=k){var M;if(b)"\\"===(M=String.fromCharCode(x))&&(M="");else if(M=String(x),R){var O=T-M.length;if(O>0){var D=new Array(O+1).join("0");M=x<0?"-"+D+M.slice(1):D+M}}v.push(M)}}else{v=[];for(var I=0;I<y.length;I++)v.push.apply(v,g(y[I],!1))}for(I=0;I<v.length;I++)for(c=0;c<a.length;c++)u=o+v[I]+a[c],(!t||w||u)&&r.push(u)}return r}},6998:e=>{const t="object"==typeof process&&process&&"win32"===process.platform;e.exports=t?{sep:"\\"}:{sep:"/"}},6045:(e,t,r)=>{const n=e.exports=(e,t,r={})=>(g(t),!(!r.nocomment&&"#"===t.charAt(0))&&new v(t,r).match(e));e.exports=n;const i=r(6998);n.sep=i.sep;const o=Symbol("globstar **");n.GLOBSTAR=o;const s=r(3818),a={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},c="[^/]",l=c+"*?",u=e=>e.split("").reduce(((e,t)=>(e[t]=!0,e)),{}),d=u("().*{}+?[]^$\\!"),h=u("[.("),p=/\/+/;n.filter=(e,t={})=>(r,i,o)=>n(r,e,t);const f=(e,t={})=>{const r={};return Object.keys(e).forEach((t=>r[t]=e[t])),Object.keys(t).forEach((e=>r[e]=t[e])),r};n.defaults=e=>{if(!e||"object"!=typeof e||!Object.keys(e).length)return n;const t=n,r=(r,n,i)=>t(r,n,f(e,i));return(r.Minimatch=class extends t.Minimatch{constructor(t,r){super(t,f(e,r))}}).defaults=r=>t.defaults(f(e,r)).Minimatch,r.filter=(r,n)=>t.filter(r,f(e,n)),r.defaults=r=>t.defaults(f(e,r)),r.makeRe=(r,n)=>t.makeRe(r,f(e,n)),r.braceExpand=(r,n)=>t.braceExpand(r,f(e,n)),r.match=(r,n,i)=>t.match(r,n,f(e,i)),r},n.braceExpand=(e,t)=>m(e,t);const m=(e,t={})=>(g(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:s(e)),g=e=>{if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")},y=Symbol("subparse");n.makeRe=(e,t)=>new v(e,t||{}).makeRe(),n.match=(e,t,r={})=>{const n=new v(t,r);return e=e.filter((e=>n.match(e))),n.options.nonull&&!e.length&&e.push(t),e};class v{constructor(e,t){g(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...e)=>console.error(...e)),this.debug(this.pattern,r),r=this.globParts=r.map((e=>e.split(p))),this.debug(this.pattern,r),r=r.map(((e,t,r)=>e.map(this.parse,this))),this.debug(this.pattern,r),r=r.filter((e=>-1===e.indexOf(!1))),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;const e=this.pattern;let t=!1,r=0;for(let n=0;n<e.length&&"!"===e.charAt(n);n++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,c=t.length;i<a&&s<c;i++,s++){this.debug("matchOne loop");var l,u=t[s],d=e[i];if(this.debug(t,u,d),!1===u)return!1;if(u===o){this.debug("GLOBSTAR",[t,u,d]);var h=i,p=s+1;if(p===c){for(this.debug("** at the end");i<a;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,p,f),this.matchOne(e.slice(h),t.slice(p),r))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!r||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof u?(l=d===u,this.debug("string match",u,d,l)):(l=d.match(u),this.debug("pattern match",u,d,l)),!l)return!1}if(i===a&&s===c)return!0;if(i===a)return r;if(s===c)return i===a-1&&""===e[i];throw new Error("wtf?")}braceExpand(){return m(this.pattern,this.options)}parse(e,t){g(e);const r=this.options;if("**"===e){if(!r.noglobstar)return o;e="*"}if(""===e)return"";let n="",i=!1,s=!1;const u=[],p=[];let f,m,v,_,b=!1,w=-1,S=-1,E="."===e.charAt(0),C=r.dot||E;const T=e=>"."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",k=()=>{if(f){switch(f){case"*":n+=l,i=!0;break;case"?":n+=c,i=!0;break;default:n+="\\"+f}this.debug("clearStateChar %j %j",f,n),f=!1}};for(let t,o=0;o<e.length&&(t=e.charAt(o));o++)if(this.debug("%s\t%s %s %j",e,o,n,t),s){if("/"===t)return!1;d[t]&&(n+="\\"),n+=t,s=!1}else switch(t){case"/":return!1;case"\\":if(b&&"-"===e.charAt(o+1)){n+=t;continue}k(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,o,n,t),b){this.debug("  in class"),"!"===t&&o===S+1&&(t="^"),n+=t;continue}this.debug("call clearStateChar %j",f),k(),f=t,r.noext&&k();continue;case"(":{if(b){n+="(";continue}if(!f){n+="\\(";continue}const t={type:f,start:o-1,reStart:n.length,open:a[f].open,close:a[f].close};this.debug(this.pattern,"\t",t),u.push(t),n+=t.open,0===t.start&&"!"!==t.type&&(E=!0,n+=T(e.slice(o+1))),this.debug("plType %j %j",f,n),f=!1;continue}case")":{const e=u[u.length-1];if(b||!e){n+="\\)";continue}u.pop(),k(),i=!0,v=e,n+=v.close,"!"===v.type&&p.push(Object.assign(v,{reEnd:n.length}));continue}case"|":{const t=u[u.length-1];if(b||!t){n+="\\|";continue}k(),n+="|",0===t.start&&"!"!==t.type&&(E=!0,n+=T(e.slice(o+1)));continue}case"[":if(k(),b){n+="\\"+t;continue}b=!0,S=o,w=n.length,n+=t;continue;case"]":if(o===S+1||!b){n+="\\"+t;continue}m=e.substring(S+1,o);try{RegExp("["+(m.replace(/\\([^-\]])/g,"$1").replace(/[[\]\\]/g,"\\$&")+"]")),n+=t}catch(e){n=n.substring(0,w)+"(?:$.)"}i=!0,b=!1;continue;default:k(),!d[t]||"^"===t&&b||(n+="\\"),n+=t}for(b&&(m=e.slice(S+1),_=this.parse(m,y),n=n.substring(0,w)+"\\["+_[0],i=i||_[1]),v=u.pop();v;v=u.pop()){let e;e=n.slice(v.reStart+v.open.length),this.debug("setting tail",n,v),e=e.replace(/((?:\\{2}){0,64})(\\?)\|/g,((e,t,r)=>(r||(r="\\"),t+t+r+"|"))),this.debug("tail=%j\n   %s",e,e,v,n);const t="*"===v.type?l:"?"===v.type?c:"\\"+v.type;i=!0,n=n.slice(0,v.reStart)+t+"\\("+e}k(),s&&(n+="\\\\");const P=h[n.charAt(0)];for(let e=p.length-1;e>-1;e--){const r=p[e],i=n.slice(0,r.reStart),o=n.slice(r.reStart,r.reEnd-8);let s=n.slice(r.reEnd);const a=n.slice(r.reEnd-8,r.reEnd)+s,c=i.split(")").length,l=i.split("(").length-c;let u=s;for(let e=0;e<l;e++)u=u.replace(/\)[+*?]?/,"");s=u,n=i+o+s+(""===s&&t!==y?"(?:$|\\/)":"")+a}if(""!==n&&i&&(n="(?=.)"+n),P&&(n=(E?"":C?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)")+n),t===y)return[n,i];if(r.nocase&&!i&&(i=e.toUpperCase()!==e.toLowerCase()),!i)return(e=>e.replace(/\\(.)/g,"$1"))(e);const R=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+n+"$",R),{_glob:e,_src:n})}catch(e){return new RegExp("$.")}}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,r=t.noglobstar?l:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"";let i=e.map((e=>(e=e.map((e=>"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e===o?o:e._src)).reduce(((e,t)=>(e[e.length-1]===o&&t===o||e.push(t),e)),[]),e.forEach(((t,n)=>{t===o&&e[n-1]!==o&&(0===n?e.length>1?e[n+1]="(?:\\/|"+r+"\\/)?"+e[n+1]:e[n]=r:n===e.length-1?e[n-1]+="(?:\\/|"+r+")?":(e[n-1]+="(?:\\/|\\/"+r+"\\/)"+e[n+1],e[n+1]=o))})),e.filter((e=>e!==o)).join("/")))).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;const r=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/")),e=e.split(p),this.debug(this.pattern,"split",e);const n=this.set;let o;this.debug(this.pattern,"set",n);for(let t=e.length-1;t>=0&&(o=e[t],!o);t--);for(let i=0;i<n.length;i++){const s=n[i];let a=e;if(r.matchBase&&1===s.length&&(a=[o]),this.matchOne(a,s,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}static defaults(e){return n.defaults(e).Minimatch}}n.Minimatch=v},8766:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,i(r(7123),t),i(r(1145),t),i(r(372),t),i(r(1560),t);var o,s=r(1580);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return s.createProtocolConnection}}),function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800}(o||(t.LSPErrorCodes=o={}))},1580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const n=r(7123);t.createProtocolConnection=function(e,t,r,i){return n.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,n.createMessageConnection)(e,t,r,i)}},372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=t.MessageDirection=void 0;const n=r(7123);var i;!function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"}(i||(t.MessageDirection=i={})),t.RegistrationType=class{constructor(e){this.method=e}};class o extends n.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=o;class s extends n.RequestType{constructor(e){super(e,n.ParameterStructures.byName)}}t.ProtocolRequestType=s;class a extends n.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=a;class c extends n.NotificationType{constructor(e){super(e,n.ParameterStructures.byName)}}t.ProtocolNotificationType=c},8765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const n=r(372);var i,o,s;!function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.CallHierarchyPrepareRequest=i={})),function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(o||(t.CallHierarchyIncomingCallsRequest=o={})),function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(s||(t.CallHierarchyOutgoingCallsRequest=s={}))},2910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const n=r(372);var i,o;!function(e){e.method="textDocument/documentColor",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.DocumentColorRequest=i={})),function(e){e.method="textDocument/colorPresentation",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(o||(t.ColorPresentationRequest=o={}))},1660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const n=r(372);var i;!function(e){e.method="workspace/configuration",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType(e.method)}(i||(t.ConfigurationRequest=i={}))},6914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const n=r(372);var i;!function(e){e.method="textDocument/declaration",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.DeclarationRequest=i={}))},6011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;const n=r(7123),i=r(8598),o=r(372);var s,a,c,l,u;!function(e){e.is=function(e){const t=e;return t&&i.boolean(t.retriggerRequest)}}(s||(t.DiagnosticServerCancellationData=s={})),function(e){e.Full="full",e.Unchanged="unchanged"}(a||(t.DocumentDiagnosticReportKind=a={})),function(e){e.method="textDocument/diagnostic",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.ProtocolRequestType(e.method),e.partialResult=new n.ProgressType}(c||(t.DocumentDiagnosticRequest=c={})),function(e){e.method="workspace/diagnostic",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.ProtocolRequestType(e.method),e.partialResult=new n.ProgressType}(l||(t.WorkspaceDiagnosticRequest=l={})),function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=o.MessageDirection.serverToClient,e.type=new o.ProtocolRequestType0(e.method)}(u||(t.DiagnosticRefreshRequest=u={}))},9840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const n=r(372);var i,o,s,a,c,l,u;!function(e){e.file="file",e.folder="folder"}(i||(t.FileOperationPatternKind=i={})),function(e){e.method="workspace/willCreateFiles",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(o||(t.WillCreateFilesRequest=o={})),function(e){e.method="workspace/didCreateFiles",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(s||(t.DidCreateFilesNotification=s={})),function(e){e.method="workspace/willRenameFiles",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(a||(t.WillRenameFilesRequest=a={})),function(e){e.method="workspace/didRenameFiles",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(c||(t.DidRenameFilesNotification=c={})),function(e){e.method="workspace/didDeleteFiles",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(l||(t.DidDeleteFilesNotification=l={})),function(e){e.method="workspace/willDeleteFiles",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(u||(t.WillDeleteFilesRequest=u={}))},2874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRefreshRequest=t.FoldingRangeRequest=void 0;const n=r(372);var i,o;!function(e){e.method="textDocument/foldingRange",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.FoldingRangeRequest=i={})),function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType0(e.method)}(o||(t.FoldingRangeRefreshRequest=o={}))},9574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const n=r(372);var i;!function(e){e.method="textDocument/implementation",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.ImplementationRequest=i={}))},7752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;const n=r(372);var i,o,s;!function(e){e.method="textDocument/inlayHint",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.InlayHintRequest=i={})),function(e){e.method="inlayHint/resolve",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(o||(t.InlayHintResolveRequest=o={})),function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType0(e.method)}(s||(t.InlayHintRefreshRequest=s={}))},3307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCompletionRequest=void 0;const n=r(372);var i;!function(e){e.method="textDocument/inlineCompletion",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.InlineCompletionRequest=i={}))},3124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;const n=r(372);var i,o;!function(e){e.method="textDocument/inlineValue",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.InlineValueRequest=i={})),function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType0(e.method)}(o||(t.InlineValueRefreshRequest=o={}))},1560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRefreshRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangesFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.InlineCompletionRequest=t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=void 0;const n=r(372),i=r(1145),o=r(8598),s=r(9574);Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return s.ImplementationRequest}});const a=r(8461);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});const c=r(9935);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return c.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return c.DidChangeWorkspaceFoldersNotification}});const l=r(1660);Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return l.ConfigurationRequest}});const u=r(2910);Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return u.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return u.ColorPresentationRequest}});const d=r(2874);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return d.FoldingRangeRequest}}),Object.defineProperty(t,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return d.FoldingRangeRefreshRequest}});const h=r(6914);Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return h.DeclarationRequest}});const p=r(3487);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return p.SelectionRangeRequest}});const f=r(2687);Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const m=r(8765);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return m.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return m.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return m.CallHierarchyPrepareRequest}});const g=r(2478);Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return g.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return g.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return g.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return g.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return g.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return g.SemanticTokensRegistrationType}});const y=r(908);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return y.ShowDocumentRequest}});const v=r(5316);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return v.LinkedEditingRangeRequest}});const _=r(9840);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return _.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return _.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return _.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return _.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return _.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return _.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return _.WillDeleteFilesRequest}});const b=r(9047);Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return b.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return b.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return b.MonikerRequest}});const w=r(645);Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return w.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return w.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return w.TypeHierarchySupertypesRequest}});const S=r(3124);Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return S.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return S.InlineValueRefreshRequest}});const E=r(7752);Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return E.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return E.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return E.InlayHintRefreshRequest}});const C=r(6011);Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return C.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return C.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return C.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return C.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return C.DiagnosticRefreshRequest}});const T=r(5938);Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return T.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return T.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return T.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return T.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return T.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return T.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return T.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return T.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return T.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return T.DidCloseNotebookDocumentNotification}});const k=r(3307);var P,R,x,M,O,D,I,A,N,L,F,j,q,U,B,$,W,H,V,G,K,z,X,J,Y,Q,Z,ee,te,re,ne,ie,oe,se,ae,ce,le,ue,de,he,pe,fe,me,ge,ye,ve,_e,be,we,Se,Ee,Ce,Te,ke,Pe,Re,xe,Me,Oe,De,Ie,Ae,Ne,Le,Fe;Object.defineProperty(t,"InlineCompletionRequest",{enumerable:!0,get:function(){return k.InlineCompletionRequest}}),function(e){e.is=function(e){const t=e;return o.string(t)||o.string(t.language)||o.string(t.scheme)||o.string(t.pattern)}}(P||(t.TextDocumentFilter=P={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebookType)||o.string(t.scheme)||o.string(t.pattern))}}(R||(t.NotebookDocumentFilter=R={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebook)||R.is(t.notebook))&&(void 0===t.language||o.string(t.language))}}(x||(t.NotebookCellTextDocumentFilter=x={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!o.string(t)&&!P.is(t)&&!x.is(t))return!1;return!0}}(M||(t.DocumentSelector=M={})),function(e){e.method="client/registerCapability",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType(e.method)}(O||(t.RegistrationRequest=O={})),function(e){e.method="client/unregisterCapability",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType(e.method)}(D||(t.UnregistrationRequest=D={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(I||(t.ResourceOperationKind=I={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(A||(t.FailureHandlingKind=A={})),function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"}(N||(t.PositionEncodingKind=N={})),function(e){e.hasId=function(e){const t=e;return t&&o.string(t.id)&&t.id.length>0}}(L||(t.StaticRegistrationOptions=L={})),function(e){e.is=function(e){const t=e;return t&&(null===t.documentSelector||M.is(t.documentSelector))}}(F||(t.TextDocumentRegistrationOptions=F={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(void 0===t.workDoneProgress||o.boolean(t.workDoneProgress))},e.hasWorkDoneProgress=function(e){const t=e;return t&&o.boolean(t.workDoneProgress)}}(j||(t.WorkDoneProgressOptions=j={})),function(e){e.method="initialize",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(q||(t.InitializeRequest=q={})),function(e){e.unknownProtocolVersion=1}(U||(t.InitializeErrorCodes=U={})),function(e){e.method="initialized",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(B||(t.InitializedNotification=B={})),function(e){e.method="shutdown",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType0(e.method)}($||(t.ShutdownRequest=$={})),function(e){e.method="exit",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType0(e.method)}(W||(t.ExitNotification=W={})),function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(H||(t.DidChangeConfigurationNotification=H={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5}(V||(t.MessageType=V={})),function(e){e.method="window/showMessage",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolNotificationType(e.method)}(G||(t.ShowMessageNotification=G={})),function(e){e.method="window/showMessageRequest",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType(e.method)}(K||(t.ShowMessageRequest=K={})),function(e){e.method="window/logMessage",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolNotificationType(e.method)}(z||(t.LogMessageNotification=z={})),function(e){e.method="telemetry/event",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolNotificationType(e.method)}(X||(t.TelemetryEventNotification=X={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(J||(t.TextDocumentSyncKind=J={})),function(e){e.method="textDocument/didOpen",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(Y||(t.DidOpenTextDocumentNotification=Y={})),function(e){e.isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},e.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength}}(Q||(t.TextDocumentContentChangeEvent=Q={})),function(e){e.method="textDocument/didChange",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(Z||(t.DidChangeTextDocumentNotification=Z={})),function(e){e.method="textDocument/didClose",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(ee||(t.DidCloseTextDocumentNotification=ee={})),function(e){e.method="textDocument/didSave",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(te||(t.DidSaveTextDocumentNotification=te={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(re||(t.TextDocumentSaveReason=re={})),function(e){e.method="textDocument/willSave",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(ne||(t.WillSaveTextDocumentNotification=ne={})),function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(ie||(t.WillSaveTextDocumentWaitUntilRequest=ie={})),function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(oe||(t.DidChangeWatchedFilesNotification=oe={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(se||(t.FileChangeType=se={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(i.URI.is(t.baseUri)||i.WorkspaceFolder.is(t.baseUri))&&o.string(t.pattern)}}(ae||(t.RelativePattern=ae={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(ce||(t.WatchKind=ce={})),function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolNotificationType(e.method)}(le||(t.PublishDiagnosticsNotification=le={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(ue||(t.CompletionTriggerKind=ue={})),function(e){e.method="textDocument/completion",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(de||(t.CompletionRequest=de={})),function(e){e.method="completionItem/resolve",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(he||(t.CompletionResolveRequest=he={})),function(e){e.method="textDocument/hover",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(pe||(t.HoverRequest=pe={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3}(fe||(t.SignatureHelpTriggerKind=fe={})),function(e){e.method="textDocument/signatureHelp",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(me||(t.SignatureHelpRequest=me={})),function(e){e.method="textDocument/definition",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(ge||(t.DefinitionRequest=ge={})),function(e){e.method="textDocument/references",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(ye||(t.ReferencesRequest=ye={})),function(e){e.method="textDocument/documentHighlight",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(ve||(t.DocumentHighlightRequest=ve={})),function(e){e.method="textDocument/documentSymbol",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(_e||(t.DocumentSymbolRequest=_e={})),function(e){e.method="textDocument/codeAction",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(be||(t.CodeActionRequest=be={})),function(e){e.method="codeAction/resolve",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(we||(t.CodeActionResolveRequest=we={})),function(e){e.method="workspace/symbol",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Se||(t.WorkspaceSymbolRequest=Se={})),function(e){e.method="workspaceSymbol/resolve",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Ee||(t.WorkspaceSymbolResolveRequest=Ee={})),function(e){e.method="textDocument/codeLens",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Ce||(t.CodeLensRequest=Ce={})),function(e){e.method="codeLens/resolve",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Te||(t.CodeLensResolveRequest=Te={})),function(e){e.method="workspace/codeLens/refresh",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType0(e.method)}(ke||(t.CodeLensRefreshRequest=ke={})),function(e){e.method="textDocument/documentLink",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Pe||(t.DocumentLinkRequest=Pe={})),function(e){e.method="documentLink/resolve",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Re||(t.DocumentLinkResolveRequest=Re={})),function(e){e.method="textDocument/formatting",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(xe||(t.DocumentFormattingRequest=xe={})),function(e){e.method="textDocument/rangeFormatting",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Me||(t.DocumentRangeFormattingRequest=Me={})),function(e){e.method="textDocument/rangesFormatting",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Oe||(t.DocumentRangesFormattingRequest=Oe={})),function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(De||(t.DocumentOnTypeFormattingRequest=De={})),function(e){e.Identifier=1}(Ie||(t.PrepareSupportDefaultBehavior=Ie={})),function(e){e.method="textDocument/rename",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Ae||(t.RenameRequest=Ae={})),function(e){e.method="textDocument/prepareRename",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Ne||(t.PrepareRenameRequest=Ne={})),function(e){e.method="workspace/executeCommand",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(Le||(t.ExecuteCommandRequest=Le={})),function(e){e.method="workspace/applyEdit",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType("workspace/applyEdit")}(Fe||(t.ApplyWorkspaceEditRequest=Fe={}))},5316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const n=r(372);var i;!function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.LinkedEditingRangeRequest=i={}))},9047:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const n=r(372);var i,o,s;!function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"}(i||(t.UniquenessLevel=i={})),function(e){e.$import="import",e.$export="export",e.local="local"}(o||(t.MonikerKind=o={})),function(e){e.method="textDocument/moniker",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(s||(t.MonikerRequest=s={}))},5938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;const n=r(1145),i=r(8598),o=r(372);var s,a,c,l,u,d,h,p,f,m;!function(e){e.Markup=1,e.Code=2,e.is=function(e){return 1===e||2===e}}(s||(t.NotebookCellKind=s={})),function(e){e.create=function(e,t){const r={executionOrder:e};return!0!==t&&!1!==t||(r.success=t),r},e.is=function(e){const t=e;return i.objectLiteral(t)&&n.uinteger.is(t.executionOrder)&&(void 0===t.success||i.boolean(t.success))},e.equals=function(e,t){return e===t||null!=e&&null!=t&&e.executionOrder===t.executionOrder&&e.success===t.success}}(a||(t.ExecutionSummary=a={})),function(e){function t(e,r){if(e===r)return!0;if(null==e||null==r)return!1;if(typeof e!=typeof r)return!1;if("object"!=typeof e)return!1;const n=Array.isArray(e),o=Array.isArray(r);if(n!==o)return!1;if(n&&o){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1}if(i.objectLiteral(e)&&i.objectLiteral(r)){const n=Object.keys(e),i=Object.keys(r);if(n.length!==i.length)return!1;if(n.sort(),i.sort(),!t(n,i))return!1;for(let i=0;i<n.length;i++){const o=n[i];if(!t(e[o],r[o]))return!1}}return!0}e.create=function(e,t){return{kind:e,document:t}},e.is=function(e){const t=e;return i.objectLiteral(t)&&s.is(t.kind)&&n.DocumentUri.is(t.document)&&(void 0===t.metadata||i.objectLiteral(t.metadata))},e.diff=function(e,r){const n=new Set;return e.document!==r.document&&n.add("document"),e.kind!==r.kind&&n.add("kind"),e.executionSummary!==r.executionSummary&&n.add("executionSummary"),void 0===e.metadata&&void 0===r.metadata||t(e.metadata,r.metadata)||n.add("metadata"),void 0===e.executionSummary&&void 0===r.executionSummary||a.equals(e.executionSummary,r.executionSummary)||n.add("executionSummary"),n}}(c||(t.NotebookCell=c={})),function(e){e.create=function(e,t,r,n){return{uri:e,notebookType:t,version:r,cells:n}},e.is=function(e){const t=e;return i.objectLiteral(t)&&i.string(t.uri)&&n.integer.is(t.version)&&i.typedArray(t.cells,c.is)}}(l||(t.NotebookDocument=l={})),function(e){e.method="notebookDocument/sync",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.RegistrationType(e.method)}(u||(t.NotebookDocumentSyncRegistrationType=u={})),function(e){e.method="notebookDocument/didOpen",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.ProtocolNotificationType(e.method),e.registrationMethod=u.method}(d||(t.DidOpenNotebookDocumentNotification=d={})),function(e){e.is=function(e){const t=e;return i.objectLiteral(t)&&n.uinteger.is(t.start)&&n.uinteger.is(t.deleteCount)&&(void 0===t.cells||i.typedArray(t.cells,c.is))},e.create=function(e,t,r){const n={start:e,deleteCount:t};return void 0!==r&&(n.cells=r),n}}(h||(t.NotebookCellArrayChange=h={})),function(e){e.method="notebookDocument/didChange",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.ProtocolNotificationType(e.method),e.registrationMethod=u.method}(p||(t.DidChangeNotebookDocumentNotification=p={})),function(e){e.method="notebookDocument/didSave",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.ProtocolNotificationType(e.method),e.registrationMethod=u.method}(f||(t.DidSaveNotebookDocumentNotification=f={})),function(e){e.method="notebookDocument/didClose",e.messageDirection=o.MessageDirection.clientToServer,e.type=new o.ProtocolNotificationType(e.method),e.registrationMethod=u.method}(m||(t.DidCloseNotebookDocumentNotification=m={}))},2687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const n=r(7123),i=r(372);var o,s,a;!function(e){e.type=new n.ProgressType,e.is=function(t){return t===e.type}}(o||(t.WorkDoneProgress=o={})),function(e){e.method="window/workDoneProgress/create",e.messageDirection=i.MessageDirection.serverToClient,e.type=new i.ProtocolRequestType(e.method)}(s||(t.WorkDoneProgressCreateRequest=s={})),function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=i.MessageDirection.clientToServer,e.type=new i.ProtocolNotificationType(e.method)}(a||(t.WorkDoneProgressCancelNotification=a={}))},3487:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const n=r(372);var i;!function(e){e.method="textDocument/selectionRange",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.SelectionRangeRequest=i={}))},2478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;const n=r(372);var i,o,s,a,c,l;!function(e){e.Relative="relative"}(i||(t.TokenFormat=i={})),function(e){e.method="textDocument/semanticTokens",e.type=new n.RegistrationType(e.method)}(o||(t.SemanticTokensRegistrationType=o={})),function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method),e.registrationMethod=o.method}(s||(t.SemanticTokensRequest=s={})),function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method),e.registrationMethod=o.method}(a||(t.SemanticTokensDeltaRequest=a={})),function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method),e.registrationMethod=o.method}(c||(t.SemanticTokensRangeRequest=c={})),function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType0(e.method)}(l||(t.SemanticTokensRefreshRequest=l={}))},908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const n=r(372);var i;!function(e){e.method="window/showDocument",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType(e.method)}(i||(t.ShowDocumentRequest=i={}))},8461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const n=r(372);var i;!function(e){e.method="textDocument/typeDefinition",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.TypeDefinitionRequest=i={}))},645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;const n=r(372);var i,o,s;!function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(i||(t.TypeHierarchyPrepareRequest=i={})),function(e){e.method="typeHierarchy/supertypes",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(o||(t.TypeHierarchySupertypesRequest=o={})),function(e){e.method="typeHierarchy/subtypes",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolRequestType(e.method)}(s||(t.TypeHierarchySubtypesRequest=s={}))},9935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const n=r(372);var i,o;!function(e){e.method="workspace/workspaceFolders",e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType0(e.method)}(i||(t.WorkspaceFoldersRequest=i={})),function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)}(o||(t.DidChangeWorkspaceFoldersNotification=o={}))},8598:(e,t)=>{"use strict";function r(e){return"string"==typeof e||e instanceof String}function n(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=n,t.stringArray=function(e){return n(e)&&e.every((e=>r(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},7354:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=r(2067);i(r(2067),t),i(r(8766),t),t.createProtocolConnection=function(e,t,r,n){return(0,o.createMessageConnection)(e,t,r,n)}},948:(e,t,r)=>{"use strict";e.exports=r(7354)},1145:(e,t,r)=>{var n,i,o;!function(s){if("object"==typeof e.exports){var a=s(r(3655),t);void 0!==a&&(e.exports=a)}else i=[r,t],void 0===(o="function"==typeof(n=s)?n.apply(t,i):n)||(e.exports=o)}((function(e,t){"use strict";var r,n,i,o,s,a,c,l,u,d,h,p,f,m,g,y,v,_,b,w,S,E,C,T,k,P,R,x;Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0,function(e){e.is=function(e){return"string"==typeof e}}(r||(t.DocumentUri=r={})),function(e){e.is=function(e){return"string"==typeof e}}(n||(t.URI=n={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(i||(t.integer=i={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(o||(t.uinteger=o={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=o.MAX_VALUE),t===Number.MAX_VALUE&&(t=o.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return Me.objectLiteral(t)&&Me.uinteger(t.line)&&Me.uinteger(t.character)}}(s||(t.Position=s={})),function(e){e.create=function(e,t,r,n){if(Me.uinteger(e)&&Me.uinteger(t)&&Me.uinteger(r)&&Me.uinteger(n))return{start:s.create(e,t),end:s.create(r,n)};if(s.is(e)&&s.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(r,", ").concat(n,"]"))},e.is=function(e){var t=e;return Me.objectLiteral(t)&&s.is(t.start)&&s.is(t.end)}}(a||(t.Range=a={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Me.objectLiteral(t)&&a.is(t.range)&&(Me.string(t.uri)||Me.undefined(t.uri))}}(c||(t.Location=c={})),function(e){e.create=function(e,t,r,n){return{targetUri:e,targetRange:t,targetSelectionRange:r,originSelectionRange:n}},e.is=function(e){var t=e;return Me.objectLiteral(t)&&a.is(t.targetRange)&&Me.string(t.targetUri)&&a.is(t.targetSelectionRange)&&(a.is(t.originSelectionRange)||Me.undefined(t.originSelectionRange))}}(l||(t.LocationLink=l={})),function(e){e.create=function(e,t,r,n){return{red:e,green:t,blue:r,alpha:n}},e.is=function(e){var t=e;return Me.objectLiteral(t)&&Me.numberRange(t.red,0,1)&&Me.numberRange(t.green,0,1)&&Me.numberRange(t.blue,0,1)&&Me.numberRange(t.alpha,0,1)}}(u||(t.Color=u={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return Me.objectLiteral(t)&&a.is(t.range)&&u.is(t.color)}}(d||(t.ColorInformation=d={})),function(e){e.create=function(e,t,r){return{label:e,textEdit:t,additionalTextEdits:r}},e.is=function(e){var t=e;return Me.objectLiteral(t)&&Me.string(t.label)&&(Me.undefined(t.textEdit)||w.is(t))&&(Me.undefined(t.additionalTextEdits)||Me.typedArray(t.additionalTextEdits,w.is))}}(h||(t.ColorPresentation=h={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(p||(t.FoldingRangeKind=p={})),function(e){e.create=function(e,t,r,n,i,o){var s={startLine:e,endLine:t};return Me.defined(r)&&(s.startCharacter=r),Me.defined(n)&&(s.endCharacter=n),Me.defined(i)&&(s.kind=i),Me.defined(o)&&(s.collapsedText=o),s},e.is=function(e){var t=e;return Me.objectLiteral(t)&&Me.uinteger(t.startLine)&&Me.uinteger(t.startLine)&&(Me.undefined(t.startCharacter)||Me.uinteger(t.startCharacter))&&(Me.undefined(t.endCharacter)||Me.uinteger(t.endCharacter))&&(Me.undefined(t.kind)||Me.string(t.kind))}}(f||(t.FoldingRange=f={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Me.defined(t)&&c.is(t.location)&&Me.string(t.message)}}(m||(t.DiagnosticRelatedInformation=m={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(g||(t.DiagnosticSeverity=g={})),function(e){e.Unnecessary=1,e.Deprecated=2}(y||(t.DiagnosticTag=y={})),function(e){e.is=function(e){var t=e;return Me.objectLiteral(t)&&Me.string(t.href)}}(v||(t.CodeDescription=v={})),function(e){e.create=function(e,t,r,n,i,o){var s={range:e,message:t};return Me.defined(r)&&(s.severity=r),Me.defined(n)&&(s.code=n),Me.defined(i)&&(s.source=i),Me.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t,r=e;return Me.defined(r)&&a.is(r.range)&&Me.string(r.message)&&(Me.number(r.severity)||Me.undefined(r.severity))&&(Me.integer(r.code)||Me.string(r.code)||Me.undefined(r.code))&&(Me.undefined(r.codeDescription)||Me.string(null===(t=r.codeDescription)||void 0===t?void 0:t.href))&&(Me.string(r.source)||Me.undefined(r.source))&&(Me.undefined(r.relatedInformation)||Me.typedArray(r.relatedInformation,m.is))}}(_||(t.Diagnostic=_={})),function(e){e.create=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i={title:e,command:t};return Me.defined(r)&&r.length>0&&(i.arguments=r),i},e.is=function(e){var t=e;return Me.defined(t)&&Me.string(t.title)&&Me.string(t.command)}}(b||(t.Command=b={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Me.objectLiteral(t)&&Me.string(t.newText)&&a.is(t.range)}}(w||(t.TextEdit=w={})),function(e){e.create=function(e,t,r){var n={label:e};return void 0!==t&&(n.needsConfirmation=t),void 0!==r&&(n.description=r),n},e.is=function(e){var t=e;return Me.objectLiteral(t)&&Me.string(t.label)&&(Me.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(Me.string(t.description)||void 0===t.description)}}(S||(t.ChangeAnnotation=S={})),function(e){e.is=function(e){var t=e;return Me.string(t)}}(E||(t.ChangeAnnotationIdentifier=E={})),function(e){e.replace=function(e,t,r){return{range:e,newText:t,annotationId:r}},e.insert=function(e,t,r){return{range:{start:e,end:e},newText:t,annotationId:r}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return w.is(t)&&(S.is(t.annotationId)||E.is(t.annotationId))}}(C||(t.AnnotatedTextEdit=C={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Me.defined(t)&&D.is(t.textDocument)&&Array.isArray(t.edits)}}(T||(t.TextDocumentEdit=T={})),function(e){e.create=function(e,t,r){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),void 0!==r&&(n.annotationId=r),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&Me.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Me.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Me.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||E.is(t.annotationId))}}(k||(t.CreateFile=k={})),function(e){e.create=function(e,t,r,n){var i={kind:"rename",oldUri:e,newUri:t};return void 0===r||void 0===r.overwrite&&void 0===r.ignoreIfExists||(i.options=r),void 0!==n&&(i.annotationId=n),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Me.string(t.oldUri)&&Me.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Me.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Me.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||E.is(t.annotationId))}}(P||(t.RenameFile=P={})),function(e){e.create=function(e,t,r){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),void 0!==r&&(n.annotationId=r),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Me.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Me.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Me.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||E.is(t.annotationId))}}(R||(t.DeleteFile=R={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return Me.string(e.kind)?k.is(e)||P.is(e)||R.is(e):T.is(e)})))}}(x||(t.WorkspaceEdit=x={}));var M,O,D,I,A,N,L,F,j,q,U,B,$,W,H,V,G,K,z,X,J,Y,Q,Z,ee,te,re,ne,ie,oe,se,ae,ce,le,ue,de,he,pe,fe,me,ge,ye,ve,_e,be,we,Se,Ee,Ce,Te,ke,Pe=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,r){var n,i;if(void 0===r?n=w.insert(e,t):E.is(r)?(i=r,n=C.insert(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=C.insert(e,t,i)),this.edits.push(n),void 0!==i)return i},e.prototype.replace=function(e,t,r){var n,i;if(void 0===r?n=w.replace(e,t):E.is(r)?(i=r,n=C.replace(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=C.replace(e,t,i)),this.edits.push(n),void 0!==i)return i},e.prototype.delete=function(e,t){var r,n;if(void 0===t?r=w.del(e):E.is(t)?(n=t,r=C.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),n=this.changeAnnotations.manage(t),r=C.del(e,n)),this.edits.push(r),void 0!==n)return n},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Re=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var r;if(E.is(e)?r=e:(r=this.nextId(),t=e),void 0!==this._annotations[r])throw new Error("Id ".concat(r," is already in use."));if(void 0===t)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=t,this._size++,r},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),xe=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Re(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(T.is(e)){var r=new Pe(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=r}}))):e.changes&&Object.keys(e.changes).forEach((function(r){var n=new Pe(e.changes[r]);t._textEditChanges[r]=n}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(D.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(n=this._textEditChanges[t.uri])){var r={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(r),n=new Pe(i,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var n;if(!(n=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,n=new Pe(i),this._textEditChanges[e]=n}return n},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Re,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var n,i,o;if(S.is(t)||E.is(t)?n=t:r=t,void 0===n?i=k.create(e,r):(o=E.is(n)?n:this._changeAnnotations.manage(n),i=k.create(e,r,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e.prototype.renameFile=function(e,t,r,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o,s;if(S.is(r)||E.is(r)?i=r:n=r,void 0===i?o=P.create(e,t,n):(s=E.is(i)?i:this._changeAnnotations.manage(i),o=P.create(e,t,n,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s},e.prototype.deleteFile=function(e,t,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var n,i,o;if(S.is(t)||E.is(t)?n=t:r=t,void 0===n?i=R.create(e,r):(o=E.is(n)?n:this._changeAnnotations.manage(n),i=R.create(e,r,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e}();t.WorkspaceChange=xe,function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Me.defined(t)&&Me.string(t.uri)}}(M||(t.TextDocumentIdentifier=M={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Me.defined(t)&&Me.string(t.uri)&&Me.integer(t.version)}}(O||(t.VersionedTextDocumentIdentifier=O={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Me.defined(t)&&Me.string(t.uri)&&(null===t.version||Me.integer(t.version))}}(D||(t.OptionalVersionedTextDocumentIdentifier=D={})),function(e){e.create=function(e,t,r,n){return{uri:e,languageId:t,version:r,text:n}},e.is=function(e){var t=e;return Me.defined(t)&&Me.string(t.uri)&&Me.string(t.languageId)&&Me.integer(t.version)&&Me.string(t.text)}}(I||(t.TextDocumentItem=I={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){var r=t;return r===e.PlainText||r===e.Markdown}}(A||(t.MarkupKind=A={})),function(e){e.is=function(e){var t=e;return Me.objectLiteral(e)&&A.is(t.kind)&&Me.string(t.value)}}(N||(t.MarkupContent=N={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(L||(t.CompletionItemKind=L={})),function(e){e.PlainText=1,e.Snippet=2}(F||(t.InsertTextFormat=F={})),function(e){e.Deprecated=1}(j||(t.CompletionItemTag=j={})),function(e){e.create=function(e,t,r){return{newText:e,insert:t,replace:r}},e.is=function(e){var t=e;return t&&Me.string(t.newText)&&a.is(t.insert)&&a.is(t.replace)}}(q||(t.InsertReplaceEdit=q={})),function(e){e.asIs=1,e.adjustIndentation=2}(U||(t.InsertTextMode=U={})),function(e){e.is=function(e){var t=e;return t&&(Me.string(t.detail)||void 0===t.detail)&&(Me.string(t.description)||void 0===t.description)}}(B||(t.CompletionItemLabelDetails=B={})),function(e){e.create=function(e){return{label:e}}}($||(t.CompletionItem=$={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(W||(t.CompletionList=W={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Me.string(t)||Me.objectLiteral(t)&&Me.string(t.language)&&Me.string(t.value)}}(H||(t.MarkedString=H={})),function(e){e.is=function(e){var t=e;return!!t&&Me.objectLiteral(t)&&(N.is(t.contents)||H.is(t.contents)||Me.typedArray(t.contents,H.is))&&(void 0===e.range||a.is(e.range))}}(V||(t.Hover=V={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(G||(t.ParameterInformation=G={})),function(e){e.create=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i={label:e};return Me.defined(t)&&(i.documentation=t),Me.defined(r)?i.parameters=r:i.parameters=[],i}}(K||(t.SignatureInformation=K={})),function(e){e.Text=1,e.Read=2,e.Write=3}(z||(t.DocumentHighlightKind=z={})),function(e){e.create=function(e,t){var r={range:e};return Me.number(t)&&(r.kind=t),r}}(X||(t.DocumentHighlight=X={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(J||(t.SymbolKind=J={})),function(e){e.Deprecated=1}(Y||(t.SymbolTag=Y={})),function(e){e.create=function(e,t,r,n,i){var o={name:e,kind:t,location:{uri:n,range:r}};return i&&(o.containerName=i),o}}(Q||(t.SymbolInformation=Q={})),function(e){e.create=function(e,t,r,n){return void 0!==n?{name:e,kind:t,location:{uri:r,range:n}}:{name:e,kind:t,location:{uri:r}}}}(Z||(t.WorkspaceSymbol=Z={})),function(e){e.create=function(e,t,r,n,i,o){var s={name:e,detail:t,kind:r,range:n,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&Me.string(t.name)&&Me.number(t.kind)&&a.is(t.range)&&a.is(t.selectionRange)&&(void 0===t.detail||Me.string(t.detail))&&(void 0===t.deprecated||Me.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(ee||(t.DocumentSymbol=ee={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(te||(t.CodeActionKind=te={})),function(e){e.Invoked=1,e.Automatic=2}(re||(t.CodeActionTriggerKind=re={})),function(e){e.create=function(e,t,r){var n={diagnostics:e};return null!=t&&(n.only=t),null!=r&&(n.triggerKind=r),n},e.is=function(e){var t=e;return Me.defined(t)&&Me.typedArray(t.diagnostics,_.is)&&(void 0===t.only||Me.typedArray(t.only,Me.string))&&(void 0===t.triggerKind||t.triggerKind===re.Invoked||t.triggerKind===re.Automatic)}}(ne||(t.CodeActionContext=ne={})),function(e){e.create=function(e,t,r){var n={title:e},i=!0;return"string"==typeof t?(i=!1,n.kind=t):b.is(t)?n.command=t:n.edit=t,i&&void 0!==r&&(n.kind=r),n},e.is=function(e){var t=e;return t&&Me.string(t.title)&&(void 0===t.diagnostics||Me.typedArray(t.diagnostics,_.is))&&(void 0===t.kind||Me.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||b.is(t.command))&&(void 0===t.isPreferred||Me.boolean(t.isPreferred))&&(void 0===t.edit||x.is(t.edit))}}(ie||(t.CodeAction=ie={})),function(e){e.create=function(e,t){var r={range:e};return Me.defined(t)&&(r.data=t),r},e.is=function(e){var t=e;return Me.defined(t)&&a.is(t.range)&&(Me.undefined(t.command)||b.is(t.command))}}(oe||(t.CodeLens=oe={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Me.defined(t)&&Me.uinteger(t.tabSize)&&Me.boolean(t.insertSpaces)}}(se||(t.FormattingOptions=se={})),function(e){e.create=function(e,t,r){return{range:e,target:t,data:r}},e.is=function(e){var t=e;return Me.defined(t)&&a.is(t.range)&&(Me.undefined(t.target)||Me.string(t.target))}}(ae||(t.DocumentLink=ae={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var r=t;return Me.objectLiteral(r)&&a.is(r.range)&&(void 0===r.parent||e.is(r.parent))}}(ce||(t.SelectionRange=ce={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(le||(t.SemanticTokenTypes=le={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(ue||(t.SemanticTokenModifiers=ue={})),function(e){e.is=function(e){var t=e;return Me.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(de||(t.SemanticTokens=de={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){var t=e;return null!=t&&a.is(t.range)&&Me.string(t.text)}}(he||(t.InlineValueText=he={})),function(e){e.create=function(e,t,r){return{range:e,variableName:t,caseSensitiveLookup:r}},e.is=function(e){var t=e;return null!=t&&a.is(t.range)&&Me.boolean(t.caseSensitiveLookup)&&(Me.string(t.variableName)||void 0===t.variableName)}}(pe||(t.InlineValueVariableLookup=pe={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){var t=e;return null!=t&&a.is(t.range)&&(Me.string(t.expression)||void 0===t.expression)}}(fe||(t.InlineValueEvaluatableExpression=fe={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){var t=e;return Me.defined(t)&&a.is(e.stoppedLocation)}}(me||(t.InlineValueContext=me={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(ge||(t.InlayHintKind=ge={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){var t=e;return Me.objectLiteral(t)&&(void 0===t.tooltip||Me.string(t.tooltip)||N.is(t.tooltip))&&(void 0===t.location||c.is(t.location))&&(void 0===t.command||b.is(t.command))}}(ye||(t.InlayHintLabelPart=ye={})),function(e){e.create=function(e,t,r){var n={position:e,label:t};return void 0!==r&&(n.kind=r),n},e.is=function(e){var t=e;return Me.objectLiteral(t)&&s.is(t.position)&&(Me.string(t.label)||Me.typedArray(t.label,ye.is))&&(void 0===t.kind||ge.is(t.kind))&&void 0===t.textEdits||Me.typedArray(t.textEdits,w.is)&&(void 0===t.tooltip||Me.string(t.tooltip)||N.is(t.tooltip))&&(void 0===t.paddingLeft||Me.boolean(t.paddingLeft))&&(void 0===t.paddingRight||Me.boolean(t.paddingRight))}}(ve||(t.InlayHint=ve={})),function(e){e.createSnippet=function(e){return{kind:"snippet",value:e}}}(_e||(t.StringValue=_e={})),function(e){e.create=function(e,t,r,n){return{insertText:e,filterText:t,range:r,command:n}}}(be||(t.InlineCompletionItem=be={})),function(e){e.create=function(e){return{items:e}}}(we||(t.InlineCompletionList=we={})),function(e){e.Invoked=0,e.Automatic=1}(Se||(t.InlineCompletionTriggerKind=Se={})),function(e){e.create=function(e,t){return{range:e,text:t}}}(Ee||(t.SelectedCompletionInfo=Ee={})),function(e){e.create=function(e,t){return{triggerKind:e,selectedCompletionInfo:t}}}(Ce||(t.InlineCompletionContext=Ce={})),function(e){e.is=function(e){var t=e;return Me.objectLiteral(t)&&n.is(t.uri)&&Me.string(t.name)}}(Te||(t.WorkspaceFolder=Te={})),t.EOL=["\n","\r\n","\r"],function(e){function t(e,r){if(e.length<=1)return e;var n=e.length/2|0,i=e.slice(0,n),o=e.slice(n);t(i,r),t(o,r);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var l=r(i[s],o[a]);e[c++]=l<=0?i[s++]:o[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,r,n){return new Oe(e,t,r,n)},e.is=function(e){var t=e;return!!(Me.defined(t)&&Me.string(t.uri)&&(Me.undefined(t.languageId)||Me.string(t.languageId))&&Me.uinteger(t.lineCount)&&Me.func(t.getText)&&Me.func(t.positionAt)&&Me.func(t.offsetAt))},e.applyEdits=function(e,r){for(var n=e.getText(),i=t(r,(function(e,t){var r=e.range.start.line-t.range.start.line;return 0===r?e.range.start.character-t.range.start.character:r})),o=n.length,s=i.length-1;s>=0;s--){var a=i[s],c=e.offsetAt(a.range.start),l=e.offsetAt(a.range.end);if(!(l<=o))throw new Error("Overlapping edit");n=n.substring(0,c)+a.newText+n.substring(l,n.length),o=c}return n}}(ke||(t.TextDocument=ke={}));var Me,Oe=function(){function e(e,t,r,n){this._uri=e,this._languageId=t,this._version=r,this._content=n,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,r=!0,n=0;n<t.length;n++){r&&(e.push(n),r=!1);var i=t.charAt(n);r="\r"===i||"\n"===i,"\r"===i&&n+1<t.length&&"\n"===t.charAt(n+1)&&n++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),r=0,n=t.length;if(0===n)return s.create(0,e);for(;r<n;){var i=Math.floor((r+n)/2);t[i]>e?n=i:r=i+1}var o=r-1;return s.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var r=t[e.line],n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,n),r)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,r,n){return"[object Number]"===t.call(e)&&r<=e&&e<=n},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Me||(Me={}))}))},3655:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3655,e.exports=t},4200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o,s,a,c,l=r(6928),u=r(9896),d=Object.prototype.toString;function h(e){return void 0!==e}function p(e){return"[object String]"===d.call(e)}function f(e){return JSON.parse(u.readFileSync(e,"utf8"))}function m(e,t){return c&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,r){var n=r[0],i=t[n],o=e;return"string"==typeof i?o=i:"number"!=typeof i&&"boolean"!=typeof i&&null!=i||(o=String(i)),o}))}function g(e){return function(t,r){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return n=t,"[object Number]"===d.call(n)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):m(e[t],i):p(r)?(console.warn("Message "+r+" didn't get externalized correctly."),m(r,i)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function y(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return m(t,r)}function v(e,t){return s[e]=t,t}function _(e){try{return function(e){var t=f(l.join(e,"nls.metadata.json")),r=Object.create(null);for(var n in t){var i=t[n];r[n]=i.messages}return r}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function b(e,t){var r;if(!0===a.languagePackSupport&&void 0!==a.cacheRoot&&void 0!==a.languagePackId&&void 0!==a.translationsConfigFile&&void 0!==a.translationsConfig)try{r=function(e,t){var r,n,i,o=l.join(a.cacheRoot,e.id+"-"+e.hash+".json"),s=!1,c=!1;try{return r=JSON.parse(u.readFileSync(o,{encoding:"utf8",flag:"r"})),n=o,i=new Date,u.utimes(n,i,i,(function(){})),r}catch(e){if("ENOENT"===e.code)c=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),u.unlink(o,(function(e){e&&console.error("Deleting corrupted bundle "+o+" failed.")})),s=!0}}if(r=function(e,t){var r=a.translationsConfig[e.id];if(r){var n=f(r).contents,i=f(l.join(t,"nls.metadata.json")),o=Object.create(null);for(var s in i){var c=i[s],u=n[e.outDir+"/"+s];if(u){for(var d=[],h=0;h<c.keys.length;h++){var m=c.keys[h],g=u[p(m)?m:m.key];void 0===g&&(g=c.messages[h]),d.push(g)}o[s]=d}else o[s]=c.messages}return o}}(e,t),!r||s)return r;if(c)try{u.writeFileSync(o,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return r;throw e}return r}(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!r){if(a.languagePackSupport)return _(t);var n=function(e){for(var t=a.language;t;){var r=l.join(e,"nls.bundle."+t+".json");if(u.existsSync(r))return r;var n=t.lastIndexOf("-");t=n>0?t.substring(0,n):void 0}if(void 0===t&&(r=l.join(e,"nls.bundle.json"),u.existsSync(r)))return r}(t);if(n)try{return f(n)}catch(e){console.log("Loading in the box message bundle failed.",e)}r=_(t)}return r}function w(e){if(!e)return y;var t=l.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),a.messageFormat===n.both||a.messageFormat===n.bundle){var r=function(e){for(var t,r=l.dirname(e);t=l.join(r,"nls.metadata.header.json"),!u.existsSync(t);){var n=l.dirname(r);if(n===r){t=void 0;break}r=n}return t}(e);if(r){var i=l.dirname(r),o=s[i];if(void 0===o)try{var d=JSON.parse(u.readFileSync(r,"utf8"));try{var p=b(d,i);o=v(i,p?{header:d,nlsBundle:p}:null)}catch(e){console.error("Failed to load nls bundle",e),o=v(i,null)}}catch(e){console.error("Failed to read header file",e),o=v(i,null)}if(o){var m=e.substr(i.length+1).replace(/\\/g,"/"),_=o.nlsBundle[m];return void 0===_?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):g(_)}}}if(a.messageFormat===n.both||a.messageFormat===n.file)try{var w=f(function(e){var t;if(a.cacheLanguageResolution&&t);else{if(c||!a.language)t=".nls.json";else for(var r=a.language;r;){var n=".nls."+r+".json";if(u.existsSync(e+n)){t=n;break}var i=r.lastIndexOf("-");i>0?r=r.substring(0,i):(t=".nls.json",r=null)}a.cacheLanguageResolution}return e+t}(e));return Array.isArray(w)?g(w):h(w.messages)&&h(w.keys)?g(w.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(n=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone="standalone",e.languagePack="languagePack"}(i=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&h(t.key)&&h(t.comment)}}(o||(o={})),function(){if(a={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:n.bundle},p(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var r=e.availableLanguages["*"];p(r)&&(t=r)}if(p(e.locale)&&(a.locale=e.locale.toLowerCase()),void 0===t?a.language=a.locale:"en"!==t&&(a.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(a.languagePackSupport=e._languagePackSupport),p(e._cacheRoot)&&(a.cacheRoot=e._cacheRoot),p(e._languagePackId)&&(a.languagePackId=e._languagePackId),p(e._translationsConfigFile)){a.translationsConfigFile=e._translationsConfigFile;try{a.translationsConfig=f(a.translationsConfigFile)}catch(t){if(e._corruptedFile){var i=l.dirname(e._corruptedFile);u.exists(i,(function(t){t&&u.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}c="pseudo"===a.locale,s=Object.create(null)}(),t.loadMessageBundle=w,t.config=function(e){return e&&(p(e.locale)&&(a.locale=e.locale.toLowerCase(),a.language=a.locale,s=Object.create(null)),void 0!==e.messageFormat&&(a.messageFormat=e.messageFormat),e.bundleFormat===i.standalone&&!0===a.languagePackSupport&&(a.languagePackSupport=!1)),c="pseudo"===a.locale,w}},2375:(e,t,r)=>{"use strict";r.r(t),r.d(t,{URI:()=>f,uriToFsPath:()=>b});var n,i,o,s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});if("object"==typeof process)o="win32"===process.platform;else if("object"==typeof navigator){var a=navigator.userAgent;o=a.indexOf("Windows")>=0}var c=/^\w[\w\d+.-]*$/,l=/^\//,u=/^\/\//,d="",h="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,f=function(){function e(e,t,r,n,i,o){void 0===o&&(o=!1),"object"==typeof e?(this.scheme=e.scheme||d,this.authority=e.authority||d,this.path=e.path||d,this.query=e.query||d,this.fragment=e.fragment||d):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||d,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==h&&(t=h+t):t=h}return t}(this.scheme,r||d),this.query=n||d,this.fragment=i||d,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!l.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,o))}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString},Object.defineProperty(e.prototype,"fsPath",{get:function(){return b(this,!1)},enumerable:!0,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,r=e.authority,n=e.path,i=e.query,o=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=d),void 0===r?r=this.authority:null===r&&(r=d),void 0===n?n=this.path:null===n&&(n=d),void 0===i?i=this.query:null===i&&(i=d),void 0===o?o=this.fragment:null===o&&(o=d),t===this.scheme&&r===this.authority&&n===this.path&&i===this.query&&o===this.fragment?this:new g(t,r,n,i,o)},e.parse=function(e,t){void 0===t&&(t=!1);var r=p.exec(e);return r?new g(r[2]||d,C(r[4]||d),C(r[5]||d),C(r[7]||d),C(r[9]||d),t):new g(d,d,d,d,d)},e.file=function(e){var t=d;if(o&&(e=e.replace(/\\/g,h)),e[0]===h&&e[1]===h){var r=e.indexOf(h,2);-1===r?(t=e.substring(2),e=h):(t=e.substring(2,r),e=e.substring(r)||h)}return new g("file",t,e,d,d)},e.from=function(e){return new g(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),w(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var r=new g(t);return r._formatted=t.external,r._fsPath=t._sep===m?t.fsPath:null,r}return t},e}(),m=o?1:void 0,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return s(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=m),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(f),y=((i={})[58]="%3A",i[47]="%2F",i[63]="%3F",i[35]="%23",i[91]="%5B",i[93]="%5D",i[64]="%40",i[33]="%21",i[36]="%24",i[38]="%26",i[39]="%27",i[40]="%28",i[41]="%29",i[42]="%2A",i[43]="%2B",i[44]="%2C",i[59]="%3B",i[61]="%3D",i[32]="%20",i);function v(e,t){for(var r=void 0,n=-1,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==n&&(r+=encodeURIComponent(e.substring(n,i)),n=-1),void 0!==r&&(r+=e.charAt(i));else{void 0===r&&(r=e.substr(0,i));var s=y[o];void 0!==s?(-1!==n&&(r+=encodeURIComponent(e.substring(n,i)),n=-1),r+=s):-1===n&&(n=i)}}return-1!==n&&(r+=encodeURIComponent(e.substring(n))),void 0!==r?r:e}function _(e){for(var t=void 0,r=0;r<e.length;r++){var n=e.charCodeAt(r);35===n||63===n?(void 0===t&&(t=e.substr(0,r)),t+=y[n]):void 0!==t&&(t+=e[r])}return void 0!==t?t:e}function b(e,t){var r;return r=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,o&&(r=r.replace(/\//g,"\\")),r}function w(e,t){var r=t?_:v,n="",i=e.scheme,o=e.authority,s=e.path,a=e.query,c=e.fragment;if(i&&(n+=i,n+=":"),(o||"file"===i)&&(n+=h,n+=h),o){var l=o.indexOf("@");if(-1!==l){var u=o.substr(0,l);o=o.substr(l+1),-1===(l=u.indexOf(":"))?n+=r(u,!1):(n+=r(u.substr(0,l),!1),n+=":",n+=r(u.substr(l+1),!1)),n+="@"}-1===(l=(o=o.toLowerCase()).indexOf(":"))?n+=r(o,!1):(n+=r(o.substr(0,l),!1),n+=o.substr(l))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(d=s.charCodeAt(1))>=65&&d<=90&&(s="/"+String.fromCharCode(d+32)+":"+s.substr(3));else if(s.length>=2&&58===s.charCodeAt(1)){var d;(d=s.charCodeAt(0))>=65&&d<=90&&(s=String.fromCharCode(d+32)+":"+s.substr(2))}n+=r(s,!0)}return a&&(n+="?",n+=r(a,!1)),c&&(n+="#",n+=t?c:v(c,!1)),n}function S(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+S(e.substr(3)):e}}var E=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function C(e){return e.match(E)?e.replace(E,(function(e){return S(e)})):e}},6587:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},3338:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(2614),i=Buffer[Symbol.species];function o(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function s(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,o),o+=n.length}return o<t?new i(r.buffer,r.byteOffset,o):r},mask:o,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=new i(t):ArrayBuffer.isView(t)?r=new i(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:s},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(2627);e.exports.mask=function(e,r,n,i,s){s<48?o(e,r,n,i,s):t.mask(e,r,n,i,s)},e.exports.unmask=function(e,r){e.length<32?s(e,r):t.unmask(e,r)}}catch(e){}},2614:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"],r="undefined"!=typeof Blob;r&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},597:(e,t,r)=>{"use strict";const{kForOnEventAttribute:n,kListener:i}=r(2614),o=Symbol("kCode"),s=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),d=Symbol("kType"),h=Symbol("kWasClean");class p{constructor(e){this[u]=null,this[d]=e}get target(){return this[u]}get type(){return this[d]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class f extends p{constructor(e,t={}){super(e),this[o]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[o]}get reason(){return this[l]}get wasClean(){return this[h]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class g extends p{constructor(e,t={}){super(e),this[s]=void 0===t.data?null:t.data}get data(){return this[s]}}Object.defineProperty(g.prototype,"data",{enumerable:!0});const y={addEventListener(e,t,r={}){for(const o of this.listeners(e))if(!r[n]&&o[i]===t&&!o[n])return;let o;if("message"===e)o=function(e,r){const n=new g("message",{data:r?e:e.toString()});n[u]=this,v(t,this,n)};else if("close"===e)o=function(e,r){const n=new f("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[u]=this,v(t,this,n)};else if("error"===e)o=function(e){const r=new m("error",{error:e,message:e.message});r[u]=this,v(t,this,r)};else{if("open"!==e)return;o=function(){const e=new p("open");e[u]=this,v(t,this,e)}}o[n]=!!r[n],o[i]=t,r.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[i]===t&&!r[n]){this.removeListener(e,r);break}}};function v(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}e.exports={CloseEvent:f,ErrorEvent:m,Event:p,EventTarget:y,MessageEvent:g}},5926:(e,t,r)=>{"use strict";const{tokenChars:n}=r(5880);function i(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,o,s=Object.create(null),a=!1,c=!1,l=!1,u=-1,d=-1,h=-1,p=0;for(;p<e.length;p++)if(d=e.charCodeAt(p),void 0===r)if(-1===h&&1===n[d])-1===u&&(u=p);else if(0===p||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);const n=e.slice(u,h);44===d?(i(t,n,s),s=Object.create(null)):r=n,u=h=-1}}else-1===h&&-1!==u&&(h=p);else if(void 0===o)if(-1===h&&1===n[d])-1===u&&(u=p);else if(32===d||9===d)-1===h&&-1!==u&&(h=p);else if(59===d||44===d){if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p),i(s,e.slice(u,h),!0),44===d&&(i(t,r,s),s=Object.create(null),r=void 0),u=h=-1}else{if(61!==d||-1===u||-1!==h)throw new SyntaxError(`Unexpected character at index ${p}`);o=e.slice(u,p),u=h=-1}else if(c){if(1!==n[d])throw new SyntaxError(`Unexpected character at index ${p}`);-1===u?u=p:a||(a=!0),c=!1}else if(l)if(1===n[d])-1===u&&(u=p);else if(34===d&&-1!==u)l=!1,h=p;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===d&&61===e.charCodeAt(p-1))l=!0;else if(-1===h&&1===n[d])-1===u&&(u=p);else if(-1===u||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);let n=e.slice(u,h);a&&(n=n.replace(/\\/g,""),a=!1),i(s,o,n),44===d&&(i(t,r,s),s=Object.create(null),r=void 0),o=void 0,u=h=-1}}else-1===h&&(h=p);if(-1===u||l||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===h&&(h=p);const f=e.slice(u,h);return void 0===r?i(t,f,s):(void 0===o?i(s,f,!0):i(s,o,a?f.replace(/\\/g,""):f),i(t,r,s)),t}}},4759:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},2971:(e,t,r)=>{"use strict";const n=r(3106),i=r(3338),o=r(4759),{kStatusCode:s}=r(2614),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),u=Symbol("total-length"),d=Symbol("callback"),h=Symbol("buffers"),p=Symbol("error");let f;function m(e){this[h].push(e),this[u]+=e.length}function g(e){this[u]+=e.length,this[l]._maxPayload<1||this[u]<=this[l]._maxPayload?this[h].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][s]=1009,this.removeListener("data",g),this.reset())}function y(e){this[l]._inflate=null,e[s]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){f.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){f.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const o=this._isServer?"client":"server";if(!this._inflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[u]=0,this._inflate[h]=[],this._inflate.on("error",y),this._inflate.on("data",g)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=i.concat(this._inflate[h],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[h]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const o=this._isServer?"server":"client";if(!this._deflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[h]=[],this._deflate.on("data",m)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=i.concat(this._deflate[h],this._deflate[u]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[d]=null,this._deflate[u]=0,this._deflate[h]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},6286:(e,t,r)=>{"use strict";const{Writable:n}=r(2203),i=r(2971),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=r(2614),{concat:l,toArrayBuffer:u,unmask:d}=r(3338),{isValidStatusCode:h,isValidUTF8:p}=r(5880),f=Buffer[Symbol.species];e.exports=class extends n{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||o[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new f(t.buffer,t.byteOffset+e,t.length-e),new f(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=new f(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0])return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));const r=!(64&~t[0]);if(!r||this._extensions[i.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),r=t.readUInt32BE(0);r>Math.pow(2,21)-1?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&d(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)}))}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?l(r,t):"arraybuffer"===this._binaryType?u(l(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!0),this._state=0,this.startLoop(e)})))}else{const n=l(r,t);if(!this._skipUTF8Validation&&!p(n)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!1),this._state=0,this.startLoop(e)})))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate((()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)})));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,s),this.end();else{const r=e.readUInt16BE(0);if(!h(r)){const e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const n=new f(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!p(n)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,n),this.end()}this._state=0}}createError(e,t,r,n,i){this._loop=!1,this._errored=!0;const o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,this.createError),o.code=i,o[a]=n,o}}},8533:(e,t,r)=>{"use strict";const{Duplex:n}=r(2203),{randomFillSync:i}=r(6982),o=r(2971),{EMPTY_BUFFER:s,kWebSocket:a,NOOP:c}=r(2614),{isBlob:l,isValidStatusCode:u}=r(5880),{mask:d,toBuffer:h}=r(3338),p=Symbol("kByteLength"),f=Buffer.alloc(4),m=8192;let g,y=m;class v{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[a]=void 0}static frame(e,t){let r,n,o=!1,s=2,a=!1;t.mask&&(r=t.maskBuffer||f,t.generateMask?t.generateMask(r):(y===m&&(void 0===g&&(g=Buffer.alloc(m)),i(g,0,m),y=0),r[0]=g[y++],r[1]=g[y++],r[2]=g[y++],r[3]=g[y++]),a=!(r[0]|r[1]|r[2]|r[3]),s=6),"string"==typeof e?n=t.mask&&!a||void 0===t[p]?(e=Buffer.from(e)).length:t[p]:(n=e.length,o=t.mask&&t.readOnly&&!a);let c=n;n>=65536?(s+=8,c=127):n>125&&(s+=2,c=126);const l=Buffer.allocUnsafe(o?n+s:s);return l[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(l[0]|=64),l[1]=c,126===c?l.writeUInt16BE(n,2):127===c&&(l[2]=l[3]=0,l.writeUIntBE(n,4,6)),t.mask?(l[1]|=128,l[s-4]=r[0],l[s-3]=r[1],l[s-2]=r[2],l[s-1]=r[3],a?[l,e]:o?(d(e,r,l,s,n),[l]):(d(e,r,e,0,n),[l,e])):[l,e]}close(e,t,r,n){let i;if(void 0===e)i=s;else{if("number"!=typeof e||!u(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+r),i.writeUInt16BE(e,0),"string"==typeof t?i.write(t,2):i.set(t,2)}else i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0)}const o={[p]:i.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,i,!1,o,n]):this.sendFrame(v.frame(i,o),n)}ping(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):l(e)?(n=e.size,i=!1):(n=(e=h(e)).length,i=h.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[p]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(v.frame(e,o),r)}pong(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):l(e)?(n=e.size,i=!1):(n=(e=h(e)).length,i=h.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[p]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(v.frame(e,o),r)}send(e,t,r){const n=this._extensions[o.extensionName];let i,s,a=t.binary?2:1,c=t.compress;"string"==typeof e?(i=Buffer.byteLength(e),s=!1):l(e)?(i=e.size,s=!1):(i=(e=h(e)).length,s=h.readOnly),this._firstFragment?(this._firstFragment=!1,c&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=i>=n._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0);const u={[p]:i,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:c};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,u,r]):this.getBlobData(e,this._compress,u,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}getBlobData(e,t,r,n){this._bufferedBytes+=r[p],this._state=2,e.arrayBuffer().then((e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(_,this,e,n)}this._bufferedBytes-=r[p];const i=h(e);t?this.dispatch(i,t,r,n):(this._state=0,this.sendFrame(v.frame(i,r),n),this.dequeue())})).catch((e=>{process.nextTick(b,this,e,n)}))}dispatch(e,t,r,n){if(!t)return void this.sendFrame(v.frame(e,r),n);const i=this._extensions[o.extensionName];this._bufferedBytes+=r[p],this._state=1,i.compress(e,r.fin,((e,t)=>{this._socket.destroyed?_(this,new Error("The socket was closed while data was being compressed"),n):(this._bufferedBytes-=r[p],this._state=0,r.readOnly=!1,this.sendFrame(v.frame(t,r),n),this.dequeue())}))}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][p],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][p],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function _(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){const n=e._queue[r],i=n[n.length-1];"function"==typeof i&&i(t)}}function b(e,t,r){_(e,t,r),e.onerror(t)}e.exports=v},3719:(e,t,r)=>{"use strict";const{Duplex:n}=r(2203);function i(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;const a=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,r){const n=!r&&a._readableState.objectMode?t.toString():t;a.push(n)||e.pause()})),e.once("error",(function(e){a.destroyed||(r=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(i,a);let o=!1;e.once("error",(function(e){o=!0,n(e)})),e.once("close",(function(){o||n(t),process.nextTick(i,a)})),r&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){a._write(t,r,n)}))},a.on("end",o),a.on("error",s),a}},8237:(e,t,r)=>{"use strict";const{tokenChars:n}=r(5880);e.exports={parse:function(e){const t=new Set;let r=-1,i=-1,o=0;for(;o<e.length;o++){const s=e.charCodeAt(o);if(-1===i&&1===n[s])-1===r&&(r=o);else if(0===o||32!==s&&9!==s){if(44!==s)throw new SyntaxError(`Unexpected character at index ${o}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${o}`);-1===i&&(i=o);const n=e.slice(r,i);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);t.add(n),r=i=-1}}else-1===i&&-1!==r&&(i=o)}if(-1===r||-1!==i)throw new SyntaxError("Unexpected end of input");const s=e.slice(r,o);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return t.add(s),t}}},5880:(e,t,r)=>{"use strict";const{isUtf8:n}=r(181),{hasBlob:i}=r(2614);function o(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(e.exports={isBlob:function(e){return i&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:o,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},n)e.exports.isValidUTF8=function(e){return e.length<24?o(e):n(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(3148);e.exports.isValidUTF8=function(e){return e.length<32?o(e):t(e)}}catch(e){}},1722:(e,t,r)=>{"use strict";const n=r(4434),i=r(8611),{Duplex:o}=r(2203),{createHash:s}=r(6982),a=r(5926),c=r(2971),l=r(8237),u=r(1060),{GUID:d,kWebSocket:h}=r(2614),p=/^[+/0-9A-Za-z]{22}==$/;function f(e){e._state=2,e.emit("close")}function m(){this.destroy()}function g(e,t,r,n){r=r||i.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function y(e,t,r,n,i){if(e.listenerCount("wsClientError")){const n=new Error(i);Error.captureStackTrace(n,y),e.emit("wsClientError",n,r,t)}else g(r,n,i)}e.exports=class extends n{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=i.createServer(((e,t)=>{const r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(f,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(f,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{f(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",m);const i=e.headers["sec-websocket-key"],o=e.headers.upgrade,s=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void y(this,e,t,405,"Invalid HTTP method");if(void 0===o||"websocket"!==o.toLowerCase())return void y(this,e,t,400,"Invalid Upgrade header");if(void 0===i||!p.test(i))return void y(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==s&&13!==s)return void y(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void g(t,400);const u=e.headers["sec-websocket-protocol"];let d=new Set;if(void 0!==u)try{d=l.parse(u)}catch(r){return void y(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const h=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&void 0!==h){const r=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(h);e[c.extensionName]&&(r.accept(e[c.extensionName]),f[c.extensionName]=r)}catch(r){return void y(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const o={origin:e.headers[8===s?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,((o,s,a,c)=>{if(!o)return g(t,s||401,a,c);this.completeUpgrade(f,i,d,e,t,r,n)}));if(!this.options.verifyClient(o))return g(t,401)}this.completeUpgrade(f,i,d,e,t,r,n)}completeUpgrade(e,t,r,n,i,o,l){if(!i.readable||!i.writable)return i.destroy();if(i[h])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return g(i,503);const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(t+d).digest("base64")}`],p=new this.options.WebSocket(null,void 0,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(u.push(`Sec-WebSocket-Protocol: ${e}`),p._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,r=a.format({[c.extensionName]:[t]});u.push(`Sec-WebSocket-Extensions: ${r}`),p._extensions=e}this.emit("headers",u,n),i.write(u.concat("\r\n").join("\r\n")),i.removeListener("error",m),p.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",(()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(f,this)}))),l(p,n)}}},1060:(e,t,r)=>{"use strict";const n=r(4434),i=r(5692),o=r(8611),s=r(9278),a=r(4756),{randomBytes:c,createHash:l}=r(6982),{Duplex:u,Readable:d}=r(2203),{URL:h}=r(7016),p=r(2971),f=r(6286),m=r(8533),{isBlob:g}=r(5880),{BINARY_TYPES:y,EMPTY_BUFFER:v,GUID:_,kForOnEventAttribute:b,kListener:w,kStatusCode:S,kWebSocket:E,NOOP:C}=r(2614),{EventTarget:{addEventListener:T,removeEventListener:k}}=r(597),{format:P,parse:R}=r(5926),{toBuffer:x}=r(3338),M=3e4,O=Symbol("kAborted"),D=[8,13],I=["CONNECTING","OPEN","CLOSING","CLOSED"],A=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class N extends n{constructor(e,t,r){super(),this._binaryType=y[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=v,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=N.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),L(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){y.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new f({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),i=new m(e,this._extensions,r.generateMask);this._receiver=n,this._sender=i,this._socket=e,n[E]=this,i[E]=this,e[E]=this,n.on("conclude",$),n.on("drain",W),n.on("error",H),n.on("message",G),n.on("ping",K),n.on("pong",z),i.onerror=J,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Q),e.on("data",Z),e.on("end",ee),e.on("error",te),this._readyState=N.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=N.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[p.extensionName]&&this._extensions[p.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=N.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==N.CLOSED)if(this.readyState!==N.CONNECTING)this.readyState!==N.CLOSING?(this._readyState=N.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),Y(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";U(this,this._req,e)}}pause(){this.readyState!==N.CONNECTING&&this.readyState!==N.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===N.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||v,t,r)):B(this,e,r)}pong(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===N.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||v,t,r)):B(this,e,r)}resume(){this.readyState!==N.CONNECTING&&this.readyState!==N.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==N.OPEN)return void B(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[p.extensionName]||(n.compress=!1),this._sender.send(e||v,n,r)}terminate(){if(this.readyState!==N.CLOSED)if(this.readyState!==N.CONNECTING)this._socket&&(this._readyState=N.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";U(this,this._req,e)}}}function L(e,t,r,n){const s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:D[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=s.autoPong,!D.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${D.join(", ")})`);let a;if(t instanceof h)a=t;else try{a=new h(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;const u="wss:"===a.protocol,d="ws+unix:"===a.protocol;let f;if("ws:"===a.protocol||u||d?d&&!a.pathname?f="The URL's pathname is empty":a.hash&&(f="The URL contains a fragment identifier"):f='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',f){const t=new SyntaxError(f);if(0===e._redirects)throw t;return void F(e,t)}const m=u?443:80,g=c(16).toString("base64"),y=u?i.request:o.request,v=new Set;let b,w;if(s.createConnection=s.createConnection||(u?q:j),s.defaultPort=s.defaultPort||m,s.port=a.port||m,s.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":g,Connection:"Upgrade",Upgrade:"websocket"},s.path=a.pathname+a.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(b=new p(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=P({[p.extensionName]:b.offer()})),r.length){for(const e of r){if("string"!=typeof e||!A.test(e)||v.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");v.add(e)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(a.username||a.password)&&(s.auth=`${a.username}:${a.password}`),d){const e=s.path.split(":");s.socketPath=e[0],s.path=e[1]}if(s.followRedirects){if(0===e._redirects){e._originalIpc=d,e._originalSecure=u,e._originalHostOrSocketPath=d?s.socketPath:a.host;const t=n&&n.headers;if(n={...n,headers:{}},t)for(const[e,r]of Object.entries(t))n.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=d?!!e._originalIpc&&s.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete s.headers.authorization,delete s.headers.cookie,t||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),w=e._req=y(s),e._redirects&&e.emit("redirect",e.url,w)}else w=e._req=y(s);s.timeout&&w.on("timeout",(()=>{U(e,w,"Opening handshake has timed out")})),w.on("error",(t=>{null===w||w[O]||(w=e._req=null,F(e,t))})),w.on("response",(i=>{const o=i.headers.location,a=i.statusCode;if(o&&s.followRedirects&&a>=300&&a<400){if(++e._redirects>s.maxRedirects)return void U(e,w,"Maximum redirects exceeded");let i;w.abort();try{i=new h(o,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${o}`);return void F(e,r)}L(e,i,r,n)}else e.emit("unexpected-response",w,i)||U(e,w,`Unexpected server response: ${i.statusCode}`)})),w.on("upgrade",((t,r,n)=>{if(e.emit("upgrade",t),e.readyState!==N.CONNECTING)return;w=e._req=null;const i=t.headers.upgrade;if(void 0===i||"websocket"!==i.toLowerCase())return void U(e,r,"Invalid Upgrade header");const o=l("sha1").update(g+_).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void U(e,r,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"];let c;if(void 0!==a?v.size?v.has(a)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":v.size&&(c="Server sent no subprotocol"),c)return void U(e,r,c);a&&(e._protocol=a);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!b)return void U(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=R(u)}catch(t){return void U(e,r,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(t);if(1!==n.length||n[0]!==p.extensionName)return void U(e,r,"Server indicated an extension that was not requested");try{b.accept(t[p.extensionName])}catch(t){return void U(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[p.extensionName]=b}e.setSocket(r,n,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})})),s.finishRequest?s.finishRequest(w,e):w.end()}function F(e,t){e._readyState=N.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function j(e){return e.path=e.socketPath,s.connect(e)}function q(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),a.connect(e)}function U(e,t,r){e._readyState=N.CLOSING;const n=new Error(r);Error.captureStackTrace(n,U),t.setHeader?(t[O]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(F,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function B(e,t,r){if(t){const r=g(t)?t.size:x(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${I[e.readyState]})`);process.nextTick(r,t)}}function $(e,t){const r=this[E];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[E]&&(r._socket.removeListener("data",Z),process.nextTick(X,r._socket),1005===e?r.close():r.close(e,t))}function W(){const e=this[E];e.isPaused||e._socket.resume()}function H(e){const t=this[E];void 0!==t._socket[E]&&(t._socket.removeListener("data",Z),process.nextTick(X,t._socket),t.close(e[S])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function V(){this[E].emitClose()}function G(e,t){this[E].emit("message",e,t)}function K(e){const t=this[E];t._autoPong&&t.pong(e,!this._isServer,C),t.emit("ping",e)}function z(e){this[E].emit("pong",e)}function X(e){e.resume()}function J(e){const t=this[E];t.readyState!==N.CLOSED&&(t.readyState===N.OPEN&&(t._readyState=N.CLOSING,Y(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function Y(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),M)}function Q(){const e=this[E];let t;this.removeListener("close",Q),this.removeListener("data",Z),this.removeListener("end",ee),e._readyState=N.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[E]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",V),e._receiver.on("finish",V))}function Z(e){this[E]._receiver.write(e)||this.pause()}function ee(){const e=this[E];e._readyState=N.CLOSING,e._receiver.end(),this.end()}function te(){const e=this[E];this.removeListener("error",te),this.on("error",C),e&&(e._readyState=N.CLOSING,this.destroy())}Object.defineProperty(N,"CONNECTING",{enumerable:!0,value:I.indexOf("CONNECTING")}),Object.defineProperty(N.prototype,"CONNECTING",{enumerable:!0,value:I.indexOf("CONNECTING")}),Object.defineProperty(N,"OPEN",{enumerable:!0,value:I.indexOf("OPEN")}),Object.defineProperty(N.prototype,"OPEN",{enumerable:!0,value:I.indexOf("OPEN")}),Object.defineProperty(N,"CLOSING",{enumerable:!0,value:I.indexOf("CLOSING")}),Object.defineProperty(N.prototype,"CLOSING",{enumerable:!0,value:I.indexOf("CLOSING")}),Object.defineProperty(N,"CLOSED",{enumerable:!0,value:I.indexOf("CLOSED")}),Object.defineProperty(N.prototype,"CLOSED",{enumerable:!0,value:I.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(N.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(N.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[b])return t[w];return null},set(t){for(const t of this.listeners(e))if(t[b]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[b]:!0})}})})),N.prototype.addEventListener=T,N.prototype.removeEventListener=k,e.exports=N},4824:(e,t,r)=>{var n=r(9896),i=r(3106),o=r(3070),s=r(4025),a=r(9023),c=r(4434).EventEmitter,l=r(2203).Transform,u=r(2203).PassThrough,d=r(2203).Writable;function h(e,t,r){"function"==typeof t&&(r=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!1),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==r&&(r=R),n.fstat(e,(function(n,i){if(n)return r(n);p(o.createFromFd(e,{autoClose:!0}),i.size,t,r)}))}function p(e,t,r,n){"function"==typeof r&&(n=r,r=null),null==r&&(r={}),null==r.autoClose&&(r.autoClose=!0),null==r.lazyEntries&&(r.lazyEntries=!1),null==r.decodeStrings&&(r.decodeStrings=!0);var i=!!r.decodeStrings;if(null==r.validateEntrySizes&&(r.validateEntrySizes=!0),null==r.strictFileNames&&(r.strictFileNames=!1),null==n&&(n=R),"number"!=typeof t)throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=Math.min(65557,t),s=C(o),a=t-s.length;b(e,s,0,o,a,(function(c){if(c)return n(c);for(var l=o-22;l>=0;l-=1)if(101010256===s.readUInt32LE(l)){var u=s.slice(l),d=u.readUInt16LE(4);if(0!==d)return n(new Error("multi-disk zip files are not supported: found disk number: "+d));var h=u.readUInt16LE(10),p=u.readUInt32LE(16),m=u.readUInt16LE(20),g=u.length-22;if(m!==g)return n(new Error("invalid comment length. expected: "+g+". found: "+m));var y=i?k(u,22,u.length,!1):u.slice(22);if(65535!==h&&4294967295!==p)return n(null,new f(e,p,t,h,y,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames));var v=C(20),_=a+l-v.length;return void b(e,v,0,v.length,_,(function(o){if(o)return n(o);if(117853008!==v.readUInt32LE(0))return n(new Error("invalid zip64 end of central directory locator signature"));var s=P(v,8),a=C(56);b(e,a,0,a.length,s,(function(o){return o?n(o):101075792!==a.readUInt32LE(0)?n(new Error("invalid zip64 end of central directory record signature")):(h=P(a,32),p=P(a,48),n(null,new f(e,p,t,h,y,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames)))}))}))}n(new Error("end of central directory record signature not found"))}))}function f(e,t,r,n,i,o,s,a,l,u){var d=this;c.call(d),d.reader=e,d.reader.on("error",(function(e){g(d,e)})),d.reader.once("close",(function(){d.emit("close")})),d.readEntryCursor=t,d.fileSize=r,d.entryCount=n,d.comment=i,d.entriesRead=0,d.autoClose=!!o,d.lazyEntries=!!s,d.decodeStrings=!!a,d.validateEntrySizes=!!l,d.strictFileNames=!!u,d.isOpen=!0,d.emittedError=!1,d.lazyEntries||d._readEntry()}function m(e,t){e.autoClose&&e.close(),g(e,t)}function g(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}function y(){}function v(e,t){return new Date(1980+(e>>9&127),(e>>5&15)-1,31&e,t>>11&31,t>>5&63,2*(31&t),0)}function _(e){return-1!==e.indexOf("\\")?"invalid characters in fileName: "+e:/^[a-zA-Z]:/.test(e)||/^\//.test(e)?"absolute path: "+e:-1!==e.split("/").indexOf("..")?"invalid relative path: "+e:null}function b(e,t,r,n,i,o){if(0===n)return setImmediate((function(){o(null,C(0))}));e.read(t,r,n,i,(function(e,t){return e?o(e):t<n?o(new Error("unexpected EOF")):void o()}))}function w(e){l.call(this),this.actualByteCount=0,this.expectedByteCount=e}function S(){c.call(this),this.refCount=0}function E(e){u.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}t.open=function(e,t,r){"function"==typeof t&&(r=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!0),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==r&&(r=R),n.open(e,"r",(function(e,i){if(e)return r(e);h(i,t,(function(e,t){e&&n.close(i,R),r(e,t)}))}))},t.fromFd=h,t.fromBuffer=function(e,t,r){"function"==typeof t&&(r=t,t=null),null==t&&(t={}),t.autoClose=!1,null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),p(o.createFromBuffer(e,{maxChunkSize:65536}),e.length,t,r)},t.fromRandomAccessReader=p,t.dosDateTimeToDate=v,t.validateFileName=_,t.ZipFile=f,t.Entry=y,t.RandomAccessReader=S,a.inherits(f,c),f.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},f.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},f.prototype._readEntry=function(){var e=this;if(e.entryCount!==e.entriesRead){if(!e.emittedError){var t=C(46);b(e.reader,t,0,t.length,e.readEntryCursor,(function(r){if(r)return m(e,r);if(!e.emittedError){var n=new y,i=t.readUInt32LE(0);if(33639248!==i)return m(e,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=t.readUInt16LE(4),n.versionNeededToExtract=t.readUInt16LE(6),n.generalPurposeBitFlag=t.readUInt16LE(8),n.compressionMethod=t.readUInt16LE(10),n.lastModFileTime=t.readUInt16LE(12),n.lastModFileDate=t.readUInt16LE(14),n.crc32=t.readUInt32LE(16),n.compressedSize=t.readUInt32LE(20),n.uncompressedSize=t.readUInt32LE(24),n.fileNameLength=t.readUInt16LE(28),n.extraFieldLength=t.readUInt16LE(30),n.fileCommentLength=t.readUInt16LE(32),n.internalFileAttributes=t.readUInt16LE(36),n.externalFileAttributes=t.readUInt32LE(38),n.relativeOffsetOfLocalHeader=t.readUInt32LE(42),64&n.generalPurposeBitFlag)return m(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46,t=C(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),b(e.reader,t,0,t.length,e.readEntryCursor,(function(r){if(r)return m(e,r);if(!e.emittedError){var i=!!(2048&n.generalPurposeBitFlag);n.fileName=e.decodeStrings?k(t,0,n.fileNameLength,i):t.slice(0,n.fileNameLength);var o=n.fileNameLength+n.extraFieldLength,a=t.slice(n.fileNameLength,o);n.extraFields=[];for(var c=0;c<a.length-3;){var l=a.readUInt16LE(c+0),u=a.readUInt16LE(c+2),d=c+4,h=d+u;if(h>a.length)return m(e,new Error("extra field length exceeds extra field buffer size"));var p=C(u);a.copy(p,0,d,h),n.extraFields.push({id:l,data:p}),c=h}if(n.fileComment=e.decodeStrings?k(t,o,o+n.fileCommentLength,i):t.slice(o,o+n.fileCommentLength),n.comment=n.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,4294967295===n.uncompressedSize||4294967295===n.compressedSize||4294967295===n.relativeOffsetOfLocalHeader){var f=null;for(c=0;c<n.extraFields.length;c++)if(1===(y=n.extraFields[c]).id){f=y.data;break}if(null==f)return m(e,new Error("expected zip64 extended information extra field"));var g=0;if(4294967295===n.uncompressedSize){if(g+8>f.length)return m(e,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=P(f,g),g+=8}if(4294967295===n.compressedSize){if(g+8>f.length)return m(e,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=P(f,g),g+=8}if(4294967295===n.relativeOffsetOfLocalHeader){if(g+8>f.length)return m(e,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=P(f,g),g+=8}}if(e.decodeStrings)for(c=0;c<n.extraFields.length;c++){var y;if(28789===(y=n.extraFields[c]).id){if(y.data.length<6)continue;if(1!==y.data.readUInt8(0))continue;var v=y.data.readUInt32LE(1);if(s.unsigned(t.slice(0,n.fileNameLength))!==v)continue;n.fileName=k(y.data,5,y.data.length,!0);break}}if(e.validateEntrySizes&&0===n.compressionMethod){var b=n.uncompressedSize;if(n.isEncrypted()&&(b+=12),n.compressedSize!==b){var w="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return m(e,new Error(w))}}if(e.decodeStrings){e.strictFileNames||(n.fileName=n.fileName.replace(/\\/g,"/"));var S=_(n.fileName,e.validateFileNameOptions);if(null!=S)return m(e,new Error(S))}e.emit("entry",n),e.lazyEntries||e._readEntry()}}))}}))}}else setImmediate((function(){e.autoClose&&e.close(),e.emittedError||e.emit("end")}))},f.prototype.openReadStream=function(e,t,r){var n=this,o=0,s=e.compressedSize;if(null==r)r=t,t={};else{if(null!=t.decrypt){if(!e.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(!1!==t.decrypt)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&!1!==t.decompress)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=t.decompress){if(!e.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!1!==t.decompress&&!0!==t.decompress)throw new Error("invalid options.decompress value: "+t.decompress)}if(null!=t.start||null!=t.end){if(e.isCompressed()&&!1!==t.decompress)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&!1!==t.decrypt)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=t.start){if((o=t.start)<0)throw new Error("options.start < 0");if(o>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(null!=t.end){if((s=t.end)<0)throw new Error("options.end < 0");if(s>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<o)throw new Error("options.end < options.start")}}if(!n.isOpen)return r(new Error("closed"));if(e.isEncrypted()&&!1!==t.decrypt)return r(new Error("entry is encrypted, and options.decrypt !== false"));n.reader.ref();var a=C(30);b(n.reader,a,0,a.length,e.relativeOffsetOfLocalHeader,(function(c){try{if(c)return r(c);var l=a.readUInt32LE(0);if(67324752!==l)return r(new Error("invalid local file header signature: 0x"+l.toString(16)));var u,d=a.readUInt16LE(26),h=a.readUInt16LE(28),p=e.relativeOffsetOfLocalHeader+a.length+d+h;if(0===e.compressionMethod)u=!1;else{if(8!==e.compressionMethod)return r(new Error("unsupported compression method: "+e.compressionMethod));u=null==t.decompress||t.decompress}var f=p,m=f+e.compressedSize;if(0!==e.compressedSize&&m>n.fileSize)return r(new Error("file data overflows file bounds: "+f+" + "+e.compressedSize+" > "+n.fileSize));var g=n.reader.createReadStream({start:f+o,end:f+s}),y=g;if(u){var v=!1,_=i.createInflateRaw();g.on("error",(function(e){setImmediate((function(){v||_.emit("error",e)}))})),g.pipe(_),n.validateEntrySizes?(y=new w(e.uncompressedSize),_.on("error",(function(e){setImmediate((function(){v||y.emit("error",e)}))})),_.pipe(y)):y=_,y.destroy=function(){v=!0,_!==y&&_.unpipe(y),g.unpipe(_),g.destroy()}}r(null,y)}finally{n.reader.unref()}}))},y.prototype.getLastModDate=function(){return v(this.lastModFileDate,this.lastModFileTime)},y.prototype.isEncrypted=function(){return!!(1&this.generalPurposeBitFlag)},y.prototype.isCompressed=function(){return 8===this.compressionMethod},a.inherits(w,l),w.prototype._transform=function(e,t,r){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(n))}r(null,e)},w.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()},a.inherits(S,c),S.prototype.ref=function(){this.refCount+=1},S.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.close((function(t){if(t)return e.emit("error",t);e.emit("close")}))}},S.prototype.createReadStream=function(e){var t=e.start,r=e.end;if(t===r){var n=new u;return setImmediate((function(){n.end()})),n}var i=this._readStreamForRange(t,r),o=!1,s=new E(this);i.on("error",(function(e){setImmediate((function(){o||s.emit("error",e)}))})),s.destroy=function(){i.unpipe(s),s.unref(),i.destroy()};var a=new w(r-t);return s.on("error",(function(e){setImmediate((function(){o||a.emit("error",e)}))})),a.destroy=function(){o=!0,s.unpipe(a),s.destroy()},i.pipe(s).pipe(a)},S.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")},S.prototype.read=function(e,t,r,n,i){var o=this.createReadStream({start:n,end:n+r}),s=new d,a=0;s._write=function(r,n,i){r.copy(e,t+a,0,r.length),a+=r.length,i()},s.on("finish",i),o.on("error",(function(e){i(e)})),o.pipe(s)},S.prototype.close=function(e){setImmediate(e)},a.inherits(E,u),E.prototype._flush=function(e){this.unref(),e()},E.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var C,T="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";function k(e,t,r,n){if(n)return e.toString("utf8",t,r);for(var i="",o=t;o<r;o++)i+=T[e[o]];return i}function P(e,t){var r=e.readUInt32LE(t);return 4294967296*e.readUInt32LE(t+4)+r}function R(e){if(e)throw e}C="function"==typeof Buffer.allocUnsafe?function(e){return Buffer.allocUnsafe(e)}:function(e){return new Buffer(e)}},4597:e=>{"use strict";e.exports=require("applicationinsights-native-metrics")},1398:e=>{"use strict";e.exports=require("vscode")},2613:e=>{"use strict";e.exports=require("assert")},290:e=>{"use strict";e.exports=require("async_hooks")},181:e=>{"use strict";e.exports=require("buffer")},5317:e=>{"use strict";e.exports=require("child_process")},4236:e=>{"use strict";e.exports=require("console")},9140:e=>{"use strict";e.exports=require("constants")},6982:e=>{"use strict";e.exports=require("crypto")},2250:e=>{"use strict";e.exports=require("dns")},4434:e=>{"use strict";e.exports=require("events")},9896:e=>{"use strict";e.exports=require("fs")},8611:e=>{"use strict";e.exports=require("http")},5692:e=>{"use strict";e.exports=require("https")},3339:e=>{"use strict";e.exports=require("module")},9278:e=>{"use strict";e.exports=require("net")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2987:e=>{"use strict";e.exports=require("perf_hooks")},4876:e=>{"use strict";e.exports=require("punycode")},2203:e=>{"use strict";e.exports=require("stream")},3193:e=>{"use strict";e.exports=require("string_decoder")},3557:e=>{"use strict";e.exports=require("timers")},4756:e=>{"use strict";e.exports=require("tls")},2018:e=>{"use strict";e.exports=require("tty")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},3106:e=>{"use strict";e.exports=require("zlib")},9329:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NodeWebSocketTransport:()=>a}),r(8397),r(5220),r(4924);var n=r(398);r(8600);const i=n;var o,s=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class a{constructor(e){o.set(this,void 0),function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?i.call(e,r):i?i.value=r:t.set(e,r)}(this,o,e,"f"),s(this,o,"f").addEventListener("message",(e=>{this.onmessage&&this.onmessage.call(null,e.data)})),s(this,o,"f").addEventListener("close",(()=>{this.onclose&&this.onclose.call(null)})),s(this,o,"f").addEventListener("error",(()=>{}))}static create(e){return new Promise(((t,r)=>{const n=new i(e,[],{followRedirects:!0,perMessageDeflate:!1,maxPayload:268435456,headers:{"User-Agent":"Puppeteer 18.1.0"}});n.addEventListener("open",(()=>t(new a(n)))),n.addEventListener("error",r)}))}send(e){s(this,o,"f").send(e)}close(){s(this,o,"f").close()}}o=new WeakMap},2281:e=>{"use strict";e.exports={rE:"6.8.11"}}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return n[e].call(r.exports,r,r.exports,o),r.exports}o.m=n,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);o.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,o.d(i,s),i},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>e+".js",o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r={606:1},o.f.require=(e,t)=>{r[e]||(e=>{var t=e.modules,n=e.ids,i=e.runtime;for(var s in t)o.o(t,s)&&(o.m[s]=t[s]);i&&i(o);for(var a=0;a<n.length;a++)r[n[a]]=1})(require("./"+o.u(e)))};var s={};(()=>{"use strict";o.r(s),o.d(s,{activate:()=>Yh,attach:()=>np,attachToCurrentDebugTarget:()=>ip,deactivate:()=>rp,launch:()=>op,launchHtml:()=>Qh,launchScreencast:()=>Zh});var e=o(1398),t=o(8704),r=o(6928),n=o(9896),i=o.t(n,2);class a extends e.TreeItem{constructor(t,n,i,o){super(n||t.title||"Target",n?e.TreeItemCollapsibleState.None:e.TreeItemCollapsibleState.Collapsed),this.propertyName=null,this.children=[],this.targetJson=t,this.propertyName=n,this.extensionPath=i,this.contextValue=this.propertyName?"cdpTargetProperty":"cdpTarget";const s=`${this.label}: ${this.description}.`,a=this.collapsibleState?`${s}. 'Press tab to access action button list. Use left and right arrow keys to navigate action button list.'`:s;if(this.accessibilityInformation={label:a,role:"treeitem"},this.extensionPath)if(o)this.iconPath={dark:o,light:o};else{const e=`${this.targetJson.type}.svg`;this.iconPath={dark:r.join(this.extensionPath,"resources","dark",e),light:r.join(this.extensionPath,"resources","light",e)}}}get description(){return this.propertyName?this.targetJson[this.propertyName]:this.targetJson.url}get tooltip(){return`${this.label} - ${this.description}`}get websocketUrl(){return this.targetJson.webSocketDebuggerUrl}getChildren(){if(!this.propertyName&&0===this.children.length){this.children=[];for(const e of Object.getOwnPropertyNames(this.targetJson))this.children.push(new a(this.targetJson,e))}return this.children}}var c=o(1605),l=o(8611),u=o(5692),d=o(857),h=o(7016),p=o(5575),f=o.n(p);const m=JSON.parse('{"name":"vscode-edge-devtools","displayName":"Microsoft Edge Tools for VS Code","description":"Use the Microsoft Edge Tools from within VS Code to see your site\'s runtime HTML structure, alter its layout, fix styling issues as well as see your site\'s network requests.","version":"2.1.6","license":"SEE LICENSE IN LICENSE","publisher":"ms-edgedevtools","preview":false,"icon":"icon.png","extensionKind":["ui"],"author":{"name":"Microsoft Corporation"},"homepage":"https://github.com/Microsoft/vscode-edge-devtools/blob/main/README.md","repository":{"type":"git","url":"https://github.com/Microsoft/vscode-edge-devtools"},"keywords":["browser","elements","network","devtools","styling","css","dom"],"engines":{"vscode":"^1.93.0"},"categories":["Debuggers"],"aiKey":"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217","main":"./out/extension","sideEffects":false,"activationEvents":["onStartupFinished","onLanguage:css","onLanguage:html","onLanguage:javascript","onLanguage:javascriptreact","onLanguage:json","onLanguage:jsonc","onLanguage:less","onLanguage:sass","onLanguage:scss","onLanguage:typescript","onLanguage:typescriptreact"],"capabilities":{"untrustedWorkspaces":{"supported":"limited","description":"Workspace trust is needed to configure and debug projects"},"virtualWorkspaces":false},"contributes":{"commands":[{"command":"vscode-edge-devtools.attach","title":"Attach to a target","category":"Microsoft Edge Tools"},{"command":"vscode-edge-devtools.launch","title":"Launch Edge and then attach to a target","category":"Microsoft Edge Tools"},{"command":"vscode-edge-devtools-view.launch","category":"Microsoft Edge Tools","title":"Open a new tab","enablement":"titleCommandsRegistered","icon":{"light":"resources/light/launch.svg","dark":"resources/dark/launch.svg"}},{"command":"vscode-edge-devtools-view.refresh","category":"Microsoft Edge Tools","title":"Refresh Targets","enablement":"titleCommandsRegistered","icon":{"light":"resources/light/refresh.svg","dark":"resources/dark/refresh.svg"}},{"command":"vscode-edge-devtools-view.attach","category":"Microsoft Edge Tools","title":"Attach and open Microsoft Edge Tools","enablement":"viewItem != cdpTargetClosing","icon":{"light":"resources/light/attach.svg","dark":"resources/dark/attach.svg"}},{"command":"vscode-edge-devtools-view.close-instance","category":"Microsoft Edge Tools","title":"Close instance","enablement":"viewItem != cdpTargetClosing","icon":{"light":"resources/light/close_browser_page.svg","dark":"resources/dark/close_browser_page.svg"}},{"command":"vscode-edge-devtools-view.toggleScreencast","category":"Microsoft Edge Tools","title":"Toggle browser","enablement":"viewItem != cdpTargetClosing","icon":{"light":"resources/light/screencast.svg","dark":"resources/dark/screencast.svg"}},{"command":"vscode-edge-devtools-view.copyItem","category":"Microsoft Edge Tools","title":"Copy Value"},{"command":"vscode-edge-devtools-view.openSettings","category":"Microsoft Edge Tools","title":"Open Settings"},{"command":"vscode-edge-devtools-view.viewChangelog","category":"Microsoft Edge Tools","title":"View Changelog"},{"command":"vscode-edge-devtools-view.viewDocumentation","category":"Microsoft Edge Tools","title":"View Documentation"},{"command":"vscode-edge-devtools-view.configureLaunchJson","category":"Microsoft Edge Tools","enablement":"titleCommandsRegistered && isWorkspaceTrusted","title":"Configure launch.json file"},{"command":"vscode-edge-devtools-view.launchProject","category":"Microsoft Edge Tools","enablement":"titleCommandsRegistered && isWorkspaceTrusted","title":"Launch project"},{"command":"vscode-edge-devtools-view.cssMirrorContent","category":"Microsoft Edge Tools","enablement":"titleCommandsRegistered","title":"Toggle CSS mirror editing on/off"},{"command":"vscode-edge-devtools-view.launchHtml","title":"Open Browser with DevTools","category":"Microsoft Edge Tools"},{"command":"vscode-edge-devtools-view.launchScreencast","title":"Open Browser","category":"Microsoft Edge Tools"}],"configuration":{"title":"Microsoft Edge Tools","type":"object","properties":{"vscode-edge-devtools.hostname":{"type":"string","default":"localhost","description":"The hostname on which to search for remote debuggable instances"},"vscode-edge-devtools.port":{"type":"number","default":9222,"description":"The port on which to search for remote debuggable instances"},"vscode-edge-devtools.useHttps":{"type":"boolean","default":false,"description":"Should we request the remote target list using https rather than http"},"vscode-edge-devtools.defaultUrl":{"type":"string","default":"","description":"The default url to open when launching the browser without a target"},"vscode-edge-devtools.defaultEntrypoint":{"type":"string","default":"index.html","description":"The default entrypoint into your webpage. Used to resolve debugging urls without a pathname"},"vscode-edge-devtools.userDataDir":{"type":["string","boolean"],"default":true,"description":"By default, Microsoft Edge is launched with a separate user profile in a temp folder. Use this option to override the path. You can also set to false to launch with your default user profile instead."},"vscode-edge-devtools.webRoot":{"type":"string","description":"The absolute path to the webserver root. Used to resolve paths like `/app.js` to files on disk","default":"${workspaceFolder}"},"vscode-edge-devtools.pathMapping":{"type":"object","default":{"/":"${workspaceFolder}"},"description":"A set of mappings for rewriting the locations of source files from what the sourcemap says, to their locations on disk"},"vscode-edge-devtools.sourceMapPathOverrides":{"type":"object","description":"A set of mappings to override the locations of source map files.","default":{"webpack:///./*":"${webRoot}/*","webpack:///src/*":"${webRoot}/*","webpack:///*":"*","webpack:///./~/*":"${webRoot}/node_modules/*","webpack://*":"${webRoot}/*","meteor://💻app/*":"${webRoot}/*"}},"vscode-edge-devtools.sourceMaps":{"type":"boolean","description":"Use JavaScript source maps (if they exist)","default":true},"vscode-edge-devtools.showWorkers":{"type":"boolean","description":"Show service and shared workers in the target list.","default":false},"vscode-edge-devtools.headless":{"type":"boolean","description":"Launch Microsoft Edge in headless mode. (requires relaunching Visual Studio Code)","default":true},"vscode-edge-devtools.browserArgs":{"type":"array","description":"Launch Microsoft Edge with specified args. (requires relaunching Visual Studio Code)","items":{"type":"string"},"default":[]},"vscode-edge-devtools.timeout":{"type":"number","description":"The number of milliseconds that the Microsoft Edge Tools will keep trying to attach the browser before timing out","default":10000},"vscode-edge-devtools.browserFlavor":{"type":"string","enum":["Default","Stable","Beta","Dev","Canary"],"enumDescriptions":["Microsoft Edge Tools for VS Code will try to open the Microsoft Edge flavors in the following order: Stable, Beta, Dev and Canary","Microsoft Edge Tools for VS Code will use Microsoft Edge Stable version","Microsoft Edge Tools for VS Code will use Microsoft Edge Beta version","Microsoft Edge Tools for VS Code will use Microsoft Edge Dev version","Microsoft Edge Tools for VS Code will use Microsoft Edge Canary version"]},"vscode-edge-devtools.webhint":{"type":"boolean","default":true,"description":"Enable feedback from webhint on source files to improve accessibility, compatibility, security and more."},"vscode-edge-devtools.webhintInstallNotification":{"type":"boolean","default":false,"description":"Turn off notification for webhint installation failures."}}},"debuggers":[{"type":"vscode-edge-devtools.debug","label":"Microsoft Edge Tools","configurationSnippets":[{"label":"Microsoft Edge Tools: Launch","description":"Launch Microsoft Edge to a URL","body":{"type":"vscode-edge-devtools.debug","request":"launch","name":"Launch Microsoft Edge and open the Edge DevTools","url":"http://localhost:8080","webRoot":"^\\"${2:\\\\${workspaceFolder\\\\}}\\""}},{"label":"Microsoft Edge Tools: Attach","description":"Attach to an instance of Microsoft Edge already in debug mode","body":{"type":"vscode-edge-devtools.debug","request":"attach","name":"Attach to Microsoft Edge and open the Edge DevTools","url":"http://localhost:8080","webRoot":"^\\"${2:\\\\${workspaceFolder\\\\}}\\""}}],"configurationAttributes":{"launch":{"properties":{"url":{"type":"string","description":"Absolute uri to launch","default":"http://localhost:8080"},"file":{"type":"string","description":"File path to launch","default":"${workspaceFolder}/index.html"},"hostname":{"type":"string","default":"localhost","description":"The hostname on which to search for remote debuggable instances"},"port":{"type":"number","default":9222,"description":"The port on which to search for remote debuggable instances"},"userDataDir":{"type":["string","boolean"],"description":"By default, Microsoft Edge is launched with a separate user profile in a temp folder. Use this option to override the path. You can also set to false to launch with your default user profile instead.","default":true},"useHttps":{"type":"boolean","default":false,"description":"Should we request the remote target list using https rather than http"},"webRoot":{"type":"string","description":"The absolute path to the webserver root. Used to resolve paths like `/app.js` to files on disk","default":"${workspaceFolder}"},"pathMapping":{"type":"object","description":"A mapping of URLs/paths to local folders, to resolve scripts in Microsoft Edge to scripts on disk","default":{"/":"${workspaceFolder}"}},"sourceMapPathOverrides":{"type":"object","description":"A set of mappings for rewriting the locations of source files from what the sourcemap says, to their locations on disk","default":{"webpack:///./*":"${webRoot}/*","webpack:///src/*":"${webRoot}/*","webpack:///*":"*","webpack:///./~/*":"${webRoot}/node_modules/*","webpack://*":"${webRoot}/*","meteor://💻app/*":"${webRoot}/*"}},"sourceMaps":{"type":"boolean","description":"Use JavaScript source maps (if they exist)","default":true},"vscode-edge-devtools.browserFlavor":{"type":"string","enum":["Default","Stable","Beta","Dev","Canary"],"enumDescriptions":["Microsoft Edge Tools for VS Code will try to open the Microsoft Edge flavors in the following order: Stable, Beta, Dev and Canary","Microsoft Edge Tools for VS Code will use Microsoft Edge Stable version","Microsoft Edge Tools for VS Code will use Microsoft Edge Beta version","Microsoft Edge Tools for VS Code will use Microsoft Edge Dev version","Microsoft Edge Tools for VS Code will use Microsoft Edge Canary version"]}}},"attach":{"properties":{"url":{"type":"string","description":"Absolute uri to launch.","default":"http://localhost:8080"},"file":{"type":"string","description":"File path to launch.","default":"${workspaceFolder}/index.html"},"hostname":{"type":"string","default":"localhost","description":"The hostname on which to search for remote debuggable instances"},"port":{"type":"number","default":9222,"description":"The port on which to search for remote debuggable instances"},"userDataDir":{"type":["string","boolean"],"description":"By default, Microsoft Edge is launched with a separate user profile in a temp folder. Use this option to override the path. You can also set to false to launch with your default user profile instead.","default":true},"useHttps":{"type":"boolean","default":false,"description":"Should we request the remote target list using https rather than http"},"webRoot":{"type":"string","description":"The absolute path to the webserver root. Used to resolve paths like `/app.js` to files on disk","default":"${workspaceFolder}"},"pathMapping":{"type":"object","description":"A mapping of URLs/paths to local folders, to resolve scripts in Microsoft Edge to scripts on disk","default":{"/":"${workspaceFolder}"}},"sourceMapPathOverrides":{"type":"object","description":"A set of mappings for rewriting the locations of source files from what the sourcemap says, to their locations on disk","default":{"webpack:///./*":"${webRoot}/*","webpack:///src/*":"${webRoot}/*","webpack:///*":"*","webpack:///./~/*":"${webRoot}/node_modules/*","webpack://*":"${webRoot}/*","meteor://💻app/*":"${webRoot}/*"}},"sourceMaps":{"type":"boolean","description":"Use JavaScript source maps (if they exist)","default":true},"vscode-edge-devtools.browserFlavor":{"type":"string","enum":["Default","Stable","Beta","Dev","Canary"],"enumDescriptions":["Microsoft Edge Tools for VS Code will try to open the Microsoft Edge flavors in the following order: Stable, Beta, Dev and Canary","Microsoft Edge Tools for VS Code will use Microsoft Edge Stable version","Microsoft Edge Tools for VS Code will use Microsoft Edge Beta version","Microsoft Edge Tools for VS Code will use Microsoft Edge Dev version","Microsoft Edge Tools for VS Code will use Microsoft Edge Canary version"]}}}}}],"menus":{"commandPalette":[{"command":"vscode-edge-devtools-view.attach","when":"view == vscode-edge-devtools-view.targets && viewItem == cdpTarget"},{"command":"vscode-edge-devtools-view.launch","when":"view == vscode-edge-devtools-view.targets"},{"command":"vscode-edge-devtools-view.refresh","when":"view == vscode-edge-devtools-view.targets"},{"command":"vscode-edge-devtools-view.copyItem","when":"view == vscode-edge-devtools-view.targets && viewItem == cdpTargetProperty"},{"command":"vscode-edge-devtools-view.openSettings","when":"view == vscode-edge-devtools-view.targets"},{"command":"vscode-edge-devtools-view.viewChangelog","when":"view == vscode-edge-devtools-view.targets"}],"view/title":[{"command":"vscode-edge-devtools-view.launch","when":"view == vscode-edge-devtools-view.targets","group":"navigation"},{"command":"vscode-edge-devtools-view.refresh","when":"view == vscode-edge-devtools-view.targets","group":"navigation"},{"command":"vscode-edge-devtools-view.openSettings","when":"view == vscode-edge-devtools-view.targets","group":"2_vscode-edge-devtools"},{"command":"vscode-edge-devtools-view.viewChangelog","when":"view == vscode-edge-devtools-view.targets","group":"2_vscode-edge-devtools"}],"view/item/context":[{"command":"vscode-edge-devtools-view.toggleScreencast","when":"view == vscode-edge-devtools-view.targets && viewItem == cdpTarget","group":"inline@0"},{"command":"vscode-edge-devtools-view.attach","when":"view == vscode-edge-devtools-view.targets && viewItem == cdpTarget || viewItem == cdpTargetClosing","group":"inline@1"},{"command":"vscode-edge-devtools-view.close-instance","when":"view == vscode-edge-devtools-view.targets && viewItem == cdpTarget || viewItem == cdpTargetClosing","group":"inline@2"},{"command":"vscode-edge-devtools-view.attach","when":"view == vscode-edge-devtools-view.targets && viewItem == cdpTarget"},{"command":"vscode-edge-devtools-view.copyItem","when":"view == vscode-edge-devtools-view.targets && viewItem == cdpTargetProperty","group":"2_contextMenu"}],"explorer/context":[{"when":"resourceLangId == html","submenu":"devtoolsContextMenu","group":"navigation"}],"devtoolsContextMenu":[{"command":"vscode-edge-devtools-view.launchHtml","group":"navigation"},{"command":"vscode-edge-devtools-view.launchScreencast","group":"navigation"}]},"submenus":[{"id":"devtoolsContextMenu","label":"Open with Edge"}],"viewsContainers":{"activitybar":[{"id":"vscode-edge-devtools-view","title":"Microsoft Edge Tools","icon":"resources/viewIcon.svg"}]},"views":{"vscode-edge-devtools-view":[{"id":"vscode-edge-devtools-view.targets","name":"Targets"},{"id":"vscode-edge-devtools-view.help-links","name":"Helpful links"}]},"viewsWelcome":[{"view":"vscode-edge-devtools-view.targets","contents":"Launch an instance of Microsoft Edge to begin inspecting and modifying webpages.\\n[Launch Instance](command:vscode-edge-devtools-view.launch?[true])","when":"launchJsonStatus != Supported"},{"view":"vscode-edge-devtools-view.targets","contents":"To customize your launch experience, open a folder and create a launch.json file. \\n[Open Folder](command:vscode.openFolder)","when":"workbenchState == empty"},{"view":"vscode-edge-devtools-view.targets","contents":"Customize your launch experience by adding a launch.json file to your project.\\n[Generate launch.json](command:vscode-edge-devtools-view.configureLaunchJson)","when":"workbenchState != empty && launchJsonStatus == None && isWorkspaceTrusted"},{"view":"vscode-edge-devtools-view.targets","contents":"Customize your launch experience by adding a debug configuration to your launch.json file.\\n[Configure launch.json](command:vscode-edge-devtools-view.configureLaunchJson)","when":"launchJsonStatus == Unsupported && isWorkspaceTrusted"},{"view":"vscode-edge-devtools-view.targets","contents":"Launch an instance of Microsoft Edge to begin inspecting and modifying your site.\\n[Launch Project](command:vscode-edge-devtools-view.launchProject)","when":"launchJsonStatus == Supported && isWorkspaceTrusted"},{"view":"vscode-edge-devtools-view.help-links","contents":"[Documentation](command:vscode-edge-devtools-view.viewDocumentation)"},{"view":"vscode-edge-devtools-view.help-links","contents":"[Report a Bug](https://github.com/microsoft/vscode-edge-devtools/issues/new?template=bug_report.md)"},{"view":"vscode-edge-devtools-view.help-links","contents":"[Request a Feature](https://github.com/microsoft/vscode-edge-devtools/issues/new?template=feature_request.md)"}]},"jest":{"transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"/test/.+\\\\.test\\\\.tsx?$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"globals":{"DEBUG":false,"DEVTOOLS_BASE_URI":"https://test.invalid"}},"scripts":{"package":"vsce package --out vscode-edge-devtools.vsix","vscode:prepublish":"npm run build && npm run lint","build":"webpack","build-debug":"npm run build -- --mode development --env debug","build-edge-watch":"npm run build-debug -- --env devtoolsBaseUri=http://localhost:3000/vscode_app.html","build-watch":"npm run build -- --mode development && npm run watch","build-and-lint":"npm run build && npm run lint","watch":"npm run watch-wp","watch-wp":"webpack --watch","lint":"eslint -c .eslintrc.js */*.ts","test":"npm run lint && jest --config package.json --runInBand --env=jsdom"},"dependencies":{"@vscode/codicons":"0.0.36","bufferutil":"4.0.8","lit-html":"^3.2.0","puppeteer-core":"18.1.0","utf-8-validate":"6.0.4","vscode-chrome-debug-core":"6.8.11","vscode-extension-telemetry":"0.4.1","vscode-webhint":"2.1.15","ws":"8.18.0","xmlhttprequest":"1.8.0"},"devDependencies":{"@opentelemetry/tracing":"0.24.0","@types/copy-webpack-plugin":"8.0.1","@types/fs-extra":"11.0.4","@types/jest":"29.5.13","@types/node":"22.5.4","@types/vscode":"1.93.0","@types/ws":"8.5.12","@typescript-eslint/eslint-plugin":"8.5.0","@typescript-eslint/parser":"8.5.0","@vscode/vsce":"^3.1.0","copy-webpack-plugin":"12.0.2","eslint":"8.57.1","eslint-plugin-import":"2.30.0","eslint-plugin-jsdoc":"50.2.3","eslint-plugin-prefer-arrow":"1.2.3","fs-extra":"11.2.0","jest":"29.7.0","ts-jest":" 29.2.5","ts-loader":"9.5.1","typescript":"4.9.4","uglify-js":"3.19.3","unzipper":"0.12.3","jest-environment-jsdom":"^28.1.3","vscode-languageclient":"9.0.1","vscode-test":"1.6.1","webpack":"5.94.0","webpack-cli":"5.1.4"}}');class g extends(f()){constructor(){super("extensionId","extensionVersion","key")}sendTelemetryEvent(e,t,r){console.log(`${e}: ${JSON.stringify(t)}, ${JSON.stringify(r)}`)}dispose(){return Promise.resolve()}}const y=(0,o(3339).createRequire)("file:///C:/GIT/vscode-edge-devtools/node_modules/puppeteer-core/lib/esm/puppeteer/compat.js");let v;try{v=(0,r.dirname)(y.resolve("./compat"))}catch(e){v=(0,r.dirname)((0,h.fileURLToPath)("file:///C:/GIT/vscode-edge-devtools/node_modules/puppeteer-core/lib/esm/puppeteer/compat.js"))}(0,r.dirname)((0,r.dirname)((0,r.dirname)(v)));const _=!("undefined"==typeof process||!process.version),b="undefined"!=typeof process&&void 0!==process.env.PUPPETEER_DEFERRED_PROMISE_DEBUG_TIMEOUT?Number(process.env.PUPPETEER_DEFERRED_PROMISE_DEBUG_TIMEOUT):-1,w=(e,t)=>{if(!e)throw new Error(t)};function S(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}let E=null;const C=e=>_?async(...t)=>{(await async function(){return E||(E=(await Promise.resolve().then(o.t.bind(o,8339,19))).default),E}())(e)(t)}:(...t)=>{const r=globalThis.__PUPPETEER_DEBUG;r&&("*"===r||(r.endsWith("*")?e.startsWith(r):e===r))&&console.log(`${e}:`,...t)};var T,k,P,R=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},x=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class M{constructor(e,t){T.set(this,!1),k.set(this,void 0),P.set(this,void 0),R(this,k,e,"f"),R(this,P,t,"f")}get client(){return x(this,k,"f")._client}get disposed(){return x(this,T,"f")}executionContext(){return x(this,k,"f")}async evaluate(e,...t){return await this.executionContext().evaluate(e,this,...t)}async evaluateHandle(e,...t){return await this.executionContext().evaluateHandle(e,this,...t)}async getProperty(e){return this.evaluateHandle(((e,t)=>e[t]),e)}async getProperties(){w(x(this,P,"f").objectId);const e=await this.client.send("Runtime.getProperties",{objectId:x(this,P,"f").objectId,ownProperties:!0}),t=new Map;for(const r of e.result)r.enumerable&&r.value&&t.set(r.name,Xi(x(this,k,"f"),r.value));return t}async jsonValue(){if(!x(this,P,"f").objectId)return Wi(x(this,P,"f"));const e=await this.evaluate((e=>e));if(void 0===e)throw new Error("Could not serialize referenced object");return e}asElement(){return null}async dispose(){x(this,T,"f")||(R(this,T,!0,"f"),await Hi(this.client,x(this,P,"f")))}toString(){return x(this,P,"f").objectId?"JSHandle@"+(x(this,P,"f").subtype||x(this,P,"f").type):"JSHandle:"+Wi(x(this,P,"f"))}remoteObject(){return x(this,P,"f")}}T=new WeakMap,k=new WeakMap,P=new WeakMap;class O extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class D extends O{}class I extends O{constructor(){super(...arguments),this.originalMessage=""}}const A=Object.freeze({TimeoutError:D,ProtocolError:I});function N(e){let t,r,n=!1,i=!1;const o=new Promise(((e,n)=>{t=e,r=n})),s=e&&e.timeout>0?setTimeout((()=>{i=!0,r(new D(e.message))}),e.timeout):void 0;return Object.assign(o,{resolved:()=>n,finished:()=>n||i,resolve:e=>{s&&clearTimeout(s),n=!0,t(e)},reject:e=>{clearTimeout(s),i=!0,r(e)}})}var L;class F{constructor(e){L.set(this,void 0),function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?i.call(e,r):i?i.value=r:t.set(e,r)}(this,L,e,"f")}get(){return function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}(this,L,"f").call(this)}}L=new WeakMap;class j{constructor(){var e;this.eventsMap=new Map,this.emitter={all:e=(e=this.eventsMap)||new Map,on:function(t,r){var n=e.get(t);n&&n.push(r)||e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&n.splice(n.indexOf(r)>>>0,1)},emit:function(t,r){(e.get(t)||[]).slice().map((function(e){e(r)})),(e.get("*")||[]).slice().map((function(e){e(t,r)}))}}}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}removeListener(e,t){return this.off(e,t),this}addListener(e,t){return this.on(e,t),this}emit(e,t){return this.emitter.emit(e,t),this.eventListenersCount(e)>0}once(e,t){const r=n=>{t(n),this.off(e,r)};return this.on(e,r)}listenerCount(e){return this.eventListenersCount(e)}removeAllListeners(e){return e?this.eventsMap.delete(e):this.eventsMap.clear(),this}eventListenersCount(e){var t;return(null===(t=this.eventsMap.get(e))||void 0===t?void 0:t.length)||0}}var q,U,B,$,W,H,V,G,K,z,X,J,Y,Q,Z=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ee=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const te=C("puppeteer:protocol:SEND ►"),re=C("puppeteer:protocol:RECV ◀"),ne={Disconnected:Symbol("Connection.Disconnected")};class ie extends j{constructor(e,t,r=0){super(),q.add(this),U.set(this,void 0),B.set(this,void 0),$.set(this,void 0),W.set(this,0),H.set(this,new Map),V.set(this,!1),G.set(this,new Map),K.set(this,new Set),Z(this,U,e,"f"),Z(this,$,r,"f"),Z(this,B,t,"f"),ee(this,B,"f").onmessage=this.onMessage.bind(this),ee(this,B,"f").onclose=ee(this,q,"m",z).bind(this)}static fromSession(e){return e.connection()}get _closed(){return ee(this,V,"f")}get _sessions(){return ee(this,H,"f")}session(e){return ee(this,H,"f").get(e)||null}url(){return ee(this,U,"f")}send(e,...t){const r=t.length?t[0]:void 0,n=this._rawSend({method:e,params:r});return new Promise(((t,r)=>{ee(this,G,"f").set(n,{resolve:t,reject:r,error:new I,method:e})}))}_rawSend(e){var t;const r=Z(this,W,(t=ee(this,W,"f"),++t),"f"),n=JSON.stringify(Object.assign({},e,{id:r}));return te(n),ee(this,B,"f").send(n),r}async onMessage(e){ee(this,$,"f")&&await new Promise((e=>setTimeout(e,ee(this,$,"f")))),re(e);const t=JSON.parse(e);if("Target.attachedToTarget"===t.method){const e=t.params.sessionId,r=new ae(this,t.params.targetInfo.type,e);ee(this,H,"f").set(e,r),this.emit("sessionattached",r);const n=ee(this,H,"f").get(t.sessionId);n&&n.emit("sessionattached",r)}else if("Target.detachedFromTarget"===t.method){const e=ee(this,H,"f").get(t.params.sessionId);if(e){e._onClosed(),ee(this,H,"f").delete(t.params.sessionId),this.emit("sessiondetached",e);const r=ee(this,H,"f").get(t.sessionId);r&&r.emit("sessiondetached",e)}}if(t.sessionId){const e=ee(this,H,"f").get(t.sessionId);e&&e._onMessage(t)}else if(t.id){const e=ee(this,G,"f").get(t.id);e&&(ee(this,G,"f").delete(t.id),t.error?e.reject(ce(e.error,e.method,t)):e.resolve(t.result))}else this.emit(t.method,t.params)}dispose(){ee(this,q,"m",z).call(this),ee(this,B,"f").close()}isAutoAttached(e){return!ee(this,K,"f").has(e)}async _createSession(e,t=!0){t||ee(this,K,"f").add(e.targetId);const{sessionId:r}=await this.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});ee(this,K,"f").delete(e.targetId);const n=ee(this,H,"f").get(r);if(!n)throw new Error("CDPSession creation failed.");return n}async createSession(e){return await this._createSession(e,!1)}}U=new WeakMap,B=new WeakMap,$=new WeakMap,W=new WeakMap,H=new WeakMap,V=new WeakMap,G=new WeakMap,K=new WeakMap,q=new WeakSet,z=function(){if(!ee(this,V,"f")){Z(this,V,!0,"f"),ee(this,B,"f").onmessage=void 0,ee(this,B,"f").onclose=void 0;for(const e of ee(this,G,"f").values())e.reject(le(e.error,`Protocol error (${e.method}): Target closed.`));ee(this,G,"f").clear();for(const e of ee(this,H,"f").values())e._onClosed();ee(this,H,"f").clear(),this.emit(ne.Disconnected)}};const oe={Disconnected:Symbol("CDPSession.Disconnected")};class se extends j{constructor(){super()}connection(){throw new Error("Not implemented")}send(){throw new Error("Not implemented")}async detach(){throw new Error("Not implemented")}id(){throw new Error("Not implemented")}}class ae extends se{constructor(e,t,r){super(),X.set(this,void 0),J.set(this,void 0),Y.set(this,new Map),Q.set(this,void 0),Z(this,Q,e,"f"),Z(this,J,t,"f"),Z(this,X,r,"f")}connection(){return ee(this,Q,"f")}send(e,...t){if(!ee(this,Q,"f"))return Promise.reject(new Error(`Protocol error (${e}): Session closed. Most likely the ${ee(this,J,"f")} has been closed.`));const r=t.length?t[0]:void 0,n=ee(this,Q,"f")._rawSend({sessionId:ee(this,X,"f"),method:e,params:r});return new Promise(((t,r)=>{ee(this,Y,"f").set(n,{resolve:t,reject:r,error:new I,method:e})}))}_onMessage(e){const t=e.id?ee(this,Y,"f").get(e.id):void 0;e.id&&t?(ee(this,Y,"f").delete(e.id),e.error?t.reject(ce(t.error,t.method,e)):t.resolve(e.result)):(w(!e.id),this.emit(e.method,e.params))}async detach(){if(!ee(this,Q,"f"))throw new Error(`Session already detached. Most likely the ${ee(this,J,"f")} has been closed.`);await ee(this,Q,"f").send("Target.detachFromTarget",{sessionId:ee(this,X,"f")})}_onClosed(){for(const e of ee(this,Y,"f").values())e.reject(le(e.error,`Protocol error (${e.method}): Target closed.`));ee(this,Y,"f").clear(),Z(this,Q,void 0,"f"),this.emit(oe.Disconnected)}id(){return ee(this,X,"f")}}function ce(e,t,r){let n=`Protocol error (${t}): ${r.error.message}`;return"data"in r.error&&(n+=` ${r.error.data}`),le(e,n,r.error.message)}function le(e,t,r){return e.message=t,e.originalMessage=null!=r?r:e.originalMessage,e}function ue(e){return e.message.includes("Target closed")||e.message.includes("Session closed")}X=new WeakMap,J=new WeakMap,Y=new WeakMap,Q=new WeakMap;var de,he,pe=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const fe="pptr://__puppeteer_evaluation_script__",me=/^[\040\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/m;class ge{constructor(e,t,r){de.add(this),this._client=e,this._world=r,this._contextId=t.id,this._contextName=t.name}async evaluate(e,...t){return await pe(this,de,"m",he).call(this,!0,e,...t)}async evaluateHandle(e,...t){return pe(this,de,"m",he).call(this,!1,e,...t)}}de=new WeakSet,he=async function(e,t,...r){const n=`//# sourceURL=${fe}`;if(Ki(t)){const r=this._contextId,i=t,o=me.test(i)?i:i+"\n"+n,{exceptionDetails:s,result:a}=await this._client.send("Runtime.evaluate",{expression:o,contextId:r,returnByValue:e,awaitPromise:!0,userGesture:!0}).catch(ye);if(s)throw new Error("Evaluation failed: "+$i(s));return e?Wi(a):Xi(this,a)}let i,o=t.toString();try{new Function("("+o+")")}catch(e){o=o.startsWith("async ")?"async function "+o.substring(6):"function "+o;try{new Function("("+o+")")}catch(e){throw new Error("Passed function is not well-serializable!")}}try{i=this._client.send("Runtime.callFunctionOn",{functionDeclaration:o+"\n"+n+"\n",executionContextId:this._contextId,arguments:await Promise.all(r.map(async function(e){if(e instanceof F&&(e=await e.get()),"bigint"==typeof e)return{unserializableValue:`${e.toString()}n`};if(Object.is(e,-0))return{unserializableValue:"-0"};if(Object.is(e,1/0))return{unserializableValue:"Infinity"};if(Object.is(e,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(e,NaN))return{unserializableValue:"NaN"};const t=e&&e instanceof M?e:null;if(t){if(t.executionContext()!==this)throw new Error("JSHandles can be evaluated only in the context they were created!");if(t.disposed)throw new Error("JSHandle is disposed!");return t.remoteObject().unserializableValue?{unserializableValue:t.remoteObject().unserializableValue}:t.remoteObject().objectId?{objectId:t.remoteObject().objectId}:{value:t.remoteObject().value}}return{value:e}}.bind(this))),returnByValue:e,awaitPromise:!0,userGesture:!0})}catch(e){throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&(e.message+=" Recursive objects are not allowed."),e}const{exceptionDetails:s,result:a}=await i.catch(ye);if(s)throw new Error("Evaluation failed: "+$i(s));return e?Wi(a):Xi(this,a)};const ye=e=>{if(e.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(e.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};if(e.message.endsWith("Cannot find context with specified id")||e.message.endsWith("Inspected target navigated or closed"))throw new Error("Execution context was destroyed, most likely because of a navigation.");throw e};var ve,_e,be,we,Se,Ee=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},Ce=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};class Te{constructor(){ve.set(this,new Map),_e.set(this,new Map),be.set(this,new Map),we.set(this,void 0),Se.set(this,new Map)}getMainFrame(){return Ee(this,we,"f")}getById(e){return Ee(this,ve,"f").get(e)}waitForFrame(e){const t=this.getById(e);if(t)return Promise.resolve(t);const r=N();return(Ee(this,Se,"f").get(e)||new Set).add(r),r}frames(){return Array.from(Ee(this,ve,"f").values())}addFrame(e){var t;Ee(this,ve,"f").set(e._id,e),e._parentId?(Ee(this,_e,"f").set(e._id,e._parentId),Ee(this,be,"f").has(e._parentId)||Ee(this,be,"f").set(e._parentId,new Set),Ee(this,be,"f").get(e._parentId).add(e._id)):Ce(this,we,e,"f"),null===(t=Ee(this,Se,"f").get(e._id))||void 0===t||t.forEach((t=>t.resolve(e)))}removeFrame(e){var t;Ee(this,ve,"f").delete(e._id),Ee(this,_e,"f").delete(e._id),e._parentId?null===(t=Ee(this,be,"f").get(e._parentId))||void 0===t||t.delete(e._id):Ce(this,we,void 0,"f")}childFrames(e){const t=Ee(this,be,"f").get(e);return t?Array.from(t).map((e=>this.getById(e))).filter((e=>void 0!==e)):[]}parentFrame(e){const t=Ee(this,_e,"f").get(e);return t?this.getById(t):void 0}}ve=new WeakMap,_e=new WeakMap,be=new WeakMap,we=new WeakMap,Se=new WeakMap;var ke,Pe,Re,xe,Me,Oe,De,Ie,Ae,Ne,Le,Fe,je,qe,Ue,Be,$e,We,He,Ve,Ge,Ke=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ze=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Xe{constructor(e,t,r,n,i,o){ke.add(this),this._failureText=null,this._response=null,this._fromMemoryCache=!1,Pe.set(this,void 0),Re.set(this,void 0),xe.set(this,void 0),Me.set(this,!1),Oe.set(this,void 0),De.set(this,void 0),Ie.set(this,void 0),Ae.set(this,void 0),Ne.set(this,{}),Le.set(this,void 0),Fe.set(this,void 0),je.set(this,null),qe.set(this,null),Ue.set(this,{action:Ge.None}),Be.set(this,void 0),$e.set(this,void 0),Ke(this,Pe,e,"f"),this._requestId=i.requestId,Ke(this,Re,i.requestId===i.loaderId&&"Document"===i.type,"f"),this._interceptionId=r,Ke(this,xe,n,"f"),Ke(this,Oe,i.request.url,"f"),Ke(this,De,(i.type||"other").toLowerCase(),"f"),Ke(this,Ie,i.request.method,"f"),Ke(this,Ae,i.request.postData,"f"),Ke(this,Le,t,"f"),this._redirectChain=o,Ke(this,Fe,{},"f"),Ke(this,Be,[],"f"),Ke(this,$e,i.initiator,"f");for(const[e,t]of Object.entries(i.request.headers))ze(this,Ne,"f")[e.toLowerCase()]=t}get client(){return ze(this,Pe,"f")}url(){return ze(this,Oe,"f")}continueRequestOverrides(){return w(ze(this,xe,"f"),"Request Interception is not enabled!"),ze(this,Fe,"f")}responseForRequest(){return w(ze(this,xe,"f"),"Request Interception is not enabled!"),ze(this,je,"f")}abortErrorReason(){return w(ze(this,xe,"f"),"Request Interception is not enabled!"),ze(this,qe,"f")}interceptResolutionState(){return ze(this,xe,"f")?ze(this,Me,"f")?{action:Ge.AlreadyHandled}:{...ze(this,Ue,"f")}:{action:Ge.Disabled}}isInterceptResolutionHandled(){return ze(this,Me,"f")}enqueueInterceptAction(e){ze(this,Be,"f").push(e)}async finalizeInterceptions(){await ze(this,Be,"f").reduce(((e,t)=>e.then(t)),Promise.resolve());const{action:e}=this.interceptResolutionState();switch(e){case"abort":return ze(this,ke,"m",Ve).call(this,ze(this,qe,"f"));case"respond":if(null===ze(this,je,"f"))throw new Error("Response is missing for the interception");return ze(this,ke,"m",He).call(this,ze(this,je,"f"));case"continue":return ze(this,ke,"m",We).call(this,ze(this,Fe,"f"))}}resourceType(){return ze(this,De,"f")}method(){return ze(this,Ie,"f")}postData(){return ze(this,Ae,"f")}headers(){return ze(this,Ne,"f")}response(){return this._response}frame(){return ze(this,Le,"f")}isNavigationRequest(){return ze(this,Re,"f")}initiator(){return ze(this,$e,"f")}redirectChain(){return this._redirectChain.slice()}failure(){return this._failureText?{errorText:this._failureText}:null}async continue(e={},t){if(!ze(this,Oe,"f").startsWith("data:")){if(w(ze(this,xe,"f"),"Request Interception is not enabled!"),w(!ze(this,Me,"f"),"Request is already handled!"),void 0===t)return ze(this,ke,"m",We).call(this,e);if(Ke(this,Fe,e,"f"),void 0===ze(this,Ue,"f").priority||t>ze(this,Ue,"f").priority)Ke(this,Ue,{action:Ge.Continue,priority:t},"f");else if(t===ze(this,Ue,"f").priority){if("abort"===ze(this,Ue,"f").action||"respond"===ze(this,Ue,"f").action)return;ze(this,Ue,"f").action=Ge.Continue}}}async respond(e,t){if(!ze(this,Oe,"f").startsWith("data:")){if(w(ze(this,xe,"f"),"Request Interception is not enabled!"),w(!ze(this,Me,"f"),"Request is already handled!"),void 0===t)return ze(this,ke,"m",He).call(this,e);if(Ke(this,je,e,"f"),void 0===ze(this,Ue,"f").priority||t>ze(this,Ue,"f").priority)Ke(this,Ue,{action:Ge.Respond,priority:t},"f");else if(t===ze(this,Ue,"f").priority){if("abort"===ze(this,Ue,"f").action)return;ze(this,Ue,"f").action=Ge.Respond}}}async abort(e="failed",t){if(ze(this,Oe,"f").startsWith("data:"))return;const r=Je[e];if(w(r,"Unknown error code: "+e),w(ze(this,xe,"f"),"Request Interception is not enabled!"),w(!ze(this,Me,"f"),"Request is already handled!"),void 0===t)return ze(this,ke,"m",Ve).call(this,r);Ke(this,qe,r,"f"),(void 0===ze(this,Ue,"f").priority||t>=ze(this,Ue,"f").priority)&&Ke(this,Ue,{action:Ge.Abort,priority:t},"f")}}Pe=new WeakMap,Re=new WeakMap,xe=new WeakMap,Me=new WeakMap,Oe=new WeakMap,De=new WeakMap,Ie=new WeakMap,Ae=new WeakMap,Ne=new WeakMap,Le=new WeakMap,Fe=new WeakMap,je=new WeakMap,qe=new WeakMap,Ue=new WeakMap,Be=new WeakMap,$e=new WeakMap,ke=new WeakSet,We=async function(e={}){const{url:t,method:r,postData:n,headers:i}=e;Ke(this,Me,!0,"f");const o=n?Buffer.from(n).toString("base64"):void 0;if(void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.continueRequest");await ze(this,Pe,"f").send("Fetch.continueRequest",{requestId:this._interceptionId,url:t,method:r,postData:o,headers:i?Ye(i):void 0}).catch((e=>(Ke(this,Me,!1,"f"),Qe(e))))},He=async function(e){Ke(this,Me,!0,"f");const t=e.body&&Ki(e.body)?Buffer.from(e.body):e.body||null,r={};if(e.headers)for(const t of Object.keys(e.headers)){const n=e.headers[t];r[t.toLowerCase()]=Array.isArray(n)?n.map((e=>String(e))):String(n)}e.contentType&&(r["content-type"]=e.contentType),t&&!("content-length"in r)&&(r["content-length"]=String(Buffer.byteLength(t)));const n=e.status||200;if(void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest");await ze(this,Pe,"f").send("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:n,responsePhrase:Ze[n],responseHeaders:Ye(r),body:t?t.toString("base64"):void 0}).catch((e=>(Ke(this,Me,!1,"f"),Qe(e))))},Ve=async function(e){if(Ke(this,Me,!0,"f"),void 0===this._interceptionId)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.failRequest");await ze(this,Pe,"f").send("Fetch.failRequest",{requestId:this._interceptionId,errorReason:e||"Failed"}).catch(Qe)},function(e){e.Abort="abort",e.Respond="respond",e.Continue="continue",e.Disabled="disabled",e.None="none",e.AlreadyHandled="already-handled"}(Ge||(Ge={}));const Je={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"};function Ye(e){const t=[];for(const r in e){const n=e[r];if(!Object.is(n,void 0)){const e=Array.isArray(n)?n:[n];t.push(...e.map((e=>({name:r,value:e+""}))))}}return t}async function Qe(e){if(["Invalid header"].includes(e.originalMessage))throw e;Bi(e)}const Ze={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};var et,tt,rt,nt,it,ot,st=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},at=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class ct{constructor(e){et.set(this,void 0),tt.set(this,void 0),rt.set(this,void 0),nt.set(this,void 0),it.set(this,void 0),ot.set(this,void 0),st(this,et,e.subjectName,"f"),st(this,tt,e.issuer,"f"),st(this,rt,e.validFrom,"f"),st(this,nt,e.validTo,"f"),st(this,it,e.protocol,"f"),st(this,ot,e.sanList,"f")}issuer(){return at(this,tt,"f")}validFrom(){return at(this,rt,"f")}validTo(){return at(this,nt,"f")}protocol(){return at(this,it,"f")}subjectName(){return at(this,et,"f")}subjectAlternativeNames(){return at(this,ot,"f")}}et=new WeakMap,tt=new WeakMap,rt=new WeakMap,nt=new WeakMap,it=new WeakMap,ot=new WeakMap;var lt,ut,dt,ht,pt,ft,mt,gt,yt,vt,_t,bt,wt,St,Et,Ct,Tt=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},kt=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Pt{constructor(e,t,r,n){lt.add(this),ut.set(this,void 0),dt.set(this,void 0),ht.set(this,null),pt.set(this,void 0),ft.set(this,(()=>{})),mt.set(this,void 0),gt.set(this,void 0),yt.set(this,void 0),vt.set(this,void 0),_t.set(this,void 0),bt.set(this,void 0),wt.set(this,{}),St.set(this,void 0),Et.set(this,void 0),Tt(this,ut,e,"f"),Tt(this,dt,t,"f"),Tt(this,pt,new Promise((e=>{Tt(this,ft,e,"f")})),"f"),Tt(this,mt,{ip:r.remoteIPAddress,port:r.remotePort},"f"),Tt(this,yt,kt(this,lt,"m",Ct).call(this,n)||r.statusText,"f"),Tt(this,vt,t.url(),"f"),Tt(this,_t,!!r.fromDiskCache,"f"),Tt(this,bt,!!r.fromServiceWorker,"f"),Tt(this,gt,n?n.statusCode:r.status,"f");const i=n?n.headers:r.headers;for(const[e,t]of Object.entries(i))kt(this,wt,"f")[e.toLowerCase()]=t;Tt(this,St,r.securityDetails?new ct(r.securityDetails):null,"f"),Tt(this,Et,r.timing||null,"f")}_resolveBody(e){return e?kt(this,ft,"f").call(this,e):kt(this,ft,"f").call(this)}remoteAddress(){return kt(this,mt,"f")}url(){return kt(this,vt,"f")}ok(){return 0===kt(this,gt,"f")||kt(this,gt,"f")>=200&&kt(this,gt,"f")<=299}status(){return kt(this,gt,"f")}statusText(){return kt(this,yt,"f")}headers(){return kt(this,wt,"f")}securityDetails(){return kt(this,St,"f")}timing(){return kt(this,Et,"f")}buffer(){return kt(this,ht,"f")||Tt(this,ht,kt(this,pt,"f").then((async e=>{if(e)throw e;try{const e=await kt(this,ut,"f").send("Network.getResponseBody",{requestId:kt(this,dt,"f")._requestId});return Buffer.from(e.body,e.base64Encoded?"base64":"utf8")}catch(e){if(e instanceof I&&"No resource with given identifier found"===e.originalMessage)throw new I("Could not load body for this request. This might happen if the request is a preflight request.");throw e}})),"f"),kt(this,ht,"f")}async text(){return(await this.buffer()).toString("utf8")}async json(){const e=await this.text();return JSON.parse(e)}request(){return kt(this,dt,"f")}fromCache(){return kt(this,_t,"f")||kt(this,dt,"f")._fromMemoryCache}fromServiceWorker(){return kt(this,bt,"f")}frame(){return kt(this,dt,"f").frame()}}ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,pt=new WeakMap,ft=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,vt=new WeakMap,_t=new WeakMap,bt=new WeakMap,wt=new WeakMap,St=new WeakMap,Et=new WeakMap,lt=new WeakSet,Ct=function(e){if(!e||!e.headersText)return;const t=e.headersText.split("\r",1)[0];if(!t)return;const r=t.match(/[^ ]* [^ ]* (.*)/);if(!r)return;return r[1]||void 0};var Rt,xt,Mt,Ot,Dt,It,At=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Nt{constructor(){Rt.set(this,new Map),xt.set(this,new Map),Mt.set(this,new Map),Ot.set(this,new Map),Dt.set(this,new Map),It.set(this,new Map)}forget(e){At(this,Rt,"f").delete(e),At(this,xt,"f").delete(e),At(this,It,"f").delete(e),At(this,Dt,"f").delete(e),At(this,Ot,"f").delete(e)}responseExtraInfo(e){return At(this,Ot,"f").has(e)||At(this,Ot,"f").set(e,[]),At(this,Ot,"f").get(e)}queuedRedirectInfo(e){return At(this,Dt,"f").has(e)||At(this,Dt,"f").set(e,[]),At(this,Dt,"f").get(e)}queueRedirectInfo(e,t){this.queuedRedirectInfo(e).push(t)}takeQueuedRedirectInfo(e){return this.queuedRedirectInfo(e).shift()}numRequestsInProgress(){return[...At(this,Mt,"f")].filter((([,e])=>!e.response())).length}storeRequestWillBeSent(e,t){At(this,Rt,"f").set(e,t)}getRequestWillBeSent(e){return At(this,Rt,"f").get(e)}forgetRequestWillBeSent(e){At(this,Rt,"f").delete(e)}getRequestPaused(e){return At(this,xt,"f").get(e)}forgetRequestPaused(e){At(this,xt,"f").delete(e)}storeRequestPaused(e,t){At(this,xt,"f").set(e,t)}getRequest(e){return At(this,Mt,"f").get(e)}storeRequest(e,t){At(this,Mt,"f").set(e,t)}forgetRequest(e){At(this,Mt,"f").delete(e)}getQueuedEventGroup(e){return At(this,It,"f").get(e)}queueEventGroup(e,t){At(this,It,"f").set(e,t)}forgetQueuedEventGroup(e){At(this,It,"f").delete(e)}}Rt=new WeakMap,xt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap,Dt=new WeakMap,It=new WeakMap;var Lt,Ft,jt,qt,Ut,Bt,$t,Wt,Ht,Vt,Gt,Kt,zt,Xt,Jt,Yt,Qt,Zt,er,tr,rr,nr,ir,or,sr,ar,cr,lr,ur,dr,hr,pr,fr=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},mr=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const gr={Request:Symbol("NetworkManager.Request"),RequestServedFromCache:Symbol("NetworkManager.RequestServedFromCache"),Response:Symbol("NetworkManager.Response"),RequestFailed:Symbol("NetworkManager.RequestFailed"),RequestFinished:Symbol("NetworkManager.RequestFinished")};class yr extends j{constructor(e,t,r){super(),Lt.add(this),Ft.set(this,void 0),jt.set(this,void 0),qt.set(this,void 0),Ut.set(this,new Nt),Bt.set(this,{}),$t.set(this,void 0),Wt.set(this,new Set),Ht.set(this,!1),Vt.set(this,!1),Gt.set(this,!1),Kt.set(this,{offline:!1,upload:-1,download:-1,latency:0}),zt.set(this,void 0),fr(this,Ft,e,"f"),fr(this,jt,t,"f"),fr(this,qt,r,"f"),mr(this,Ft,"f").on("Fetch.requestPaused",mr(this,Lt,"m",tr).bind(this)),mr(this,Ft,"f").on("Fetch.authRequired",mr(this,Lt,"m",er).bind(this)),mr(this,Ft,"f").on("Network.requestWillBeSent",mr(this,Lt,"m",Zt).bind(this)),mr(this,Ft,"f").on("Network.requestServedFromCache",mr(this,Lt,"m",ir).bind(this)),mr(this,Ft,"f").on("Network.responseReceived",mr(this,Lt,"m",ar).bind(this)),mr(this,Ft,"f").on("Network.loadingFinished",mr(this,Lt,"m",ur).bind(this)),mr(this,Ft,"f").on("Network.loadingFailed",mr(this,Lt,"m",hr).bind(this)),mr(this,Ft,"f").on("Network.responseReceivedExtraInfo",mr(this,Lt,"m",cr).bind(this))}initialize(){if(mr(this,zt,"f"))return mr(this,zt,"f");fr(this,zt,b>0?N({message:"NetworkManager initialization timed out",timeout:b}):N(),"f");const e=Promise.all([mr(this,jt,"f")?mr(this,Ft,"f").send("Security.setIgnoreCertificateErrors",{ignore:!0}):null,mr(this,Ft,"f").send("Network.enable")]),t=mr(this,zt,"f");return e.then((()=>{t.resolve()})).catch((e=>{t.reject(e)})),mr(this,zt,"f")}async authenticate(e){fr(this,$t,e,"f"),await mr(this,Lt,"m",Jt).call(this)}async setExtraHTTPHeaders(e){fr(this,Bt,{},"f");for(const t of Object.keys(e)){const r=e[t];w(Ki(r),`Expected value of header "${t}" to be String, but "${typeof r}" is found.`),mr(this,Bt,"f")[t.toLowerCase()]=r}await mr(this,Ft,"f").send("Network.setExtraHTTPHeaders",{headers:mr(this,Bt,"f")})}extraHTTPHeaders(){return Object.assign({},mr(this,Bt,"f"))}numRequestsInProgress(){return mr(this,Ut,"f").numRequestsInProgress()}async setOfflineMode(e){mr(this,Kt,"f").offline=e,await mr(this,Lt,"m",Xt).call(this)}async emulateNetworkConditions(e){mr(this,Kt,"f").upload=e?e.upload:-1,mr(this,Kt,"f").download=e?e.download:-1,mr(this,Kt,"f").latency=e?e.latency:0,await mr(this,Lt,"m",Xt).call(this)}async setUserAgent(e,t){await mr(this,Ft,"f").send("Network.setUserAgentOverride",{userAgent:e,userAgentMetadata:t})}async setCacheEnabled(e){fr(this,Gt,!e,"f"),await mr(this,Lt,"m",Qt).call(this)}async setRequestInterception(e){fr(this,Ht,e,"f"),await mr(this,Lt,"m",Jt).call(this)}}Ft=new WeakMap,jt=new WeakMap,qt=new WeakMap,Ut=new WeakMap,Bt=new WeakMap,$t=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,Gt=new WeakMap,Kt=new WeakMap,zt=new WeakMap,Lt=new WeakSet,Xt=async function(){await mr(this,Ft,"f").send("Network.emulateNetworkConditions",{offline:mr(this,Kt,"f").offline,latency:mr(this,Kt,"f").latency,uploadThroughput:mr(this,Kt,"f").upload,downloadThroughput:mr(this,Kt,"f").download})},Jt=async function(){const e=mr(this,Ht,"f")||!!mr(this,$t,"f");e!==mr(this,Vt,"f")&&(fr(this,Vt,e,"f"),e?await Promise.all([mr(this,Lt,"m",Qt).call(this),mr(this,Ft,"f").send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([mr(this,Lt,"m",Qt).call(this),mr(this,Ft,"f").send("Fetch.disable")]))},Yt=function(){return mr(this,Gt,"f")},Qt=async function(){await mr(this,Ft,"f").send("Network.setCacheDisabled",{cacheDisabled:mr(this,Lt,"m",Yt).call(this)})},Zt=function(e){if(!mr(this,Ht,"f")||e.request.url.startsWith("data:"))mr(this,Lt,"m",nr).call(this,e,void 0);else{const{requestId:t}=e;mr(this,Ut,"f").storeRequestWillBeSent(t,e);const r=mr(this,Ut,"f").getRequestPaused(t);if(r){const{requestId:n}=r;mr(this,Lt,"m",rr).call(this,e,r),mr(this,Lt,"m",nr).call(this,e,n),mr(this,Ut,"f").forgetRequestPaused(t)}}},er=function(e){let t="Default";mr(this,Wt,"f").has(e.requestId)?t="CancelAuth":mr(this,$t,"f")&&(t="ProvideCredentials",mr(this,Wt,"f").add(e.requestId));const{username:r,password:n}=mr(this,$t,"f")||{username:void 0,password:void 0};mr(this,Ft,"f").send("Fetch.continueWithAuth",{requestId:e.requestId,authChallengeResponse:{response:t,username:r,password:n}}).catch(Bi)},tr=function(e){!mr(this,Ht,"f")&&mr(this,Vt,"f")&&mr(this,Ft,"f").send("Fetch.continueRequest",{requestId:e.requestId}).catch(Bi);const{networkId:t,requestId:r}=e;if(!t)return;const n=(()=>{const r=mr(this,Ut,"f").getRequestWillBeSent(t);if(!r||r.request.url===e.request.url&&r.request.method===e.request.method)return r;mr(this,Ut,"f").forgetRequestWillBeSent(t)})();n?(mr(this,Lt,"m",rr).call(this,n,e),mr(this,Lt,"m",nr).call(this,n,r)):mr(this,Ut,"f").storeRequestPaused(t,e)},rr=function(e,t){e.request.headers={...e.request.headers,...t.request.headers}},nr=function(e,t){let r=[];if(e.redirectResponse){let n=null;if(e.redirectHasExtraInfo&&(n=mr(this,Ut,"f").responseExtraInfo(e.requestId).shift(),!n))return void mr(this,Ut,"f").queueRedirectInfo(e.requestId,{event:e,fetchRequestId:t});const i=mr(this,Ut,"f").getRequest(e.requestId);i&&(mr(this,Lt,"m",or).call(this,i,e.redirectResponse,n),r=i._redirectChain)}const n=e.frameId?mr(this,qt,"f").frame(e.frameId):null,i=new Xe(mr(this,Ft,"f"),n,t,mr(this,Ht,"f"),e,r);mr(this,Ut,"f").storeRequest(e.requestId,i),this.emit(gr.Request,i),i.finalizeInterceptions()},ir=function(e){const t=mr(this,Ut,"f").getRequest(e.requestId);t&&(t._fromMemoryCache=!0),this.emit(gr.RequestServedFromCache,t)},or=function(e,t,r){const n=new Pt(mr(this,Ft,"f"),e,t,r);e._response=n,e._redirectChain.push(e),n._resolveBody(new Error("Response body is unavailable for redirect responses")),mr(this,Lt,"m",lr).call(this,e,!1),this.emit(gr.Response,n),this.emit(gr.RequestFinished,e)},sr=function(e,t){const r=mr(this,Ut,"f").getRequest(e.requestId);if(!r)return;mr(this,Ut,"f").responseExtraInfo(e.requestId).length&&Bi(new Error("Unexpected extraInfo events for request "+e.requestId));const n=new Pt(mr(this,Ft,"f"),r,e.response,t);r._response=n,this.emit(gr.Response,n)},ar=function(e){const t=mr(this,Ut,"f").getRequest(e.requestId);let r=null;!t||t._fromMemoryCache||!e.hasExtraInfo||(r=mr(this,Ut,"f").responseExtraInfo(e.requestId).shift(),r)?mr(this,Lt,"m",sr).call(this,e,r):mr(this,Ut,"f").queueEventGroup(e.requestId,{responseReceivedEvent:e})},cr=function(e){const t=mr(this,Ut,"f").takeQueuedRedirectInfo(e.requestId);if(t)return mr(this,Ut,"f").responseExtraInfo(e.requestId).push(e),void mr(this,Lt,"m",nr).call(this,t.event,t.fetchRequestId);const r=mr(this,Ut,"f").getQueuedEventGroup(e.requestId);if(r)return mr(this,Ut,"f").forgetQueuedEventGroup(e.requestId),mr(this,Lt,"m",sr).call(this,r.responseReceivedEvent,e),r.loadingFinishedEvent&&mr(this,Lt,"m",dr).call(this,r.loadingFinishedEvent),void(r.loadingFailedEvent&&mr(this,Lt,"m",pr).call(this,r.loadingFailedEvent));mr(this,Ut,"f").responseExtraInfo(e.requestId).push(e)},lr=function(e,t){const r=e._requestId,n=e._interceptionId;mr(this,Ut,"f").forgetRequest(r),void 0!==n&&mr(this,Wt,"f").delete(n),t&&mr(this,Ut,"f").forget(r)},ur=function(e){const t=mr(this,Ut,"f").getQueuedEventGroup(e.requestId);t?t.loadingFinishedEvent=e:mr(this,Lt,"m",dr).call(this,e)},dr=function(e){var t;const r=mr(this,Ut,"f").getRequest(e.requestId);r&&(r.response()&&(null===(t=r.response())||void 0===t||t._resolveBody(null)),mr(this,Lt,"m",lr).call(this,r,!0),this.emit(gr.RequestFinished,r))},hr=function(e){const t=mr(this,Ut,"f").getQueuedEventGroup(e.requestId);t?t.loadingFailedEvent=e:mr(this,Lt,"m",pr).call(this,e)},pr=function(e){const t=mr(this,Ut,"f").getRequest(e.requestId);if(!t)return;t._failureText=e.errorText;const r=t.response();r&&r._resolveBody(null),mr(this,Lt,"m",lr).call(this,t,!0),this.emit(gr.RequestFailed,t)};var vr,_r,br,wr,Sr,Er,Cr,Tr,kr,Pr,Rr,xr,Mr,Or,Dr,Ir,Ar,Nr,Lr,Fr,jr=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},qr=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const Ur="__puppeteer_utility_world__",Br={FrameAttached:Symbol("FrameManager.FrameAttached"),FrameNavigated:Symbol("FrameManager.FrameNavigated"),FrameDetached:Symbol("FrameManager.FrameDetached"),FrameSwapped:Symbol("FrameManager.FrameSwapped"),LifecycleEvent:Symbol("FrameManager.LifecycleEvent"),FrameNavigatedWithinDocument:Symbol("FrameManager.FrameNavigatedWithinDocument"),ExecutionContextCreated:Symbol("FrameManager.ExecutionContextCreated"),ExecutionContextDestroyed:Symbol("FrameManager.ExecutionContextDestroyed")};class $r extends j{constructor(e,t,r,n){super(),vr.add(this),_r.set(this,void 0),br.set(this,void 0),wr.set(this,void 0),Sr.set(this,new Map),Er.set(this,new Set),Cr.set(this,void 0),this._frameTree=new Te,jr(this,Cr,e,"f"),jr(this,_r,t,"f"),jr(this,br,new yr(e,r,this),"f"),jr(this,wr,n,"f"),this.setupEventListeners(qr(this,Cr,"f"))}get timeoutSettings(){return qr(this,wr,"f")}get networkManager(){return qr(this,br,"f")}get client(){return qr(this,Cr,"f")}setupEventListeners(e){e.on("Page.frameAttached",(t=>{qr(this,vr,"m",xr).call(this,e,t.frameId,t.parentFrameId)})),e.on("Page.frameNavigated",(e=>{qr(this,vr,"m",Mr).call(this,e.frame)})),e.on("Page.navigatedWithinDocument",(e=>{qr(this,vr,"m",Dr).call(this,e.frameId,e.url)})),e.on("Page.frameDetached",(e=>{qr(this,vr,"m",Ir).call(this,e.frameId,e.reason)})),e.on("Page.frameStartedLoading",(e=>{qr(this,vr,"m",kr).call(this,e.frameId)})),e.on("Page.frameStoppedLoading",(e=>{qr(this,vr,"m",Pr).call(this,e.frameId)})),e.on("Runtime.executionContextCreated",(t=>{qr(this,vr,"m",Ar).call(this,t.context,e)})),e.on("Runtime.executionContextDestroyed",(t=>{qr(this,vr,"m",Nr).call(this,t.executionContextId,e)})),e.on("Runtime.executionContextsCleared",(()=>{qr(this,vr,"m",Lr).call(this,e)})),e.on("Page.lifecycleEvent",(e=>{qr(this,vr,"m",Tr).call(this,e)}))}async initialize(e=qr(this,Cr,"f")){try{const t=await Promise.all([e.send("Page.enable"),e.send("Page.getFrameTree")]),{frameTree:r}=t[1];qr(this,vr,"m",Rr).call(this,e,r),await Promise.all([e.send("Page.setLifecycleEventsEnabled",{enabled:!0}),e.send("Runtime.enable").then((()=>qr(this,vr,"m",Or).call(this,e,Ur))),e===qr(this,Cr,"f")?qr(this,br,"f").initialize():Promise.resolve()])}catch(e){if(S(e)&&ue(e))return;throw e}}executionContextById(e,t=qr(this,Cr,"f")){const r=`${t.id()}:${e}`,n=qr(this,Sr,"f").get(r);return w(n,"INTERNAL ERROR: missing context with id = "+e),n}page(){return qr(this,_r,"f")}mainFrame(){const e=this._frameTree.getMainFrame();return w(e,"Requesting main frame too early!"),e}frames(){return Array.from(this._frameTree.frames())}frame(e){return this._frameTree.getById(e)||null}onAttachedToTarget(e){if("iframe"!==e._getTargetInfo().type)return;const t=this.frame(e._getTargetInfo().targetId);t&&t.updateClient(e._session()),this.setupEventListeners(e._session()),this.initialize(e._session())}onDetachedFromTarget(e){const t=this.frame(e._targetId);t&&t.isOOPFrame()&&qr(this,vr,"m",Fr).call(this,t)}}_r=new WeakMap,br=new WeakMap,wr=new WeakMap,Sr=new WeakMap,Er=new WeakMap,Cr=new WeakMap,vr=new WeakSet,Tr=function(e){const t=this.frame(e.frameId);t&&(t._onLifecycleEvent(e.loaderId,e.name),this.emit(Br.LifecycleEvent,t))},kr=function(e){const t=this.frame(e);t&&t._onLoadingStarted()},Pr=function(e){const t=this.frame(e);t&&(t._onLoadingStopped(),this.emit(Br.LifecycleEvent,t))},Rr=function e(t,r){if(r.frame.parentId&&qr(this,vr,"m",xr).call(this,t,r.frame.id,r.frame.parentId),qr(this,vr,"m",Mr).call(this,r.frame),r.childFrames)for(const n of r.childFrames)qr(this,vr,"m",e).call(this,t,n)},xr=function(e,t,r){let n=this.frame(t);n?e&&n.isOOPFrame()&&n.updateClient(e):(n=new hi(this,t,r,e),this._frameTree.addFrame(n),this.emit(Br.FrameAttached,n))},Mr=async function(e){const t=e.id,r=!e.parentId;let n=this._frameTree.getById(t);if(n)for(const e of n.childFrames())qr(this,vr,"m",Fr).call(this,e);r&&(n?(this._frameTree.removeFrame(n),n._id=t):n=new hi(this,t,void 0,qr(this,Cr,"f")),this._frameTree.addFrame(n)),n=await this._frameTree.waitForFrame(t),n._navigated(e),this.emit(Br.FrameNavigated,n)},Or=async function(e,t){const r=`${e.id()}:${t}`;qr(this,Er,"f").has(r)||(await e.send("Page.addScriptToEvaluateOnNewDocument",{source:`//# sourceURL=${fe}`,worldName:t}),await Promise.all(this.frames().filter((t=>t._client()===e)).map((r=>e.send("Page.createIsolatedWorld",{frameId:r._id,worldName:t,grantUniveralAccess:!0}).catch(Bi)))),qr(this,Er,"f").add(r))},Dr=function(e,t){const r=this.frame(e);r&&(r._navigatedWithinDocument(t),this.emit(Br.FrameNavigatedWithinDocument,r),this.emit(Br.FrameNavigated,r))},Ir=function(e,t){const r=this.frame(e);"remove"===t?r&&qr(this,vr,"m",Fr).call(this,r):"swap"===t&&this.emit(Br.FrameSwapped,r)},Ar=function(e,t){const r=e.auxData,n=r&&r.frameId,i="string"==typeof n?this.frame(n):void 0;let o;if(i){if(i._client()!==t)return;e.auxData&&e.auxData.isDefault?o=i.worlds[ii]:e.name!==Ur||i.worlds[oi].hasContext()||(o=i.worlds[oi])}const s=new ge((null==i?void 0:i._client())||qr(this,Cr,"f"),e,o);o&&o.setContext(s);const a=`${t.id()}:${e.id}`;qr(this,Sr,"f").set(a,s)},Nr=function(e,t){const r=`${t.id()}:${e}`,n=qr(this,Sr,"f").get(r);n&&(qr(this,Sr,"f").delete(r),n._world&&n._world.clearContext())},Lr=function(e){for(const[t,r]of qr(this,Sr,"f").entries())r._client===e&&(r._world&&r._world.clearContext(),qr(this,Sr,"f").delete(t))},Fr=function e(t){for(const r of t.childFrames())qr(this,vr,"m",e).call(this,r);t._detach(),this._frameTree.removeFrame(t),this.emit(Br.FrameDetached,t)};var Wr,Hr,Vr,Gr,Kr,zr,Xr,Jr,Yr,Qr,Zr,en,tn,rn,nn,on,sn,an,cn,ln,un,dn,hn,pn,fn,mn,gn,yn,vn,_n,bn=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},wn=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const Sn=new Map([["load","load"],["domcontentloaded","DOMContentLoaded"],["networkidle0","networkIdle"],["networkidle2","networkAlmostIdle"]]),En=()=>{};class Cn{constructor(e,t,r,n){Wr.add(this),Hr.set(this,void 0),Vr.set(this,void 0),Gr.set(this,void 0),Kr.set(this,void 0),zr.set(this,null),Xr.set(this,void 0),Jr.set(this,void 0),Yr.set(this,En),Qr.set(this,new Promise((e=>{bn(this,Yr,e,"f")}))),Zr.set(this,En),en.set(this,new Promise((e=>{bn(this,Zr,e,"f")}))),tn.set(this,En),rn.set(this,new Promise((e=>{bn(this,tn,e,"f")}))),nn.set(this,En),on.set(this,new Promise((e=>{bn(this,nn,e,"f")}))),sn.set(this,void 0),an.set(this,void 0),cn.set(this,void 0),ln.set(this,void 0),un.set(this,void 0),Array.isArray(r)?r=r.slice():"string"==typeof r&&(r=[r]),bn(this,Jr,t._loaderId,"f"),bn(this,Hr,r.map((e=>{const t=Sn.get(e);return w(t,"Unknown value for options.waitUntil: "+e),t})),"f"),bn(this,Vr,e,"f"),bn(this,Gr,t,"f"),bn(this,Kr,n,"f"),bn(this,Xr,[Vi(e.client,oe.Disconnected,wn(this,Wr,"m",fn).bind(this,new Error("Navigation failed because browser has disconnected!"))),Vi(wn(this,Vr,"f"),Br.LifecycleEvent,wn(this,Wr,"m",_n).bind(this)),Vi(wn(this,Vr,"f"),Br.FrameNavigatedWithinDocument,wn(this,Wr,"m",gn).bind(this)),Vi(wn(this,Vr,"f"),Br.FrameNavigated,wn(this,Wr,"m",yn).bind(this)),Vi(wn(this,Vr,"f"),Br.FrameSwapped,wn(this,Wr,"m",vn).bind(this)),Vi(wn(this,Vr,"f"),Br.FrameDetached,wn(this,Wr,"m",pn).bind(this)),Vi(wn(this,Vr,"f").networkManager,gr.Request,wn(this,Wr,"m",dn).bind(this)),Vi(wn(this,Vr,"f").networkManager,gr.Response,wn(this,Wr,"m",hn).bind(this))],"f"),bn(this,sn,wn(this,Wr,"m",mn).call(this),"f"),wn(this,Wr,"m",_n).call(this)}async navigationResponse(){var e;return await(null===(e=wn(this,un,"f"))||void 0===e?void 0:e.catch((()=>{}))),wn(this,zr,"f")?wn(this,zr,"f").response():null}sameDocumentNavigationPromise(){return wn(this,Qr,"f")}newDocumentNavigationPromise(){return wn(this,rn,"f")}lifecyclePromise(){return wn(this,en,"f")}timeoutOrTerminationPromise(){return Promise.race([wn(this,sn,"f"),wn(this,on,"f")])}dispose(){Gi(wn(this,Xr,"f")),void 0!==wn(this,an,"f")&&clearTimeout(wn(this,an,"f"))}}Hr=new WeakMap,Vr=new WeakMap,Gr=new WeakMap,Kr=new WeakMap,zr=new WeakMap,Xr=new WeakMap,Jr=new WeakMap,Yr=new WeakMap,Qr=new WeakMap,Zr=new WeakMap,en=new WeakMap,tn=new WeakMap,rn=new WeakMap,nn=new WeakMap,on=new WeakMap,sn=new WeakMap,an=new WeakMap,cn=new WeakMap,ln=new WeakMap,un=new WeakMap,Wr=new WeakSet,dn=function(e){var t,r;e.frame()===wn(this,Gr,"f")&&e.isNavigationRequest()&&(bn(this,zr,e,"f"),null===(t=wn(this,un,"f"))||void 0===t||t.resolve(),bn(this,un,N(),"f"),null!==e.response()&&(null===(r=wn(this,un,"f"))||void 0===r||r.resolve()))},hn=function(e){var t,r;(null===(t=wn(this,zr,"f"))||void 0===t?void 0:t._requestId)===e.request()._requestId&&(null===(r=wn(this,un,"f"))||void 0===r||r.resolve())},pn=function(e){wn(this,Gr,"f")!==e?wn(this,Wr,"m",_n).call(this):wn(this,nn,"f").call(null,new Error("Navigating frame was detached"))},fn=function(e){wn(this,nn,"f").call(null,e)},mn=async function(){if(!wn(this,Kr,"f"))return new Promise(En);const e="Navigation timeout of "+wn(this,Kr,"f")+" ms exceeded";return await new Promise((e=>bn(this,an,setTimeout(e,wn(this,Kr,"f")),"f"))),new D(e)},gn=function(e){e===wn(this,Gr,"f")&&(bn(this,cn,!0,"f"),wn(this,Wr,"m",_n).call(this))},yn=function(e){e===wn(this,Gr,"f")&&wn(this,Wr,"m",_n).call(this)},vn=function(e){e===wn(this,Gr,"f")&&(bn(this,ln,!0,"f"),wn(this,Wr,"m",_n).call(this))},_n=function(){(function e(t,r){for(const e of r)if(!t._lifecycleEvents.has(e))return!1;for(const n of t.childFrames())if(n._hasStartedLoading&&!e(n,r))return!1;return!0})(wn(this,Gr,"f"),wn(this,Hr,"f"))&&(wn(this,Zr,"f").call(this),wn(this,cn,"f")&&wn(this,Yr,"f").call(this),(wn(this,ln,"f")||wn(this,Gr,"f")._loaderId!==wn(this,Jr,"f"))&&wn(this,tn,"f").call(this))};var Tn,kn,Pn,Rn,xn,Mn,On,Dn,In,An,Nn=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Ln=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Fn{constructor(e,t,r,...n){var i;if(Tn.set(this,void 0),kn.set(this,void 0),Pn.set(this,void 0),Rn.set(this,void 0),xn.set(this,void 0),Mn.set(this,void 0),On.set(this,void 0),Dn.set(this,N()),In.set(this,void 0),Nn(this,Tn,e,"f"),Nn(this,kn,null!==(i=t.bindings)&&void 0!==i?i:new Map,"f"),Nn(this,Pn,t.polling,"f"),Nn(this,Rn,t.root,"f"),Nn(this,xn,"string"==typeof r?`() => {return (${r});}`:r.toString(),"f"),Nn(this,Mn,n,"f"),Ln(this,Tn,"f").taskManager.add(this),t.timeout&&Nn(this,On,setTimeout((()=>{this.terminate(new D(`Waiting failed: ${t.timeout}ms exceeded`))}),t.timeout),"f"),0!==Ln(this,kn,"f").size)for(const[e,t]of Ln(this,kn,"f"))Ln(this,Tn,"f")._boundFunctions.set(e,t);this.rerun()}get result(){return Ln(this,Dn,"f")}async rerun(){try{if(0!==Ln(this,kn,"f").size){const e=await Ln(this,Tn,"f").executionContext();await Promise.all([...Ln(this,kn,"f")].map((async([t])=>await Ln(this,Tn,"f")._addBindingToContext(e,t))))}switch(Ln(this,Pn,"f")){case"raf":Nn(this,In,await Ln(this,Tn,"f").evaluateHandle((({RAFPoller:e,createFunction:t},r,...n)=>{const i=t(r);return new e((()=>i(...n)))}),await Ln(this,Tn,"f").puppeteerUtil,Ln(this,xn,"f"),...Ln(this,Mn,"f")),"f");break;case"mutation":Nn(this,In,await Ln(this,Tn,"f").evaluateHandle((({MutationPoller:e,createFunction:t},r,n,...i)=>{const o=t(n);return new e((()=>o(...i)),r||document)}),await Ln(this,Tn,"f").puppeteerUtil,Ln(this,Rn,"f"),Ln(this,xn,"f"),...Ln(this,Mn,"f")),"f");break;default:Nn(this,In,await Ln(this,Tn,"f").evaluateHandle((({IntervalPoller:e,createFunction:t},r,n,...i)=>{const o=t(n);return new e((()=>o(...i)),r)}),await Ln(this,Tn,"f").puppeteerUtil,Ln(this,Pn,"f"),Ln(this,xn,"f"),...Ln(this,Mn,"f")),"f")}await Ln(this,In,"f").evaluate((e=>{e.start()}));const e=await Ln(this,In,"f").evaluateHandle((e=>e.result()));Ln(this,Dn,"f").resolve(e),await this.terminate()}catch(e){const t=this.getBadError(e);t&&await this.terminate(t)}}async terminate(e){if(Ln(this,Tn,"f").taskManager.delete(this),Ln(this,On,"f")&&clearTimeout(Ln(this,On,"f")),e&&!Ln(this,Dn,"f").finished()&&Ln(this,Dn,"f").reject(e),Ln(this,In,"f"))try{await Ln(this,In,"f").evaluateHandle((async e=>{await e.stop()})),Ln(this,In,"f")&&(await Ln(this,In,"f").dispose(),Nn(this,In,void 0,"f"))}catch{}}getBadError(e){if(e instanceof Error){if(e.message.includes("Execution context is not available in detached frame"))return new Error("Waiting failed: Frame detached");if(e.message.includes("Execution context was destroyed"))return;if(e.message.includes("Cannot find context with specified id"))return}return e}}Tn=new WeakMap,kn=new WeakMap,Pn=new WeakMap,Rn=new WeakMap,xn=new WeakMap,Mn=new WeakMap,On=new WeakMap,Dn=new WeakMap,In=new WeakMap;class jn{constructor(){An.set(this,new Set)}add(e){Ln(this,An,"f").add(e)}delete(e){Ln(this,An,"f").delete(e)}terminateAll(e){for(const t of Ln(this,An,"f"))t.terminate(e);Ln(this,An,"f").clear()}async rerunAll(){await Promise.all([...Ln(this,An,"f")].map((e=>e.rerun())))}}An=new WeakMap;var qn,Un,Bn,$n,Wn,Hn,Vn,Gn,Kn,zn,Xn,Jn,Yn,Qn,Zn,ei,ti,ri=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ni=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const ii=Symbol("mainWorld"),oi=Symbol("puppeteerWorld");class si{constructor(e){qn.add(this),Bn.set(this,void 0),$n.set(this,void 0),Wn.set(this,N()),Hn.set(this,!1),Vn.set(this,new Set),Gn.set(this,new Map),Kn.set(this,new jn),zn.set(this,N()),ei.set(this,null),ti.set(this,(async e=>{let t;if(!this.hasContext())return;const r=await this.executionContext();try{t=JSON.parse(e.payload)}catch{return}const{type:n,name:i,seq:o,args:s}=t;if("internal"===n&&ni(this,Vn,"f").has(ni(si,Un,"f",Xn).call(si,i,r._contextId))&&r._contextId===e.executionContextId)try{const e=this._boundFunctions.get(i);if(!e)throw new Error("Bound function $name is not found");const t=await e(...s);await r.evaluate(((e,t,r)=>{const n=self[e].callbacks;n.get(t).resolve(r),n.delete(t)}),i,o,t)}catch(e){if(e.message.includes("Protocol error"))return;Bi(e)}})),ri(this,Bn,e,"f"),ni(this,qn,"a",Jn).on("Runtime.bindingCalled",ni(this,ti,"f"))}get puppeteerUtil(){return ni(this,zn,"f")}get taskManager(){return ni(this,Kn,"f")}get _boundFunctions(){return ni(this,Gn,"f")}frame(){return ni(this,Bn,"f")}clearContext(){ri(this,$n,void 0,"f"),ri(this,zn,N(),"f"),ri(this,Wn,N(),"f")}setContext(e){ni(this,qn,"m",Zn).call(this,e),ni(this,Vn,"f").clear(),ni(this,Wn,"f").resolve(e)}hasContext(){return ni(this,Wn,"f").resolved()}_detach(){ri(this,Hn,!0,"f"),ni(this,qn,"a",Jn).off("Runtime.bindingCalled",ni(this,ti,"f")),ni(this,Kn,"f").terminateAll(new Error("waitForFunction failed: frame got detached."))}executionContext(){if(ni(this,Hn,"f"))throw new Error(`Execution context is not available in detached frame "${ni(this,Bn,"f").url()}" (are you trying to evaluate?)`);if(null===ni(this,Wn,"f"))throw new Error("Execution content promise is missing");return ni(this,Wn,"f")}async evaluateHandle(e,...t){return(await this.executionContext()).evaluateHandle(e,...t)}async evaluate(e,...t){return(await this.executionContext()).evaluate(e,...t)}async $(e){return(await this.document()).$(e)}async $$(e){return(await this.document()).$$(e)}async document(){if(ni(this,$n,"f"))return ni(this,$n,"f");const e=await this.executionContext();return ri(this,$n,await e.evaluateHandle((()=>document)),"f"),ni(this,$n,"f")}async $x(e){return(await this.document()).$x(e)}async $eval(e,t,...r){return(await this.document()).$eval(e,t,...r)}async $$eval(e,t,...r){return(await this.document()).$$eval(e,t,...r)}async content(){return await this.evaluate((()=>{let e="";return document.doctype&&(e=(new XMLSerializer).serializeToString(document.doctype)),document.documentElement&&(e+=document.documentElement.outerHTML),e}))}async setContent(e,t={}){const{waitUntil:r=["load"],timeout:n=ni(this,qn,"a",Qn).navigationTimeout()}=t;await this.evaluate((e=>{document.open(),document.write(e),document.close()}),e);const i=new Cn(ni(this,qn,"a",Yn),ni(this,Bn,"f"),r,n),o=await Promise.race([i.timeoutOrTerminationPromise(),i.lifecyclePromise()]);if(i.dispose(),o)throw o}async click(e,t){const r=await this.$(e);w(r,`No element found for selector: ${e}`),await r.click(t),await r.dispose()}async focus(e){const t=await this.$(e);w(t,`No element found for selector: ${e}`),await t.focus(),await t.dispose()}async hover(e){const t=await this.$(e);w(t,`No element found for selector: ${e}`),await t.hover(),await t.dispose()}async select(e,...t){const r=await this.$(e);w(r,`No element found for selector: ${e}`);const n=await r.select(...t);return await r.dispose(),n}async tap(e){const t=await this.$(e);w(t,`No element found for selector: ${e}`),await t.tap(),await t.dispose()}async type(e,t,r){const n=await this.$(e);w(n,`No element found for selector: ${e}`),await n.type(t,r),await n.dispose()}async _addBindingToContext(e,t){if(!ni(this,Vn,"f").has(ni(si,Un,"f",Xn).call(si,t,e._contextId)))return ni(this,ei,"f")?(await ni(this,ei,"f"),this._addBindingToContext(e,t)):(ri(this,ei,(async t=>{const r=Yi("internal",t);try{await e._client.send("Runtime.addBinding",{name:t,executionContextName:e._contextName}),await e.evaluate(r)}catch(e){if(e instanceof Error){if(e.message.includes("Execution context was destroyed"))return;if(e.message.includes("Cannot find context with specified id"))return}return void Bi(e)}ni(this,Vn,"f").add(ni(si,Un,"f",Xn).call(si,t,e._contextId))})(t),"f"),await ni(this,ei,"f"),void ri(this,ei,null,"f"))}async _waitForSelectorInPage(e,t,r,n,i=new Map){const{visible:o=!1,hidden:s=!1,timeout:a=ni(this,qn,"a",Qn).timeout()}=n;try{const n=await this.waitForFunction((async(e,t,r,n,i)=>{if(!e)return;const o=await e.createFunction(t)(n||document,r,e);return e.checkVisibility(o,i)}),{bindings:i,polling:o||s?"raf":"mutation",root:t,timeout:a},new F((async()=>{try{return await this.puppeteerUtil}catch{return}})),e.toString(),r,t,!!o||!s&&void 0);return n.asElement()||(await n.dispose(),null)}catch(e){if(!S(e))throw e;throw e.message=`Waiting for selector \`${r}\` failed: ${e.message}`,e}}waitForFunction(e,t={},...r){const{polling:n="raf",timeout:i=ni(this,qn,"a",Qn).timeout(),bindings:o,root:s}=t;if("number"==typeof n&&n<0)throw new Error("Cannot poll with non-positive interval");return new Fn(this,{bindings:o,polling:n,root:s,timeout:i},e,...r).result}async title(){return this.evaluate((()=>document.title))}async adoptBackendNode(e){const t=await this.executionContext(),{object:r}=await ni(this,qn,"a",Jn).send("DOM.resolveNode",{backendNodeId:e,executionContextId:t._contextId});return Xi(t,r)}async adoptHandle(e){const t=await this.executionContext();w(e.executionContext()!==t,"Cannot adopt handle that already belongs to this execution context");const r=await ni(this,qn,"a",Jn).send("DOM.describeNode",{objectId:e.remoteObject().objectId});return await this.adoptBackendNode(r.node.backendNodeId)}async transferHandle(e){const t=await this.adoptHandle(e);return await e.dispose(),t}}Un=si,Bn=new WeakMap,$n=new WeakMap,Wn=new WeakMap,Hn=new WeakMap,Vn=new WeakMap,Gn=new WeakMap,Kn=new WeakMap,zn=new WeakMap,ei=new WeakMap,ti=new WeakMap,qn=new WeakSet,Jn=function(){return ni(this,Bn,"f")._client()},Yn=function(){return ni(this,Bn,"f")._frameManager},Qn=function(){return ni(this,qn,"a",Yn).timeoutSettings},Zn=async function(e){try{ni(this,zn,"f").resolve(await e.evaluateHandle('(() => {\n              const module = {};\n              "use strict";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === "object" || typeof from === "function") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);\n\n// src/injected/injected.ts\nvar injected_exports = {};\n__export(injected_exports, {\n  default: () => injected_default\n});\nmodule.exports = __toCommonJS(injected_exports);\n\n// src/common/Errors.ts\nvar CustomError = class extends Error {\n  constructor(message) {\n    super(message);\n    this.name = this.constructor.name;\n    Error.captureStackTrace(this, this.constructor);\n  }\n};\nvar TimeoutError = class extends CustomError {\n};\nvar ProtocolError = class extends CustomError {\n  code;\n  originalMessage = "";\n};\nvar errors = Object.freeze({\n  TimeoutError,\n  ProtocolError\n});\n\n// src/util/DeferredPromise.ts\nfunction createDeferredPromise(opts) {\n  let isResolved = false;\n  let isRejected = false;\n  let resolver;\n  let rejector;\n  const taskPromise = new Promise((resolve, reject) => {\n    resolver = resolve;\n    rejector = reject;\n  });\n  const timeoutId = opts && opts.timeout > 0 ? setTimeout(() => {\n    isRejected = true;\n    rejector(new TimeoutError(opts.message));\n  }, opts.timeout) : void 0;\n  return Object.assign(taskPromise, {\n    resolved: () => {\n      return isResolved;\n    },\n    finished: () => {\n      return isResolved || isRejected;\n    },\n    resolve: (value) => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      isResolved = true;\n      resolver(value);\n    },\n    reject: (err) => {\n      clearTimeout(timeoutId);\n      isRejected = true;\n      rejector(err);\n    }\n  });\n}\n\n// src/util/assert.ts\nvar assert = (value, message) => {\n  if (!value) {\n    throw new Error(message);\n  }\n};\n\n// src/injected/Poller.ts\nvar MutationPoller = class {\n  #fn;\n  #root;\n  #observer;\n  #promise;\n  constructor(fn, root) {\n    this.#fn = fn;\n    this.#root = root;\n  }\n  async start() {\n    const promise = this.#promise = createDeferredPromise();\n    const result = await this.#fn();\n    if (result) {\n      promise.resolve(result);\n      return;\n    }\n    this.#observer = new MutationObserver(async () => {\n      const result2 = await this.#fn();\n      if (!result2) {\n        return;\n      }\n      promise.resolve(result2);\n      await this.stop();\n    });\n    this.#observer.observe(this.#root, {\n      childList: true,\n      subtree: true,\n      attributes: true\n    });\n  }\n  async stop() {\n    assert(this.#promise, "Polling never started.");\n    if (!this.#promise.finished()) {\n      this.#promise.reject(new Error("Polling stopped"));\n    }\n    if (this.#observer) {\n      this.#observer.disconnect();\n      this.#observer = void 0;\n    }\n  }\n  result() {\n    assert(this.#promise, "Polling never started.");\n    return this.#promise;\n  }\n};\nvar RAFPoller = class {\n  #fn;\n  #promise;\n  constructor(fn) {\n    this.#fn = fn;\n  }\n  async start() {\n    const promise = this.#promise = createDeferredPromise();\n    const result = await this.#fn();\n    if (result) {\n      promise.resolve(result);\n      return;\n    }\n    const poll = async () => {\n      if (promise.finished()) {\n        return;\n      }\n      const result2 = await this.#fn();\n      if (!result2) {\n        window.requestAnimationFrame(poll);\n        return;\n      }\n      promise.resolve(result2);\n      await this.stop();\n    };\n    window.requestAnimationFrame(poll);\n  }\n  async stop() {\n    assert(this.#promise, "Polling never started.");\n    if (!this.#promise.finished()) {\n      this.#promise.reject(new Error("Polling stopped"));\n    }\n  }\n  result() {\n    assert(this.#promise, "Polling never started.");\n    return this.#promise;\n  }\n};\nvar IntervalPoller = class {\n  #fn;\n  #ms;\n  #interval;\n  #promise;\n  constructor(fn, ms) {\n    this.#fn = fn;\n    this.#ms = ms;\n  }\n  async start() {\n    const promise = this.#promise = createDeferredPromise();\n    const result = await this.#fn();\n    if (result) {\n      promise.resolve(result);\n      return;\n    }\n    this.#interval = setInterval(async () => {\n      const result2 = await this.#fn();\n      if (!result2) {\n        return;\n      }\n      promise.resolve(result2);\n      await this.stop();\n    }, this.#ms);\n  }\n  async stop() {\n    assert(this.#promise, "Polling never started.");\n    if (!this.#promise.finished()) {\n      this.#promise.reject(new Error("Polling stopped"));\n    }\n    if (this.#interval) {\n      clearInterval(this.#interval);\n      this.#interval = void 0;\n    }\n  }\n  result() {\n    assert(this.#promise, "Polling never started.");\n    return this.#promise;\n  }\n};\n\n// src/injected/TextContent.ts\nvar TRIVIAL_VALUE_INPUT_TYPES = /* @__PURE__ */ new Set(["checkbox", "image", "radio"]);\nvar isNonTrivialValueNode = (node) => {\n  if (node instanceof HTMLSelectElement) {\n    return true;\n  }\n  if (node instanceof HTMLTextAreaElement) {\n    return true;\n  }\n  if (node instanceof HTMLInputElement && !TRIVIAL_VALUE_INPUT_TYPES.has(node.type)) {\n    return true;\n  }\n  return false;\n};\nvar UNSUITABLE_NODE_NAMES = /* @__PURE__ */ new Set(["SCRIPT", "STYLE"]);\nvar isSuitableNodeForTextMatching = (node) => {\n  return !UNSUITABLE_NODE_NAMES.has(node.nodeName) && !document.head?.contains(node);\n};\nvar textContentCache = /* @__PURE__ */ new WeakMap();\nvar eraseFromCache = (node) => {\n  while (node) {\n    textContentCache.delete(node);\n    if (node instanceof ShadowRoot) {\n      node = node.host;\n    } else {\n      node = node.parentNode;\n    }\n  }\n};\nvar observedNodes = /* @__PURE__ */ new WeakSet();\nvar textChangeObserver = new MutationObserver((mutations) => {\n  for (const mutation of mutations) {\n    eraseFromCache(mutation.target);\n  }\n});\nvar createTextContent = (root) => {\n  let value = textContentCache.get(root);\n  if (value) {\n    return value;\n  }\n  value = { full: "", immediate: [] };\n  if (!isSuitableNodeForTextMatching(root)) {\n    return value;\n  }\n  let currentImmediate = "";\n  if (isNonTrivialValueNode(root)) {\n    value.full = root.value;\n    value.immediate.push(root.value);\n    root.addEventListener(\n      "input",\n      (event) => {\n        eraseFromCache(event.target);\n      },\n      { once: true, capture: true }\n    );\n  } else {\n    for (let child = root.firstChild; child; child = child.nextSibling) {\n      if (child.nodeType === Node.TEXT_NODE) {\n        value.full += child.nodeValue ?? "";\n        currentImmediate += child.nodeValue ?? "";\n        continue;\n      }\n      if (currentImmediate) {\n        value.immediate.push(currentImmediate);\n      }\n      currentImmediate = "";\n      if (child.nodeType === Node.ELEMENT_NODE) {\n        value.full += createTextContent(child).full;\n      }\n    }\n    if (currentImmediate) {\n      value.immediate.push(currentImmediate);\n    }\n    if (root instanceof Element && root.shadowRoot) {\n      value.full += createTextContent(root.shadowRoot).full;\n    }\n    if (!observedNodes.has(root)) {\n      textChangeObserver.observe(root, {\n        childList: true,\n        characterData: true\n      });\n      observedNodes.add(root);\n    }\n  }\n  textContentCache.set(root, value);\n  return value;\n};\n\n// src/injected/TextQuerySelector.ts\nvar TextQuerySelector_exports = {};\n__export(TextQuerySelector_exports, {\n  textQuerySelector: () => textQuerySelector,\n  textQuerySelectorAll: () => textQuerySelectorAll\n});\nvar textQuerySelector = (root, selector) => {\n  for (const node of root.childNodes) {\n    if (node instanceof Element && isSuitableNodeForTextMatching(node)) {\n      let matchedNode;\n      if (node.shadowRoot) {\n        matchedNode = textQuerySelector(node.shadowRoot, selector);\n      } else {\n        matchedNode = textQuerySelector(node, selector);\n      }\n      if (matchedNode) {\n        return matchedNode;\n      }\n    }\n  }\n  if (root instanceof Element) {\n    const textContent = createTextContent(root);\n    if (textContent.full.includes(selector)) {\n      return root;\n    }\n  }\n  return null;\n};\nvar textQuerySelectorAll = (root, selector) => {\n  let results = [];\n  for (const node of root.childNodes) {\n    if (node instanceof Element) {\n      let matchedNodes;\n      if (node.shadowRoot) {\n        matchedNodes = textQuerySelectorAll(node.shadowRoot, selector);\n      } else {\n        matchedNodes = textQuerySelectorAll(node, selector);\n      }\n      results = results.concat(matchedNodes);\n    }\n  }\n  if (results.length > 0) {\n    return results;\n  }\n  if (root instanceof Element) {\n    const textContent = createTextContent(root);\n    if (textContent.full.includes(selector)) {\n      return [root];\n    }\n  }\n  return [];\n};\n\n// src/injected/XPathQuerySelector.ts\nvar XPathQuerySelector_exports = {};\n__export(XPathQuerySelector_exports, {\n  xpathQuerySelector: () => xpathQuerySelector,\n  xpathQuerySelectorAll: () => xpathQuerySelectorAll\n});\nvar xpathQuerySelector = (root, selector) => {\n  const doc = root.ownerDocument || document;\n  const result = doc.evaluate(\n    selector,\n    root,\n    null,\n    XPathResult.FIRST_ORDERED_NODE_TYPE\n  );\n  return result.singleNodeValue;\n};\nvar xpathQuerySelectorAll = (root, selector) => {\n  const doc = root.ownerDocument || document;\n  const iterator = doc.evaluate(\n    selector,\n    root,\n    null,\n    XPathResult.ORDERED_NODE_ITERATOR_TYPE\n  );\n  const array = [];\n  let item;\n  while (item = iterator.iterateNext()) {\n    array.push(item);\n  }\n  return array;\n};\n\n// src/injected/PierceQuerySelector.ts\nvar PierceQuerySelector_exports = {};\n__export(PierceQuerySelector_exports, {\n  pierceQuerySelector: () => pierceQuerySelector,\n  pierceQuerySelectorAll: () => pierceQuerySelectorAll\n});\nvar pierceQuerySelector = (root, selector) => {\n  let found = null;\n  const search = (root2) => {\n    const iter = document.createTreeWalker(root2, NodeFilter.SHOW_ELEMENT);\n    do {\n      const currentNode = iter.currentNode;\n      if (currentNode.shadowRoot) {\n        search(currentNode.shadowRoot);\n      }\n      if (currentNode instanceof ShadowRoot) {\n        continue;\n      }\n      if (currentNode !== root2 && !found && currentNode.matches(selector)) {\n        found = currentNode;\n      }\n    } while (!found && iter.nextNode());\n  };\n  if (root instanceof Document) {\n    root = root.documentElement;\n  }\n  search(root);\n  return found;\n};\nvar pierceQuerySelectorAll = (element, selector) => {\n  const result = [];\n  const collect = (root) => {\n    const iter = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT);\n    do {\n      const currentNode = iter.currentNode;\n      if (currentNode.shadowRoot) {\n        collect(currentNode.shadowRoot);\n      }\n      if (currentNode instanceof ShadowRoot) {\n        continue;\n      }\n      if (currentNode !== root && currentNode.matches(selector)) {\n        result.push(currentNode);\n      }\n    } while (iter.nextNode());\n  };\n  if (element instanceof Document) {\n    element = element.documentElement;\n  }\n  collect(element);\n  return result;\n};\n\n// src/injected/util.ts\nvar util_exports = {};\n__export(util_exports, {\n  checkVisibility: () => checkVisibility,\n  createFunction: () => createFunction\n});\nvar createdFunctions = /* @__PURE__ */ new Map();\nvar createFunction = (functionValue) => {\n  let fn = createdFunctions.get(functionValue);\n  if (fn) {\n    return fn;\n  }\n  fn = new Function(`return ${functionValue}`)();\n  createdFunctions.set(functionValue, fn);\n  return fn;\n};\nvar HIDDEN_VISIBILITY_VALUES = ["hidden", "collapse"];\nvar checkVisibility = (node, visible) => {\n  if (!node) {\n    return visible === false;\n  }\n  if (visible === void 0) {\n    return node;\n  }\n  const element = node.nodeType === Node.TEXT_NODE ? node.parentElement : node;\n  const style = window.getComputedStyle(element);\n  const isVisible = style && !HIDDEN_VISIBILITY_VALUES.includes(style.visibility) && isBoundingBoxVisible(element);\n  return visible === isVisible ? node : false;\n};\nfunction isBoundingBoxVisible(element) {\n  const rect = element.getBoundingClientRect();\n  return rect.width > 0 && rect.height > 0 && rect.right > 0 && rect.bottom > 0 && rect.left < self.innerWidth && rect.top < self.innerHeight;\n}\n\n// src/injected/injected.ts\nvar PuppeteerUtil = Object.freeze({\n  ...util_exports,\n  ...TextQuerySelector_exports,\n  ...XPathQuerySelector_exports,\n  ...PierceQuerySelector_exports,\n  createDeferredPromise,\n  createTextContent,\n  IntervalPoller,\n  isSuitableNodeForTextMatching,\n  MutationPoller,\n  RAFPoller\n});\nvar injected_default = PuppeteerUtil;\n\n              return module.exports.default;\n            })()')),ni(this,Kn,"f").rerunAll()}catch(e){Bi(e)}},Xn={value:(e,t)=>`${e}_${t}`};var ai,ci,li,ui=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},di=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class hi{constructor(e,t,r,n){ai.set(this,""),ci.set(this,!1),li.set(this,void 0),this._loaderId="",this._hasStartedLoading=!1,this._lifecycleEvents=new Set,this._frameManager=e,ui(this,ai,"","f"),this._id=t,this._parentId=r,ui(this,ci,!1,"f"),this._loaderId="",this.updateClient(n)}updateClient(e){ui(this,li,e,"f"),this.worlds={[ii]:new si(this),[oi]:new si(this)}}page(){return this._frameManager.page()}isOOPFrame(){return di(this,li,"f")!==this._frameManager.client}async goto(e,t={}){const{referer:r=this._frameManager.networkManager.extraHTTPHeaders().referer,waitUntil:n=["load"],timeout:i=this._frameManager.timeoutSettings.navigationTimeout()}=t;let o=!1;const s=new Cn(this._frameManager,this,n,i);let a=await Promise.race([async function(e,t,r,n){try{const i=await e.send("Page.navigate",{url:t,referrer:r,frameId:n});return o=!!i.loaderId,i.errorText?new Error(`${i.errorText} at ${t}`):null}catch(e){if(S(e))return e;throw e}}(di(this,li,"f"),e,r,this._id),s.timeoutOrTerminationPromise()]);a||(a=await Promise.race([s.timeoutOrTerminationPromise(),o?s.newDocumentNavigationPromise():s.sameDocumentNavigationPromise()]));try{if(a)throw a;return await s.navigationResponse()}finally{s.dispose()}}async waitForNavigation(e={}){const{waitUntil:t=["load"],timeout:r=this._frameManager.timeoutSettings.navigationTimeout()}=e,n=new Cn(this._frameManager,this,t,r),i=await Promise.race([n.timeoutOrTerminationPromise(),n.sameDocumentNavigationPromise(),n.newDocumentNavigationPromise()]);try{if(i)throw i;return await n.navigationResponse()}finally{n.dispose()}}_client(){return di(this,li,"f")}executionContext(){return this.worlds[ii].executionContext()}async evaluateHandle(e,...t){return this.worlds[ii].evaluateHandle(e,...t)}async evaluate(e,...t){return this.worlds[ii].evaluate(e,...t)}async $(e){return this.worlds[ii].$(e)}async $$(e){return this.worlds[ii].$$(e)}async $eval(e,t,...r){return this.worlds[ii].$eval(e,t,...r)}async $$eval(e,t,...r){return this.worlds[ii].$$eval(e,t,...r)}async $x(e){return this.worlds[ii].$x(e)}async waitForSelector(e,t={}){const{updatedSelector:r,queryHandler:n}=Ri(e);return w(n.waitFor,"Query handler does not support waiting"),await n.waitFor(this,r,t)}async waitForXPath(e,t={}){return e.startsWith("//")&&(e=`.${e}`),this.waitForSelector(`xpath/${e}`,t)}waitForFunction(e,t={},...r){return this.worlds[ii].waitForFunction(e,t,...r)}async content(){return this.worlds[oi].content()}async setContent(e,t={}){return this.worlds[oi].setContent(e,t)}name(){return this._name||""}url(){return di(this,ai,"f")}parentFrame(){return this._frameManager._frameTree.parentFrame(this._id)||null}childFrames(){return this._frameManager._frameTree.childFrames(this._id)}isDetached(){return di(this,ci,"f")}async addScriptTag(e){let{content:t="",type:r}=e;const{path:n}=e;if(+!!e.url+ +!!n+ +!!t!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");if(n){let e;try{e=(await Promise.resolve().then(o.t.bind(o,9896,19))).promises}catch(e){if(e instanceof TypeError)throw new Error("Can only pass a file path in a Node-like environment.");throw e}t=await e.readFile(n,"utf8"),t+=`//# sourceURL=${n.replace(/\n/g,"")}`}return r=null!=r?r:"text/javascript",this.worlds[ii].transferHandle(await this.worlds[oi].evaluateHandle((async({createDeferredPromise:e},{url:t,id:r,type:n,content:i})=>{const o=e(),s=document.createElement("script");return s.type=n,s.text=i,t?(s.src=t,s.addEventListener("load",(()=>o.resolve()),{once:!0}),s.addEventListener("error",(e=>{var t;o.reject(new Error(null!==(t=e.message)&&void 0!==t?t:"Could not load script"))}),{once:!0})):o.resolve(),r&&(s.id=r),document.head.appendChild(s),await o,s}),await this.worlds[oi].puppeteerUtil,{...e,type:r,content:t}))}async addStyleTag(e){let{content:t=""}=e;const{path:r}=e;if(+!!e.url+ +!!r+ +!!t!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");if(r){let n;try{n=(await eo()).promises}catch(e){if(e instanceof TypeError)throw new Error("Can only pass a file path in a Node-like environment.");throw e}t=await n.readFile(r,"utf8"),t+="/*# sourceURL="+r.replace(/\n/g,"")+"*/",e.content=t}return this.worlds[ii].transferHandle(await this.worlds[oi].evaluateHandle((async({createDeferredPromise:e},{url:t,content:r})=>{const n=e();let i;if(t){const e=document.createElement("link");e.rel="stylesheet",e.href=t,i=e}else i=document.createElement("style"),i.appendChild(document.createTextNode(r));return i.addEventListener("load",(()=>{n.resolve()}),{once:!0}),i.addEventListener("error",(e=>{var t;n.reject(new Error(null!==(t=e.message)&&void 0!==t?t:"Could not load style"))}),{once:!0}),document.head.appendChild(i),await n,i}),await this.worlds[oi].puppeteerUtil,e))}async click(e,t={}){return this.worlds[oi].click(e,t)}async focus(e){return this.worlds[oi].focus(e)}async hover(e){return this.worlds[oi].hover(e)}select(e,...t){return this.worlds[oi].select(e,...t)}async tap(e){return this.worlds[oi].tap(e)}async type(e,t,r){return this.worlds[oi].type(e,t,r)}waitForTimeout(e){return new Promise((t=>{setTimeout(t,e)}))}async title(){return this.worlds[oi].title()}_navigated(e){this._name=e.name,ui(this,ai,`${e.url}${e.urlFragment||""}`,"f")}_navigatedWithinDocument(e){ui(this,ai,e,"f")}_onLifecycleEvent(e,t){"init"===t&&(this._loaderId=e,this._lifecycleEvents.clear()),this._lifecycleEvents.add(t)}_onLoadingStopped(){this._lifecycleEvents.add("DOMContentLoaded"),this._lifecycleEvents.add("load")}_onLoadingStarted(){this._hasStartedLoading=!0}_detach(){ui(this,ci,!0,"f"),this.worlds[ii]._detach(),this.worlds[oi]._detach()}}async function pi(e,t,r,n){const{nodes:i}=await e.send("Accessibility.queryAXTree",{objectId:t.remoteObject().objectId,accessibleName:r,role:n}),o=i.filter((e=>!e.role||"StaticText"!==e.role.value));return o}ai=new WeakMap,ci=new WeakMap,li=new WeakMap;const fi=e=>e.replace(/ +/g," ").trim(),mi=new Set(["name","role"]),gi=/\[\s*(?<attribute>\w+)\s*=\s*(?<quote>"|')(?<value>\\.|.*?(?=\k<quote>))\k<quote>\s*\]/g;function yi(e){const t={},r=e.replace(gi,((e,r,n,i)=>(r=r.trim(),w(function(e){return mi.has(e)}(r),`Unknown aria attribute "${r}" in selector`),t[r]=fi(i),"")));return r&&!t.name&&(t.name=fi(r)),t}const vi=async(e,t)=>{const{name:r,role:n}=yi(t),i=await pi(e.client,e,r,n);return i[0]&&i[0].backendDOMNodeId?i[0].backendDOMNodeId:null},_i={queryOne:async(e,t)=>{const r=await vi(e,t);return r?await e.frame.worlds[ii].adoptBackendNode(r):null},waitFor:async(e,t,r)=>{let n,i;e instanceof hi?n=e:(n=e.frame,i=await n.worlds[oi].adoptHandle(e));const o=await n.worlds[oi]._waitForSelectorInPage(((e,t)=>globalThis.ariaQuerySelector(t)),i,t,r,new Map([["ariaQuerySelector",async e=>{const t=await vi(i||await n.worlds[oi].document(),e);return t?await n.worlds[oi].adoptBackendNode(t):null}]]));return i&&await i.dispose(),o instanceof Ui?o.frame.worlds[ii].transferHandle(o):(await(null==o?void 0:o.dispose()),null)},queryAll:async(e,t)=>{const r=e.executionContext(),{name:n,role:i}=yi(t),o=await pi(r._client,e,n,i),s=r._world;return Promise.all(o.map((e=>s.adoptBackendNode(e.backendDOMNodeId))))}};function bi(e){const t={};if(e.queryOne){const r=e.queryOne;t.queryOne=async(e,t)=>{const n=await e.evaluateHandle(r,t,await e.executionContext()._world.puppeteerUtil);return n.asElement()||(await n.dispose(),null)},t.waitFor=async(e,t,n)=>{let i,o;e instanceof hi?i=e:(i=e.frame,o=await i.worlds[oi].adoptHandle(e));const s=await i.worlds[oi]._waitForSelectorInPage(r,o,t,n);return o&&await o.dispose(),s?s instanceof Ui?i.worlds[ii].transferHandle(s):(await s.dispose(),null):null}}if(e.queryAll){const r=e.queryAll;t.queryAll=async(e,t)=>{const n=await e.evaluateHandle(r,t,await e.executionContext()._world.puppeteerUtil),i=await n.getProperties();await n.dispose();const o=[];for(const e of i.values()){const t=e.asElement();t&&o.push(t)}return o}}return t}const wi=bi({queryOne:(e,t)=>{if(!("querySelector"in e))throw new Error(`Could not invoke \`querySelector\` on node of type ${e.nodeName}.`);return e.querySelector(t)},queryAll:(e,t)=>{if(!("querySelectorAll"in e))throw new Error(`Could not invoke \`querySelectorAll\` on node of type ${e.nodeName}.`);return[...e.querySelectorAll(t)]}}),Si=bi({queryOne:(e,t,{pierceQuerySelector:r})=>r(e,t),queryAll:(e,t,{pierceQuerySelectorAll:r})=>r(e,t)}),Ei=bi({queryOne:(e,t,{xpathQuerySelector:r})=>r(e,t),queryAll:(e,t,{xpathQuerySelectorAll:r})=>r(e,t)}),Ci=bi({queryOne:(e,t,{textQuerySelector:r})=>r(e,t),queryAll:(e,t,{textQuerySelectorAll:r})=>r(e,t)}),Ti=new Map([["aria",{handler:_i}],["pierce",{handler:Si}],["xpath",{handler:Ei}],["text",{handler:Ci}]]),ki=new Map,Pi=["=","/"];function Ri(e){for(const t of[ki,Ti])for(const[r,{handler:n,transformSelector:i}]of t)for(const t of Pi){const o=`${r}${t}`;if(e.startsWith(o))return e=e.slice(o.length),i&&(e=i(e)),{updatedSelector:e,queryHandler:n}}return{updatedSelector:e,queryHandler:wi}}var xi,Mi,Oi,Di,Ii,Ai,Ni,Li,Fi,ji=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const qi=(e,t,r)=>e.map((e=>({x:e.x+t,y:e.y+r})));class Ui extends M{constructor(e,t,r){super(e,t),xi.add(this),Mi.set(this,void 0),function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?i.call(e,r):i?i.value=r:t.set(e,r)}(this,Mi,r,"f")}get frame(){return ji(this,Mi,"f")}async $(e){const{updatedSelector:t,queryHandler:r}=Ri(e);return w(r.queryOne,"Cannot handle queries for a single element with the given selector"),await r.queryOne(this,t)}async $$(e){const{updatedSelector:t,queryHandler:r}=Ri(e);return w(r.queryAll,"Cannot handle queries for a multiple element with the given selector"),await r.queryAll(this,t)}async $eval(e,t,...r){const n=await this.$(e);if(!n)throw new Error(`Error: failed to find element matching selector "${e}"`);const i=await n.evaluate(t,...r);return await n.dispose(),i}async $$eval(e,t,...r){const{updatedSelector:n,queryHandler:i}=Ri(e);w(i.queryAll,"Cannot handle queries for a multiple element with the given selector");const o=await i.queryAll(this,n),s=await this.evaluateHandle(((e,...t)=>t),...o),[a]=await Promise.all([s.evaluate(t,...r),...o.map((e=>e.dispose()))]);return await s.dispose(),a}async $x(e){return e.startsWith("//")&&(e=`.${e}`),this.$$(`xpath/${e}`)}async waitForSelector(e,t={}){const{updatedSelector:r,queryHandler:n}=Ri(e);return w(n.waitFor,"Query handler does not support waiting"),await n.waitFor(this,r,t)}async waitForXPath(e,t={}){return e.startsWith("//")&&(e=`.${e}`),this.waitForSelector(`xpath/${e}`,t)}asElement(){return this}async contentFrame(){const e=await this.client.send("DOM.describeNode",{objectId:this.remoteObject().objectId});return"string"!=typeof e.node.frameId?null:ji(this,xi,"a",Oi).frame(e.node.frameId)}async clickablePoint(e){const[t,r]=await Promise.all([this.client.send("DOM.getContentQuads",{objectId:this.remoteObject().objectId}).catch(Bi),ji(this,xi,"a",Di)._client().send("Page.getLayoutMetrics")]);if(!t||!t.quads.length)throw new Error("Node is either not clickable or not an HTMLElement");const{clientWidth:n,clientHeight:i}=r.cssLayoutViewport||r.layoutViewport,{offsetX:o,offsetY:s}=await ji(this,xi,"m",Ai).call(this,ji(this,Mi,"f")),a=t.quads.map((e=>ji(this,xi,"m",Li).call(this,e))).map((e=>qi(e,o,s))).map((e=>ji(this,xi,"m",Fi).call(this,e,n,i))).filter((e=>function(e){let t=0;for(let r=0;r<e.length;++r){const n=e[r],i=e[(r+1)%e.length];t+=(n.x*i.y-i.x*n.y)/2}return Math.abs(t)}(e)>1));if(!a.length)throw new Error("Node is either not clickable or not an HTMLElement");const c=a[0];if(e){let t=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER;for(const e of c)e.x<t&&(t=e.x),e.y<r&&(r=e.y);if(t!==Number.MAX_SAFE_INTEGER&&r!==Number.MAX_SAFE_INTEGER)return{x:t+e.x,y:r+e.y}}let l=0,u=0;for(const e of c)l+=e.x,u+=e.y;return{x:l/4,y:u/4}}async hover(){await ji(this,xi,"m",Ii).call(this);const{x:e,y:t}=await this.clickablePoint();await ji(this,xi,"a",Di).mouse.move(e,t)}async click(e={}){await ji(this,xi,"m",Ii).call(this);const{x:t,y:r}=await this.clickablePoint(e.offset);await ji(this,xi,"a",Di).mouse.click(t,r,e)}async drag(e){w(ji(this,xi,"a",Di).isDragInterceptionEnabled(),"Drag Interception is not enabled!"),await ji(this,xi,"m",Ii).call(this);const t=await this.clickablePoint();return await ji(this,xi,"a",Di).mouse.drag(t,e)}async dragEnter(e={items:[],dragOperationsMask:1}){await ji(this,xi,"m",Ii).call(this);const t=await this.clickablePoint();await ji(this,xi,"a",Di).mouse.dragEnter(t,e)}async dragOver(e={items:[],dragOperationsMask:1}){await ji(this,xi,"m",Ii).call(this);const t=await this.clickablePoint();await ji(this,xi,"a",Di).mouse.dragOver(t,e)}async drop(e={items:[],dragOperationsMask:1}){await ji(this,xi,"m",Ii).call(this);const t=await this.clickablePoint();await ji(this,xi,"a",Di).mouse.drop(t,e)}async dragAndDrop(e,t){await ji(this,xi,"m",Ii).call(this);const r=await this.clickablePoint(),n=await e.clickablePoint();await ji(this,xi,"a",Di).mouse.dragAndDrop(r,n,t)}async select(...e){for(const t of e)w(Ki(t),'Values must be strings. Found value "'+t+'" of type "'+typeof t+'"');return this.evaluate(((e,t)=>{const r=new Set(t);if(!(e instanceof HTMLSelectElement))throw new Error("Element is not a <select> element.");const n=new Set;if(e.multiple)for(const t of e.options)t.selected=r.has(t.value),t.selected&&n.add(t.value);else{for(const t of e.options)t.selected=!1;for(const t of e.options)if(r.has(t.value)){t.selected=!0,n.add(t.value);break}}return e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),[...n.values()]}),e)}async uploadFile(...e){const t=await this.evaluate((e=>e.multiple));let r;w(e.length<=1||t,"Multiple file uploads only work with <input type=file multiple>");try{r=await Promise.resolve().then(o.t.bind(o,6928,19))}catch(e){if(e instanceof TypeError)throw new Error("JSHandle#uploadFile can only be used in Node-like environments.");throw e}const n=e.map((e=>r.win32.isAbsolute(e)||r.posix.isAbsolute(e)?e:r.resolve(e))),{objectId:i}=this.remoteObject(),{node:s}=await this.client.send("DOM.describeNode",{objectId:i}),{backendNodeId:a}=s;0===n.length?await this.evaluate((e=>{e.files=(new DataTransfer).files,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))})):await this.client.send("DOM.setFileInputFiles",{objectId:i,files:n,backendNodeId:a})}async tap(){await ji(this,xi,"m",Ii).call(this);const{x:e,y:t}=await this.clickablePoint();await ji(this,xi,"a",Di).touchscreen.tap(e,t)}async focus(){await this.evaluate((e=>{if(!(e instanceof HTMLElement))throw new Error("Cannot focus non-HTMLElement");return e.focus()}))}async type(e,t){await this.focus(),await ji(this,xi,"a",Di).keyboard.type(e,t)}async press(e,t){await this.focus(),await ji(this,xi,"a",Di).keyboard.press(e,t)}async boundingBox(){const e=await ji(this,xi,"m",Ni).call(this);if(!e)return null;const{offsetX:t,offsetY:r}=await ji(this,xi,"m",Ai).call(this,ji(this,Mi,"f")),n=e.model.border,i=Math.min(n[0],n[2],n[4],n[6]),o=Math.min(n[1],n[3],n[5],n[7]);return{x:i+t,y:o+r,width:Math.max(n[0],n[2],n[4],n[6])-i,height:Math.max(n[1],n[3],n[5],n[7])-o}}async boxModel(){const e=await ji(this,xi,"m",Ni).call(this);if(!e)return null;const{offsetX:t,offsetY:r}=await ji(this,xi,"m",Ai).call(this,ji(this,Mi,"f")),{content:n,padding:i,border:o,margin:s,width:a,height:c}=e.model;return{content:qi(ji(this,xi,"m",Li).call(this,n),t,r),padding:qi(ji(this,xi,"m",Li).call(this,i),t,r),border:qi(ji(this,xi,"m",Li).call(this,o),t,r),margin:qi(ji(this,xi,"m",Li).call(this,s),t,r),width:a,height:c}}async screenshot(e={}){let t=!1,r=await this.boundingBox();w(r,"Node is either not visible or not an HTMLElement");const n=ji(this,xi,"a",Di).viewport();if(n&&(r.width>n.width||r.height>n.height)){const e={width:Math.max(n.width,Math.ceil(r.width)),height:Math.max(n.height,Math.ceil(r.height))};await ji(this,xi,"a",Di).setViewport(Object.assign({},n,e)),t=!0}await ji(this,xi,"m",Ii).call(this),r=await this.boundingBox(),w(r,"Node is either not visible or not an HTMLElement"),w(0!==r.width,"Node has 0 width."),w(0!==r.height,"Node has 0 height.");const i=await this.client.send("Page.getLayoutMetrics"),{pageX:o,pageY:s}=i.cssVisualViewport||i.layoutViewport,a=Object.assign({},r);a.x+=o,a.y+=s;const c=await ji(this,xi,"a",Di).screenshot(Object.assign({},{clip:a},e));return t&&n&&await ji(this,xi,"a",Di).setViewport(n),c}async isIntersectingViewport(e){const{threshold:t=0}=null!=e?e:{};return await this.evaluate((async(e,t)=>{const r=await new Promise((t=>{const r=new IntersectionObserver((e=>{t(e[0].intersectionRatio),r.disconnect()}));r.observe(e)}));return 1===t?1===r:r>t}),t)}}Mi=new WeakMap,xi=new WeakSet,Oi=function(){return ji(this,Mi,"f")._frameManager},Di=function(){return ji(this,Mi,"f").page()},Ii=async function(){const e=await this.evaluate((async e=>e.isConnected?e.nodeType!==Node.ELEMENT_NODE?"Node is not of type HTMLElement":void 0:"Node is detached from document"));if(e)throw new Error(e);try{await this.client.send("DOM.scrollIntoViewIfNeeded",{objectId:this.remoteObject().objectId})}catch(e){await this.evaluate((async(e,t)=>{t&&1===await(async()=>await new Promise((t=>{const r=new IntersectionObserver((e=>{t(e[0].intersectionRatio),r.disconnect()}));r.observe(e)})))()||e.scrollIntoView({block:"center",inline:"center",behavior:"instant"})}),ji(this,xi,"a",Di).isJavaScriptEnabled())}},Ai=async function(e){let t=0,r=0,n=e;for(;n&&n.parentFrame();){const e=n.parentFrame();if(!n.isOOPFrame()||!e){n=e;continue}const{backendNodeId:i}=await e._client().send("DOM.getFrameOwner",{frameId:n._id}),o=await e._client().send("DOM.getBoxModel",{backendNodeId:i});if(!o)break;const s=o.model.content,a=ji(this,xi,"m",Li).call(this,s)[0];t+=a.x,r+=a.y,n=e}return{offsetX:t,offsetY:r}},Ni=function(){const e={objectId:this.remoteObject().objectId};return this.client.send("DOM.getBoxModel",e).catch((e=>Bi(e)))},Li=function(e){return[{x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},{x:e[6],y:e[7]}]},Fi=function(e,t,r){return e.map((e=>({x:Math.min(Math.max(e.x,0),t),y:Math.min(Math.max(e.y,0),r)})))};const Bi=C("puppeteer:error");function $i(e){if(e.exception)return e.exception.description||e.exception.value;let t=e.text;if(e.stackTrace)for(const r of e.stackTrace.callFrames){const e=r.url+":"+r.lineNumber+":"+r.columnNumber;t+=`\n    at ${r.functionName||"<anonymous>"} (${e})`}return t}function Wi(e){if(w(!e.objectId,"Cannot extract value when objectId is given"),e.unserializableValue){if("bigint"===e.type&&"undefined"!=typeof BigInt)return BigInt(e.unserializableValue.replace("n",""));switch(e.unserializableValue){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unsupported unserializable value: "+e.unserializableValue)}}return e.value}async function Hi(e,t){t.objectId&&await e.send("Runtime.releaseObject",{objectId:t.objectId}).catch((e=>{Bi(e)}))}function Vi(e,t,r){return e.on(t,r),{emitter:e,eventName:t,handler:r}}function Gi(e){for(const t of e)t.emitter.removeListener(t.eventName,t.handler);e.length=0}const Ki=e=>"string"==typeof e||e instanceof String;async function zi(e,t,r,n,i){let o,s,a;const c=new Promise(((e,t)=>{s=e,a=t})),l=Vi(e,t,(async e=>{await r(e)&&s(e)}));function u(){Gi([l]),clearTimeout(o)}n&&(o=setTimeout((()=>{a(new D("Timeout exceeded while waiting for event"))}),n));const d=await Promise.race([c,i]).then((e=>(u(),e)),(e=>{throw u(),e}));if(S(d))throw d;return d}function Xi(e,t){return"node"===t.subtype&&e._world?new Ui(e,t,e._world.frame()):new M(e,t)}function Ji(e,...t){return Ki(e)?(w(0===t.length,"Cannot evaluate a string with arguments"),e):`(${e})(${t.map((function(e){return Object.is(e,void 0)?"undefined":JSON.stringify(e)})).join(",")})`}function Yi(e,t){return Ji((function(e,t){const r=self[t];Object.assign(self,{[t](...n){var i,o;const s=self[t];null!==(i=s.callbacks)&&void 0!==i||(s.callbacks=new Map);const a=(null!==(o=s.lastSeq)&&void 0!==o?o:0)+1;return s.lastSeq=a,r(JSON.stringify({type:e,name:t,seq:a,args:n})),new Promise(((e,t)=>{s.callbacks.set(a,{resolve:e,reject:t})}))}})}),e,t)}async function Qi(e,t,r){let n;const i=new D(`waiting for ${t} failed: timeout ${r}ms exceeded`),o=new Promise(((e,t)=>n=t));let s=null;r&&(s=setTimeout((()=>n(i)),r));try{return await Promise.race([e,o])}finally{s&&clearTimeout(s)}}let Zi=null;async function eo(){return Zi||(Zi=await Promise.resolve().then(o.t.bind(o,9896,19))),Zi}async function to(e,t){const r=[];if(t){let n;try{n=(await eo()).promises}catch(e){if(e instanceof TypeError)throw new Error("Cannot write to a path outside of a Node-like environment.");throw e}const i=await n.open(t,"w+");for await(const t of e)r.push(t),await i.writeFile(t);await i.close()}else for await(const t of e)r.push(t);try{return Buffer.concat(r)}catch(e){return null}}async function ro(e,t){if(!_)throw new Error("Cannot create a stream outside of Node.js environment.");const{Readable:r}=await Promise.resolve().then(o.t.bind(o,2203,19));let n=!1;return new r({async read(r){if(n)return;const i=await e.send("IO.read",{handle:t,size:r});this.push(i.data,i.base64Encoded?"base64":void 0),i.eof&&(n=!0,await e.send("IO.close",{handle:t}),this.push(null))}})}var no,io,oo,so=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ao=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class co extends j{constructor(e,t,r,n){super(),no.set(this,N()),io.set(this,void 0),oo.set(this,void 0),so(this,io,e,"f"),so(this,oo,t,"f"),ao(this,io,"f").once("Runtime.executionContextCreated",(async t=>{const r=new ge(e,t.context);ao(this,no,"f").resolve(r)})),ao(this,io,"f").on("Runtime.consoleAPICalled",(async e=>{const t=await ao(this,no,"f");return r(e.type,e.args.map((e=>new M(t,e))),e.stackTrace)})),ao(this,io,"f").on("Runtime.exceptionThrown",(e=>n(e.exceptionDetails))),ao(this,io,"f").send("Runtime.enable").catch(Bi)}async executionContext(){return ao(this,no,"f")}url(){return ao(this,oo,"f")}async evaluate(e,...t){return(await ao(this,no,"f")).evaluate(e,...t)}async evaluateHandle(e,...t){return(await ao(this,no,"f")).evaluateHandle(e,...t)}}no=new WeakMap,io=new WeakMap,oo=new WeakMap;var lo,uo,ho,po,fo,mo,go,yo,vo,_o,bo,wo,So,Eo=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Co=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class To{constructor(e){lo.set(this,void 0),Eo(this,lo,e,"f")}async snapshot(e={}){var t,r;const{interestingOnly:n=!0,root:i=null}=e,{nodes:o}=await Co(this,lo,"f").send("Accessibility.getFullAXTree");let s;if(i){const{node:e}=await Co(this,lo,"f").send("DOM.describeNode",{objectId:i.remoteObject().objectId});s=e.backendNodeId}const a=ko.createTree(o);let c=a;if(s&&(c=a.find((e=>e.payload.backendDOMNodeId===s)),!c))return null;if(!n)return null!==(t=this.serializeTree(c)[0])&&void 0!==t?t:null;const l=new Set;return this.collectInterestingNodes(l,a,!1),l.has(c)&&null!==(r=this.serializeTree(c,l)[0])&&void 0!==r?r:null}serializeTree(e,t){const r=[];for(const n of e.children)r.push(...this.serializeTree(n,t));if(t&&!t.has(e))return r;const n=e.serialize();return r.length&&(n.children=r),[n]}collectInterestingNodes(e,t,r){if(t.isInteresting(r)&&e.add(t),!t.isLeafNode()){r=r||t.isControl();for(const n of t.children)this.collectInterestingNodes(e,n,r)}}}lo=new WeakMap;class ko{constructor(e){uo.add(this),this.children=[],ho.set(this,!1),po.set(this,!1),fo.set(this,!1),mo.set(this,!1),go.set(this,void 0),yo.set(this,void 0),vo.set(this,void 0),_o.set(this,void 0),this.payload=e,Eo(this,go,this.payload.name?this.payload.name.value:"","f"),Eo(this,yo,this.payload.role?this.payload.role.value:"Unknown","f"),Eo(this,vo,this.payload.ignored,"f");for(const e of this.payload.properties||[])"editable"===e.name&&(Eo(this,ho,"richtext"===e.value.value,"f"),Eo(this,po,!0,"f")),"focusable"===e.name&&Eo(this,fo,e.value.value,"f"),"hidden"===e.name&&Eo(this,mo,e.value.value,"f")}find(e){if(e(this))return this;for(const t of this.children){const r=t.find(e);if(r)return r}return null}isLeafNode(){if(!this.children.length)return!0;if(Co(this,uo,"m",bo).call(this)||Co(this,uo,"m",wo).call(this))return!0;switch(Co(this,yo,"f")){case"doc-cover":case"graphics-symbol":case"img":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return!(Co(this,uo,"m",So).call(this)||(!Co(this,fo,"f")||!Co(this,go,"f"))&&("heading"!==Co(this,yo,"f")||!Co(this,go,"f")))}isControl(){switch(Co(this,yo,"f")){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":case"treeitem":return!0;default:return!1}}isInteresting(e){return"Ignored"!==Co(this,yo,"f")&&!Co(this,mo,"f")&&!Co(this,vo,"f")&&(!(!Co(this,fo,"f")&&!Co(this,ho,"f"))||!!this.isControl()||!e&&this.isLeafNode()&&!!Co(this,go,"f"))}serialize(){const e=new Map;for(const t of this.payload.properties||[])e.set(t.name.toLowerCase(),t.value.value);this.payload.name&&e.set("name",this.payload.name.value),this.payload.value&&e.set("value",this.payload.value.value),this.payload.description&&e.set("description",this.payload.description.value);const t={role:Co(this,yo,"f")},r=["name","value","description","keyshortcuts","roledescription","valuetext"];for(const i of r)e.has(i)&&(t[i]=(n=i,e.get(n)));var n;const i=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"],o=t=>e.get(t);for(const e of i)"focused"===e&&"RootWebArea"===Co(this,yo,"f")||o(e)&&(t[e]=o(e));const s=["checked","pressed"];for(const r of s){if(!e.has(r))continue;const n=e.get(r);t[r]="mixed"===n?"mixed":"true"===n}const a=["level","valuemax","valuemin"],c=t=>e.get(t);for(const r of a)e.has(r)&&(t[r]=c(r));const l=["autocomplete","haspopup","invalid","orientation"],u=t=>e.get(t);for(const e of l){const r=u(e);r&&"false"!==r&&(t[e]=u(e))}return t}static createTree(e){const t=new Map;for(const r of e)t.set(r.nodeId,new ko(r));for(const e of t.values())for(const r of e.payload.childIds||[])e.children.push(t.get(r));return t.values().next().value}}ho=new WeakMap,po=new WeakMap,fo=new WeakMap,mo=new WeakMap,go=new WeakMap,yo=new WeakMap,vo=new WeakMap,_o=new WeakMap,uo=new WeakSet,bo=function(){return!(Co(this,ho,"f")||!Co(this,po,"f")&&"textbox"!==Co(this,yo,"f")&&"searchbox"!==Co(this,yo,"f"))},wo=function(){const e=Co(this,yo,"f");return"LineBreak"===e||"text"===e||"InlineTextBox"===e},So=function e(){if(void 0===Co(this,_o,"f")){Eo(this,_o,!1,"f");for(const t of this.children)if(Co(t,fo,"f")||Co(t,uo,"m",e).call(t)){Eo(this,_o,!0,"f");break}}return Co(this,_o,"f")};var Po,Ro,xo,Mo,Oo=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Do=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Io{constructor(e,t,r,n){Po.set(this,void 0),Ro.set(this,void 0),xo.set(this,void 0),Mo.set(this,void 0),Oo(this,Po,e,"f"),Oo(this,Ro,t,"f"),Oo(this,xo,r,"f"),Oo(this,Mo,n,"f")}type(){return Do(this,Po,"f")}text(){return Do(this,Ro,"f")}args(){return Do(this,xo,"f")}location(){var e;return null!==(e=Do(this,Mo,"f")[0])&&void 0!==e?e:{}}stackTrace(){return Do(this,Mo,"f")}}Po=new WeakMap,Ro=new WeakMap,xo=new WeakMap,Mo=new WeakMap;var Ao,No,Lo,Fo,jo,qo,Uo,Bo,$o,Wo,Ho,Vo,Go,Ko,zo,Xo,Jo,Yo,Qo,Zo,es,ts,rs=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ns=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class is{constructor(e){Ao.set(this,void 0),No.set(this,void 0),rs(this,Ao,new os(e),"f"),rs(this,No,new ss(e),"f")}async startJSCoverage(e={}){return await ns(this,Ao,"f").start(e)}async stopJSCoverage(){return await ns(this,Ao,"f").stop()}async startCSSCoverage(e={}){return await ns(this,No,"f").start(e)}async stopCSSCoverage(){return await ns(this,No,"f").stop()}}Ao=new WeakMap,No=new WeakMap;class os{constructor(e){Lo.add(this),Fo.set(this,void 0),jo.set(this,!1),qo.set(this,new Map),Uo.set(this,new Map),Bo.set(this,[]),$o.set(this,!1),Wo.set(this,!1),Ho.set(this,!1),rs(this,Fo,e,"f")}async start(e={}){w(!ns(this,jo,"f"),"JSCoverage is already enabled");const{resetOnNavigation:t=!0,reportAnonymousScripts:r=!1,includeRawScriptCoverage:n=!1}=e;rs(this,$o,t,"f"),rs(this,Wo,r,"f"),rs(this,Ho,n,"f"),rs(this,jo,!0,"f"),ns(this,qo,"f").clear(),ns(this,Uo,"f").clear(),rs(this,Bo,[Vi(ns(this,Fo,"f"),"Debugger.scriptParsed",ns(this,Lo,"m",Go).bind(this)),Vi(ns(this,Fo,"f"),"Runtime.executionContextsCleared",ns(this,Lo,"m",Vo).bind(this))],"f"),await Promise.all([ns(this,Fo,"f").send("Profiler.enable"),ns(this,Fo,"f").send("Profiler.startPreciseCoverage",{callCount:ns(this,Ho,"f"),detailed:!0}),ns(this,Fo,"f").send("Debugger.enable"),ns(this,Fo,"f").send("Debugger.setSkipAllPauses",{skip:!0})])}async stop(){w(ns(this,jo,"f"),"JSCoverage is not enabled"),rs(this,jo,!1,"f");const e=await Promise.all([ns(this,Fo,"f").send("Profiler.takePreciseCoverage"),ns(this,Fo,"f").send("Profiler.stopPreciseCoverage"),ns(this,Fo,"f").send("Profiler.disable"),ns(this,Fo,"f").send("Debugger.disable")]);Gi(ns(this,Bo,"f"));const t=[],r=e[0];for(const e of r.result){let r=ns(this,qo,"f").get(e.scriptId);!r&&ns(this,Wo,"f")&&(r="debugger://VM"+e.scriptId);const n=ns(this,Uo,"f").get(e.scriptId);if(void 0===n||void 0===r)continue;const i=[];for(const t of e.functions)i.push(...t.ranges);const o=as(i);ns(this,Ho,"f")?t.push({url:r,ranges:o,text:n,rawScriptCoverage:e}):t.push({url:r,ranges:o,text:n})}return t}}Fo=new WeakMap,jo=new WeakMap,qo=new WeakMap,Uo=new WeakMap,Bo=new WeakMap,$o=new WeakMap,Wo=new WeakMap,Ho=new WeakMap,Lo=new WeakSet,Vo=function(){ns(this,$o,"f")&&(ns(this,qo,"f").clear(),ns(this,Uo,"f").clear())},Go=async function(e){if(e.url!==fe&&(e.url||ns(this,Wo,"f")))try{const t=await ns(this,Fo,"f").send("Debugger.getScriptSource",{scriptId:e.scriptId});ns(this,qo,"f").set(e.scriptId,e.url),ns(this,Uo,"f").set(e.scriptId,t.scriptSource)}catch(e){Bi(e)}};class ss{constructor(e){Ko.add(this),zo.set(this,void 0),Xo.set(this,!1),Jo.set(this,new Map),Yo.set(this,new Map),Qo.set(this,[]),Zo.set(this,!1),rs(this,zo,e,"f")}async start(e={}){w(!ns(this,Xo,"f"),"CSSCoverage is already enabled");const{resetOnNavigation:t=!0}=e;rs(this,Zo,t,"f"),rs(this,Xo,!0,"f"),ns(this,Jo,"f").clear(),ns(this,Yo,"f").clear(),rs(this,Qo,[Vi(ns(this,zo,"f"),"CSS.styleSheetAdded",ns(this,Ko,"m",ts).bind(this)),Vi(ns(this,zo,"f"),"Runtime.executionContextsCleared",ns(this,Ko,"m",es).bind(this))],"f"),await Promise.all([ns(this,zo,"f").send("DOM.enable"),ns(this,zo,"f").send("CSS.enable"),ns(this,zo,"f").send("CSS.startRuleUsageTracking")])}async stop(){w(ns(this,Xo,"f"),"CSSCoverage is not enabled"),rs(this,Xo,!1,"f");const e=await ns(this,zo,"f").send("CSS.stopRuleUsageTracking");await Promise.all([ns(this,zo,"f").send("CSS.disable"),ns(this,zo,"f").send("DOM.disable")]),Gi(ns(this,Qo,"f"));const t=new Map;for(const r of e.ruleUsage){let e=t.get(r.styleSheetId);e||(e=[],t.set(r.styleSheetId,e)),e.push({startOffset:r.startOffset,endOffset:r.endOffset,count:r.used?1:0})}const r=[];for(const e of ns(this,Jo,"f").keys()){const n=ns(this,Jo,"f").get(e);w(void 0!==n,`Stylesheet URL is undefined (styleSheetId=${e})`);const i=ns(this,Yo,"f").get(e);w(void 0!==i,`Stylesheet text is undefined (styleSheetId=${e})`);const o=as(t.get(e)||[]);r.push({url:n,ranges:o,text:i})}return r}}function as(e){const t=[];for(const r of e)t.push({offset:r.startOffset,type:0,range:r}),t.push({offset:r.endOffset,type:1,range:r});t.sort(((e,t)=>{if(e.offset!==t.offset)return e.offset-t.offset;if(e.type!==t.type)return t.type-e.type;const r=e.range.endOffset-e.range.startOffset,n=t.range.endOffset-t.range.startOffset;return 0===e.type?n-r:r-n}));const r=[],n=[];let i=0;for(const e of t){if(r.length&&i<e.offset&&r[r.length-1]>0){const t=n[n.length-1];t&&t.end===i?t.end=e.offset:n.push({start:i,end:e.offset})}i=e.offset,0===e.type?r.push(e.range.count):r.pop()}return n.filter((e=>e.end-e.start>0))}zo=new WeakMap,Xo=new WeakMap,Jo=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,Ko=new WeakSet,es=function(){ns(this,Zo,"f")&&(ns(this,Jo,"f").clear(),ns(this,Yo,"f").clear())},ts=async function(e){const t=e.header;if(t.sourceURL)try{const e=await ns(this,zo,"f").send("CSS.getStyleSheetText",{styleSheetId:t.styleSheetId});ns(this,Jo,"f").set(t.styleSheetId,t.sourceURL),ns(this,Yo,"f").set(t.styleSheetId,e.text)}catch(e){Bi(e)}};var cs,ls,us,ds,hs,ps=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},fs=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class ms{constructor(e,t,r,n=""){cs.set(this,void 0),ls.set(this,void 0),us.set(this,void 0),ds.set(this,void 0),hs.set(this,!1),ps(this,cs,e,"f"),ps(this,ls,t,"f"),ps(this,us,r,"f"),ps(this,ds,n,"f")}type(){return fs(this,ls,"f")}message(){return fs(this,us,"f")}defaultValue(){return fs(this,ds,"f")}async accept(e){w(!fs(this,hs,"f"),"Cannot accept dialog which is already handled!"),ps(this,hs,!0,"f"),await fs(this,cs,"f").send("Page.handleJavaScriptDialog",{accept:!0,promptText:e})}async dismiss(){w(!fs(this,hs,"f"),"Cannot dismiss dialog which is already handled!"),ps(this,hs,!0,"f"),await fs(this,cs,"f").send("Page.handleJavaScriptDialog",{accept:!1})}}cs=new WeakMap,ls=new WeakMap,us=new WeakMap,ds=new WeakMap,hs=new WeakMap;var gs,ys,vs,_s=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},bs=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class ws{constructor(e){gs.set(this,void 0),ys.set(this,!1),vs.set(this,!1),_s(this,gs,e,"f")}async emulateViewport(e){const t=e.isMobile||!1,r=e.width,n=e.height,i=e.deviceScaleFactor||1,o=e.isLandscape?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"},s=e.hasTouch||!1;await Promise.all([bs(this,gs,"f").send("Emulation.setDeviceMetricsOverride",{mobile:t,width:r,height:n,deviceScaleFactor:i,screenOrientation:o}),bs(this,gs,"f").send("Emulation.setTouchEmulationEnabled",{enabled:s})]);const a=bs(this,ys,"f")!==t||bs(this,vs,"f")!==s;return _s(this,ys,t,"f"),_s(this,vs,s,"f"),a}}gs=new WeakMap,ys=new WeakMap,vs=new WeakMap;var Ss,Es,Cs,Ts=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ks=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Ps{constructor(e,t){Ss.set(this,void 0),Es.set(this,void 0),Cs.set(this,!1),Ts(this,Ss,e,"f"),Ts(this,Es,"selectSingle"!==t.mode,"f")}isMultiple(){return ks(this,Es,"f")}async accept(e){w(!ks(this,Cs,"f"),"Cannot accept FileChooser which is already handled!"),Ts(this,Cs,!0,"f"),await ks(this,Ss,"f").uploadFile(...e)}cancel(){w(!ks(this,Cs,"f"),"Cannot cancel FileChooser which is already handled!"),Ts(this,Cs,!0,"f")}}Ss=new WeakMap,Es=new WeakMap,Cs=new WeakMap;const Rs={0:{keyCode:48,key:"0",code:"Digit0"},1:{keyCode:49,key:"1",code:"Digit1"},2:{keyCode:50,key:"2",code:"Digit2"},3:{keyCode:51,key:"3",code:"Digit3"},4:{keyCode:52,key:"4",code:"Digit4"},5:{keyCode:53,key:"5",code:"Digit5"},6:{keyCode:54,key:"6",code:"Digit6"},7:{keyCode:55,key:"7",code:"Digit7"},8:{keyCode:56,key:"8",code:"Digit8"},9:{keyCode:57,key:"9",code:"Digit9"},Power:{key:"Power",code:"Power"},Eject:{key:"Eject",code:"Eject"},Abort:{keyCode:3,code:"Abort",key:"Cancel"},Help:{keyCode:6,code:"Help",key:"Help"},Backspace:{keyCode:8,code:"Backspace",key:"Backspace"},Tab:{keyCode:9,code:"Tab",key:"Tab"},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",code:"Numpad5",shiftKey:"5",location:3},NumpadEnter:{keyCode:13,code:"NumpadEnter",key:"Enter",text:"\r",location:3},Enter:{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\r":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\n":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},ShiftLeft:{keyCode:16,code:"ShiftLeft",key:"Shift",location:1},ShiftRight:{keyCode:16,code:"ShiftRight",key:"Shift",location:2},ControlLeft:{keyCode:17,code:"ControlLeft",key:"Control",location:1},ControlRight:{keyCode:17,code:"ControlRight",key:"Control",location:2},AltLeft:{keyCode:18,code:"AltLeft",key:"Alt",location:1},AltRight:{keyCode:18,code:"AltRight",key:"Alt",location:2},Pause:{keyCode:19,code:"Pause",key:"Pause"},CapsLock:{keyCode:20,code:"CapsLock",key:"CapsLock"},Escape:{keyCode:27,code:"Escape",key:"Escape"},Convert:{keyCode:28,code:"Convert",key:"Convert"},NonConvert:{keyCode:29,code:"NonConvert",key:"NonConvert"},Space:{keyCode:32,code:"Space",key:" "},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",code:"Numpad9",shiftKey:"9",location:3},PageUp:{keyCode:33,code:"PageUp",key:"PageUp"},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",code:"Numpad3",shiftKey:"3",location:3},PageDown:{keyCode:34,code:"PageDown",key:"PageDown"},End:{keyCode:35,code:"End",key:"End"},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",code:"Numpad1",shiftKey:"1",location:3},Home:{keyCode:36,code:"Home",key:"Home"},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",code:"Numpad7",shiftKey:"7",location:3},ArrowLeft:{keyCode:37,code:"ArrowLeft",key:"ArrowLeft"},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",code:"Numpad4",shiftKey:"4",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",code:"Numpad8",shiftKey:"8",location:3},ArrowUp:{keyCode:38,code:"ArrowUp",key:"ArrowUp"},ArrowRight:{keyCode:39,code:"ArrowRight",key:"ArrowRight"},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",code:"Numpad6",shiftKey:"6",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",code:"Numpad2",shiftKey:"2",location:3},ArrowDown:{keyCode:40,code:"ArrowDown",key:"ArrowDown"},Select:{keyCode:41,code:"Select",key:"Select"},Open:{keyCode:43,code:"Open",key:"Execute"},PrintScreen:{keyCode:44,code:"PrintScreen",key:"PrintScreen"},Insert:{keyCode:45,code:"Insert",key:"Insert"},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",code:"Numpad0",shiftKey:"0",location:3},Delete:{keyCode:46,code:"Delete",key:"Delete"},NumpadDecimal:{keyCode:46,shiftKeyCode:110,code:"NumpadDecimal",key:"\0",shiftKey:".",location:3},Digit0:{keyCode:48,code:"Digit0",shiftKey:")",key:"0"},Digit1:{keyCode:49,code:"Digit1",shiftKey:"!",key:"1"},Digit2:{keyCode:50,code:"Digit2",shiftKey:"@",key:"2"},Digit3:{keyCode:51,code:"Digit3",shiftKey:"#",key:"3"},Digit4:{keyCode:52,code:"Digit4",shiftKey:"$",key:"4"},Digit5:{keyCode:53,code:"Digit5",shiftKey:"%",key:"5"},Digit6:{keyCode:54,code:"Digit6",shiftKey:"^",key:"6"},Digit7:{keyCode:55,code:"Digit7",shiftKey:"&",key:"7"},Digit8:{keyCode:56,code:"Digit8",shiftKey:"*",key:"8"},Digit9:{keyCode:57,code:"Digit9",shiftKey:"(",key:"9"},KeyA:{keyCode:65,code:"KeyA",shiftKey:"A",key:"a"},KeyB:{keyCode:66,code:"KeyB",shiftKey:"B",key:"b"},KeyC:{keyCode:67,code:"KeyC",shiftKey:"C",key:"c"},KeyD:{keyCode:68,code:"KeyD",shiftKey:"D",key:"d"},KeyE:{keyCode:69,code:"KeyE",shiftKey:"E",key:"e"},KeyF:{keyCode:70,code:"KeyF",shiftKey:"F",key:"f"},KeyG:{keyCode:71,code:"KeyG",shiftKey:"G",key:"g"},KeyH:{keyCode:72,code:"KeyH",shiftKey:"H",key:"h"},KeyI:{keyCode:73,code:"KeyI",shiftKey:"I",key:"i"},KeyJ:{keyCode:74,code:"KeyJ",shiftKey:"J",key:"j"},KeyK:{keyCode:75,code:"KeyK",shiftKey:"K",key:"k"},KeyL:{keyCode:76,code:"KeyL",shiftKey:"L",key:"l"},KeyM:{keyCode:77,code:"KeyM",shiftKey:"M",key:"m"},KeyN:{keyCode:78,code:"KeyN",shiftKey:"N",key:"n"},KeyO:{keyCode:79,code:"KeyO",shiftKey:"O",key:"o"},KeyP:{keyCode:80,code:"KeyP",shiftKey:"P",key:"p"},KeyQ:{keyCode:81,code:"KeyQ",shiftKey:"Q",key:"q"},KeyR:{keyCode:82,code:"KeyR",shiftKey:"R",key:"r"},KeyS:{keyCode:83,code:"KeyS",shiftKey:"S",key:"s"},KeyT:{keyCode:84,code:"KeyT",shiftKey:"T",key:"t"},KeyU:{keyCode:85,code:"KeyU",shiftKey:"U",key:"u"},KeyV:{keyCode:86,code:"KeyV",shiftKey:"V",key:"v"},KeyW:{keyCode:87,code:"KeyW",shiftKey:"W",key:"w"},KeyX:{keyCode:88,code:"KeyX",shiftKey:"X",key:"x"},KeyY:{keyCode:89,code:"KeyY",shiftKey:"Y",key:"y"},KeyZ:{keyCode:90,code:"KeyZ",shiftKey:"Z",key:"z"},MetaLeft:{keyCode:91,code:"MetaLeft",key:"Meta",location:1},MetaRight:{keyCode:92,code:"MetaRight",key:"Meta",location:2},ContextMenu:{keyCode:93,code:"ContextMenu",key:"ContextMenu"},NumpadMultiply:{keyCode:106,code:"NumpadMultiply",key:"*",location:3},NumpadAdd:{keyCode:107,code:"NumpadAdd",key:"+",location:3},NumpadSubtract:{keyCode:109,code:"NumpadSubtract",key:"-",location:3},NumpadDivide:{keyCode:111,code:"NumpadDivide",key:"/",location:3},F1:{keyCode:112,code:"F1",key:"F1"},F2:{keyCode:113,code:"F2",key:"F2"},F3:{keyCode:114,code:"F3",key:"F3"},F4:{keyCode:115,code:"F4",key:"F4"},F5:{keyCode:116,code:"F5",key:"F5"},F6:{keyCode:117,code:"F6",key:"F6"},F7:{keyCode:118,code:"F7",key:"F7"},F8:{keyCode:119,code:"F8",key:"F8"},F9:{keyCode:120,code:"F9",key:"F9"},F10:{keyCode:121,code:"F10",key:"F10"},F11:{keyCode:122,code:"F11",key:"F11"},F12:{keyCode:123,code:"F12",key:"F12"},F13:{keyCode:124,code:"F13",key:"F13"},F14:{keyCode:125,code:"F14",key:"F14"},F15:{keyCode:126,code:"F15",key:"F15"},F16:{keyCode:127,code:"F16",key:"F16"},F17:{keyCode:128,code:"F17",key:"F17"},F18:{keyCode:129,code:"F18",key:"F18"},F19:{keyCode:130,code:"F19",key:"F19"},F20:{keyCode:131,code:"F20",key:"F20"},F21:{keyCode:132,code:"F21",key:"F21"},F22:{keyCode:133,code:"F22",key:"F22"},F23:{keyCode:134,code:"F23",key:"F23"},F24:{keyCode:135,code:"F24",key:"F24"},NumLock:{keyCode:144,code:"NumLock",key:"NumLock"},ScrollLock:{keyCode:145,code:"ScrollLock",key:"ScrollLock"},AudioVolumeMute:{keyCode:173,code:"AudioVolumeMute",key:"AudioVolumeMute"},AudioVolumeDown:{keyCode:174,code:"AudioVolumeDown",key:"AudioVolumeDown"},AudioVolumeUp:{keyCode:175,code:"AudioVolumeUp",key:"AudioVolumeUp"},MediaTrackNext:{keyCode:176,code:"MediaTrackNext",key:"MediaTrackNext"},MediaTrackPrevious:{keyCode:177,code:"MediaTrackPrevious",key:"MediaTrackPrevious"},MediaStop:{keyCode:178,code:"MediaStop",key:"MediaStop"},MediaPlayPause:{keyCode:179,code:"MediaPlayPause",key:"MediaPlayPause"},Semicolon:{keyCode:186,code:"Semicolon",shiftKey:":",key:";"},Equal:{keyCode:187,code:"Equal",shiftKey:"+",key:"="},NumpadEqual:{keyCode:187,code:"NumpadEqual",key:"=",location:3},Comma:{keyCode:188,code:"Comma",shiftKey:"<",key:","},Minus:{keyCode:189,code:"Minus",shiftKey:"_",key:"-"},Period:{keyCode:190,code:"Period",shiftKey:">",key:"."},Slash:{keyCode:191,code:"Slash",shiftKey:"?",key:"/"},Backquote:{keyCode:192,code:"Backquote",shiftKey:"~",key:"`"},BracketLeft:{keyCode:219,code:"BracketLeft",shiftKey:"{",key:"["},Backslash:{keyCode:220,code:"Backslash",shiftKey:"|",key:"\\"},BracketRight:{keyCode:221,code:"BracketRight",shiftKey:"}",key:"]"},Quote:{keyCode:222,code:"Quote",shiftKey:'"',key:"'"},AltGraph:{keyCode:225,code:"AltGraph",key:"AltGraph"},Props:{keyCode:247,code:"Props",key:"CrSel"},Cancel:{keyCode:3,key:"Cancel",code:"Abort"},Clear:{keyCode:12,key:"Clear",code:"Numpad5",location:3},Shift:{keyCode:16,key:"Shift",code:"ShiftLeft",location:1},Control:{keyCode:17,key:"Control",code:"ControlLeft",location:1},Alt:{keyCode:18,key:"Alt",code:"AltLeft",location:1},Accept:{keyCode:30,key:"Accept"},ModeChange:{keyCode:31,key:"ModeChange"}," ":{keyCode:32,key:" ",code:"Space"},Print:{keyCode:42,key:"Print"},Execute:{keyCode:43,key:"Execute",code:"Open"},"\0":{keyCode:46,key:"\0",code:"NumpadDecimal",location:3},a:{keyCode:65,key:"a",code:"KeyA"},b:{keyCode:66,key:"b",code:"KeyB"},c:{keyCode:67,key:"c",code:"KeyC"},d:{keyCode:68,key:"d",code:"KeyD"},e:{keyCode:69,key:"e",code:"KeyE"},f:{keyCode:70,key:"f",code:"KeyF"},g:{keyCode:71,key:"g",code:"KeyG"},h:{keyCode:72,key:"h",code:"KeyH"},i:{keyCode:73,key:"i",code:"KeyI"},j:{keyCode:74,key:"j",code:"KeyJ"},k:{keyCode:75,key:"k",code:"KeyK"},l:{keyCode:76,key:"l",code:"KeyL"},m:{keyCode:77,key:"m",code:"KeyM"},n:{keyCode:78,key:"n",code:"KeyN"},o:{keyCode:79,key:"o",code:"KeyO"},p:{keyCode:80,key:"p",code:"KeyP"},q:{keyCode:81,key:"q",code:"KeyQ"},r:{keyCode:82,key:"r",code:"KeyR"},s:{keyCode:83,key:"s",code:"KeyS"},t:{keyCode:84,key:"t",code:"KeyT"},u:{keyCode:85,key:"u",code:"KeyU"},v:{keyCode:86,key:"v",code:"KeyV"},w:{keyCode:87,key:"w",code:"KeyW"},x:{keyCode:88,key:"x",code:"KeyX"},y:{keyCode:89,key:"y",code:"KeyY"},z:{keyCode:90,key:"z",code:"KeyZ"},Meta:{keyCode:91,key:"Meta",code:"MetaLeft",location:1},"*":{keyCode:106,key:"*",code:"NumpadMultiply",location:3},"+":{keyCode:107,key:"+",code:"NumpadAdd",location:3},"-":{keyCode:109,key:"-",code:"NumpadSubtract",location:3},"/":{keyCode:111,key:"/",code:"NumpadDivide",location:3},";":{keyCode:186,key:";",code:"Semicolon"},"=":{keyCode:187,key:"=",code:"Equal"},",":{keyCode:188,key:",",code:"Comma"},".":{keyCode:190,key:".",code:"Period"},"`":{keyCode:192,key:"`",code:"Backquote"},"[":{keyCode:219,key:"[",code:"BracketLeft"},"\\":{keyCode:220,key:"\\",code:"Backslash"},"]":{keyCode:221,key:"]",code:"BracketRight"},"'":{keyCode:222,key:"'",code:"Quote"},Attn:{keyCode:246,key:"Attn"},CrSel:{keyCode:247,key:"CrSel",code:"Props"},ExSel:{keyCode:248,key:"ExSel"},EraseEof:{keyCode:249,key:"EraseEof"},Play:{keyCode:250,key:"Play"},ZoomOut:{keyCode:251,key:"ZoomOut"},")":{keyCode:48,key:")",code:"Digit0"},"!":{keyCode:49,key:"!",code:"Digit1"},"@":{keyCode:50,key:"@",code:"Digit2"},"#":{keyCode:51,key:"#",code:"Digit3"},$:{keyCode:52,key:"$",code:"Digit4"},"%":{keyCode:53,key:"%",code:"Digit5"},"^":{keyCode:54,key:"^",code:"Digit6"},"&":{keyCode:55,key:"&",code:"Digit7"},"(":{keyCode:57,key:"(",code:"Digit9"},A:{keyCode:65,key:"A",code:"KeyA"},B:{keyCode:66,key:"B",code:"KeyB"},C:{keyCode:67,key:"C",code:"KeyC"},D:{keyCode:68,key:"D",code:"KeyD"},E:{keyCode:69,key:"E",code:"KeyE"},F:{keyCode:70,key:"F",code:"KeyF"},G:{keyCode:71,key:"G",code:"KeyG"},H:{keyCode:72,key:"H",code:"KeyH"},I:{keyCode:73,key:"I",code:"KeyI"},J:{keyCode:74,key:"J",code:"KeyJ"},K:{keyCode:75,key:"K",code:"KeyK"},L:{keyCode:76,key:"L",code:"KeyL"},M:{keyCode:77,key:"M",code:"KeyM"},N:{keyCode:78,key:"N",code:"KeyN"},O:{keyCode:79,key:"O",code:"KeyO"},P:{keyCode:80,key:"P",code:"KeyP"},Q:{keyCode:81,key:"Q",code:"KeyQ"},R:{keyCode:82,key:"R",code:"KeyR"},S:{keyCode:83,key:"S",code:"KeyS"},T:{keyCode:84,key:"T",code:"KeyT"},U:{keyCode:85,key:"U",code:"KeyU"},V:{keyCode:86,key:"V",code:"KeyV"},W:{keyCode:87,key:"W",code:"KeyW"},X:{keyCode:88,key:"X",code:"KeyX"},Y:{keyCode:89,key:"Y",code:"KeyY"},Z:{keyCode:90,key:"Z",code:"KeyZ"},":":{keyCode:186,key:":",code:"Semicolon"},"<":{keyCode:188,key:"<",code:"Comma"},_:{keyCode:189,key:"_",code:"Minus"},">":{keyCode:190,key:">",code:"Period"},"?":{keyCode:191,key:"?",code:"Slash"},"~":{keyCode:192,key:"~",code:"Backquote"},"{":{keyCode:219,key:"{",code:"BracketLeft"},"|":{keyCode:220,key:"|",code:"Backslash"},"}":{keyCode:221,key:"}",code:"BracketRight"},'"':{keyCode:222,key:'"',code:"Quote"},SoftLeft:{key:"SoftLeft",code:"SoftLeft",location:4},SoftRight:{key:"SoftRight",code:"SoftRight",location:4},Camera:{keyCode:44,key:"Camera",code:"Camera",location:4},Call:{key:"Call",code:"Call",location:4},EndCall:{keyCode:95,key:"EndCall",code:"EndCall",location:4},VolumeDown:{keyCode:182,key:"VolumeDown",code:"VolumeDown",location:4},VolumeUp:{keyCode:183,key:"VolumeUp",code:"VolumeUp",location:4}};var xs,Ms,Os,Ds,Is,As,Ns,Ls,Fs,js,qs,Us,Bs=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},$s=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Ws{constructor(e){xs.add(this),Ms.set(this,void 0),Os.set(this,new Set),this._modifiers=0,Bs(this,Ms,e,"f")}async down(e,t={text:void 0}){const r=$s(this,xs,"m",Is).call(this,e),n=$s(this,Os,"f").has(r.code);$s(this,Os,"f").add(r.code),this._modifiers|=$s(this,xs,"m",Ds).call(this,r.key);const i=void 0===t.text?r.text:t.text;await $s(this,Ms,"f").send("Input.dispatchKeyEvent",{type:i?"keyDown":"rawKeyDown",modifiers:this._modifiers,windowsVirtualKeyCode:r.keyCode,code:r.code,key:r.key,text:i,unmodifiedText:i,autoRepeat:n,location:r.location,isKeypad:3===r.location})}async up(e){const t=$s(this,xs,"m",Is).call(this,e);this._modifiers&=~$s(this,xs,"m",Ds).call(this,t.key),$s(this,Os,"f").delete(t.code),await $s(this,Ms,"f").send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:this._modifiers,key:t.key,windowsVirtualKeyCode:t.keyCode,code:t.code,location:t.location})}async sendCharacter(e){await $s(this,Ms,"f").send("Input.insertText",{text:e})}charIsKey(e){return!!Rs[e]}async type(e,t={}){const r=t.delay||void 0;for(const t of e)this.charIsKey(t)?await this.press(t,{delay:r}):(r&&await new Promise((e=>setTimeout(e,r))),await this.sendCharacter(t))}async press(e,t={}){const{delay:r=null}=t;await this.down(e,t),r&&await new Promise((e=>setTimeout(e,t.delay))),await this.up(e)}}Ms=new WeakMap,Os=new WeakMap,xs=new WeakSet,Ds=function(e){return"Alt"===e?1:"Control"===e?2:"Meta"===e?4:"Shift"===e?8:0},Is=function(e){const t=8&this._modifiers,r={key:"",keyCode:0,code:"",text:"",location:0},n=Rs[e];return w(n,`Unknown key: "${e}"`),n.key&&(r.key=n.key),t&&n.shiftKey&&(r.key=n.shiftKey),n.keyCode&&(r.keyCode=n.keyCode),t&&n.shiftKeyCode&&(r.keyCode=n.shiftKeyCode),n.code&&(r.code=n.code),n.location&&(r.location=n.location),1===r.key.length&&(r.text=r.key),n.text&&(r.text=n.text),t&&n.shiftText&&(r.text=n.shiftText),-9&this._modifiers&&(r.text=""),r};class Hs{constructor(e,t){As.set(this,void 0),Ns.set(this,void 0),Ls.set(this,0),Fs.set(this,0),js.set(this,"none"),Bs(this,As,e,"f"),Bs(this,Ns,t,"f")}async move(e,t,r={}){const{steps:n=1}=r,i=$s(this,Ls,"f"),o=$s(this,Fs,"f");Bs(this,Ls,e,"f"),Bs(this,Fs,t,"f");for(let e=1;e<=n;e++)await $s(this,As,"f").send("Input.dispatchMouseEvent",{type:"mouseMoved",button:$s(this,js,"f"),x:i+($s(this,Ls,"f")-i)*(e/n),y:o+($s(this,Fs,"f")-o)*(e/n),modifiers:$s(this,Ns,"f")._modifiers})}async click(e,t,r={}){const{delay:n=null}=r;null!==n?(await this.move(e,t),await this.down(r),await new Promise((e=>setTimeout(e,n))),await this.up(r)):(await this.move(e,t),await this.down(r),await this.up(r))}async down(e={}){const{button:t="left",clickCount:r=1}=e;Bs(this,js,t,"f"),await $s(this,As,"f").send("Input.dispatchMouseEvent",{type:"mousePressed",button:t,x:$s(this,Ls,"f"),y:$s(this,Fs,"f"),modifiers:$s(this,Ns,"f")._modifiers,clickCount:r})}async up(e={}){const{button:t="left",clickCount:r=1}=e;Bs(this,js,"none","f"),await $s(this,As,"f").send("Input.dispatchMouseEvent",{type:"mouseReleased",button:t,x:$s(this,Ls,"f"),y:$s(this,Fs,"f"),modifiers:$s(this,Ns,"f")._modifiers,clickCount:r})}async wheel(e={}){const{deltaX:t=0,deltaY:r=0}=e;await $s(this,As,"f").send("Input.dispatchMouseEvent",{type:"mouseWheel",x:$s(this,Ls,"f"),y:$s(this,Fs,"f"),deltaX:t,deltaY:r,modifiers:$s(this,Ns,"f")._modifiers,pointerType:"mouse"})}async drag(e,t){const r=new Promise((e=>{$s(this,As,"f").once("Input.dragIntercepted",(t=>e(t.data)))}));return await this.move(e.x,e.y),await this.down(),await this.move(t.x,t.y),r}async dragEnter(e,t){await $s(this,As,"f").send("Input.dispatchDragEvent",{type:"dragEnter",x:e.x,y:e.y,modifiers:$s(this,Ns,"f")._modifiers,data:t})}async dragOver(e,t){await $s(this,As,"f").send("Input.dispatchDragEvent",{type:"dragOver",x:e.x,y:e.y,modifiers:$s(this,Ns,"f")._modifiers,data:t})}async drop(e,t){await $s(this,As,"f").send("Input.dispatchDragEvent",{type:"drop",x:e.x,y:e.y,modifiers:$s(this,Ns,"f")._modifiers,data:t})}async dragAndDrop(e,t,r={}){const{delay:n=null}=r,i=await this.drag(e,t);await this.dragEnter(t,i),await this.dragOver(t,i),n&&await new Promise((e=>setTimeout(e,n))),await this.drop(t,i),await this.up()}}As=new WeakMap,Ns=new WeakMap,Ls=new WeakMap,Fs=new WeakMap,js=new WeakMap;class Vs{constructor(e,t){qs.set(this,void 0),Us.set(this,void 0),Bs(this,qs,e,"f"),Bs(this,Us,t,"f")}async tap(e,t){const r=[{x:Math.round(e),y:Math.round(t)}];await $s(this,qs,"f").send("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:r,modifiers:$s(this,Us,"f")._modifiers}),await $s(this,qs,"f").send("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[],modifiers:$s(this,Us,"f")._modifiers})}}qs=new WeakMap,Us=new WeakMap;const Gs={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}};var Ks,zs,Xs=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Js=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Ys{constructor(){Ks.set(this,void 0),zs.set(this,void 0),Xs(this,Ks,null,"f"),Xs(this,zs,null,"f")}setDefaultTimeout(e){Xs(this,Ks,e,"f")}setDefaultNavigationTimeout(e){Xs(this,zs,e,"f")}navigationTimeout(){return null!==Js(this,zs,"f")?Js(this,zs,"f"):null!==Js(this,Ks,"f")?Js(this,Ks,"f"):3e4}timeout(){return null!==Js(this,Ks,"f")?Js(this,Ks,"f"):3e4}}Ks=new WeakMap,zs=new WeakMap;var Qs,Zs,ea,ta=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ra=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class na{constructor(e){Qs.set(this,void 0),Zs.set(this,!1),ea.set(this,void 0),ta(this,Qs,e,"f")}async start(e={}){w(!ra(this,Zs,"f"),"Cannot start recording trace while already recording trace.");const t=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler"],{path:r,screenshots:n=!1,categories:i=t}=e;n&&i.push("disabled-by-default-devtools.screenshot");const o=i.filter((e=>e.startsWith("-"))).map((e=>e.slice(1))),s=i.filter((e=>!e.startsWith("-")));ta(this,ea,r,"f"),ta(this,Zs,!0,"f"),await ra(this,Qs,"f").send("Tracing.start",{transferMode:"ReturnAsStream",traceConfig:{excludedCategories:o,includedCategories:s}})}async stop(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));return ra(this,Qs,"f").once("Tracing.tracingComplete",(async r=>{try{const t=await ro(ra(this,Qs,"f"),r.stream),n=await to(t,ra(this,ea,"f"));e(null!=n?n:void 0)}catch(e){S(e)?t(e):t(new Error(`Unknown error: ${e}`))}})),await ra(this,Qs,"f").send("Tracing.end"),ta(this,Zs,!1,"f"),r}}Qs=new WeakMap,Zs=new WeakMap,ea=new WeakMap;var ia,oa=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class sa extends j{constructor(){super(),ia.set(this,new WeakMap)}isDragInterceptionEnabled(){throw new Error("Not implemented")}isJavaScriptEnabled(){throw new Error("Not implemented")}on(e,t){if("request"===e){const r=oa(this,ia,"f").get(t)||(e=>{e.enqueueInterceptAction((()=>t(e)))});return oa(this,ia,"f").set(t,r),super.on(e,r)}return super.on(e,t)}once(e,t){return super.once(e,t)}off(e,t){return"request"===e&&(t=oa(this,ia,"f").get(t)||t),super.off(e,t)}waitForFileChooser(){throw new Error("Not implemented")}async setGeolocation(){throw new Error("Not implemented")}target(){throw new Error("Not implemented")}browser(){throw new Error("Not implemented")}browserContext(){throw new Error("Not implemented")}mainFrame(){throw new Error("Not implemented")}get keyboard(){throw new Error("Not implemented")}get touchscreen(){throw new Error("Not implemented")}get coverage(){throw new Error("Not implemented")}get tracing(){throw new Error("Not implemented")}get accessibility(){throw new Error("Not implemented")}frames(){throw new Error("Not implemented")}workers(){throw new Error("Not implemented")}async setRequestInterception(){throw new Error("Not implemented")}async setDragInterception(){throw new Error("Not implemented")}setOfflineMode(){throw new Error("Not implemented")}emulateNetworkConditions(){throw new Error("Not implemented")}setDefaultNavigationTimeout(){throw new Error("Not implemented")}setDefaultTimeout(){throw new Error("Not implemented")}getDefaultTimeout(){throw new Error("Not implemented")}async $(){throw new Error("Not implemented")}async $$(){throw new Error("Not implemented")}async evaluateHandle(){throw new Error("Not implemented")}async queryObjects(){throw new Error("Not implemented")}async $eval(){throw new Error("Not implemented")}async $$eval(){throw new Error("Not implemented")}async $x(){throw new Error("Not implemented")}async cookies(){throw new Error("Not implemented")}async deleteCookie(){throw new Error("Not implemented")}async setCookie(){throw new Error("Not implemented")}async addScriptTag(){throw new Error("Not implemented")}async addStyleTag(){throw new Error("Not implemented")}async exposeFunction(){throw new Error("Not implemented")}async authenticate(){throw new Error("Not implemented")}async setExtraHTTPHeaders(){throw new Error("Not implemented")}async setUserAgent(){throw new Error("Not implemented")}async metrics(){throw new Error("Not implemented")}url(){throw new Error("Not implemented")}async content(){throw new Error("Not implemented")}async setContent(){throw new Error("Not implemented")}async goto(){throw new Error("Not implemented")}async reload(){throw new Error("Not implemented")}async waitForNavigation(){throw new Error("Not implemented")}async waitForRequest(){throw new Error("Not implemented")}async waitForResponse(){throw new Error("Not implemented")}async waitForNetworkIdle(){throw new Error("Not implemented")}async waitForFrame(){throw new Error("Not implemented")}async goBack(){throw new Error("Not implemented")}async goForward(){throw new Error("Not implemented")}async bringToFront(){throw new Error("Not implemented")}async emulate(){throw new Error("Not implemented")}async setJavaScriptEnabled(){throw new Error("Not implemented")}async setBypassCSP(){throw new Error("Not implemented")}async emulateMediaType(){throw new Error("Not implemented")}async emulateCPUThrottling(){throw new Error("Not implemented")}async emulateMediaFeatures(){throw new Error("Not implemented")}async emulateTimezone(){throw new Error("Not implemented")}async emulateIdleState(){throw new Error("Not implemented")}async emulateVisionDeficiency(){throw new Error("Not implemented")}async setViewport(){throw new Error("Not implemented")}viewport(){throw new Error("Not implemented")}async evaluate(){throw new Error("Not implemented")}async evaluateOnNewDocument(){throw new Error("Not implemented")}async setCacheEnabled(){throw new Error("Not implemented")}async screenshot(){throw new Error("Not implemented")}async createPDFStream(){throw new Error("Not implemented")}async pdf(){throw new Error("Not implemented")}async title(){throw new Error("Not implemented")}async close(){throw new Error("Not implemented")}isClosed(){throw new Error("Not implemented")}get mouse(){throw new Error("Not implemented")}click(){throw new Error("Not implemented")}focus(){throw new Error("Not implemented")}hover(){throw new Error("Not implemented")}select(){throw new Error("Not implemented")}tap(){throw new Error("Not implemented")}type(){throw new Error("Not implemented")}waitForTimeout(){throw new Error("Not implemented")}async waitForSelector(){throw new Error("Not implemented")}waitForXPath(){throw new Error("Not implemented")}waitForFunction(){throw new Error("Not implemented")}}ia=new WeakMap,new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]);var aa,ca,la,ua,da,ha,pa,fa,ma,ga,ya,va,_a,ba,wa,Sa,Ea,Ca,Ta,ka,Pa,Ra,xa,Ma,Oa,Da,Ia,Aa,Na,La,Fa,ja,qa,Ua,Ba,$a,Wa,Ha,Va,Ga=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Ka=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class za extends sa{constructor(e,t,r,n){super(),aa.add(this),ca.set(this,!1),la.set(this,void 0),ua.set(this,void 0),da.set(this,void 0),ha.set(this,void 0),pa.set(this,new Ys),fa.set(this,void 0),ma.set(this,void 0),ga.set(this,void 0),ya.set(this,void 0),va.set(this,void 0),_a.set(this,new Map),ba.set(this,void 0),wa.set(this,!0),Sa.set(this,void 0),Ea.set(this,void 0),Ca.set(this,new Map),Ta.set(this,new Set),ka.set(this,void 0),Pa.set(this,!1),Ra.set(this,(e=>{var t;const r=null===(t=e._session())||void 0===t?void 0:t.id();Ka(this,ga,"f").onDetachedFromTarget(e);const n=Ka(this,Ca,"f").get(r);n&&(Ka(this,Ca,"f").delete(r),this.emit("workerdestroyed",n))})),xa.set(this,(async e=>{if(Ka(this,ga,"f").onAttachedToTarget(e),"worker"===e._getTargetInfo().type){const t=e._session();w(t);const r=new co(t,e.url(),Ka(this,aa,"m",qa).bind(this),Ka(this,aa,"m",La).bind(this));Ka(this,Ca,"f").set(t.id(),r),this.emit("workercreated",r)}e._session()&&Ka(this,ua,"f")._targetManager().addTargetInterceptor(e._session(),Ka(this,xa,"f"))})),Ga(this,la,e,"f"),Ga(this,ua,t,"f"),Ga(this,da,new Ws(e),"f"),Ga(this,ha,new Hs(e,Ka(this,da,"f")),"f"),Ga(this,fa,new Vs(e,Ka(this,da,"f")),"f"),Ga(this,ma,new To(e),"f"),Ga(this,ga,new $r(e,this,r,Ka(this,pa,"f")),"f"),Ga(this,ya,new ws(e),"f"),Ga(this,va,new na(e),"f"),Ga(this,ba,new is(e),"f"),Ga(this,Ea,n,"f"),Ga(this,Sa,null,"f"),Ka(this,ua,"f")._targetManager().addTargetInterceptor(Ka(this,la,"f"),Ka(this,xa,"f")),Ka(this,ua,"f")._targetManager().on("targetGone",Ka(this,Ra,"f")),Ka(this,ga,"f").on(Br.FrameAttached,(e=>this.emit("frameattached",e))),Ka(this,ga,"f").on(Br.FrameDetached,(e=>this.emit("framedetached",e))),Ka(this,ga,"f").on(Br.FrameNavigated,(e=>this.emit("framenavigated",e)));const i=Ka(this,ga,"f").networkManager;i.on(gr.Request,(e=>this.emit("request",e))),i.on(gr.RequestServedFromCache,(e=>this.emit("requestservedfromcache",e))),i.on(gr.Response,(e=>this.emit("response",e))),i.on(gr.RequestFailed,(e=>this.emit("requestfailed",e))),i.on(gr.RequestFinished,(e=>this.emit("requestfinished",e))),e.on("Page.domContentEventFired",(()=>this.emit("domcontentloaded"))),e.on("Page.loadEventFired",(()=>this.emit("load"))),e.on("Runtime.consoleAPICalled",(e=>Ka(this,aa,"m",Fa).call(this,e))),e.on("Runtime.bindingCalled",(e=>Ka(this,aa,"m",ja).call(this,e))),e.on("Page.javascriptDialogOpening",(e=>Ka(this,aa,"m",Ua).call(this,e))),e.on("Runtime.exceptionThrown",(e=>Ka(this,aa,"m",La).call(this,e.exceptionDetails))),e.on("Inspector.targetCrashed",(()=>Ka(this,aa,"m",Da).call(this))),e.on("Performance.metrics",(e=>Ka(this,aa,"m",Aa).call(this,e))),e.on("Log.entryAdded",(e=>Ka(this,aa,"m",Ia).call(this,e))),e.on("Page.fileChooserOpened",(e=>Ka(this,aa,"m",Oa).call(this,e))),Ka(this,ua,"f")._isClosedPromise.then((()=>{Ka(this,ua,"f")._targetManager().removeTargetInterceptor(Ka(this,la,"f"),Ka(this,xa,"f")),Ka(this,ua,"f")._targetManager().off("targetGone",Ka(this,Ra,"f")),this.emit("close"),Ga(this,ca,!0,"f")}))}static async _create(e,t,r,n,i){const o=new za(e,t,r,i);if(await Ka(o,aa,"m",Ma).call(o),n)try{await o.setViewport(n)}catch(e){if(!S(e)||!ue(e))throw e;Bi(e)}return o}isDragInterceptionEnabled(){return Ka(this,Pa,"f")}isJavaScriptEnabled(){return Ka(this,wa,"f")}waitForFileChooser(e={}){const t=0===Ka(this,Ta,"f").size,{timeout:r=Ka(this,pa,"f").timeout()}=e,n=N({message:`Waiting for \`FileChooser\` failed: ${r}ms exceeded`,timeout:r});let i;return Ka(this,Ta,"f").add(n),t&&(i=Ka(this,la,"f").send("Page.setInterceptFileChooserDialog",{enabled:!0})),Promise.all([n,i]).then((([e])=>e)).catch((e=>{throw Ka(this,Ta,"f").delete(n),e}))}async setGeolocation(e){const{longitude:t,latitude:r,accuracy:n=0}=e;if(t<-180||t>180)throw new Error(`Invalid longitude "${t}": precondition -180 <= LONGITUDE <= 180 failed.`);if(r<-90||r>90)throw new Error(`Invalid latitude "${r}": precondition -90 <= LATITUDE <= 90 failed.`);if(n<0)throw new Error(`Invalid accuracy "${n}": precondition 0 <= ACCURACY failed.`);await Ka(this,la,"f").send("Emulation.setGeolocationOverride",{longitude:t,latitude:r,accuracy:n})}target(){return Ka(this,ua,"f")}_client(){return Ka(this,la,"f")}browser(){return Ka(this,ua,"f").browser()}browserContext(){return Ka(this,ua,"f").browserContext()}mainFrame(){return Ka(this,ga,"f").mainFrame()}get keyboard(){return Ka(this,da,"f")}get touchscreen(){return Ka(this,fa,"f")}get coverage(){return Ka(this,ba,"f")}get tracing(){return Ka(this,va,"f")}get accessibility(){return Ka(this,ma,"f")}frames(){return Ka(this,ga,"f").frames()}workers(){return Array.from(Ka(this,Ca,"f").values())}async setRequestInterception(e){return Ka(this,ga,"f").networkManager.setRequestInterception(e)}async setDragInterception(e){return Ga(this,Pa,e,"f"),Ka(this,la,"f").send("Input.setInterceptDrags",{enabled:e})}setOfflineMode(e){return Ka(this,ga,"f").networkManager.setOfflineMode(e)}emulateNetworkConditions(e){return Ka(this,ga,"f").networkManager.emulateNetworkConditions(e)}setDefaultNavigationTimeout(e){Ka(this,pa,"f").setDefaultNavigationTimeout(e)}setDefaultTimeout(e){Ka(this,pa,"f").setDefaultTimeout(e)}getDefaultTimeout(){return Ka(this,pa,"f").timeout()}async $(e){return this.mainFrame().$(e)}async $$(e){return this.mainFrame().$$(e)}async evaluateHandle(e,...t){return(await this.mainFrame().executionContext()).evaluateHandle(e,...t)}async queryObjects(e){const t=await this.mainFrame().executionContext();w(!e.disposed,"Prototype JSHandle is disposed!");const r=e.remoteObject();w(r.objectId,"Prototype JSHandle must not be referencing primitive value");const n=await t._client.send("Runtime.queryObjects",{prototypeObjectId:r.objectId});return Xi(t,n.objects)}async $eval(e,t,...r){return this.mainFrame().$eval(e,t,...r)}async $$eval(e,t,...r){return this.mainFrame().$$eval(e,t,...r)}async $x(e){return this.mainFrame().$x(e)}async cookies(...e){const t=(await Ka(this,la,"f").send("Network.getCookies",{urls:e.length?e:[this.url()]})).cookies,r=["priority"];return t.map((e=>{for(const t of r)delete e[t];return e}))}async deleteCookie(...e){const t=this.url();for(const r of e){const e=Object.assign({},r);!r.url&&t.startsWith("http")&&(e.url=t),await Ka(this,la,"f").send("Network.deleteCookies",e)}}async setCookie(...e){const t=this.url(),r=t.startsWith("http"),n=e.map((e=>{const n=Object.assign({},e);return!n.url&&r&&(n.url=t),w("about:blank"!==n.url,`Blank page can not have cookie "${n.name}"`),w(!String.prototype.startsWith.call(n.url||"","data:"),`Data URL page can not have cookie "${n.name}"`),n}));await this.deleteCookie(...n),n.length&&await Ka(this,la,"f").send("Network.setCookies",{cookies:n})}async addScriptTag(e){return this.mainFrame().addScriptTag(e)}async addStyleTag(e){return this.mainFrame().addStyleTag(e)}async exposeFunction(e,t){if(Ka(this,_a,"f").has(e))throw new Error(`Failed to add page binding with name ${e}: window['${e}'] already exists!`);let r;r="function"==typeof t?t:t.default,Ka(this,_a,"f").set(e,r);const n=Yi("exposedFun",e);await Ka(this,la,"f").send("Runtime.addBinding",{name:e}),await Ka(this,la,"f").send("Page.addScriptToEvaluateOnNewDocument",{source:n}),await Promise.all(this.frames().map((e=>e.evaluate(n).catch(Bi))))}async authenticate(e){return Ka(this,ga,"f").networkManager.authenticate(e)}async setExtraHTTPHeaders(e){return Ka(this,ga,"f").networkManager.setExtraHTTPHeaders(e)}async setUserAgent(e,t){return Ka(this,ga,"f").networkManager.setUserAgent(e,t)}async metrics(){const e=await Ka(this,la,"f").send("Performance.getMetrics");return Ka(this,aa,"m",Na).call(this,e.metrics)}url(){return this.mainFrame().url()}async content(){return await Ka(this,ga,"f").mainFrame().content()}async setContent(e,t={}){await Ka(this,ga,"f").mainFrame().setContent(e,t)}async goto(e,t={}){return await Ka(this,ga,"f").mainFrame().goto(e,t)}async reload(e){return(await Promise.all([this.waitForNavigation(e),Ka(this,la,"f").send("Page.reload")]))[0]}async waitForNavigation(e={}){return await Ka(this,ga,"f").mainFrame().waitForNavigation(e)}async waitForRequest(e,t={}){const{timeout:r=Ka(this,pa,"f").timeout()}=t;return zi(Ka(this,ga,"f").networkManager,gr.Request,(t=>Ki(e)?e===t.url():"function"==typeof e&&!!e(t)),r,Ka(this,aa,"m",Wa).call(this))}async waitForResponse(e,t={}){const{timeout:r=Ka(this,pa,"f").timeout()}=t;return zi(Ka(this,ga,"f").networkManager,gr.Response,(async t=>Ki(e)?e===t.url():"function"==typeof e&&!!await e(t)),r,Ka(this,aa,"m",Wa).call(this))}async waitForNetworkIdle(e={}){const{idleTime:t=500,timeout:r=Ka(this,pa,"f").timeout()}=e,n=Ka(this,ga,"f").networkManager;let i;const o=new Promise((e=>{i=e}));let s;const a=new Promise(((e,t)=>{s=t}));let c;const l=()=>i(),u=()=>{c&&clearTimeout(c),s(new Error("abort"))},d=()=>{c&&clearTimeout(c),0===n.numRequestsInProgress()&&(c=setTimeout(l,t))};d();const h=()=>(d(),!1),p=e=>zi(n,e,h,r,a),f=[p(gr.Request),p(gr.Response)];await Promise.race([o,...f,Ka(this,aa,"m",Wa).call(this)]).then((e=>(u(),e)),(e=>{throw u(),e}))}async waitForFrame(e,t={}){const{timeout:r=Ka(this,pa,"f").timeout()}=t;let n;n=Ki(e)?t=>Promise.resolve(e===t.url()):t=>{const r=e(t);return"boolean"==typeof r?Promise.resolve(r):r};const i=Promise.race([zi(Ka(this,ga,"f"),Br.FrameAttached,n,r,Ka(this,aa,"m",Wa).call(this)),zi(Ka(this,ga,"f"),Br.FrameNavigated,n,r,Ka(this,aa,"m",Wa).call(this)),...this.frames().map((async e=>await n(e)?e:await i))]);return i}async goBack(e={}){return Ka(this,aa,"m",Ha).call(this,-1,e)}async goForward(e={}){return Ka(this,aa,"m",Ha).call(this,1,e)}async bringToFront(){await Ka(this,la,"f").send("Page.bringToFront")}async emulate(e){await Promise.all([this.setViewport(e.viewport),this.setUserAgent(e.userAgent)])}async setJavaScriptEnabled(e){Ka(this,wa,"f")!==e&&(Ga(this,wa,e,"f"),await Ka(this,la,"f").send("Emulation.setScriptExecutionDisabled",{value:!e}))}async setBypassCSP(e){await Ka(this,la,"f").send("Page.setBypassCSP",{enabled:e})}async emulateMediaType(e){w("screen"===e||"print"===e||void 0===(null!=e?e:void 0),"Unsupported media type: "+e),await Ka(this,la,"f").send("Emulation.setEmulatedMedia",{media:e||""})}async emulateCPUThrottling(e){w(null===e||e>=1,"Throttling rate should be greater or equal to 1"),await Ka(this,la,"f").send("Emulation.setCPUThrottlingRate",{rate:null!==e?e:1})}async emulateMediaFeatures(e){if(e||await Ka(this,la,"f").send("Emulation.setEmulatedMedia",{}),Array.isArray(e)){for(const t of e){const e=t.name;w(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(e),"Unsupported media feature: "+e)}await Ka(this,la,"f").send("Emulation.setEmulatedMedia",{features:e})}}async emulateTimezone(e){try{await Ka(this,la,"f").send("Emulation.setTimezoneOverride",{timezoneId:e||""})}catch(t){if(S(t)&&t.message.includes("Invalid timezone"))throw new Error(`Invalid timezone ID: ${e}`);throw t}}async emulateIdleState(e){e?await Ka(this,la,"f").send("Emulation.setIdleOverride",{isUserActive:e.isUserActive,isScreenUnlocked:e.isScreenUnlocked}):await Ka(this,la,"f").send("Emulation.clearIdleOverride")}async emulateVisionDeficiency(e){const t=new Set(["none","achromatopsia","blurredVision","deuteranopia","protanopia","tritanopia"]);try{w(!e||t.has(e),`Unsupported vision deficiency: ${e}`),await Ka(this,la,"f").send("Emulation.setEmulatedVisionDeficiency",{type:e||"none"})}catch(e){throw e}}async setViewport(e){const t=await Ka(this,ya,"f").emulateViewport(e);Ga(this,Sa,e,"f"),t&&await this.reload()}viewport(){return Ka(this,Sa,"f")}async evaluate(e,...t){return Ka(this,ga,"f").mainFrame().evaluate(e,...t)}async evaluateOnNewDocument(e,...t){const r=Ji(e,...t);await Ka(this,la,"f").send("Page.addScriptToEvaluateOnNewDocument",{source:r})}async setCacheEnabled(e=!0){await Ka(this,ga,"f").networkManager.setCacheEnabled(e)}async screenshot(e={}){let t="png";if(e.type)t=e.type;else if(e.path){const r=e.path,n=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(n){case"png":t="png";break;case"jpeg":case"jpg":t="jpeg";break;case"webp":t="webp";break;default:throw new Error(`Unsupported screenshot type for extension \`.${n}\``)}}return e.quality&&(w("jpeg"===t||"webp"===t,"options.quality is unsupported for the "+t+" screenshots"),w("number"==typeof e.quality,"Expected options.quality to be a number but found "+typeof e.quality),w(Number.isInteger(e.quality),"Expected options.quality to be an integer"),w(e.quality>=0&&e.quality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+e.quality)),w(!e.clip||!e.fullPage,"options.clip and options.fullPage are exclusive"),e.clip&&(w("number"==typeof e.clip.x,"Expected options.clip.x to be a number but found "+typeof e.clip.x),w("number"==typeof e.clip.y,"Expected options.clip.y to be a number but found "+typeof e.clip.y),w("number"==typeof e.clip.width,"Expected options.clip.width to be a number but found "+typeof e.clip.width),w("number"==typeof e.clip.height,"Expected options.clip.height to be a number but found "+typeof e.clip.height),w(0!==e.clip.width,"Expected options.clip.width not to be 0."),w(0!==e.clip.height,"Expected options.clip.height not to be 0.")),Ka(this,Ea,"f").postTask((()=>Ka(this,aa,"m",Va).call(this,t,e)))}async createPDFStream(e={}){const{scale:t=1,displayHeaderFooter:r=!1,headerTemplate:n="",footerTemplate:i="",printBackground:o=!1,landscape:s=!1,pageRanges:a="",preferCSSPageSize:c=!1,margin:l={},omitBackground:u=!1,timeout:d=3e4}=e;let h=8.5,p=11;if(e.format){const t=Gs[e.format.toLowerCase()];w(t,"Unknown paper format: "+e.format),h=t.width,p=t.height}else h=Ya(e.width)||h,p=Ya(e.height)||p;const f=Ya(l.top)||0,m=Ya(l.left)||0,g=Ya(l.bottom)||0,y=Ya(l.right)||0;u&&await Ka(this,aa,"m",$a).call(this);const v=Ka(this,la,"f").send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:s,displayHeaderFooter:r,headerTemplate:n,footerTemplate:i,printBackground:o,scale:t,paperWidth:h,paperHeight:p,marginTop:f,marginBottom:g,marginLeft:m,marginRight:y,pageRanges:a,preferCSSPageSize:c}),_=await Qi(v,"Page.printToPDF",d);return u&&await Ka(this,aa,"m",Ba).call(this),w(_.stream,"`stream` is missing from `Page.printToPDF"),ro(Ka(this,la,"f"),_.stream)}async pdf(e={}){const{path:t}=e,r=await this.createPDFStream(e),n=await to(r,t);return w(n,"Could not create buffer"),n}async title(){return this.mainFrame().title()}async close(e={runBeforeUnload:void 0}){const t=Ka(this,la,"f").connection();w(t,"Protocol error: Connection closed. Most likely the page has been closed."),e.runBeforeUnload?await Ka(this,la,"f").send("Page.close"):(await t.send("Target.closeTarget",{targetId:Ka(this,ua,"f")._targetId}),await Ka(this,ua,"f")._isClosedPromise)}isClosed(){return Ka(this,ca,"f")}get mouse(){return Ka(this,ha,"f")}click(e,t={}){return this.mainFrame().click(e,t)}focus(e){return this.mainFrame().focus(e)}hover(e){return this.mainFrame().hover(e)}select(e,...t){return this.mainFrame().select(e,...t)}tap(e){return this.mainFrame().tap(e)}type(e,t,r){return this.mainFrame().type(e,t,r)}waitForTimeout(e){return this.mainFrame().waitForTimeout(e)}async waitForSelector(e,t={}){return await this.mainFrame().waitForSelector(e,t)}waitForXPath(e,t={}){return this.mainFrame().waitForXPath(e,t)}waitForFunction(e,t={},...r){return this.mainFrame().waitForFunction(e,t,...r)}}ca=new WeakMap,la=new WeakMap,ua=new WeakMap,da=new WeakMap,ha=new WeakMap,pa=new WeakMap,fa=new WeakMap,ma=new WeakMap,ga=new WeakMap,ya=new WeakMap,va=new WeakMap,_a=new WeakMap,ba=new WeakMap,wa=new WeakMap,Sa=new WeakMap,Ea=new WeakMap,Ca=new WeakMap,Ta=new WeakMap,ka=new WeakMap,Pa=new WeakMap,Ra=new WeakMap,xa=new WeakMap,aa=new WeakSet,Ma=async function(){try{await Promise.all([Ka(this,ga,"f").initialize(),Ka(this,la,"f").send("Performance.enable"),Ka(this,la,"f").send("Log.enable")])}catch(e){if(!S(e)||!ue(e))throw e;Bi(e)}},Oa=async function(e){if(!Ka(this,Ta,"f").size)return;const t=Ka(this,ga,"f").frame(e.frameId);w(t,"This should never happen.");const r=await t.worlds[ii].adoptBackendNode(e.backendNodeId),n=new Ps(r,e);for(const e of Ka(this,Ta,"f"))e.resolve(n);Ka(this,Ta,"f").clear()},Da=function(){this.emit("error",new Error("Page crashed!"))},Ia=function(e){const{level:t,text:r,args:n,source:i,url:o,lineNumber:s}=e.entry;n&&n.map((e=>Hi(Ka(this,la,"f"),e))),"worker"!==i&&this.emit("console",new Io(t,r,[],[{url:o,lineNumber:s}]))},Aa=function(e){this.emit("metrics",{title:e.title,metrics:Ka(this,aa,"m",Na).call(this,e.metrics)})},Na=function(e){const t={};for(const r of e||[])Xa.has(r.name)&&(t[r.name]=r.value);return t},La=function(e){const t=$i(e),r=new Error(t);r.stack="",this.emit("pageerror",r)},Fa=async function(e){if(0===e.executionContextId)return;const t=Ka(this,ga,"f").executionContextById(e.executionContextId,Ka(this,la,"f")),r=e.args.map((e=>Xi(t,e)));Ka(this,aa,"m",qa).call(this,e.type,r,e.stackTrace)},ja=async function(e){let t;try{t=JSON.parse(e.payload)}catch{return}const{type:r,name:n,seq:i,args:o}=t;if("exposedFun"!==r||!Ka(this,_a,"f").has(n))return;let s=null;try{const e=Ka(this,_a,"f").get(n);w(e),s=function(e,t,r){return Ji((function(e,t,r){window[e].callbacks.get(t).resolve(r),window[e].callbacks.delete(t)}),e,t,r)}(n,i,await e(...o))}catch(e){s=S(e)?function(e,t,r,n){return Ji((function(e,t,r,n){const i=new Error(r);i.stack=n,window[e].callbacks.get(t).reject(i),window[e].callbacks.delete(t)}),e,t,r,n)}(n,i,e.message,e.stack):function(e,t,r){return Ji((function(e,t,r){window[e].callbacks.get(t).reject(r),window[e].callbacks.delete(t)}),e,t,r)}(n,i,e)}Ka(this,la,"f").send("Runtime.evaluate",{expression:s,contextId:e.executionContextId}).catch(Bi)},qa=function(e,t,r){if(!this.listenerCount("console"))return void t.forEach((e=>e.dispose()));const n=[];for(const e of t){const t=e.remoteObject();t.objectId?n.push(e.toString()):n.push(Wi(t))}const i=[];if(r)for(const e of r.callFrames)i.push({url:e.url,lineNumber:e.lineNumber,columnNumber:e.columnNumber});const o=new Io(e,n.join(" "),t,i);this.emit("console",o)},Ua=function(e){let t=null;new Set(["alert","confirm","prompt","beforeunload"]).has(e.type)&&(t=e.type),w(t,"Unknown javascript dialog type: "+e.type);const r=new ms(Ka(this,la,"f"),t,e.message,e.defaultPrompt);this.emit("dialog",r)},Ba=async function(){await Ka(this,la,"f").send("Emulation.setDefaultBackgroundColorOverride")},$a=async function(){await Ka(this,la,"f").send("Emulation.setDefaultBackgroundColorOverride",{color:{r:0,g:0,b:0,a:0}})},Wa=function(){return Ka(this,ka,"f")||Ga(this,ka,new Promise((e=>Ka(this,la,"f").once(oe.Disconnected,(()=>e(new Error("Target closed")))))),"f"),Ka(this,ka,"f")},Ha=async function(e,t){const r=await Ka(this,la,"f").send("Page.getNavigationHistory"),n=r.entries[r.currentIndex+e];return n?(await Promise.all([this.waitForNavigation(t),Ka(this,la,"f").send("Page.navigateToHistoryEntry",{entryId:n.id})]))[0]:null},Va=async function(e,t={}){await Ka(this,la,"f").send("Target.activateTarget",{targetId:Ka(this,ua,"f")._targetId});let r=t.clip?function(e){const t=Math.round(e.x),r=Math.round(e.y);return{x:t,y:r,width:Math.round(e.width+e.x-t),height:Math.round(e.height+e.y-r),scale:e.scale}}(t.clip):void 0;const n="boolean"!=typeof t.captureBeyondViewport||t.captureBeyondViewport,i="boolean"==typeof t.fromSurface?t.fromSurface:void 0;if(t.fullPage){const e=await Ka(this,la,"f").send("Page.getLayoutMetrics"),{width:t,height:i}=e.cssContentSize||e.contentSize;if(r={x:0,y:0,width:t,height:i,scale:1},!n){const{isMobile:e=!1,deviceScaleFactor:r=1,isLandscape:n=!1}=Ka(this,Sa,"f")||{},o=n?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"};await Ka(this,la,"f").send("Emulation.setDeviceMetricsOverride",{mobile:e,width:t,height:i,deviceScaleFactor:r,screenOrientation:o})}}const o=t.omitBackground&&("png"===e||"webp"===e);o&&await Ka(this,aa,"m",$a).call(this);const s=await Ka(this,la,"f").send("Page.captureScreenshot",{format:e,quality:t.quality,clip:r?{...r,scale:void 0===r.scale?1:r.scale}:void 0,captureBeyondViewport:n,fromSurface:i});o&&await Ka(this,aa,"m",Ba).call(this),t.fullPage&&Ka(this,Sa,"f")&&await this.setViewport(Ka(this,Sa,"f"));const a="base64"===t.encoding?s.data:Buffer.from(s.data,"base64");if(t.path)try{const e=(await eo()).promises;await e.writeFile(t.path,a)}catch(e){if(e instanceof TypeError)throw new Error("Screenshots can only be written to a file path in a Node-like environment.");throw e}return a};const Xa=new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]),Ja={px:1,in:96,cm:37.8,mm:3.78};function Ya(e){if(void 0===e)return;let t;if("number"==typeof(r=e)||r instanceof Number)t=e;else{if(!Ki(e))throw new Error("page.pdf() Cannot handle parameter type: "+typeof e);{const r=e;let n=r.substring(r.length-2).toLowerCase(),i="";n in Ja?i=r.substring(0,r.length-2):(n="px",i=r);const o=Number(i);w(!isNaN(o),"Failed to parse parameter value: "+r),t=o*Ja[n]}}var r;return t/96}var Qa,Za,ec,tc,rc,nc,ic,oc,sc,ac,cc=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},lc=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class uc{constructor(e,t,r,n,i,o,s,a,c){Qa.set(this,void 0),Za.set(this,void 0),ec.set(this,void 0),tc.set(this,void 0),rc.set(this,void 0),nc.set(this,void 0),ic.set(this,void 0),oc.set(this,void 0),sc.set(this,void 0),ac.set(this,void 0),cc(this,Za,t,"f"),cc(this,ac,n,"f"),cc(this,ec,e,"f"),cc(this,Qa,r,"f"),this._targetId=e.targetId,cc(this,tc,i,"f"),cc(this,rc,o,"f"),cc(this,nc,null!=s?s:void 0,"f"),cc(this,sc,a,"f"),this._isPageTargetCallback=c,this._initializedPromise=new Promise((e=>this._initializedCallback=e)).then((async e=>{if(!e)return!1;const t=this.opener();if(!t||!lc(t,ic,"f")||"page"!==this.type())return!0;const r=await lc(t,ic,"f");if(!r.listenerCount("popup"))return!0;const n=await this.page();return r.emit("popup",n),!0})),this._isClosedPromise=new Promise((e=>this._closedCallback=e)),this._isInitialized=!this._isPageTargetCallback(lc(this,ec,"f"))||""!==lc(this,ec,"f").url,this._isInitialized&&this._initializedCallback(!0)}_session(){return lc(this,Za,"f")}createCDPSession(){return lc(this,tc,"f").call(this,!1)}_targetManager(){return lc(this,ac,"f")}_getTargetInfo(){return lc(this,ec,"f")}async page(){var e;return this._isPageTargetCallback(lc(this,ec,"f"))&&!lc(this,ic,"f")&&cc(this,ic,(lc(this,Za,"f")?Promise.resolve(lc(this,Za,"f")):lc(this,tc,"f").call(this,!0)).then((e=>{var t;return za._create(e,this,lc(this,rc,"f"),null!==(t=lc(this,nc,"f"))&&void 0!==t?t:null,lc(this,sc,"f"))})),"f"),null!==(e=await lc(this,ic,"f"))&&void 0!==e?e:null}async worker(){return"service_worker"!==lc(this,ec,"f").type&&"shared_worker"!==lc(this,ec,"f").type?null:(lc(this,oc,"f")||cc(this,oc,(lc(this,Za,"f")?Promise.resolve(lc(this,Za,"f")):lc(this,tc,"f").call(this,!1)).then((e=>new co(e,lc(this,ec,"f").url,(()=>{}),(()=>{})))),"f"),lc(this,oc,"f"))}url(){return lc(this,ec,"f").url}type(){const e=lc(this,ec,"f").type;return"page"===e||"background_page"===e||"service_worker"===e||"shared_worker"===e||"browser"===e||"webview"===e?e:"other"}browser(){return lc(this,Qa,"f").browser()}browserContext(){return lc(this,Qa,"f")}opener(){const{openerId:e}=lc(this,ec,"f");if(e)return this.browser()._targets.get(e)}_targetInfoChanged(e){if(cc(this,ec,e,"f"),!(this._isInitialized||this._isPageTargetCallback(lc(this,ec,"f"))&&""===lc(this,ec,"f").url))return this._isInitialized=!0,void this._initializedCallback(!0)}}Qa=new WeakMap,Za=new WeakMap,ec=new WeakMap,tc=new WeakMap,rc=new WeakMap,nc=new WeakMap,ic=new WeakMap,oc=new WeakMap,sc=new WeakMap,ac=new WeakMap;var dc,hc=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};class pc{constructor(){dc.set(this,void 0),hc(this,dc,Promise.resolve(),"f")}postTask(e){const t=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}(this,dc,"f").then(e);return hc(this,dc,t.then((()=>{}),(()=>{})),"f"),t}}dc=new WeakMap;var fc,mc,gc,yc,vc,_c,bc,wc,Sc,Ec,Cc,Tc,kc,Pc,Rc,xc,Mc,Oc,Dc,Ic,Ac,Nc,Lc,Fc,jc=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},qc=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Uc extends j{constructor(e,t,r){super(),fc.add(this),mc.set(this,void 0),gc.set(this,new Map),yc.set(this,new Map),vc.set(this,new Map),_c.set(this,new Set),bc.set(this,void 0),wc.set(this,void 0),Sc.set(this,new WeakMap),Ec.set(this,new WeakMap),Cc.set(this,new WeakMap),Tc.set(this,(()=>{})),kc.set(this,new Promise((e=>{jc(this,Tc,e,"f")}))),Pc.set(this,new Set),Rc.set(this,(()=>{for(const[e,t]of qc(this,gc,"f").entries())qc(this,bc,"f")&&!qc(this,bc,"f").call(this,t)||"browser"===t.type||qc(this,Pc,"f").add(e)})),Oc.set(this,(e=>{qc(this,fc,"m",Mc).call(this,e),qc(this,Sc,"f").delete(e)})),Dc.set(this,(async e=>{if(qc(this,gc,"f").set(e.targetInfo.targetId,e.targetInfo),this.emit("targetDiscovered",e.targetInfo),"browser"===e.targetInfo.type&&e.targetInfo.attached){if(qc(this,yc,"f").has(e.targetInfo.targetId))return;const t=qc(this,wc,"f").call(this,e.targetInfo,void 0);qc(this,yc,"f").set(e.targetInfo.targetId,t)}"shared_worker"===e.targetInfo.type&&await qc(this,mc,"f")._createSession(e.targetInfo,!0)})),Ic.set(this,(e=>{const t=qc(this,gc,"f").get(e.targetId);if(qc(this,gc,"f").delete(e.targetId),qc(this,fc,"m",Lc).call(this,e.targetId),"service_worker"===(null==t?void 0:t.type)&&qc(this,yc,"f").has(e.targetId)){const t=qc(this,yc,"f").get(e.targetId);this.emit("targetGone",t),qc(this,yc,"f").delete(e.targetId)}})),Ac.set(this,(e=>{if(qc(this,gc,"f").set(e.targetInfo.targetId,e.targetInfo),qc(this,_c,"f").has(e.targetInfo.targetId)||!qc(this,yc,"f").has(e.targetInfo.targetId)||!e.targetInfo.attached)return;const t=qc(this,yc,"f").get(e.targetInfo.targetId);this.emit("targetChanged",{target:t,targetInfo:e.targetInfo})})),Nc.set(this,(async(e,t)=>{const r=t.targetInfo,n=qc(this,mc,"f").session(t.sessionId);if(!n)throw new Error(`Session ${t.sessionId} was not created.`);const i=async()=>{await n.send("Runtime.runIfWaitingForDebugger").catch(Bi),await e.send("Target.detachFromTarget",{sessionId:n.id()}).catch(Bi)};if(!qc(this,mc,"f").isAutoAttached(r.targetId))return;if("service_worker"===r.type&&qc(this,mc,"f").isAutoAttached(r.targetId)){if(qc(this,fc,"m",Lc).call(this,r.targetId),await i(),qc(this,yc,"f").has(r.targetId))return;const e=qc(this,wc,"f").call(this,r);return qc(this,yc,"f").set(r.targetId,e),void this.emit("targetAvailable",e)}if(qc(this,bc,"f")&&!qc(this,bc,"f").call(this,r))return qc(this,_c,"f").add(r.targetId),qc(this,fc,"m",Lc).call(this,r.targetId),void await i();const o=qc(this,yc,"f").has(r.targetId),s=o?qc(this,yc,"f").get(r.targetId):qc(this,wc,"f").call(this,r,n);qc(this,fc,"m",xc).call(this,n),o?qc(this,vc,"f").set(n.id(),qc(this,yc,"f").get(r.targetId)):(qc(this,yc,"f").set(r.targetId,s),qc(this,vc,"f").set(n.id(),s));for(const t of qc(this,Sc,"f").get(e)||[])e instanceof ie||w(qc(this,vc,"f").has(e.id())),await t(s,e instanceof ie?null:qc(this,vc,"f").get(e.id()));qc(this,Pc,"f").delete(s._targetId),o||this.emit("targetAvailable",s),qc(this,fc,"m",Lc).call(this),await Promise.all([n.send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0}),n.send("Runtime.runIfWaitingForDebugger")]).catch(Bi)})),Fc.set(this,((e,t)=>{const r=qc(this,vc,"f").get(t.sessionId);qc(this,vc,"f").delete(t.sessionId),r&&(qc(this,yc,"f").delete(r._targetId),this.emit("targetGone",r))})),jc(this,mc,e,"f"),jc(this,bc,r,"f"),jc(this,wc,t,"f"),qc(this,mc,"f").on("Target.targetCreated",qc(this,Dc,"f")),qc(this,mc,"f").on("Target.targetDestroyed",qc(this,Ic,"f")),qc(this,mc,"f").on("Target.targetInfoChanged",qc(this,Ac,"f")),qc(this,mc,"f").on("sessiondetached",qc(this,Oc,"f")),qc(this,fc,"m",xc).call(this,qc(this,mc,"f")),qc(this,mc,"f").send("Target.setDiscoverTargets",{discover:!0,filter:[{type:"tab",exclude:!0},{}]}).then(qc(this,Rc,"f")).catch(Bi)}async initialize(){await qc(this,mc,"f").send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0}),qc(this,fc,"m",Lc).call(this),await qc(this,kc,"f")}dispose(){qc(this,mc,"f").off("Target.targetCreated",qc(this,Dc,"f")),qc(this,mc,"f").off("Target.targetDestroyed",qc(this,Ic,"f")),qc(this,mc,"f").off("Target.targetInfoChanged",qc(this,Ac,"f")),qc(this,mc,"f").off("sessiondetached",qc(this,Oc,"f")),qc(this,fc,"m",Mc).call(this,qc(this,mc,"f"))}getAvailableTargets(){return qc(this,yc,"f")}addTargetInterceptor(e,t){const r=qc(this,Sc,"f").get(e)||[];r.push(t),qc(this,Sc,"f").set(e,r)}removeTargetInterceptor(e,t){const r=qc(this,Sc,"f").get(e)||[];qc(this,Sc,"f").set(e,r.filter((e=>e!==t)))}}mc=new WeakMap,gc=new WeakMap,yc=new WeakMap,vc=new WeakMap,_c=new WeakMap,bc=new WeakMap,wc=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,Tc=new WeakMap,kc=new WeakMap,Pc=new WeakMap,Rc=new WeakMap,Oc=new WeakMap,Dc=new WeakMap,Ic=new WeakMap,Ac=new WeakMap,Nc=new WeakMap,Fc=new WeakMap,fc=new WeakSet,xc=function(e){const t=t=>qc(this,Nc,"f").call(this,e,t);w(!qc(this,Ec,"f").has(e)),qc(this,Ec,"f").set(e,t),e.on("Target.attachedToTarget",t);const r=t=>qc(this,Fc,"f").call(this,e,t);w(!qc(this,Cc,"f").has(e)),qc(this,Cc,"f").set(e,r),e.on("Target.detachedFromTarget",r)},Mc=function(e){qc(this,Ec,"f").has(e)&&(e.off("Target.attachedToTarget",qc(this,Ec,"f").get(e)),qc(this,Ec,"f").delete(e)),qc(this,Cc,"f").has(e)&&(e.off("Target.detachedFromTarget",qc(this,Cc,"f").get(e)),qc(this,Cc,"f").delete(e))},Lc=function(e){void 0!==e&&qc(this,Pc,"f").delete(e),0===qc(this,Pc,"f").size&&qc(this,Tc,"f").call(this)};var Bc,$c,Wc,Hc,Vc,Gc,Kc,zc,Xc,Jc,Yc,Qc,Zc,el,tl,rl,nl,il,ol=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},sl=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class al extends j{constructor(e,t,r){super(),Bc.add(this),$c.set(this,void 0),Wc.set(this,new Map),Hc.set(this,new Map),Vc.set(this,new Map),Gc.set(this,new Set),Kc.set(this,void 0),zc.set(this,void 0),Xc.set(this,new WeakMap),Jc.set(this,new WeakMap),Yc.set(this,(()=>{})),Qc.set(this,new Promise((e=>{ol(this,Yc,e,"f")}))),Zc.set(this,new Set),el.set(this,(e=>{this.removeSessionListeners(e),sl(this,Xc,"f").delete(e),sl(this,Vc,"f").delete(e.id())})),tl.set(this,(async e=>{if(sl(this,Wc,"f").has(e.targetInfo.targetId))return;if(sl(this,Wc,"f").set(e.targetInfo.targetId,e.targetInfo),"browser"===e.targetInfo.type&&e.targetInfo.attached){const t=sl(this,zc,"f").call(this,e.targetInfo,void 0);return sl(this,Hc,"f").set(e.targetInfo.targetId,t),void sl(this,Bc,"m",il).call(this,t._targetId)}if(sl(this,Kc,"f")&&!sl(this,Kc,"f").call(this,e.targetInfo))return sl(this,Gc,"f").add(e.targetInfo.targetId),void sl(this,Bc,"m",il).call(this,e.targetInfo.targetId);const t=sl(this,zc,"f").call(this,e.targetInfo,void 0);sl(this,Hc,"f").set(e.targetInfo.targetId,t),this.emit("targetAvailable",t),sl(this,Bc,"m",il).call(this,t._targetId)})),rl.set(this,(e=>{sl(this,Wc,"f").delete(e.targetId),sl(this,Bc,"m",il).call(this,e.targetId);const t=sl(this,Hc,"f").get(e.targetId);t&&(this.emit("targetGone",t),sl(this,Hc,"f").delete(e.targetId))})),nl.set(this,(async(e,t)=>{const r=t.targetInfo,n=sl(this,$c,"f").session(t.sessionId);if(!n)throw new Error(`Session ${t.sessionId} was not created.`);const i=sl(this,Hc,"f").get(r.targetId);w(i,`Target ${r.targetId} is missing`),this.setupAttachmentListeners(n),sl(this,Vc,"f").set(n.id(),sl(this,Hc,"f").get(r.targetId));for(const t of sl(this,Xc,"f").get(e)||[])e instanceof ie||w(sl(this,Vc,"f").has(e.id())),await t(i,e instanceof ie?null:sl(this,Vc,"f").get(e.id()))})),ol(this,$c,e,"f"),ol(this,Kc,r,"f"),ol(this,zc,t,"f"),sl(this,$c,"f").on("Target.targetCreated",sl(this,tl,"f")),sl(this,$c,"f").on("Target.targetDestroyed",sl(this,rl,"f")),sl(this,$c,"f").on("sessiondetached",sl(this,el,"f")),this.setupAttachmentListeners(sl(this,$c,"f"))}addTargetInterceptor(e,t){const r=sl(this,Xc,"f").get(e)||[];r.push(t),sl(this,Xc,"f").set(e,r)}removeTargetInterceptor(e,t){const r=sl(this,Xc,"f").get(e)||[];sl(this,Xc,"f").set(e,r.filter((e=>e!==t)))}setupAttachmentListeners(e){const t=t=>sl(this,nl,"f").call(this,e,t);w(!sl(this,Jc,"f").has(e)),sl(this,Jc,"f").set(e,t),e.on("Target.attachedToTarget",t)}removeSessionListeners(e){sl(this,Jc,"f").has(e)&&(e.off("Target.attachedToTarget",sl(this,Jc,"f").get(e)),sl(this,Jc,"f").delete(e))}getAvailableTargets(){return sl(this,Hc,"f")}dispose(){sl(this,$c,"f").off("Target.targetCreated",sl(this,tl,"f")),sl(this,$c,"f").off("Target.targetDestroyed",sl(this,rl,"f"))}async initialize(){await sl(this,$c,"f").send("Target.setDiscoverTargets",{discover:!0}),ol(this,Zc,new Set(sl(this,Wc,"f").keys()),"f"),await sl(this,Qc,"f")}}$c=new WeakMap,Wc=new WeakMap,Hc=new WeakMap,Vc=new WeakMap,Gc=new WeakMap,Kc=new WeakMap,zc=new WeakMap,Xc=new WeakMap,Jc=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,Zc=new WeakMap,el=new WeakMap,tl=new WeakMap,rl=new WeakMap,nl=new WeakMap,Bc=new WeakSet,il=function(e){sl(this,Zc,"f").delete(e),0===sl(this,Zc,"f").size&&sl(this,Yc,"f").call(this)};const cl=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardReadWrite"],["payment-handler","paymentHandler"],["persistent-storage","durableStorage"],["idle-detection","idleDetection"],["midi-sysex","midiSysex"]]);class ll extends j{constructor(){super()}_attach(){throw new Error("Not implemented")}_detach(){throw new Error("Not implemented")}get _targets(){throw new Error("Not implemented")}process(){throw new Error("Not implemented")}_getIsPageTargetCallback(){throw new Error("Not implemented")}createIncognitoBrowserContext(){throw new Error("Not implemented")}browserContexts(){throw new Error("Not implemented")}defaultBrowserContext(){throw new Error("Not implemented")}_disposeContext(){throw new Error("Not implemented")}wsEndpoint(){throw new Error("Not implemented")}newPage(){throw new Error("Not implemented")}_createPageInContext(){throw new Error("Not implemented")}targets(){throw new Error("Not implemented")}target(){throw new Error("Not implemented")}waitForTarget(){throw new Error("Not implemented")}pages(){throw new Error("Not implemented")}version(){throw new Error("Not implemented")}userAgent(){throw new Error("Not implemented")}close(){throw new Error("Not implemented")}disconnect(){throw new Error("Not implemented")}isConnected(){throw new Error("Not implemented")}}class ul extends j{constructor(){super()}targets(){throw new Error("Not implemented")}waitForTarget(){throw new Error("Not implemented")}pages(){throw new Error("Not implemented")}isIncognito(){throw new Error("Not implemented")}overridePermissions(){throw new Error("Not implemented")}clearPermissionOverrides(){throw new Error("Not implemented")}newPage(){throw new Error("Not implemented")}browser(){throw new Error("Not implemented")}close(){throw new Error("Not implemented")}}var dl,hl,pl,fl,ml,gl,yl,vl,_l,bl,wl,Sl,El,Cl,Tl,kl,Pl,Rl,xl,Ml,Ol,Dl,Il,Al=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Nl=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Ll extends ll{constructor(e,t,r,n,i,o,s,a,c){super(),dl.add(this),hl.set(this,void 0),pl.set(this,void 0),fl.set(this,void 0),ml.set(this,void 0),gl.set(this,void 0),yl.set(this,void 0),vl.set(this,void 0),_l.set(this,void 0),bl.set(this,void 0),wl.set(this,void 0),Sl.set(this,void 0),El.set(this,(()=>{this.emit("disconnected")})),Tl.set(this,((e,t)=>{var r;const{browserContextId:n}=e,i=n&&Nl(this,bl,"f").has(n)?Nl(this,bl,"f").get(n):Nl(this,_l,"f");if(!i)throw new Error("Missing browser context");return new uc(e,t,i,Nl(this,Sl,"f"),(t=>Nl(this,ml,"f")._createSession(e,t)),Nl(this,hl,"f"),null!==(r=Nl(this,pl,"f"))&&void 0!==r?r:null,Nl(this,wl,"f"),Nl(this,vl,"f"))})),kl.set(this,(async e=>{await e._initializedPromise&&(this.emit("targetcreated",e),e.browserContext().emit("targetcreated",e))})),Pl.set(this,(async e=>{e._initializedCallback(!1),e._closedCallback(),await e._initializedPromise&&(this.emit("targetdestroyed",e),e.browserContext().emit("targetdestroyed",e))})),Rl.set(this,(({target:e,targetInfo:t})=>{const r=e.url(),n=e._isInitialized;e._targetInfoChanged(t),n&&r!==e.url()&&(this.emit("targetchanged",e),e.browserContext().emit("targetchanged",e))})),xl.set(this,(e=>{this.emit("targetdiscovered",e)})),e=e||"chrome",Al(this,hl,n,"f"),Al(this,pl,i,"f"),Al(this,fl,o,"f"),Al(this,wl,new pc,"f"),Al(this,ml,t,"f"),Al(this,gl,s||function(){},"f"),Al(this,yl,a||(()=>!0),"f"),Nl(this,dl,"m",Cl).call(this,c),Al(this,Sl,"firefox"===e?new al(t,Nl(this,Tl,"f"),Nl(this,yl,"f")):new Uc(t,Nl(this,Tl,"f"),Nl(this,yl,"f")),"f"),Al(this,_l,new Fl(Nl(this,ml,"f"),this),"f"),Al(this,bl,new Map,"f");for(const e of r)Nl(this,bl,"f").set(e,new Fl(Nl(this,ml,"f"),this,e))}static async _create(e,t,r,n,i,o,s,a,c){const l=new Ll(e,t,r,n,i,o,s,a,c);return await l._attach(),l}get _targets(){return Nl(this,Sl,"f").getAvailableTargets()}async _attach(){Nl(this,ml,"f").on(ne.Disconnected,Nl(this,El,"f")),Nl(this,Sl,"f").on("targetAvailable",Nl(this,kl,"f")),Nl(this,Sl,"f").on("targetGone",Nl(this,Pl,"f")),Nl(this,Sl,"f").on("targetChanged",Nl(this,Rl,"f")),Nl(this,Sl,"f").on("targetDiscovered",Nl(this,xl,"f")),await Nl(this,Sl,"f").initialize()}_detach(){Nl(this,ml,"f").off(ne.Disconnected,Nl(this,El,"f")),Nl(this,Sl,"f").off("targetAvailable",Nl(this,kl,"f")),Nl(this,Sl,"f").off("targetGone",Nl(this,Pl,"f")),Nl(this,Sl,"f").off("targetChanged",Nl(this,Rl,"f")),Nl(this,Sl,"f").off("targetDiscovered",Nl(this,xl,"f"))}process(){var e;return null!==(e=Nl(this,fl,"f"))&&void 0!==e?e:null}_targetManager(){return Nl(this,Sl,"f")}_getIsPageTargetCallback(){return Nl(this,vl,"f")}async createIncognitoBrowserContext(e={}){const{proxyServer:t,proxyBypassList:r}=e,{browserContextId:n}=await Nl(this,ml,"f").send("Target.createBrowserContext",{proxyServer:t,proxyBypassList:r&&r.join(",")}),i=new Fl(Nl(this,ml,"f"),this,n);return Nl(this,bl,"f").set(n,i),i}browserContexts(){return[Nl(this,_l,"f"),...Array.from(Nl(this,bl,"f").values())]}defaultBrowserContext(){return Nl(this,_l,"f")}async _disposeContext(e){e&&(await Nl(this,ml,"f").send("Target.disposeBrowserContext",{browserContextId:e}),Nl(this,bl,"f").delete(e))}wsEndpoint(){return Nl(this,ml,"f").url()}async newPage(){return Nl(this,_l,"f").newPage()}async _createPageInContext(e){const{targetId:t}=await Nl(this,ml,"f").send("Target.createTarget",{url:"about:blank",browserContextId:e||void 0}),r=Nl(this,Sl,"f").getAvailableTargets().get(t);if(!r)throw new Error(`Missing target for page (id = ${t})`);if(!await r._initializedPromise)throw new Error(`Failed to create target for page (id = ${t})`);const n=await r.page();if(!n)throw new Error(`Failed to create a page for context (id = ${e})`);return n}targets(){return Array.from(Nl(this,Sl,"f").getAvailableTargets().values()).filter((e=>e._isInitialized))}target(){const e=this.targets().find((e=>"browser"===e.type()));if(!e)throw new Error("Browser target is not found");return e}async waitForTarget(e,t={}){const{timeout:r=3e4}=t;let n,i=!1;const o=new Promise((e=>n=e));this.on("targetcreated",s),this.on("targetchanged",s);try{return this.targets().forEach(s),r?await Qi(o,"target",r):await o}finally{this.off("targetcreated",s),this.off("targetchanged",s)}async function s(t){await e(t)&&!i&&(i=!0,n(t))}}async pages(){return(await Promise.all(this.browserContexts().map((e=>e.pages())))).reduce(((e,t)=>e.concat(t)),[])}async version(){return(await Nl(this,dl,"m",Ml).call(this)).product}async userAgent(){return(await Nl(this,dl,"m",Ml).call(this)).userAgent}async close(){await Nl(this,gl,"f").call(null),this.disconnect()}disconnect(){Nl(this,Sl,"f").dispose(),Nl(this,ml,"f").dispose()}isConnected(){return!Nl(this,ml,"f")._closed}}hl=new WeakMap,pl=new WeakMap,fl=new WeakMap,ml=new WeakMap,gl=new WeakMap,yl=new WeakMap,vl=new WeakMap,_l=new WeakMap,bl=new WeakMap,wl=new WeakMap,Sl=new WeakMap,El=new WeakMap,Tl=new WeakMap,kl=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,xl=new WeakMap,dl=new WeakSet,Cl=function(e){Al(this,vl,e||(e=>"page"===e.type||"background_page"===e.type||"webview"===e.type),"f")},Ml=function(){return Nl(this,ml,"f").send("Browser.getVersion")};class Fl extends ul{constructor(e,t,r){super(),Ol.set(this,void 0),Dl.set(this,void 0),Il.set(this,void 0),Al(this,Ol,e,"f"),Al(this,Dl,t,"f"),Al(this,Il,r,"f")}targets(){return Nl(this,Dl,"f").targets().filter((e=>e.browserContext()===this))}waitForTarget(e,t={}){return Nl(this,Dl,"f").waitForTarget((t=>t.browserContext()===this&&e(t)),t)}async pages(){const e=await Promise.all(this.targets().filter((e=>{var t;return"page"===e.type()||"other"===e.type()&&(null===(t=Nl(this,Dl,"f")._getIsPageTargetCallback())||void 0===t?void 0:t(e._getTargetInfo()))})).map((e=>e.page())));return e.filter((e=>!!e))}isIncognito(){return!!Nl(this,Il,"f")}async overridePermissions(e,t){const r=t.map((e=>{const t=cl.get(e);if(!t)throw new Error("Unknown permission: "+e);return t}));await Nl(this,Ol,"f").send("Browser.grantPermissions",{origin:e,browserContextId:Nl(this,Il,"f")||void 0,permissions:r})}async clearPermissionOverrides(){await Nl(this,Ol,"f").send("Browser.resetPermissions",{browserContextId:Nl(this,Il,"f")||void 0})}newPage(){return Nl(this,Dl,"f")._createPageInContext(Nl(this,Il,"f"))}browser(){return Nl(this,Dl,"f")}async close(){w(Nl(this,Il,"f"),"Non-incognito profiles cannot be closed!"),await Nl(this,Dl,"f")._disposeContext(Nl(this,Il,"f"))}}Ol=new WeakMap,Dl=new WeakMap,Il=new WeakMap;const jl=async()=>_?(await Promise.resolve().then(o.bind(o,9329))).NodeWebSocketTransport:(await o.e(1).then(o.bind(o,5001))).BrowserWebSocketTransport;async function ql(e){const{browserWSEndpoint:t,browserURL:r,ignoreHTTPSErrors:n=!1,defaultViewport:i={width:800,height:600},transport:s,slowMo:a=0,targetFilter:c,_isPageTarget:l}=e;let u;if(w(Number(!!t)+Number(!!r)+Number(!!s)===1,"Exactly one of browserWSEndpoint, browserURL or transport must be passed to puppeteer.connect"),s)u=new ie("",s,a);else if(t){const e=await jl(),r=await e.create(t);u=new ie(t,r,a)}else if(r){const e=await async function(e){const t=new URL("/json/version",e),r=await(async()=>globalThis.fetch||(await o.e(221).then(o.t.bind(o,5221,19))).fetch)();try{const e=await r(t.toString(),{method:"GET"});if(!e.ok)throw new Error(`HTTP ${e.statusText}`);return(await e.json()).webSocketDebuggerUrl}catch(e){throw S(e)&&(e.message=`Failed to fetch browser webSocket URL from ${t}: `+e.message),e}}(r),t=await jl(),n=await t.create(e);u=new ie(e,n,a)}const d=(await u.send("Browser.getVersion")).product.toLowerCase().includes("firefox")?"firefox":"chrome",{browserContextIds:h}=await u.send("Target.getBrowserContexts");return await Ll._create(d||"chrome",u,h,n,i,void 0,(()=>u.send("Browser.close").catch(Bi)),c,l)}const Ul=[{name:"Blackberry PlayBook",userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:600,height:1024,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Blackberry PlayBook landscape",userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:1024,height:600,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"BlackBerry Z30",userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"BlackBerry Z30 landscape",userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Note 3",userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Note 3 landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Note II",userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Note II landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S III",userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S III landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S5",userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S8",userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36",viewport:{width:360,height:740,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S8 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36",viewport:{width:740,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S9+",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36",viewport:{width:320,height:658,deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S9+ landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36",viewport:{width:658,height:320,deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Tab S4",userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36",viewport:{width:712,height:1138,deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Tab S4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36",viewport:{width:1138,height:712,deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad (gen 6)",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad (gen 6) landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad (gen 7)",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad (gen 7) landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Mini",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Mini landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Pro",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:1366,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Pro landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1366,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Pro 11",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Pro 11 landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 4",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53",viewport:{width:320,height:480,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 4 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53",viewport:{width:480,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 5",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 5 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 6",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 6 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 6 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 6 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 7",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 7 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 7 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 7 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 8",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 8 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 8 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 8 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone SE",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone SE landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone X",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone X landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone XR",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone XR landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:414,height:828,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:828,height:414,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:428,height:926,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:926,height:428,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Mini",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Mini landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:428,height:926,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:926,height:428,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Mini",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Mini landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"JioPhone 2",userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:240,height:320,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"JioPhone 2 landscape",userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:320,height:240,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Kindle Fire HDX",userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Kindle Fire HDX landscape",userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"LG Optimus L70",userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640,deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"LG Optimus L70 landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384,deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Microsoft Lumia 550",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Microsoft Lumia 950",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640,deviceScaleFactor:4,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Microsoft Lumia 950 landscape",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360,deviceScaleFactor:4,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 10",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:800,height:1280,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 10 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:1280,height:800,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 4",userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 5",userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 5X",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 5X landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 6",userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 6 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 6P",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 6P landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 7",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:600,height:960,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 7 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:960,height:600,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nokia Lumia 520",userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533,deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nokia Lumia 520 landscape",userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320,deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nokia N9",userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nokia N9 landscape",userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 2",userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:731,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 2 landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:731,height:411,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 2 XL",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:823,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 2 XL landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:823,height:411,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 3",userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36",viewport:{width:393,height:786,deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 3 landscape",userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36",viewport:{width:786,height:393,deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 4",userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36",viewport:{width:353,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36",viewport:{width:745,height:353,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 4a (5G)",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:353,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 4a (5G) landscape",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:745,height:353,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 5",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:393,height:851,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:851,height:393,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Moto G4",userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Moto G4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}}],Bl={};for(const e of Ul)Bl[e.name]=e;const $l=Object.freeze({"Slow 3G":{download:5e4,upload:5e4,latency:2e3},"Fast 3G":{download:18e4,upload:84375,latency:562.5}});class Wl{constructor(e){this._changedProduct=!1,this._isPuppeteerCore=e.isPuppeteerCore,this.connect=this.connect.bind(this)}connect(e){return ql(e)}get devices(){return Bl}get errors(){return A}get networkConditions(){return $l}registerCustomQueryHandler(e,t){return function(e,t){if(Ti.has(e))throw new Error(`A query handler named "${e}" already exists`);if(ki.has(e))throw new Error(`A custom query handler named "${e}" already exists`);if(!/^[a-zA-Z]+$/.test(e))throw new Error("Custom query handler names may only contain [a-zA-Z]");ki.set(e,{handler:bi(t)})}(e,t)}unregisterCustomQueryHandler(e){return function(e){ki.delete(e)}(e)}customQueryHandlerNames(){return[...ki.keys()]}clearCustomQueryHandlers(){ki.clear()}}var Hl,Vl,Gl,Kl,zl,Xl,Jl=o(9023),Yl=o(5317),Ql=o(3832),Zl=o(4239),eu=o(7626),tu=o(6504),ru=o(6868),nu=o(2322),iu=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ou=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const su=process.env.PUPPETEER_EXPERIMENTAL_CHROMIUM_MAC_ARM||process.env.npm_config_puppeteer_experimental_chromium_mac_arm,au=C("puppeteer:fetcher"),cu={chrome:{linux:"%s/chromium-browser-snapshots/Linux_x64/%d/%s.zip",mac:"%s/chromium-browser-snapshots/Mac/%d/%s.zip",mac_arm:"%s/chromium-browser-snapshots/Mac_Arm/%d/%s.zip",win32:"%s/chromium-browser-snapshots/Win/%d/%s.zip",win64:"%s/chromium-browser-snapshots/Win_x64/%d/%s.zip"},firefox:{linux:"%s/firefox-%s.en-US.%s-x86_64.tar.bz2",mac:"%s/firefox-%s.en-US.%s.dmg",win32:"%s/firefox-%s.en-US.%s.zip",win64:"%s/firefox-%s.en-US.%s.zip"}},lu={chrome:{host:"https://storage.googleapis.com",destination:".local-chromium"},firefox:{host:"https://archive.mozilla.org/pub/firefox/nightly/latest-mozilla-central",destination:".local-firefox"}};function uu(e,t,r){switch(e){case"chrome":switch(t){case"linux":return"chrome-linux";case"mac_arm":case"mac":return"chrome-mac";case"win32":case"win64":return parseInt(r,10)>591479?"chrome-win":"chrome-win32"}case"firefox":return t}}function du(e,t,r,n){return Jl.format(cu[e][t],r,n,uu(e,t,n))}const hu=(0,Jl.promisify)(n.readdir.bind(i)),pu=(0,Jl.promisify)(n.mkdir.bind(i)),fu=(0,Jl.promisify)(n.unlink.bind(i)),mu=(0,Jl.promisify)(n.chmod.bind(i));function gu(e){return new Promise((t=>{n.access(e,(e=>t(!e)))}))}class yu{constructor(e,t={}){if(Hl.add(this),Vl.set(this,void 0),Gl.set(this,void 0),Kl.set(this,void 0),zl.set(this,void 0),iu(this,Vl,(t.product||"chrome").toLowerCase(),"f"),w("chrome"===ou(this,Vl,"f")||"firefox"===ou(this,Vl,"f"),`Unknown product: "${t.product}"`),iu(this,Gl,t.path||r.join(e,lu[ou(this,Vl,"f")].destination),"f"),iu(this,Kl,t.host||lu[ou(this,Vl,"f")].host,"f"),t.platform)iu(this,zl,t.platform,"f");else{const e=d.platform();switch(e){case"darwin":switch(ou(this,Vl,"f")){case"chrome":iu(this,zl,"arm64"===d.arch()&&su?"mac_arm":"mac","f");break;case"firefox":iu(this,zl,"mac","f")}break;case"linux":iu(this,zl,"linux","f");break;case"win32":return void iu(this,zl,"x64"===d.arch()||"arm64"===d.arch()&&function(e){const t=e.split(".");if(t.length>2){const e=parseInt(t[0],10),r=parseInt(t[1],10),n=parseInt(t[2],10);return e>10||10===e&&r>0||10===e&&0===r&&n>=22e3}return!1}(d.release())?"win64":"win32","f");default:w(!1,"Unsupported platform: "+e)}}w(cu[ou(this,Vl,"f")][ou(this,zl,"f")],"Unsupported platform: "+ou(this,zl,"f"))}platform(){return ou(this,zl,"f")}product(){return ou(this,Vl,"f")}host(){return ou(this,Kl,"f")}canDownload(e){const t=du(ou(this,Vl,"f"),ou(this,zl,"f"),ou(this,Kl,"f"),e);return new Promise((e=>{vu(t,"HEAD",(t=>{e(200===t.statusCode)}),!1).on("error",(t=>{console.error(t),e(!1)}))}))}async download(e,t=()=>{}){const i=du(ou(this,Vl,"f"),ou(this,zl,"f"),ou(this,Kl,"f"),e),o=i.split("/").pop();w(o,`A malformed download URL was found: ${i}.`);const s=r.join(ou(this,Gl,"f"),o),a=ou(this,Hl,"m",Xl).call(this,e);if(await gu(a))return this.revisionInfo(e);if(await gu(ou(this,Gl,"f"))||await pu(ou(this,Gl,"f")),"linux"===d.platform()&&"arm64"===d.arch())return void function(){let e=n.existsSync("/usr/bin/chromium-browser");if(!e&&(e=n.existsSync("/usr/bin/chromium"),!e))throw console.error("The chromium binary is not available for arm64.\nIf you are on Ubuntu, you can install with: \n\n sudo apt install chromium\n\n\n sudo apt install chromium-browser\n"),new Error}();try{await function(e,t,r){let i,o;au(`Downloading binary from ${e}`);const s=new Promise(((e,t)=>{i=e,o=t}));let a=0,c=0;return vu(e,"GET",(s=>{if(200!==s.statusCode){const t=new Error(`Download failed: server returned code ${s.statusCode}. URL: ${e}`);return s.resume(),void o(t)}const a=n.createWriteStream(t);a.on("finish",(()=>i())),a.on("error",(e=>o(e))),s.pipe(a),c=parseInt(s.headers["content-length"],10),r&&s.on("data",l)})).on("error",(e=>o(e))),s;function l(e){a+=e.length,r(a,c)}}(i,s,t),await function(e,t){if(au(`Installing ${e} to ${t}`),e.endsWith(".zip"))return Ql(e,{dir:t});if(e.endsWith(".tar.bz2"))return function(e,t){return new Promise(((r,i)=>{const o=ru.extract(t);o.on("error",i),o.on("finish",r),n.createReadStream(e).pipe(nu()).pipe(o)}))}(e,t);if(e.endsWith(".dmg"))return pu(t).then((()=>function(e,t){let n;return new Promise(((i,o)=>{const s=`hdiutil attach -nobrowse -noautoopen "${e}"`;Yl.exec(s,((e,s)=>{if(e)return o(e);const a=s.match(/\/Volumes\/(.*)/m);if(!a)return o(new Error(`Could not find volume path in ${s}`));n=a[0],hu(n).then((e=>{const s=e.find((e=>"string"==typeof e&&e.endsWith(".app")));if(!s)return o(new Error(`Cannot find app in ${n}`));const a=r.join(n,s);au(`Copying ${a} to ${t}`),Yl.exec(`cp -R "${a}" "${t}"`,(e=>{e?o(e):i()}))})).catch(o)}))})).catch((e=>{console.error(e)})).finally((()=>{if(!n)return;const e=`hdiutil detach "${n}" -quiet`;au(`Unmounting ${n}`),Yl.exec(e,(e=>{e&&console.error(`Error unmounting dmg: ${e}`)}))}))}(e,t)));throw new Error(`Unsupported archive format: ${e}`)}(s,a)}finally{await gu(s)&&await fu(s)}const c=this.revisionInfo(e);return c&&await mu(c.executablePath,493),c}async localRevisions(){return await gu(ou(this,Gl,"f"))?(await hu(ou(this,Gl,"f"))).map((e=>function(e,t){const n=r.basename(t).split("-");if(2!==n.length)return;const[i,o]=n;return o&&i&&i in cu[e]?{product:e,platform:i,revision:o}:void 0}(ou(this,Vl,"f"),e))).filter((e=>{var t;return null!==(t=e&&e.platform===ou(this,zl,"f"))&&void 0!==t&&t})).map((e=>e.revision)):[]}async remove(e){const t=ou(this,Hl,"m",Xl).call(this,e);w(await gu(t),`Failed to remove: revision ${e} is not downloaded`),await new Promise((e=>Zl(t,e)))}revisionInfo(e){const t=ou(this,Hl,"m",Xl).call(this,e);let i="";if("chrome"===ou(this,Vl,"f"))if("mac"===ou(this,zl,"f")||"mac_arm"===ou(this,zl,"f"))i=r.join(t,uu(ou(this,Vl,"f"),ou(this,zl,"f"),e),"Chromium.app","Contents","MacOS","Chromium");else if("linux"===ou(this,zl,"f"))i=r.join(t,uu(ou(this,Vl,"f"),ou(this,zl,"f"),e),"chrome");else{if("win32"!==ou(this,zl,"f")&&"win64"!==ou(this,zl,"f"))throw new Error("Unsupported platform: "+ou(this,zl,"f"));i=r.join(t,uu(ou(this,Vl,"f"),ou(this,zl,"f"),e),"chrome.exe")}else{if("firefox"!==ou(this,Vl,"f"))throw new Error("Unsupported product: "+ou(this,Vl,"f"));if("mac"===ou(this,zl,"f")||"mac_arm"===ou(this,zl,"f"))i=r.join(t,"Firefox Nightly.app","Contents","MacOS","firefox");else if("linux"===ou(this,zl,"f"))i=r.join(t,"firefox","firefox");else{if("win32"!==ou(this,zl,"f")&&"win64"!==ou(this,zl,"f"))throw new Error("Unsupported platform: "+ou(this,zl,"f"));i=r.join(t,"firefox","firefox.exe")}}const o=du(ou(this,Vl,"f"),ou(this,zl,"f"),ou(this,Kl,"f"),e),s=n.existsSync(t);return au({revision:e,executablePath:i,folderPath:t,local:s,url:o,product:ou(this,Vl,"f")}),{revision:e,executablePath:i,folderPath:t,local:s,url:o,product:ou(this,Vl,"f")}}}function vu(e,t,r,n=!0){let i={...h.parse(e),method:t,headers:n?{Connection:"keep-alive"}:void 0};const o=(0,tu.T)(e);if(o)if(e.startsWith("http:")){const e=h.parse(o);i={path:i.href,host:e.hostname,port:e.port}}else{const e=h.parse(o),t={...e,secureProxy:"https:"===e.protocol};i.agent=eu(t),i.rejectUnauthorized=!1}const s=e=>{e.statusCode&&e.statusCode>=300&&e.statusCode<400&&e.headers.location?vu(e.headers.location,t,r):r(e)},a="https:"===i.protocol?u.request(i,s):l.request(i,s);return a.end(),a}Vl=new WeakMap,Gl=new WeakMap,Kl=new WeakMap,zl=new WeakMap,Hl=new WeakSet,Xl=function(e){return r.resolve(ou(this,Gl,"f"),`${ou(this,zl,"f")}-${e}`)};const _u=require("readline");var bu,wu,Su,Eu,Cu,Tu,ku,Pu=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Ru=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const xu=C("puppeteer:webDriverBiDi:SEND ►"),Mu=C("puppeteer:webDriverBiDi:RECV ◀");class Ou extends j{constructor(e,t=0){super(),bu.add(this),wu.set(this,void 0),Su.set(this,void 0),Eu.set(this,0),Cu.set(this,!1),Tu.set(this,new Map),Pu(this,Su,t,"f"),Pu(this,wu,e,"f"),Ru(this,wu,"f").onmessage=this.onMessage.bind(this),Ru(this,wu,"f").onclose=Ru(this,bu,"m",ku).bind(this)}get closed(){return Ru(this,Cu,"f")}send(e,t){var r;const n=Pu(this,Eu,(r=Ru(this,Eu,"f"),++r),"f"),i=JSON.stringify({id:n,method:e,params:t});return xu(i),Ru(this,wu,"f").send(i),new Promise(((t,r)=>{Ru(this,Tu,"f").set(n,{resolve:t,reject:r,error:new I,method:e})}))}async onMessage(e){Ru(this,Su,"f")&&await new Promise((e=>setTimeout(e,Ru(this,Su,"f")))),Mu(e);const t=JSON.parse(e);if("id"in t){const e=Ru(this,Tu,"f").get(t.id);e&&(Ru(this,Tu,"f").delete(t.id),"error"in t?e.reject(function(e,t,r){let n=`Protocol error (${t}): ${r.error} ${r.message}`;return r.stacktrace&&(n+=` ${r.stacktrace}`),Du(e,n,r.message)}(e.error,e.method,t)):e.resolve(t.result))}else this.emit(t.method,t.params)}dispose(){Ru(this,bu,"m",ku).call(this),Ru(this,wu,"f").close()}}function Du(e,t,r){return e.message=t,e.originalMessage=null!=r?r:e.originalMessage,e}wu=new WeakMap,Su=new WeakMap,Eu=new WeakMap,Cu=new WeakMap,Tu=new WeakMap,bu=new WeakSet,ku=function(){if(!Ru(this,Cu,"f")){Pu(this,Cu,!0,"f"),Ru(this,wu,"f").onmessage=void 0,Ru(this,wu,"f").onclose=void 0;for(const e of Ru(this,Tu,"f").values())e.reject(Du(e.error,`Protocol error (${e.method}): Connection closed.`));Ru(this,Tu,"f").clear()}};var Iu,Au,Nu,Lu,Fu,ju,qu=o(9329),Uu=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Bu=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class $u{constructor(e,t){Iu.add(this),Au.set(this,void 0),Nu.set(this,void 0),Lu.set(this,!1),Fu.set(this,""),Uu(this,Au,e,"f"),Uu(this,Nu,[Vi(t,"data",(e=>Bu(this,Iu,"m",ju).call(this,e))),Vi(t,"close",(()=>{this.onclose&&this.onclose.call(null)})),Vi(t,"error",Bi),Vi(e,"error",Bi)],"f")}send(e){w(!Bu(this,Lu,"f"),"`PipeTransport` is closed."),Bu(this,Au,"f").write(e),Bu(this,Au,"f").write("\0")}close(){Uu(this,Lu,!0,"f"),Gi(Bu(this,Nu,"f"))}}Au=new WeakMap,Nu=new WeakMap,Lu=new WeakMap,Fu=new WeakMap,Iu=new WeakSet,ju=function(e){w(!Bu(this,Lu,"f"),"`PipeTransport` is closed.");let t=e.indexOf("\0");if(-1===t)return void Uu(this,Fu,Bu(this,Fu,"f")+e.toString(),"f");const r=Bu(this,Fu,"f")+e.toString(void 0,0,t);this.onmessage&&this.onmessage.call(null,r);let n=t+1;for(t=e.indexOf("\0",n);-1!==t;)this.onmessage&&this.onmessage.call(null,e.toString(void 0,n,t)),n=t+1,t=e.indexOf("\0",n);Uu(this,Fu,e.toString(void 0,n),"f")};var Wu,Hu,Vu,Gu,Ku,zu,Xu,Ju,Yu=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Qu=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const Zu=(0,Jl.promisify)(Zl),ed=(0,Jl.promisify)(n.rename),td=(0,Jl.promisify)(n.unlink),rd=C("puppeteer:launcher");class nd{constructor(e,t,r,n,i){Wu.set(this,void 0),Hu.set(this,void 0),Vu.set(this,void 0),Gu.set(this,void 0),Ku.set(this,void 0),zu.set(this,!0),Xu.set(this,[]),Ju.set(this,void 0),Yu(this,Wu,e,"f"),Yu(this,Hu,t,"f"),Yu(this,Vu,r,"f"),Yu(this,Gu,n,"f"),Yu(this,Ku,i,"f")}start(e){var t,i;const{handleSIGINT:o,handleSIGTERM:s,handleSIGHUP:a,dumpio:c,env:l,pipe:u}=e;let d;d=u?c?["ignore","pipe","pipe","pipe","pipe"]:["ignore","ignore","ignore","pipe","pipe"]:c?["pipe","pipe","pipe"]:["pipe","ignore","pipe"],w(!this.proc,"This process has previously been started."),rd(`Calling ${Qu(this,Hu,"f")} ${Qu(this,Vu,"f").join(" ")}`),this.proc=Yl.spawn(Qu(this,Hu,"f"),Qu(this,Vu,"f"),{detached:"win32"!==process.platform,env:l,stdio:d}),c&&(null===(t=this.proc.stderr)||void 0===t||t.pipe(process.stderr),null===(i=this.proc.stdout)||void 0===i||i.pipe(process.stdout)),Yu(this,zu,!1,"f"),Yu(this,Ju,new Promise(((e,t)=>{this.proc.once("exit",(async()=>{if(Yu(this,zu,!0,"f"),Qu(this,Ku,"f"))try{await Zu(Qu(this,Gu,"f")),e()}catch(e){Bi(e),t(e)}else{if("firefox"===Qu(this,Wu,"f"))try{await td(r.join(Qu(this,Gu,"f"),"user.js"));const e=r.join(Qu(this,Gu,"f"),"prefs.js.puppeteer");if(n.existsSync(e)){const t=r.join(Qu(this,Gu,"f"),"prefs.js");await td(t),await ed(e,t)}}catch(e){Bi(e),t(e)}e()}}))})),"f"),Yu(this,Xu,[Vi(process,"exit",this.kill.bind(this))],"f"),o&&Qu(this,Xu,"f").push(Vi(process,"SIGINT",(()=>{this.kill(),process.exit(130)}))),s&&Qu(this,Xu,"f").push(Vi(process,"SIGTERM",this.close.bind(this))),a&&Qu(this,Xu,"f").push(Vi(process,"SIGHUP",this.close.bind(this)))}close(){return Qu(this,zu,"f")?Promise.resolve():(Qu(this,Ku,"f")?this.kill():this.connection&&this.connection.send("Browser.close").catch((e=>{Bi(e),this.kill()})),Gi(Qu(this,Xu,"f")),Qu(this,Ju,"f"))}kill(){if(this.proc&&this.proc.pid&&function(e){try{return process.kill(e,0)}catch(e){if(S(t=e)&&("errno"in t||"code"in t||"path"in t||"syscall"in t)&&e.code&&"ESRCH"===e.code)return!1;throw e}var t}(this.proc.pid)){const e=this.proc;try{if("win32"===process.platform)Yl.exec(`taskkill /pid ${this.proc.pid} /T /F`,(t=>{t&&e.kill()}));else{const t=-this.proc.pid;try{process.kill(t,"SIGKILL")}catch(t){e.kill("SIGKILL")}}}catch(e){throw new Error(`Puppeteer was unable to kill the process which ran the browser binary.\nThis means that, on future Puppeteer launches, Puppeteer might not be able to launch the browser.\nPlease check your open processes and ensure that the browser processes that Puppeteer launched have been killed.\nIf you think this is a bug, please report it on the Puppeteer issue tracker.\nError cause: ${S(e)?e.stack:e}`)}}try{Qu(this,Ku,"f")&&Zl.sync(Qu(this,Gu,"f"))}catch(e){}Gi(Qu(this,Xu,"f"))}async setupWebDriverBiDiConnection(e){w(this.proc,"BrowserRunner not started.");const{timeout:t,slowMo:r,preferredRevision:n}=e;let i=await id(this.proc,t,n,/^WebDriver BiDi listening on (ws:\/\/.*)$/);i+="/session";const o=await qu.NodeWebSocketTransport.create(i);return new Ou(o,r)}async setupConnection(e){w(this.proc,"BrowserRunner not started.");const{usePipe:t,timeout:r,slowMo:n,preferredRevision:i}=e;if(t){const{3:e,4:t}=this.proc.stdio,r=new $u(e,t);this.connection=new ie("",r,n)}else{const e=await id(this.proc,r,i),t=await qu.NodeWebSocketTransport.create(e);this.connection=new ie(e,t,n)}return this.connection}}function id(e,t,r,n=/^DevTools listening on (ws:\/\/.*)$/){w(e.stderr,"`browserProcess` does not have stderr.");const i=_u.createInterface(e.stderr);let o="";return new Promise(((s,a)=>{const c=[Vi(i,"line",(function(e){o+=e+"\n";const t=e.match(n);t&&(d(),s(t[1]))})),Vi(i,"close",(()=>u())),Vi(e,"exit",(()=>u())),Vi(e,"error",(e=>u(e)))],l=t?setTimeout((function(){d(),a(new D(`Timed out after ${t} ms while trying to connect to the browser! Only Chrome at revision r${r} is guaranteed to work.`))}),t):0;function u(e){d(),a(new Error(["Failed to launch the browser process!"+(e?" "+e.message:""),o,"","TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md",""].join("\n")))}function d(){l&&clearTimeout(l),Gi(c)}}))}Wu=new WeakMap,Hu=new WeakMap,Vu=new WeakMap,Gu=new WeakMap,Ku=new WeakMap,zu=new WeakMap,Xu=new WeakMap,Ju=new WeakMap;const od=()=>process.env.PUPPETEER_TMP_DIR||d.tmpdir();class sd{constructor(e,t,r){this._projectRoot=e,this._preferredRevision=t,this._isPuppeteerCore=r}async launch(e={}){const{ignoreDefaultArgs:t=!1,args:i=[],dumpio:o=!1,channel:s,executablePath:a,pipe:c=!1,env:l=process.env,handleSIGINT:u=!0,handleSIGTERM:d=!0,handleSIGHUP:h=!0,ignoreHTTPSErrors:p=!1,defaultViewport:f={width:800,height:600},slowMo:m=0,timeout:g=3e4,waitForInitialPage:y=!0,debuggingPort:v}=e,_=[];t?Array.isArray(t)?_.push(...this.defaultArgs(e).filter((e=>!t.includes(e)))):_.push(...i):_.push(...this.defaultArgs(e)),_.some((e=>e.startsWith("--remote-debugging-")))||(c?(w(!v,"Browser should be launched with either pipe or debugging port - not both."),_.push("--remote-debugging-pipe")):_.push(`--remote-debugging-port=${v||0}`));let b=!1,S=_.findIndex((e=>e.startsWith("--user-data-dir")));S<0&&(b=!0,_.push(`--user-data-dir=${await n.promises.mkdtemp(r.join(od(),"puppeteer_dev_chrome_profile-"))}`),S=_.length-1);const E=_[S].split("=",2)[1];w("string"==typeof E,"`--user-data-dir` is malformed");let C=a;if(s)w(!C,"`executablePath` must not be specified when `channel` is given."),C=Sd(s);else if(!C){const{missingText:e,executablePath:t}=Ed(this);if(e)throw new Error(e);C=t}const T=_.includes("--remote-debugging-pipe"),k=new nd(this.product,C,_,E,b);let P;k.start({handleSIGHUP:h,handleSIGTERM:d,handleSIGINT:u,dumpio:o,env:l,pipe:T});try{const t=await k.setupConnection({usePipe:T,timeout:g,slowMo:m,preferredRevision:this._preferredRevision});P=await Ll._create(this.product,t,[],p,f,k.proc,k.close.bind(k),e.targetFilter)}catch(e){throw k.kill(),e}if(y)try{await P.waitForTarget((e=>"page"===e.type()),{timeout:g})}catch(e){throw await P.close(),e}return P}defaultArgs(e={}){const t=["--allow-pre-commit-input","--disable-background-networking","--enable-features=NetworkServiceInProcess2","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-extensions-with-background-pages","--disable-default-apps","--disable-dev-shm-usage","--disable-extensions","--disable-features=Translate,BackForwardCache,AcceptCHFrame,AvoidUnnecessaryBeforeUnloadCheckSync","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-popup-blocking","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-sync","--force-color-profile=srgb","--metrics-recording-only","--no-first-run","--enable-automation","--password-store=basic","--use-mock-keychain","--enable-blink-features=IdleDetection","--export-tagged-pdf"],{devtools:n=!1,headless:i=!n,args:o=[],userDataDir:s}=e;return s&&t.push(`--user-data-dir=${r.resolve(s)}`),n&&t.push("--auto-open-devtools-for-tabs"),i&&t.push("chrome"===i?"--headless=chrome":"--headless","--hide-scrollbars","--mute-audio"),o.every((e=>e.startsWith("-")))&&t.push("about:blank"),t.push(...o),t}executablePath(e){return e?Sd(e):Ed(this).executablePath}get product(){return"chrome"}}var ad,cd,ld=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ud=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class dd extends sa{constructor(e,t){super(),ad.set(this,void 0),cd.set(this,void 0),ld(this,ad,e,"f"),ld(this,cd,t,"f")}async close(){await ud(this,ad,"f").send("browsingContext.close",{context:ud(this,cd,"f")})}async evaluate(e,...t){const r=`(${e.toString()})()`;return(await ud(this,ad,"f").send("script.evaluate",{expression:r,target:{context:ud(this,cd,"f")},awaitPromise:!0})).result.value}}ad=new WeakMap,cd=new WeakMap;var hd,pd=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class fd extends ul{constructor(e){super(),hd.set(this,void 0),function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?i.call(e,r):i?i.value=r:t.set(e,r)}(this,hd,e,"f")}async newPage(){const e=await pd(this,hd,"f").send("browsingContext.create",{type:"tab"});return new dd(pd(this,hd,"f"),e.context)}async close(){}}hd=new WeakMap;var md,gd,yd,vd=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},_d=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class bd extends ll{constructor(e){super(),md.set(this,void 0),gd.set(this,void 0),yd.set(this,void 0),vd(this,md,e.process,"f"),vd(this,gd,e.closeCallback,"f"),vd(this,yd,e.connection,"f")}static async create(e){return await e.connection.send("session.new",{}),new bd(e)}async close(){var e;await(null===(e=_d(this,gd,"f"))||void 0===e?void 0:e.call(null)),_d(this,yd,"f").dispose()}isConnected(){return!_d(this,yd,"f").closed}process(){var e;return null!==(e=_d(this,md,"f"))&&void 0!==e?e:null}async createIncognitoBrowserContext(e){return new fd(_d(this,yd,"f"))}}md=new WeakMap,gd=new WeakMap,yd=new WeakMap;class wd{constructor(e,t,r){this._projectRoot=e,this._preferredRevision=t,this._isPuppeteerCore=r}async launch(e={}){const{ignoreDefaultArgs:t=!1,args:r=[],dumpio:i=!1,executablePath:o=null,pipe:s=!1,env:a=process.env,handleSIGINT:c=!0,handleSIGTERM:l=!0,handleSIGHUP:u=!0,ignoreHTTPSErrors:d=!1,defaultViewport:h={width:800,height:600},slowMo:p=0,timeout:f=3e4,extraPrefsFirefox:m={},waitForInitialPage:g=!0,debuggingPort:y=null,protocol:v="cdp"}=e,_=[];let b;t?Array.isArray(t)?_.push(...this.defaultArgs(e).filter((e=>!t.includes(e)))):_.push(...r):_.push(...this.defaultArgs(e)),_.some((e=>e.startsWith("--remote-debugging-")))||(s&&w(null===y,"Browser should be launched with either pipe or debugging port - not both."),_.push(`--remote-debugging-port=${y||0}`));let S=!0;const E=_.findIndex((e=>["-profile","--profile"].includes(e)));if(-1!==E){if(b=_[E+1],!b||!n.existsSync(b))throw new Error(`Firefox profile not found at '${b}'`);S=!1;const e=this.defaultPreferences(m);this.writePreferences(e,b)}else b=await this._createProfile(m),_.push("--profile"),_.push(b);this._isPuppeteerCore||await this._updateRevision();let C=o;if(!o){const{missingText:e,executablePath:t}=Ed(this);if(e)throw new Error(e);C=t}if(!C)throw new Error("firefoxExecutable is not found.");const T=new nd(this.product,C,_,b,S);if(T.start({handleSIGHUP:u,handleSIGTERM:l,handleSIGINT:c,dumpio:i,env:a,pipe:s}),"webDriverBiDi"===v){let e;try{const t=await T.setupWebDriverBiDiConnection({timeout:f,slowMo:p,preferredRevision:this._preferredRevision});e=await bd.create({connection:t,closeCallback:T.close.bind(T),process:T.proc})}catch(e){throw T.kill(),e}return e}let k;try{const t=await T.setupConnection({usePipe:s,timeout:f,slowMo:p,preferredRevision:this._preferredRevision});k=await Ll._create(this.product,t,[],d,h,T.proc,T.close.bind(T),e.targetFilter)}catch(e){throw T.kill(),e}if(g)try{await k.waitForTarget((e=>"page"===e.type()),{timeout:f})}catch(e){throw await k.close(),e}return k}executablePath(){return Ed(this).executablePath}async _updateRevision(){if("latest"===this._preferredRevision){if(!this._projectRoot)throw new Error("_projectRoot is undefined. Unable to create a BrowserFetcher.");const e=new yu(this._projectRoot,{product:this.product}),t=await e.localRevisions();t[0]&&(this._preferredRevision=t[0])}}get product(){return"firefox"}defaultArgs(e={}){const{devtools:t=!1,headless:r=!t,args:n=[],userDataDir:i=null}=e,o=["--no-remote"];switch(d.platform()){case"darwin":o.push("--foreground");break;case"win32":o.push("--wait-for-browser")}return i&&(o.push("--profile"),o.push(i)),r&&o.push("--headless"),t&&o.push("--devtools"),n.every((e=>e.startsWith("-")))&&o.push("about:blank"),o.push(...n),o}defaultPreferences(e){const t="dummy.test",r={"app.normandy.api_url":"","app.update.checkInstallTime":!1,"app.update.disabledForTesting":!0,"apz.content_response_timeout":6e4,"browser.contentblocking.features.standard":"-tp,tpPrivate,cookieBehavior0,-cm,-fp","browser.dom.window.dump.enabled":!0,"browser.newtabpage.activity-stream.feeds.system.topstories":!1,"browser.newtabpage.enabled":!1,"browser.pagethumbnails.capturing_disabled":!0,"browser.safebrowsing.blockedURIs.enabled":!1,"browser.safebrowsing.downloads.enabled":!1,"browser.safebrowsing.malware.enabled":!1,"browser.safebrowsing.passwords.enabled":!1,"browser.safebrowsing.phishing.enabled":!1,"browser.search.update":!1,"browser.sessionstore.resume_from_crash":!1,"browser.shell.checkDefaultBrowser":!1,"browser.startup.homepage":"about:blank","browser.startup.homepage_override.mstone":"ignore","browser.startup.page":0,"browser.tabs.disableBackgroundZombification":!1,"browser.tabs.warnOnCloseOtherTabs":!1,"browser.tabs.warnOnOpen":!1,"browser.uitour.enabled":!1,"browser.urlbar.suggest.searches":!1,"browser.usedOnWindows10.introURL":"","browser.warnOnQuit":!1,"datareporting.healthreport.documentServerURI":`http://${t}/dummy/healthreport/`,"datareporting.healthreport.logging.consoleEnabled":!1,"datareporting.healthreport.service.enabled":!1,"datareporting.healthreport.service.firstRun":!1,"datareporting.healthreport.uploadEnabled":!1,"datareporting.policy.dataSubmissionEnabled":!1,"datareporting.policy.dataSubmissionPolicyBypassNotification":!0,"devtools.jsonview.enabled":!1,"dom.disable_open_during_load":!1,"dom.file.createInChild":!0,"dom.ipc.reportProcessHangs":!1,"dom.max_chrome_script_run_time":0,"dom.max_script_run_time":0,"extensions.autoDisableScopes":0,"extensions.enabledScopes":5,"extensions.getAddons.cache.enabled":!1,"extensions.installDistroAddons":!1,"extensions.screenshots.disabled":!0,"extensions.update.enabled":!1,"extensions.update.notifyUser":!1,"extensions.webservice.discoverURL":`http://${t}/dummy/discoveryURL`,"fission.bfcacheInParent":!1,"fission.webContentIsolationStrategy":0,"focusmanager.testmode":!0,"general.useragent.updates.enabled":!1,"geo.provider.testing":!0,"geo.wifi.scan":!1,"hangmonitor.timeout":0,"javascript.options.showInConsole":!0,"media.gmp-manager.updateEnabled":!1,"network.cookie.cookieBehavior":0,"network.cookie.sameSite.laxByDefault":!1,"network.http.prompt-temp-redirect":!1,"network.http.speculative-parallel-limit":0,"network.manage-offline-status":!1,"network.sntp.pools":t,"plugin.state.flash":0,"privacy.trackingprotection.enabled":!1,"remote.enabled":!0,"security.certerrors.mitm.priming.enabled":!1,"security.fileuri.strict_origin_policy":!1,"security.notification_enable_delay":0,"services.settings.server":`http://${t}/dummy/blocklist/`,"signon.autofillForms":!1,"signon.rememberSignons":!1,"startup.homepage_welcome_url":"about:blank","startup.homepage_welcome_url.additional":"","toolkit.cosmeticAnimations.enabled":!1,"toolkit.startup.max_resumed_crashes":-1};return Object.assign(r,e)}async writePreferences(e,t){const i=Object.entries(e).map((([e,t])=>`user_pref(${JSON.stringify(e)}, ${JSON.stringify(t)});`));await n.promises.writeFile(r.join(t,"user.js"),i.join("\n"));const o=r.join(t,"prefs.js");if(n.existsSync(o)){const e=r.join(t,"prefs.js.puppeteer");await n.promises.copyFile(o,e)}}async _createProfile(e){const t=await n.promises.mkdtemp(r.join(od(),"puppeteer_dev_firefox_profile-")),i=this.defaultPreferences(e);return await this.writePreferences(i,t),t}}function Sd(e){const t=d.platform();let r;switch(t){case"win32":switch(e){case"chrome":r=`${process.env.PROGRAMFILES}\\Google\\Chrome\\Application\\chrome.exe`;break;case"chrome-beta":r=`${process.env.PROGRAMFILES}\\Google\\Chrome Beta\\Application\\chrome.exe`;break;case"chrome-canary":r=`${process.env.PROGRAMFILES}\\Google\\Chrome SxS\\Application\\chrome.exe`;break;case"chrome-dev":r=`${process.env.PROGRAMFILES}\\Google\\Chrome Dev\\Application\\chrome.exe`}break;case"darwin":switch(e){case"chrome":r="/Applications/Google Chrome.app/Contents/MacOS/Google Chrome";break;case"chrome-beta":r="/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta";break;case"chrome-canary":r="/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary";break;case"chrome-dev":r="/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev"}break;case"linux":switch(e){case"chrome":r="/opt/google/chrome/chrome";break;case"chrome-beta":r="/opt/google/chrome-beta/chrome";break;case"chrome-dev":r="/opt/google/chrome-unstable/chrome"}}if(!r)throw new Error(`Unable to detect browser executable path for '${e}' on ${t}.`);try{(0,n.accessSync)(r)}catch(t){throw new Error(`Could not find Google Chrome executable for channel '${e}' at '${r}'.`)}return r}function Ed(e){const{product:t,_isPuppeteerCore:r,_projectRoot:i,_preferredRevision:o}=e;let s;if(!r){const e=process.env.PUPPETEER_EXECUTABLE_PATH||process.env.npm_config_puppeteer_executable_path||process.env.npm_package_config_puppeteer_executable_path;if(e)return{executablePath:e,missingText:(0,n.existsSync)(e)?void 0:"Tried to use PUPPETEER_EXECUTABLE_PATH env variable to launch browser but did not find any executable at: "+e};const r="/usr/bin/chromium-browser";if("chrome"===t&&"darwin"!==d.platform()&&"arm64"===d.arch()&&(0,n.existsSync)(r))return{executablePath:r,missingText:void 0};s=process.env.PUPPETEER_DOWNLOAD_PATH||process.env.npm_config_puppeteer_download_path||process.env.npm_package_config_puppeteer_download_path}if(!i)throw new Error("_projectRoot is undefined. Unable to create a BrowserFetcher.");const a=new yu(i,{product:t,path:s});if(!r&&"chrome"===t){const e=process.env.PUPPETEER_CHROMIUM_REVISION;if(e){const t=a.revisionInfo(e),r=t.local?void 0:"Tried to use PUPPETEER_CHROMIUM_REVISION env variable to launch browser but did not find executable at: "+t.executablePath;return{executablePath:t.executablePath,missingText:r}}}const c=a.revisionInfo(o),l=`Run \`npm install\` to download the correct Chromium revision (${e._preferredRevision}).`,u=c.local?void 0:`Could not find expected browser (${t}) locally. ${"chrome"===t?l:"Run `PUPPETEER_PRODUCT=firefox npm install` to download a supported Firefox browser binary."}`;return{executablePath:c.executablePath,missingText:u}}const Cd=Object.freeze({chromium:"1045629",firefox:"latest"});var Td,kd,Pd,Rd=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},xd=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Md extends Wl{constructor(e){const{projectRoot:t,preferredRevision:r,productName:n,...i}=e;super(i),Td.set(this,void 0),kd.set(this,void 0),Pd.set(this,void 0),Rd(this,kd,t,"f"),Rd(this,Pd,n,"f"),this._preferredRevision=r,this.connect=this.connect.bind(this),this.launch=this.launch.bind(this),this.executablePath=this.executablePath.bind(this),this.defaultArgs=this.defaultArgs.bind(this),this.createBrowserFetcher=this.createBrowserFetcher.bind(this)}connect(e){return super.connect(e)}get _productName(){return xd(this,Pd,"f")}set _productName(e){xd(this,Pd,"f")!==e&&(this._changedProduct=!0),Rd(this,Pd,e,"f")}launch(e={}){return e.product&&(this._productName=e.product),this._launcher.launch(e)}executablePath(e){return this._launcher.executablePath(e)}get _launcher(){return xd(this,Td,"f")&&xd(this,Td,"f").product===this._productName&&!this._changedProduct||("firefox"===this._productName?this._preferredRevision=Cd.firefox:this._preferredRevision=Cd.chromium,this._changedProduct=!1,Rd(this,Td,function(e,t,r,n="chrome"){switch(n){case"firefox":return new wd(e,t,r);case"chrome":return new sd(e,t,r)}}(xd(this,kd,"f"),this._preferredRevision,this._isPuppeteerCore,this._productName),"f")),xd(this,Td,"f")}get product(){return this._launcher.product}defaultArgs(e={}){return this._launcher.defaultArgs(e)}createBrowserFetcher(e){if(!xd(this,kd,"f"))throw new Error("_projectRoot is undefined. Unable to create a BrowserFetcher.");return new yu(xd(this,kd,"f"),e)}}Td=new WeakMap,kd=new WeakMap,Pd=new WeakMap;const Od=(()=>{const e=!0;let t=Cd.chromium;const r=void 0;return new Md({projectRoot:void 0,preferredRevision:t,isPuppeteerCore:e,productName:r})})(),{connect:Dd,createBrowserFetcher:Id,defaultArgs:Ad,executablePath:Nd,launch:Ld}=Od,Fd=Od;class jd{static async showErrorDialog(t){const r=await e.window.showWarningMessage(`${t.title} ${t.message}`,"Check settings","Search issues");if("Check settings"===r)e.commands.executeCommand("workbench.action.openSettings","@ext:ms-edgedevtools.vscode-edge-devtools");else if("Search issues"===r){const r=`https://github.com/microsoft/vscode-edge-devtools/issues?q=is%3Aissue+is%3Aopen+${t.title}`;e.env.openExternal(e.Uri.parse(r))}}static async showInformationDialog(t){await e.window.showInformationMessage(`${t.title} ${t.message}`)}}const qd="vscode-edge-devtools",Ud=!1,Bd="localhost",$d=9222,Wd=r.resolve(r.join(__dirname,"startpage","index.html")),Hd="devtools-preferences",Vd={screencastEnabled:!1,uiTheme:'"dark"'},Gd="vscode-edge-devtools-view",Kd={"/":"${workspaceFolder}"},zd={"meteor://💻app/*":"${webRoot}/*","webpack:///*":"*","webpack:///./*":"${webRoot}/*","webpack:///./~/*":"${webRoot}/node_modules/*","webpack:///src/*":"${webRoot}/*","webpack://*":"${webRoot}/*"},Xd="${workspaceFolder}",Jd=!0,Yd=1e4,Qd=200,Zd="index.html",eh=process.env.LOCALAPPDATA||"/",th=new Map,rh="@f163ae219c3b08cda5aafa6b262442715a8a9893",nh={launchBrowserInstance:"0",launchProject:"1",viewDocumentation:"2",configureLaunchJson:"3",generateLaunchJson:"4",refreshTargetList:"5",attachToTarget:"6",openSettings:"7",viewChangelog:"8",closeTarget:"9",emptyTargetListLaunchBrowserInstance:"10",toggleScreencast:"10"};function ih(e,t={}){return new Promise(((r,n)=>{const i=h.parse(e);("https:"===i.protocol?u.get:l.get)(t={rejectUnauthorized:!1,...i,...t,method:"PUT"},(e=>{let t="";e.on("data",(e=>{t+=e})),e.on("end",(()=>{200===e.statusCode?r(t):n(new Error(t.trim()))}))})).on("error",(e=>{n(e)}))}))}function oh(e,t,r){if(r.webSocketDebuggerUrl){const n=/ws:\/\/([^/]+)\/?/.exec(r.webSocketDebuggerUrl);if(n){const i=`${e}:${t}`;r.webSocketDebuggerUrl=r.webSocketDebuggerUrl.replace(n[1],i)}}return r}async function sh(e,t,r){const n=r?"https":"http";let i=null;for(const r of["/json/list","/json"])try{if(i=await(o=`${n}://${e}:${t}${r}`,ih(o,{headers:{Host:"localhost"}})),i)break}catch{}var o;let s=[];try{s=i?JSON.parse(i):[]}catch(e){jd.showErrorDialog({errorCode:0,title:"Error while parsing the list of targets.",message:e instanceof Error&&e.message?e.message:`Unexpected error ${e}`})}return s}function ah(t={}){const n=e.workspace.getConfiguration(qd),i=t.hostname||n.get("hostname")||Bd,o=t.port||n.get("port")||$d,s=t.useHttps||n.get("useHttps")||Ud,a=t.url||n.get("defaultUrl")||Wd,l=t.timeout||n.get("timeout")||Yd,u=t.browserFlavor||"Default";let h;if(void 0!==t.userDataDir)h=t.userDataDir;else{const e=n.get("userDataDir");void 0!==e&&(h=e)}return!0===h||void 0===h&&"Default"===u?(h=r.join(d.tmpdir(),`vscode-edge-devtools-userdatadir_${o}`),c.pathExistsSync(h)||c.mkdirSync(h)):h||(h=""),{hostname:i,port:o,useHttps:s,defaultUrl:a,userDataDir:h,timeout:l}}function ch(t){return m&&t.extensionMode===e.ExtensionMode.Production?new(f())(m.name,m.version,m.aiKey):new g}function lh(e){return e.globalState.get("cssMirrorContent")??!0}function uh(e,t){return e.globalState.update("cssMirrorContent",t)}async function dh(t={}){const r=e.workspace.getConfiguration(qd),n=t.browserFlavor||r.get("browserFlavor");switch(function(){const e=d.platform();return"darwin"===e?"OSX":"win32"===e?"Windows":"Linux"}()){case"Windows":return await yh(n,"Windows");case"OSX":return await yh(n,"OSX");case"Linux":return await yh(n,"Linux")}}async function hh(t,r,n,i,o){const s=["--no-first-run","--no-default-browser-check",`--remote-debugging-port=${r}`,n],a=o??(e.workspace.getConfiguration(qd).get("headless")||!1);let c=(e.workspace.getConfiguration(qd).get("browserArgs")||[]).map((e=>e.trim()));return c=c.filter((e=>!e.startsWith("--remote-debugging-port")&&e!==n)),i&&(s.unshift(`--user-data-dir=${i}`),c=c.filter((e=>!e.startsWith("--user-data-dir")))),c.length&&s.unshift(...c),await Fd.launch({executablePath:t,args:s,headless:a})}function ph(t={}){const r=e.workspace.getConfiguration(qd),n=t.pathMapping||r.get("pathMapping")||Kd,i=t.browserFlavor||r.get("browserFlavor")||"Default",o=t.sourceMapPathOverrides||r.get("sourceMapPathOverrides")||zd,s=t.webRoot||r.get("webRoot")||Xd,a=t.defaultEntrypoint||r.get("defaultEntrypoint")||Zd;let c=Jd;if(void 0!==t.sourceMaps)c=t.sourceMaps;else{const e=r.get("sourceMaps");void 0!==e&&(c=e)}const l={};for(const e in o)if(o.hasOwnProperty(e)){const t=fh(s,e),r=fh(s,o[e]);l[t]=gh(r)}s&&(n["/"]=s);const u={};for(const e in n)n.hasOwnProperty(e)&&(u[e]=gh(n[e]));return{pathMapping:u,sourceMapPathOverrides:l,browserFlavor:i,sourceMaps:c,webRoot:gh(s),isJsDebugProxiedCDPConnection:!1,useLocalEdgeWatch:!1,devtoolsBaseUri:void 0,defaultEntrypoint:a}}function fh(e,t){return e&&0===t.indexOf("${webRoot}")?t.replace("${webRoot}",e):t}function mh(e){try{const t=new URL(e);if(t.protocol&&!t.protocol.includes("http"))return!0}catch{return!1}return!1}function gh(r){let n=r;if(e.workspace.workspaceFolders&&e.workspace.workspaceFolders[0].uri.toString()){n=e.workspace.workspaceFolders[0].uri.toString();const i=r.replace("${workspaceFolder}",n);return t.utils.canonicalizeUrl(i)}return n}async function yh(e,t){let r=th.get(e||"Default");if(!r)for(r of th.values()){const e=await n(r);if(e)return e}return await n(r);async function n(r){return r?!await c.pathExists(r.windows.primary)||"Windows"!==t&&"Default"!==e?!await c.pathExists(r.windows.secondary)||"Windows"!==t&&"Default"!==e?!await c.pathExists(r.osx)||"OSX"!==t&&"Default"!==e?!await c.pathExists(r.debianLinux)||"Linux"!==t&&"Default"!==e?"":r.debianLinux:r.osx:r.windows.secondary:r.windows.primary:""}}function vh(e,t){let r;r=/^https?:\/\/localhost:/.exec(e)||/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/.exec(e)?"localhost":/^file:\/\//.exec(e)?"file":"other",t.sendTelemetryEvent("user/browserNavigation",{urlType:r})}function _h(e,t){return e.line>=t.start.line&&e.line<=t.end.line&&!(e.line===t.start.line&&e.character+1<t.start.character)&&!(e.line===t.end.line&&e.character>t.end.character)}function bh(){const e=[];for(const t of m.activationEvents)t.startsWith("onLanguage:")&&e.push(t.substring(11));return e}th.set("Stable",{debianLinux:"/opt/microsoft/msedge/msedge",osx:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",windows:{primary:"C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe",secondary:r.join(eh,"Microsoft\\Edge\\Application\\msedge.exe")}}),th.set("Beta",{debianLinux:"/opt/microsoft/msedge-beta/msedge",osx:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",windows:{primary:"C:\\Program Files (x86)\\Microsoft\\Edge Beta\\Application\\msedge.exe",secondary:r.join(eh,"Microsoft\\Edge Beta\\Application\\msedge.exe")}}),th.set("Dev",{debianLinux:"/opt/microsoft/msedge-dev/msedge",osx:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",windows:{primary:"C:\\Program Files (x86)\\Microsoft\\Edge Dev\\Application\\msedge.exe",secondary:r.join(eh,"Microsoft\\Edge Dev\\Application\\msedge.exe")}}),th.set("Canary",{debianLinux:"/opt/microsoft/msedge-canary/msedge",osx:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",windows:{primary:"C:\\Program Files (x86)\\Microsoft\\Edge SxS\\Application\\msedge.exe",secondary:r.join(eh,"Microsoft\\Edge SxS\\Application\\msedge.exe")}});const wh=e.workspace.getConfiguration(qd).get("defaultUrl")||Wd,Sh={type:"pwa-msedge",name:"Launch Microsoft Edge",request:"launch",runtimeArgs:["--remote-debugging-port=9222"],url:wh,presentation:{hidden:!0}},Eh={type:"pwa-msedge",name:"Launch Microsoft Edge in headless mode",request:"launch",runtimeArgs:["--headless","--remote-debugging-port=9222"],url:wh,presentation:{hidden:!0}},Ch={type:"vscode-edge-devtools.debug",name:"Open Edge DevTools",request:"attach",url:wh,presentation:{hidden:!0}},Th=[{name:"Launch Edge Headless and attach DevTools",configurations:["Launch Microsoft Edge in headless mode","Open Edge DevTools"]},{name:"Launch Edge and attach DevTools",configurations:["Launch Microsoft Edge","Open Edge DevTools"]}],kh=[Sh,Eh,Ch];class Ph{constructor(){this.launchConfig="None",this.isValidConfig=!1,this.updateLaunchConfig()}static get instance(){return Ph.launchConfigManagerInstance||(Ph.launchConfigManagerInstance=new Ph),Ph.launchConfigManagerInstance}getLaunchConfig(){return this.updateLaunchConfig(),this.launchConfig}updateLaunchConfig(){if(!e.workspace.workspaceFolders)return e.commands.executeCommand("setContext","launchJsonStatus","None"),this.launchConfig="None",void(this.isValidConfig=!1);const t=e.workspace.workspaceFolders[0].uri,r=`${t.fsPath}/.vscode/launch.json`;if(c.pathExistsSync(r)){const r=e.workspace.getConfiguration("launch",t).get("configurations"),n=e.workspace.getConfiguration("launch",t).get("compounds");return 0===this.getMissingConfigs(r,kh).length&&0===this.getMissingConfigs(n,Th).length?(e.commands.executeCommand("setContext","launchJsonStatus","Supported"),this.launchConfig=Th[0].name,void(this.isValidConfig=!0)):(e.commands.executeCommand("setContext","launchJsonStatus","Unsupported"),this.launchConfig="Unsupported",void(this.isValidConfig=!1))}e.commands.executeCommand("setContext","launchJsonStatus","None"),this.launchConfig="None",this.isValidConfig=!1}async configureLaunchJson(){if(!e.workspace.workspaceFolders)return void e.window.showErrorMessage("Cannot configure launch.json for an empty workspace. Please open a folder in the editor.");const t=e.workspace.workspaceFolders[0].uri,r="/.vscode/launch.json";c.ensureFileSync(t.fsPath+r);const n=e.workspace.getConfiguration("launch",t);let i=n.get("configurations");i=this.replaceDuplicateNameConfigs(i,kh);const o=this.getMissingConfigs(i,kh);for(const e of o)i.push(e);await n.update("configurations",i);let s=n.get("compounds");s=this.replaceDuplicateNameConfigs(s,Th);const a=this.getMissingConfigs(s,Th);for(const e of a)s.push(e);await n.update("compounds",s);let l=c.readFileSync(t.fsPath+r).toString();const u=/("url":.*startpage[\/\\]+index\.html",)/gm,d=u.exec(l);l=l.replace(u,`${d?d[0]:""} // Provide your project's url to finish configuring`),c.writeFileSync(t.fsPath+r,l),e.commands.executeCommand("vscode.open",e.Uri.joinPath(t,r)),this.updateLaunchConfig()}isValidLaunchConfig(){return this.isValidConfig}replaceDuplicateNameConfigs(e,t){const r=[],n=new Map;for(const e of t)n.set(e.name,e);for(const t of e){const e=n.get(t.name)||t;r.push(e)}return r}getMissingConfigs(e,t){const r=[];for(const n of t){let t=!1;for(const r of e)if(this.compareConfigs(r,n)){t=!0;break}t||r.push(n)}return r}compareConfigs(e,t){for(const r of Object.keys(t))if("url"!==r&&"presentation"!==r)if(Array.isArray(t[r])&&Array.isArray(e[r])){const n=new Set(e[r]);for(const e of t[r])if(!n.has(e))return!1}else if(e[r]!==t[r])return!1;return!0}}class Rh{constructor(t,r){this.changeDataEvent=new e.EventEmitter,this.onDidChangeTreeData=this.changeDataEvent.event,this.extensionPath=t.extensionPath,this.telemetryReporter=r}getTreeItem(e){return e}async getChildren(t){let r=[];const n=e.workspace.getConfiguration(qd).get("showWorkers");if(t)r=t.getChildren();else{const{hostname:e,port:t,useHttps:i}=ah(),o=await sh(e,t,i);if(Array.isArray(o)){if(await this.clearFaviconResourceDirectory(),o.length>0){const i=[];o.forEach((o=>{const s=oh(e,t,o);"page"===s.type||"iframe"===s.type?i.push(this.downloadFaviconFromSitePromise(s)):("service_worker"!==s.type&&"shared_worker"!==s.type||n)&&r.push(new a(s,"",this.extensionPath))}));const s=await Promise.all(i);for(const e of s)mh(e.faviconUrl)?r.push(new a(e,"",this.extensionPath,e.faviconUrl)):r.push(new a(e,"",this.extensionPath))}}else this.telemetryReporter.sendTelemetryEvent("view/error/no_json_array");r.sort(((e,t)=>e.targetJson.type===t.targetJson.type?e.targetJson.title<t.targetJson.title?-1:1:"page"===e.targetJson.type?-1:"page"===t.targetJson.type?1:e.targetJson.type<t.targetJson.type?-1:1))}return r}refresh(){this.changeDataEvent.fire(null),this.clearFaviconResourceDirectory(),Ph.instance.updateLaunchConfig()}async clearFaviconResourceDirectory(){const e=r.join(this.extensionPath,"resources","favicons"),t=await n.promises.readdir(e);for(const i of t){const t=i.toString();".gitkeep"!==t&&await n.promises.unlink(r.join(e,t))}}downloadFaviconFromSitePromise(e){if(!e.url||!e.url.startsWith("https"))return Promise.resolve(e);const t=/((?:\/\/|\.)([^\.]*)\.[^\.^\/]+\/).*/,i=t.exec(e.url);let o;if(!i)return Promise.resolve(e);o=`${i[2]}Favicon.ico`;const s=e.url.replace(t,"$1favicon.ico"),a=r.join(this.extensionPath,"resources","favicons",o),c=new Promise(((t,r)=>{u.get(s,(i=>{if(i.headers["content-type"]&&i.headers["content-type"].includes("icon")){const o=[];i.on("data",(e=>{o.push(e)})),i.on("end",(async()=>{try{await n.promises.writeFile(a,Buffer.concat(o)),e.faviconUrl=a,t(e)}catch{r(e)}}))}else t(e)}))})),l=new Promise((t=>{const r=setTimeout((()=>{clearTimeout(r),t(e)}),1e3)}));return Promise.race([c,l])}}var xh=o(2987);const Mh=new Map([["Default Light+","default"],["Visual Studio Light","default"],["Default Dark+","dark"],["Visual Studio Dark","dark"],["System Preference","systemPreferred"],["Dark","dark"],["Light","default"],["Chromium Dark","darkChromium"],["Chromium Light","lightChromium"],["Monokai","vscode-monokai"],["Monokai Dimmed","vscode-monokai-dimmed"],["Solarized Dark","vscode-solarized-dark"],["Solarized Light","vscode-solarized-light"],["Red","vscode-red"],["Quiet Light","vscode-quietlight"],["Abyss","vscode-abyss"],["Kimbie Dark","vscode-kimbie-dark"],["Tomorrow Night Blue","vscode-tomorrow-night-blue"]]);class Oh{getThemeFromUserSetting(){const t=e.workspace.getConfiguration().get("workbench.colorTheme");let r=Mh.get(t);if(!r)switch(e.window.activeColorTheme.kind){case 1:case 4:r="default";break;case 2:case 3:r="dark";break;default:r="systemPreferred"}return r}getHeadlessSettings(){return e.workspace.getConfiguration(qd).get("headless")||!1}static get instance(){return Oh.singletonInstance||(Oh.singletonInstance=new Oh),Oh.singletonInstance}}const Dh=["getState","getUrl","openInEditor","cssMirrorContent","ready","setState","telemetry","websocket","getVscodeSettings","copyText","focusEditor","focusEditorGroup","openUrl","toggleScreencast","toggleInspect","replayConsoleMessages","devtoolsConnection","toggleCSSMirrorContent","writeToClipboard","readClipboard"];function Ih(e,t,r){e(`${t}:${JSON.stringify(r)}`)}var Ah=o(4434),Nh=(o(3719),o(6286),o(8533),o(1060));o(1722);const Lh=Nh;class Fh extends Ah.EventEmitter{constructor(e,t){super(),this.isConnected=!1,this.messages=[],this.targetUrl=e,this.postMessageToDevTools=t}get isConnectedToTarget(){return this.isConnected}onMessageFromWebview(e){!function(e,t){for(const r of Dh)if(e.substr(0,r.length)===r&&":"===e[r.length])return t(r,e.substr(r.length+1)),!0}(e,((e,t)=>this.onMessageParsed(e,t)))}dispose(){this.socket&&(this.isConnected=!1,this.socket.close(),this.socket=void 0)}onMessageParsed(e,t){if("ready"===e&&(this.dispose(),this.connectToTarget()),"websocket"===e){this.socket||this.connectToTarget();const{message:e}=JSON.parse(t);e&&"{"===e[0]&&(this.isConnected?this.socket&&this.socket.send(e):this.messages.push(e))}return this.emit(e,t)}connectToTarget(){this.socket=new Lh(this.targetUrl),this.socket.onopen=()=>this.onOpen(),this.socket.onmessage=e=>this.onMessage(e),this.socket.onerror=()=>this.onError(),this.socket.onclose=()=>this.onClose()}onOpen(){if(this.isConnected=!0,this.postMessageToDevTools("open"),this.socket){for(const e of this.messages)this.socket.send(e);this.messages=[]}}onMessage(e){this.isConnected&&this.postMessageToDevTools("message",e.data.toString())}onError(){this.isConnected&&this.postMessageToDevTools("error")}onClose(){this.isConnected&&(this.postMessageToDevTools("close"),this.emit("close")),this.isConnected=!1}}class jh extends Fh{onOpen(){this.socket&&this.registerForJsDebugSharedCDPEvents(),super.onOpen()}registerForJsDebugSharedCDPEvents(){this.socket&&this.socket.send(JSON.stringify({method:"JsDebug.subscribe",params:{events:["Runtime.*","DOM.*","CSS.*","DOMDebugger.*","Network.*","Page.*","Target.*","Overlay.*"]}}))}}const qh=rh;class Uh extends Ah.EventEmitter{constructor(e){super(),this.targetUrl=e}dispose(){this.socket&&(this.socket.close(),this.socket=void 0)}detectVersion(){this.socket=new Lh(this.targetUrl),this.socket.onopen=()=>this.onOpen(),this.socket.onmessage=e=>this.onMessage(e)}onOpen(){this.socket&&this.socket.send(JSON.stringify({id:0,method:"Browser.getVersion",params:{}}))}onMessage(e){const t=JSON.parse(e.data.toString());this.emit("setCdnParameters",this.calcBrowserRevision(t)),this.dispose()}calcBrowserRevision(e){if(0!==e.id||!e.result||!e.result.product&&!e.result.revision)return{revision:"",isHeadless:!1};const t=e.result.product.split("/"),r=t[0].includes("Headless"),n=t[1].split(".").map((e=>Number(e))),i="127.0.2592.0".split(".").map((e=>Number(e))),o=e.result.revision||"";for(let e=0;e<n.length;e++){if(n[e]>i[e])return{revision:o,isHeadless:r};if(n[e]<i[e])return{revision:qh,isHeadless:r}}return{revision:o,isHeadless:r}}}class Bh{constructor(e,t,r,n,i){this.htmlTemplate=(e,t,r,n,i)=>`<!doctype html>\n  <html>\n  <head>\n      <meta http-equiv="content-type" content="text/html; charset=utf-8">\n      <meta http-equiv="Content-Security-Policy"\n          content="default-src;\n          font-src ${e};\n          img-src 'self' data: ${e};\n          style-src 'self' 'unsafe-inline' ${e};\n          script-src 'self' 'unsafe-eval' ${e};\n          frame-src 'self' ${e};\n          connect-src 'self' data: ${e};\n      ">\n      <meta name="referrer" content="no-referrer">\n      <link href="${r}" rel="stylesheet" />\n      <link href="${t}" rel="stylesheet" />\n      <script type="module" src="${n}"><\/script>\n  </head>\n  <body>\n      <div id="main">\n          <div id="infobar"></div>\n          <div id="toolbar">\n              <button id="back" title="Back">\n                  <i class="codicon codicon-arrow-left"></i>\n              </button>\n              <button id="forward" title="Forward">\n                  <i class="codicon codicon-arrow-right"></i>\n              </button>\n              <button id="reload" title="Reload">\n                  <i class="codicon codicon-refresh"></i>\n              </button>\n              <input id="url" />\n              <button id="inspect" title="${i?"Close DevTools":"Open DevTools"}">\n                  <i class="codicon codicon-inspect ${i?"devtools-open":""}"></i>\n              </button>\n          </div>\n          <div id="canvas-wrapper">\n              <img id="canvas" draggable="false" tabindex="0" />\n          </div>\n        <div id="emulation-bar">\n            <div id="emulation-bar-right"></div>\n            <div id="emulation-bar-center"></div>\n            <div id="emulation-bar-left"></div>\n        </div>\n      </div>\n      <div id="inactive-overlay" hidden>\n        The tab is inactive\n      </div>\n  </body>\n  </html>\n  `,this.webviewCSP=e,this.cssPath=t,this.codiconsUri=r,this.inspectorUri=n,this.isDevToolsOpen=i}render(){return this.htmlTemplate(this.webviewCSP,this.cssPath,this.codiconsUri,this.inspectorUri,this.isDevToolsOpen)}}class $h{constructor(e,t,r,n,i){this.isJsDebugProxiedCDPConnection=!1,this.panel=e,this.context=t,this.targetUrl=n,this.extensionPath=this.context.extensionPath,this.telemetryReporter=r,this.screencastStartTime=Date.now(),this.isJsDebugProxiedCDPConnection=i,this.panelSocket=i?new jh(this.targetUrl,((e,t)=>this.postToWebview(e,t))):new Fh(this.targetUrl,((e,t)=>this.postToWebview(e,t))),this.panelSocket.on("close",(()=>this.onSocketClose())),this.panelSocket.on("telemetry",(e=>this.onSocketTelemetry(e))),this.panelSocket.on("writeToClipboard",(e=>this.onSaveToClipboard(e))),this.panelSocket.on("readClipboard",(()=>this.onGetClipboardText())),this.panel.onDidDispose((()=>{this.dispose(),this.panelSocket.dispose(),this.recordEnumeratedHistogram("DevTools.ScreencastToggle",0);const e=Date.now()-this.screencastStartTime;this.recordPerformanceHistogram("DevTools.ScreencastDuration",e)}),this),this.panel.onDidChangeViewState((e=>{this.panel.visible&&this.update()}),this),this.panel.webview.onDidReceiveMessage((e=>{"string"==typeof e?this.panelSocket.onMessageFromWebview(e):"type"in e&&"open-devtools"===e.type&&this.toggleDevTools()}),this),this.recordEnumeratedHistogram("DevTools.ScreencastToggle",1)}recordEnumeratedHistogram(e,t){const r={};r[`${e}.actionCode`]=t.toString(),this.telemetryReporter.sendTelemetryEvent(`devtools/${e}`,r)}recordPerformanceHistogram(e,t){const r={};r[`${e}.duration`]=t,this.telemetryReporter.sendTelemetryEvent(`devtools/${e}`,void 0,r)}dispose(){$h.instance=void 0,this.panel.dispose(),this.panelSocket.dispose(),!Wh.instance&&e.debug.activeDebugSession?.name.includes(Eh.name)&&e.commands.executeCommand("workbench.action.debug.stop")}toggleDevTools(){const t=this.targetUrl;Wh.instance?Wh.instance.dispose():e.commands.executeCommand(`${Gd}.attach`,{websocketUrl:t},this.isJsDebugProxiedCDPConnection)}toggleInspect(e){Ih((e=>this.panel.webview.postMessage(e)),"toggleInspect",{enabled:e})}onSocketClose(){this.dispose()}update(){this.panel.webview.html=this.getHtmlForWebview()}postToWebview(e,t){Ih((e=>this.panel.webview.postMessage(e)),"websocket",{event:e,message:t})}getHtmlForWebview(){const t=e.Uri.file(r.join(this.extensionPath,"out/screencast","screencast.bundle.js")),n=this.panel.webview.asWebviewUri(t),i=this.panel.webview.asWebviewUri(e.Uri.joinPath(this.context.extensionUri,"node_modules","@vscode/codicons","dist","codicon.css")),o=this.panel.webview.asWebviewUri(e.Uri.joinPath(this.context.extensionUri,"out/screencast","view.css"));return new Bh(this.panel.webview.cspSource,o,i,n,!!Wh.instance).render()}onSocketTelemetry(e){const t=JSON.parse(e);"screencast"===t.event&&this.telemetryReporter.sendTelemetryEvent(`devtools/${t.name}/${t.data.event}`,{value:t.data.value})}onSaveToClipboard(t){const r=JSON.parse(t);e.env.clipboard.writeText(r.data.message)}onGetClipboardText(){e.env.clipboard.readText().then((e=>{Ih((e=>this.panel.webview.postMessage(e)),"readClipboard",{clipboardText:e})}))}static createOrShow(t,r,n,i=!1){const o=e.ViewColumn.Beside;if($h.instance)$h.instance.dispose();else{const s=e.window.createWebviewPanel(qd,"Edge DevTools: Browser",o,{enableCommandUris:!0,enableScripts:!0,retainContextWhenHidden:!0});s.iconPath=e.Uri.joinPath(t.extensionUri,"icon.png"),$h.instance=new $h(s,t,r,n,i)}}}class Wh{constructor(t,r,n,i,o){this.disposables=[],this.mirroredCSS=new Map,this.consoleMessages=[],this.collectConsoleMessages=!0,this.fallbackChain=[],this.getFallbackRevisionFunction=()=>{},this.panel=t,this.context=r,this.telemetryReporter=n,this.extensionPath=this.context.extensionPath,this.targetUrl=i,this.config=o,this.timeStart=null,this.devtoolsBaseUri=this.config.devtoolsBaseUri||null,this.isHeadless=Oh.instance.getHeadlessSettings(),this.cssWarningActive=!1,this.config.isJsDebugProxiedCDPConnection?this.panelSocket=new jh(this.targetUrl,((e,t)=>this.postToDevTools(e,t))):this.panelSocket=new Fh(this.targetUrl,((e,t)=>this.postToDevTools(e,t))),this.panelSocket.on("ready",(()=>this.onSocketReady())),this.panelSocket.on("websocket",(e=>this.onSocketMessage(e))),this.panelSocket.on("telemetry",(e=>this.onSocketTelemetry(e))),this.panelSocket.on("getState",(e=>this.onSocketGetState(e))),this.panelSocket.on("getVscodeSettings",(e=>this.onSocketGetVscodeSettings(e))),this.panelSocket.on("setState",(e=>this.onSocketSetState(e))),this.panelSocket.on("getUrl",(e=>this.onSocketGetUrl(e))),this.panelSocket.on("openUrl",(e=>this.onSocketOpenUrl(e))),this.panelSocket.on("openInEditor",(e=>this.onSocketOpenInEditor(e))),this.panelSocket.on("toggleScreencast",(()=>this.toggleScreencast())),this.panelSocket.on("cssMirrorContent",(e=>this.onSocketCssMirrorContent(e))),this.panelSocket.on("close",(()=>this.onSocketClose())),this.panelSocket.on("copyText",(e=>this.onSocketCopyText(e))),this.panelSocket.on("focusEditor",(e=>this.onSocketFocusEditor(e))),this.panelSocket.on("focusEditorGroup",(e=>this.onSocketFocusEditorGroup(e))),this.panelSocket.on("replayConsoleMessages",(()=>this.onSocketReplayConsoleMessages())),this.panelSocket.on("devtoolsConnection",(e=>this.onSocketDevToolsConnection(e))),this.panelSocket.on("toggleCSSMirrorContent",(e=>this.onToggleCSSMirrorContent(e))),this.versionDetectionSocket=new Uh(this.targetUrl),this.fallbackChain=this.determineVersionFallback(),this.fallbackChain.length>0&&(this.getFallbackRevisionFunction=this.fallbackChain.pop()||this.getFallbackRevisionFunction),this.panel.onDidDispose((()=>{this.dispose()}),this,this.disposables),this.panel.onDidChangeViewState((e=>{this.panel.visible&&(this.panelSocket.isConnectedToTarget?this.update():this.getFallbackRevisionFunction())}),this,this.disposables),this.panel.webview.onDidReceiveMessage((e=>{this.panelSocket.onMessageFromWebview(e)}),this,this.disposables),e.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("workbench.colorTheme")&&this.panel.visible&&this.update()}))}determineVersionFallback(){const e=this.config.browserFlavor,t=this.context.globalState.get("fallbackRevision")||"",r=e=>{this.setCdnParameters({revision:e,isHeadless:this.isHeadless})},n=()=>{this.versionDetectionSocket.on("setCdnParameters",(e=>{this.setCdnParameters(e)})),this.versionDetectionSocket.detectVersion.bind(this.versionDetectionSocket)()};switch(e){case"Beta":case"Canary":case"Dev":case"Stable":return[n,()=>r(rh),()=>r(t)].reverse();default:return[()=>r(rh),n,()=>r(t)].reverse()}}dispose(){if(Wh.instance=void 0,this.panel.dispose(),this.panelSocket.dispose(),null!==this.timeStart){const e=xh.performance.now()-this.timeStart;this.telemetryReporter.sendTelemetryEvent("websocket/dispose",void 0,{sessionTime:e}),this.timeStart=null}for(;this.disposables.length;){const e=this.disposables.pop();e&&e.dispose()}!$h.instance&&e.debug.activeDebugSession?.name.includes(Eh.name)&&e.commands.executeCommand("workbench.action.debug.stop"),$h.instance&&$h.instance.update()}postToDevTools(e,t){switch(e){case"open":case"close":case"error":this.telemetryReporter.sendTelemetryEvent(`websocket/${e}`)}this.collectConsoleMessages&&t&&t.includes("Runtime.consoleAPICalled")?this.consoleMessages.push(t):Ih((e=>this.panel.webview.postMessage(e)),"websocket",{event:e,message:t})}onSocketReplayConsoleMessages(){for(const e of this.consoleMessages)Ih((e=>this.panel.webview.postMessage(e)),"websocket",{event:"message",message:e});this.consoleMessages=[],this.collectConsoleMessages=!1}onSocketReady(){this.telemetryReporter.sendTelemetryEvent(this.panelSocket.isConnectedToTarget?"websocket/reconnect":"websocket/connect"),this.timeStart=xh.performance.now()}onToggleCSSMirrorContent(e){const{isEnabled:t}=JSON.parse(e);uh(this.context,t)}onSocketMessage(t){if(t&&t.includes('\\"method\\":\\"Overlay.setInspectMode\\"'))try{const r=JSON.parse(JSON.parse(t).message);"Overlay.setInspectMode"===r.method&&("none"===r.params.mode?e.commands.executeCommand(`${Gd}.toggleInspect`,{enabled:!1}):"searchForNode"===r.params.mode&&e.commands.executeCommand(`${Gd}.toggleInspect`,{enabled:!0}))}catch{}}onSocketClose(){this.dispose(),this.collectConsoleMessages=!0}onSocketCopyText(t){const{clipboardData:r}=JSON.parse(t);e.env.clipboard.writeText(r)}onSocketFocusEditor(t){const{next:r}=JSON.parse(t);r?e.commands.executeCommand("workbench.action.nextEditor"):e.commands.executeCommand("workbench.action.previousEditor")}onSocketFocusEditorGroup(t){const{next:r}=JSON.parse(t);r?e.commands.executeCommand("workbench.action.focusNextGroup"):e.commands.executeCommand("workbench.action.focusPreviousGroup")}toggleScreencast(){const t=this.targetUrl,r=this.config.isJsDebugProxiedCDPConnection;e.commands.executeCommand(`${Gd}.toggleScreencast`,{websocketUrl:t},r)}onSocketTelemetry(e){const t=JSON.parse(e);switch(t.event){case"performance":{const e={};e[`${t.name}.duration`]=t.data,this.telemetryReporter.sendTelemetryEvent(`devtools/${t.name}`,void 0,e);break}case"enumerated":{const e={};e[`${t.name}.actionCode`]=t.data.toString(),this.telemetryReporter.sendTelemetryEvent(`devtools/${t.name}`,e);break}case"error":{const e={};e[`${t.name}.info`]=JSON.stringify(t.data),this.telemetryReporter.sendTelemetryErrorEvent(`devtools/${t.name}`,e);break}}}onSocketGetState(e){const{id:t}=JSON.parse(e);Ih((e=>this.panel.webview.postMessage(e)),"getState",{id:t,preferences:this.context.workspaceState.get(Hd)||Vd})}onSocketGetVscodeSettings(e){const{id:t}=JSON.parse(e);Ih((e=>this.panel.webview.postMessage(e)),"getVscodeSettings",{isHeadless:Oh.instance.getHeadlessSettings(),id:t})}onSocketSetState(e){const{name:t,value:r}=JSON.parse(e),n=this.context.workspaceState.get(Hd)||{};n[t]=r,this.context.workspaceState.update(Hd,n)}async onSocketGetUrl(e){const t=JSON.parse(e);let r="";try{r=await ih(t.url)}catch{}Ih((e=>this.panel.webview.postMessage(e)),"getUrl",{id:t.id,content:r})}onSocketOpenUrl(t){const{url:r}=JSON.parse(t);e.env.openExternal(e.Uri.parse(r))}async onSocketOpenInEditor(t){this.telemetryReporter.sendTelemetryEvent("extension/openInEditor",{sourceMaps:`${this.config.sourceMaps}`});const{column:r,line:n,url:i,ignoreTabChanges:o}=JSON.parse(t);if(o&&this.panel.viewColumn===e.ViewColumn.One)return;const s=await this.parseUrlToUri(i);s?this.openEditorFromUri(s,n,r):await jd.showErrorDialog({errorCode:0,title:"Error while opening file in editor.",message:`Could not open document. No workspace mapping was found for '${i}'.`})}async onSocketCssMirrorContent(e){if(!lh(this.context))return;const{url:t,newContent:r}=JSON.parse(e),n=await this.parseUrlToUri(t);if(n){const e=await this.openEditorFromUri(n);if(e){const n=this.getDocumentFullRange(e),i=this.mirroredCSS.get(t),o=e.document.getText(),s=i===o;let a=!e.document.isDirty||s;a||(a=(i&&i.replace(/\r\n/g,"\n"))===(o&&o.replace(/\r\n/g,"\n"))),a?(this.mirroredCSS.set(t,r),e.edit((e=>{e.replace(n,r)}))):this.showCssMirroringWarning()}}else await jd.showErrorDialog({errorCode:0,title:"Error while mirroring css content to document.",message:`Could not mirror css changes to document. No workspace mapping was found for '${t}'.`})}onSocketDevToolsConnection(e){"true"===e?(this.context.globalState.update("fallbackRevision",this.currentRevision),this.fallbackChain=this.determineVersionFallback()):(this.currentRevision&&this.telemetryReporter.sendTelemetryEvent("websocket/failedConnection",{revision:this.currentRevision}),this.fallbackChain.length>0&&(this.getFallbackRevisionFunction=this.fallbackChain.pop()||(()=>{}),this.getFallbackRevisionFunction()))}async openEditorFromUri(t,r,n){try{const i=await e.workspace.openTextDocument(t),o=this.panel.viewColumn===e.ViewColumn.One?e.ViewColumn.Beside:e.ViewColumn.One,s=void 0!==r&&void 0!==n?new e.Range(r,n,r,n):void 0;return await e.window.showTextDocument(i,{preserveFocus:!0,viewColumn:o,selection:s})}catch(e){await jd.showErrorDialog({errorCode:0,title:"Error while opening file in editor.",message:e instanceof Error&&e.message?e.message:`Unexpected error ${e}`})}}getDocumentFullRange(t){const r=t.document.lineAt(0),n=t.document.lineAt(t.document.lineCount-1);return new e.Range(r.range.start,n.range.end)}async parseUrlToUri(r){let n=r,i=!1;if(this.config.defaultEntrypoint)try{const e=n;n=function(e,t){const r=new URL(e);return r.pathname&&"/"!==r.pathname?e:e.endsWith("/")?`${e}${t}`:`${e}/${t}`}(n,this.config.defaultEntrypoint),i=e!==n}catch{return void await jd.showInformationDialog({errorCode:0,title:"Unable to open file in editor.",message:`'${n}' is not a valid url.`})}this.config.sourceMaps&&(n=function(r,n){const i=r.replace(/\\/g,"/"),o=Object.keys(n).sort(((e,t)=>t.length-e.length));for(const r of o){const o=n[r],s=r.match(/\*/g)||[];if(s.length>1)continue;if((o.match(/\*/g)||[]).length>s.length)continue;const a=t.utils.escapeRegexSpecialChars(r,"/*").replace(/\*/g,"(.*)").replace(/\\\\/g,"/"),c=new RegExp(`^${a}$`,"i").exec(i);if(!c)continue;const l=c[1];let u=o.replace(/\*/g,l);return e.env.remoteName||(u=t.utils.properJoin(u),u=gh(u)),u}return r}(n,this.config.sourceMapPathOverrides));const o=new t.UrlPathTransformer;o.launch({pathMapping:this.config.pathMapping});const s={path:n,origin:"invalid-origin://"};if(await o.fixSource(s),!s.origin)return e.Uri.file(s.path);const a=` Consider updating the 'Default Entrypoint' setting to map to your root html page. The current setting is '${this.config.defaultEntrypoint}'.`;await jd.showInformationDialog({errorCode:0,title:"Unable to open file in editor.",message:`${n} does not map to a local file.${i?a:""}`})}async showCssMirroringWarning(){this.cssWarningActive||(this.cssWarningActive=!0,await e.window.showWarningMessage("DevTools will not mirror CSS changes while there are unsaved direct edits. Save your changes then refresh the target page to re-enable."),this.cssWarningActive=!1)}update(){this.panel.webview.html=this.getCdnHtmlForWebview()}getCdnHtmlForWebview(){const t=this.config.devtoolsBaseUri||this.devtoolsBaseUri,n=e.Uri.file(r.join(this.extensionPath,"out","host","host.bundle.js")),i=this.panel.webview.asWebviewUri(n),o=e.Uri.file(r.join(this.extensionPath,"out","common","styles.css")),s=this.panel.webview.asWebviewUri(o),a=Oh.instance.getThemeFromUserSetting(),c=lh(this.context);return`\n            <!doctype html>\n            <html>\n            <head>\n                <meta http-equiv="content-type" content="text/html; charset=utf-8">\n                <meta name="referrer" content="no-referrer">\n                <link href="${s}" rel="stylesheet"/>\n                <script src="${i}"><\/script>\n                <meta http-equiv="Content-Security-Policy"\n                    content="default-src;\n                    img-src 'self' data: ${this.panel.webview.cspSource};\n                    style-src 'self' 'unsafe-inline' ${this.panel.webview.cspSource};\n                    script-src 'self' 'unsafe-eval' ${this.panel.webview.cspSource};\n                    frame-src 'self' ${this.panel.webview.cspSource} ${t};\n                    connect-src 'self' data: ${this.panel.webview.cspSource};\n                ">\n            </head>\n            <body>\n                <iframe id="devtools-frame" frameBorder="0" src="${t}?experiments=true&theme=${a}&standaloneScreencast=true&cssMirrorContent=${c}"></iframe>\n                <div id="error-message" class="hidden">\n                    <h1>Unable to download DevTools for the current target.</h1>\n                    <p>Try these troubleshooting steps:</p>\n                    <ol>\n                    <li>Check your network connection</li>\n                    <li>Close and re-launch the DevTools</li>\n                    </ol>\n                    <p>If this problem continues, please <a target="_blank" href="https://github.com/microsoft/vscode-edge-devtools/issues/new?template=bug_report.md">file an issue.</a></p>\n                </div>\n            </body>\n            </html>\n            `}setCdnParameters(e){this.currentRevision=e.revision,this.devtoolsBaseUri=`https://devtools.azureedge.net/serve_file/${this.currentRevision}/vscode_app.html`,this.isHeadless=e.isHeadless,this.update(),this.isHeadless&&($h.instance||$h.createOrShow(this.context,this.telemetryReporter,this.targetUrl,this.config.isJsDebugProxiedCDPConnection))}static createOrShow(t,r,n,i){const o=e.ViewColumn.Beside;if(Wh.instance&&Wh.instance.targetUrl===n)Wh.instance.panel.reveal(o);else{Wh.instance&&Wh.instance.dispose();const s=e.window.createWebviewPanel(qd,"Edge DevTools",o,{enableCommandUris:!0,enableScripts:!0,retainContextWhenHidden:!0});s.iconPath=e.Uri.joinPath(t.extensionUri,"icon.png"),Wh.instance=new Wh(s,t,r,n,i),$h.instance&&$h.instance.update()}}}class Hh{constructor(e,t,r,n){this.context=e,this.telemetryReporter=t,this.attach=r,this.launch=n}provideDebugConfigurations(e,t){return Promise.resolve([Sh])}resolveDebugConfiguration(t,r,n){const i=r,o=r&&!r.type&&!r.request&&!r.name;if(r&&r.type===`${qd}.debug`||o){const e=this.getUrlFromConfig(t,r);r.request&&"attach"===r.request?(this.telemetryReporter.sendTelemetryEvent("debug/attach"),this.attach(this.context,e,i,!0)):(r.request&&"launch"===r.request||o)&&(this.telemetryReporter.sendTelemetryEvent("debug/launch"),this.launch(this.context,e,i))}else this.telemetryReporter.sendTelemetryEvent("debug/error/config_not_found"),e.window.showErrorMessage("No supported launch config was found.")}getUrlFromConfig(e,t){let r="";return t.file?(r=t.file,e&&(r=r.replace("${workspaceFolder}",e.uri.path)),r=(r.startsWith("/")?"file://":"file:///")+r):t.url?r=t.url:t.urlFilter&&(r=t.urlFilter),r}}var Vh=o(4720);let Gh,Kh,zh,Xh;const Jh="Microsoft Edge Tools";function Yh(t){Gh||(Gh=ch(t)),e.languages.registerHoverProvider(bh(),{provideHover(t,r){const n=e.languages.getDiagnostics(t.uri);for(const e of n)e.source===Jh&&_h(r,e.range)&&e.code&&Gh.sendTelemetryEvent("user/webhint/hover",{hint:e.code.value});return null}}),Ph.instance.updateLaunchConfig(),t.subscriptions.push(e.commands.registerCommand(`${qd}.attach`,(()=>{np(t)}))),t.subscriptions.push(e.commands.registerCommand(`${qd}.launch`,(()=>{op(t)}))),t.subscriptions.push(e.commands.registerCommand(`${qd}.attachToCurrentDebugTarget`,((e,r)=>{ip(t,e,r)}))),e.debug.registerDebugConfigurationProvider(`${qd}.debug`,new Hh(t,Gh,np,op)),zh=new Rh(t,Gh),t.subscriptions.push(e.window.registerTreeDataProvider(`${Gd}.targets`,zh)),t.subscriptions.push(e.commands.registerCommand(`${Gd}.launch`,(async e=>{e?Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.emptyTargetListLaunchBrowserInstance}):Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.launchBrowserInstance}),await op(t),zh.refresh()}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.refresh`,(()=>{Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.refreshTargetList}),zh.refresh()}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.attach`,((e,r=!1)=>{if(!e)return void Gh.sendTelemetryEvent("command/attach/noTarget");Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.attachToTarget}),Gh.sendTelemetryEvent("view/devtools");const n=ph();r&&(n.isJsDebugProxiedCDPConnection=!0),Wh.createOrShow(t,Gh,e.websocketUrl,n)}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.toggleScreencast`,((e,r=!1)=>{if(e)Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.toggleScreencast}),Gh.sendTelemetryEvent("view/screencast"),$h.createOrShow(t,Gh,e.websocketUrl,r);else{const e="No target selected";Gh.sendTelemetryErrorEvent("command/screencast/target",{message:e})}}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.toggleInspect`,(e=>{$h.instance&&$h.instance.toggleInspect(e)}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.openSettings`,(()=>{Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.openSettings}),e.commands.executeCommand("workbench.action.openSettings",`${qd}`)}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.viewChangelog`,(()=>{Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.viewChangelog}),e.env.openExternal(e.Uri.parse("https://github.com/microsoft/vscode-edge-devtools/blob/main/CHANGELOG.md"))}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.close-instance`,(async e=>{if(!e)return void Gh.sendTelemetryEvent("command/close/noTarget");Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.closeTarget}),e.contextValue="cdpTargetClosing",zh.changeDataEvent.fire(e),zh.refresh();const t=new URL(e.description).toString();if(Kh){const e=await Kh.pages();if(!e||0===e.length)return void Kh.close();for(const r of e)if(!r.isClosed()&&t===r.target().url()){r.close();break}zh.refresh()}}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.copyItem`,(t=>e.env.clipboard.writeText(t.tooltip)))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.configureLaunchJson`,(()=>{Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":"None"===Ph.instance.getLaunchConfig()?nh.generateLaunchJson:nh.configureLaunchJson}),Ph.instance.configureLaunchJson()}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.launchProject`,(()=>{if(Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.launchProject}),Ph.instance.updateLaunchConfig(),e.workspace.workspaceFolders){const t=e.workspace.workspaceFolders[0];if(Ph.instance.isValidLaunchConfig())e.debug.startDebugging(t,Ph.instance.getLaunchConfig());else{const r="Auto-configure launch.json and launch project";e.window.showErrorMessage("Cannot launch a project without a valid launch.json. Please open a folder in the editor.",r).then((n=>{n===r&&Ph.instance.configureLaunchJson().then((()=>e.debug.startDebugging(t,Ph.instance.getLaunchConfig())))}))}zh.refresh()}else{const t="Open Folder";e.window.showErrorMessage("Cannot launch a project for an empty workspace. Please open a folder in the editor and try again.",t).then((r=>{r===t&&e.commands.executeCommand("workbench.action.files.openFolder")}))}}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.viewDocumentation`,(()=>{Gh.sendTelemetryEvent("user/buttonPress",{"VSCode.buttonCode":nh.viewDocumentation}),e.env.openExternal(e.Uri.parse("https://learn.microsoft.com/microsoft-edge/visual-studio-code/microsoft-edge-devtools-extension"))}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.cssMirrorContent`,(()=>{const e=lh(t);uh(t,!e)}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.launchHtml`,(async e=>{Gh.sendTelemetryEvent("contextMenu/launchHtml"),await Qh(e)}))),t.subscriptions.push(e.commands.registerCommand(`${Gd}.launchScreencast`,(async e=>{Gh.sendTelemetryEvent("contextMenu/launchScreencast"),await Zh(t,e)}))),e.commands.executeCommand("setContext","titleCommandsRegistered",!0),async function(t){const r=await e.workspace.findFiles("**/*.*","**/node_modules/**"),n=new Map([["html",0],["css",0],["js",0],["ts",0],["jsx",0],["scss",0],["json",0],["mjs",0],["other",0]]);for(const e of r){const t=e.path.split(".").pop();if(t)if(n.has(t)){const e=n.get(t);void 0!==e&&n.set(t,e+1)}else{const e=n.get("other");void 0!==e&&n.set("other",e+1)}}n.set("total",r.length);const i={};Object.assign(i,...[...n.entries()].map((([e,t])=>({[e]:t})))),t.sendTelemetryEvent("workspace/metadata",void 0,i)}(Gh),function(t){const r=Object.entries(e.workspace.getConfiguration(qd)).splice(4),n=e.workspace.getConfiguration(qd),i=new Map;for(const e of r){const t=e[0],r=e[1],o=n.inspect(t);if(o){const e=o.defaultValue;if(void 0!==r&&r!==e)if(e&&"object"==typeof e&&"object"==typeof r){for(const[n,o]of Object.entries(e))if(r[n]!==o){i.set(t,JSON.stringify(r));break}}else i.set(t,r.toString())}}const o={};Object.assign(o,...[...i.entries()].map((([e,t])=>({[e]:t})))),t.sendTelemetryEvent("user/settingsChangedAtLaunch",o)}(Gh),e.workspace.onDidChangeConfiguration((t=>function(t,r){const n=Object.entries(e.workspace.getConfiguration(qd)).splice(4);for(const e of n){const n=e[0],i=e[1];if(t.affectsConfiguration(`${qd}.${n}`)&&void 0!==n&&void 0!==i){const e={},t="object"!=typeof i?i.toString():JSON.stringify(i);e[n]=t,r.sendTelemetryEvent("user/settingsChanged",e)}}}(t,Gh))),e.workspace.getConfiguration(qd).get("webhint")&&ep(t),e.workspace.onDidChangeConfiguration((r=>{r.affectsConfiguration(`${qd}.webhint`)&&(e.workspace.getConfiguration(qd).get("webhint")?ep(t):tp())}))}async function Qh(t){const r=Eh,n=Ch;if(e.env.remoteName){const i=`file://${e.env.remoteName}.localhost/${t.authority.split("+")[1]}/${t.fsPath.replace(/\\/g,"/")}`;r.url=i,n.url=i;const{port:o,userDataDir:s}=ah(),a=await dh();await hh(a,o,i,s,!0).then((()=>e.debug.startDebugging(void 0,n)))}else r.url=`file://${t.fsPath}`,n.url=`file://${t.fsPath}`,e.debug.startDebugging(void 0,r).then((()=>e.debug.startDebugging(void 0,n)))}async function Zh(t,r){const n=Eh;if(e.env.remoteName){const i=`file://${e.env.remoteName}.localhost/${r.authority.split("+")[1]}/${r.fsPath.replace(/\\/g,"/")}`;n.url=i;const{port:o,userDataDir:s}=ah(),a=await dh();await hh(a,o,i,s,!0).then((()=>np(t,i,void 0,!0,!0)))}else n.url=`file://${r.fsPath}`,e.debug.startDebugging(void 0,n).then((()=>np(t,r.fsPath,void 0,!0,!0)))}async function ep(t){const r=[t.globalStoragePath,Jh],n=t.asAbsolutePath("node_modules/vscode-webhint/dist/src/server.js"),i=Vh.TransportKind.ipc,o={debug:{args:r,module:n,options:{execArgv:["--nolazy","--inspect=6009"]},transport:i},run:{args:r,module:n,transport:i}},s={documentSelector:bh(),synchronize:{fileEvents:e.workspace.createFileSystemWatcher("**/.hintrc")},middleware:{executeCommand:(e,r,n)=>{const i=r[0],o=r[1];switch(Gh||(Gh=ch(t)),e){case"vscode-webhint/ignore-hint-project":Gh.sendTelemetryEvent("user/webhint/quickfix/disable-hint",{hint:i});break;case"vscode-webhint/ignore-feature-project":Gh.sendTelemetryEvent("user/webhint/quickfix/disable-rule",{hint:i,value:o});break;case"vscode-webhint/edit-hintrc-project":Gh.sendTelemetryEvent("user/webhint/quickfix/edit-hintrc");break;case"vscode-webhint/ignore-browsers-project":if(r.length>1){const e=r[2].browsers;Gh.sendTelemetryEvent("user/webhint/quickfix/ignore-browsers",{hint:i,value:e.join(",")})}break;case"vscode-webhint/apply-code-fix":Gh.sendTelemetryEvent("user/webhint/quickfix/apply-code-fix",{value:o})}return n(e,r)}}};Xh=new Vh.LanguageClient("Microsoft Edge Tools",o,s);const a=e.workspace.getConfiguration(qd).get("webhintInstallNotification");Xh.onNotification("vscode-webhint/install-failed",(()=>{if(Gh||(Gh=ch(t)),Gh.sendTelemetryEvent("user/webhint/install-failed"),!a){const t="Ensure `node` and `npm` are installed to enable automatically reporting issues in source files pertaining to accessibility, compatibility, security, and more.";e.window.showInformationMessage(t,"Remind me Later","Don't show again","Disable Extension").then((t=>{"Disable Extension"===t&&e.workspace.getConfiguration(qd).update("webhint",!1,e.ConfigurationTarget.Global),"Don't show again"===t&&e.workspace.getConfiguration(qd).update("webhintInstallNotification",!0,e.ConfigurationTarget.Global)}))}})),Xh.onNotification("vscode-webhint/show-output",(()=>{Xh.outputChannel.clear(),Xh.outputChannel.show(!0)})),await Xh.start()}async function tp(){Xh&&await Xh.stop()}const rp=()=>tp();async function np(r,n,i,o,s){Gh||(Gh=ch(r));const a={viaConfig:`${!!i}`,withTargetUrl:`${!!n}`},{hostname:c,port:l,useHttps:u,timeout:d}=ah(i),h=Date.now();let p,f=[];do{try{f=await t.utils.retryAsync((()=>sh(c,l,u)),d,Qd)}catch(e){p=e}if(f.length>0){let a="";if(n){let r;try{r=t.chromeUtils.getMatchingTargets(f,n)}catch(e){jd.showErrorDialog({errorCode:0,title:"Error while getting a debug connection to the target",message:e instanceof Error&&e.message?e.message:`Unexpected error ${e}`}),r=void 0}r&&r.length>0&&r[0].webSocketDebuggerUrl?a=oh(c,l,r[0]).webSocketDebuggerUrl:o||e.window.showErrorMessage(`Couldn't attach to ${n}.`)}if(a){o=!1;const e=ph(i);s?$h.createOrShow(r,Gh,a,!1):Wh.createOrShow(r,Gh,a,e)}else if(o)await new Promise((e=>{setTimeout((()=>{e()}),Qd)}));else{const t=f.map((e=>({description:(e=oh(c,l,e)).url,detail:e.webSocketDebuggerUrl,label:e.title}))),n=await e.window.showQuickPick(t);if(n&&n.detail){const e=ph(i);s?$h.createOrShow(r,Gh,n.detail,!1):Wh.createOrShow(r,Gh,n.detail,e)}}}}while(o&&Date.now()-h<d);0===f.length&&(jd.showErrorDialog({errorCode:0,title:"Error while fetching list of available targets",message:p||"No available targets to attach."}),Gh.sendTelemetryEvent("command/attach/error/no_json_array",a))}async function ip(t,r,n){Gh||(Gh=ch(t)),Gh.sendTelemetryEvent("command/attachToCurrentDebugTarget");const i=r||function(){const t=e.debug.activeDebugSession;return t?t.id:void 0}();if(!i){const t="No active debug session";return Gh.sendTelemetryErrorEvent("command/attachToCurrentDebugTarget/devtools",{message:t}),void e.window.showErrorMessage(t)}const o=await async function(t){try{const r=!0,n=await e.commands.executeCommand("extension.js-debug.requestCDPProxy",t,r);if(n)return`ws://${n.host}:${n.port}${n.path||""}`}catch(e){if(e instanceof Error)return e;jd.showErrorDialog({errorCode:0,title:"Error while creating the debug socket for CDP target.",message:`Unexpected error ${e}`})}}(i);if(o instanceof Error)Gh.sendTelemetryErrorEvent("command/attachToCurrentDebugTarget/devtools",{message:o.message}),e.window.showErrorMessage(o.message);else if(o){Gh.sendTelemetryEvent("command/attachToCurrentDebugTarget/devtools");const e=ph(n);e.isJsDebugProxiedCDPConnection=!0,Wh.createOrShow(t,Gh,o,e)}else{const t="Unable to attach DevTools to current debug session.";Gh.sendTelemetryErrorEvent("command/attachToCurrentDebugTarget/devtools",{message:t}),e.window.showErrorMessage(t)}}async function op(t,r,n){Gh||(Gh=ch(t));const i=e.workspace.getConfiguration(qd),o={viaConfig:`${!!n}`,browserType:i.get("browserFlavor")||"Default",isHeadless:i.get("headless")||"false"};Gh.sendTelemetryEvent("command/launch",o);const{hostname:s,port:a,defaultUrl:c,userDataDir:l}=ah(n),u=r||c,d=await async function(e,t,r){try{const n=await ih(`http://${e}:${t}/json/new?${r||""}`);return JSON.parse(n)}catch{return}}(s,a,u);if(d&&d.webSocketDebuggerUrl){Gh.sendTelemetryEvent("command/launch/devtools",o);const e=ph(n);Wh.createOrShow(t,Gh,d.webSocketDebuggerUrl,e)}else{const r=await dh(n);if(!r)return Gh.sendTelemetryEvent("command/launch/error/browser_not_found",o),void e.window.showErrorMessage("Microsoft Edge could not be found. Ensure you have installed Microsoft Edge and that you have selected 'default' or the appropriate version of Microsoft Edge in the extension settings panel.");const i=r.split(/\\|\//).pop();if(!i)return;const s=i.match(/(chrome|edge)/gi)||[],c=s.length>0?s[0]:"other",d={exe:`${c?.toLowerCase()}`};Gh.sendTelemetryEvent("command/launch/browser",d),Kh=await hh(r,a,u,l),u!==Wd&&vh(u,Gh),Kh.on("targetcreated",(()=>{zh.refresh()})),Kh.on("targetdestroyed",(()=>{zh.refresh()})),Kh.on("targetchanged",(e=>{"page"===e.type()&&vh(e.url(),Gh)})),await np(t,u,n)}}})(),module.exports=s})();
//# sourceMappingURL=extension.js.map