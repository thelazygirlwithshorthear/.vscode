"use strict";var dl=Object.create;var Ms=Object.defineProperty;var ll=Object.getOwnPropertyDescriptor;var fl=Object.getOwnPropertyNames;var hl=Object.getPrototypeOf,gl=Object.prototype.hasOwnProperty;var M=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ml=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of fl(t))!gl.call(e,i)&&i!==n&&Ms(e,i,{get:()=>t[i],enumerable:!(r=ll(t,i))||r.enumerable});return e};var Kn=(e,t,n)=>(n=e!=null?dl(hl(e)):{},ml(t||!e||!e.__esModule?Ms(n,"default",{value:e,enumerable:!0}):n,e));var nr=M(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.thenable=ye.typedArray=ye.stringArray=ye.array=ye.func=ye.error=ye.number=ye.string=ye.boolean=void 0;function yl(e){return e===!0||e===!1}ye.boolean=yl;function xs(e){return typeof e=="string"||e instanceof String}ye.string=xs;function vl(e){return typeof e=="number"||e instanceof Number}ye.number=vl;function bl(e){return e instanceof Error}ye.error=bl;function Is(e){return typeof e=="function"}ye.func=Is;function js(e){return Array.isArray(e)}ye.array=js;function _l(e){return js(e)&&e.every(t=>xs(t))}ye.stringArray=_l;function Dl(e,t){return Array.isArray(e)&&e.every(t)}ye.typedArray=Dl;function Rl(e){return e&&Is(e.then)}ye.thenable=Rl});var Vt=M(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.stringArray=Te.array=Te.func=Te.error=Te.number=Te.string=Te.boolean=void 0;function Pl(e){return e===!0||e===!1}Te.boolean=Pl;function Ls(e){return typeof e=="string"||e instanceof String}Te.string=Ls;function Tl(e){return typeof e=="number"||e instanceof Number}Te.number=Tl;function wl(e){return e instanceof Error}Te.error=wl;function Cl(e){return typeof e=="function"}Te.func=Cl;function As(e){return Array.isArray(e)}Te.array=As;function Sl(e){return As(e)&&e.every(t=>Ls(t))}Te.stringArray=Sl});var Xi=M(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.Message=I.NotificationType9=I.NotificationType8=I.NotificationType7=I.NotificationType6=I.NotificationType5=I.NotificationType4=I.NotificationType3=I.NotificationType2=I.NotificationType1=I.NotificationType0=I.NotificationType=I.RequestType9=I.RequestType8=I.RequestType7=I.RequestType6=I.RequestType5=I.RequestType4=I.RequestType3=I.RequestType2=I.RequestType1=I.RequestType=I.RequestType0=I.AbstractMessageSignature=I.ParameterStructures=I.ResponseError=I.ErrorCodes=void 0;var kt=Vt(),Pi;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(Pi||(I.ErrorCodes=Pi={}));var Ti=class e extends Error{constructor(t,n,r){super(n),this.code=kt.number(t)?t:Pi.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,e.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};I.ResponseError=Ti;var qe=class e{constructor(t){this.kind=t}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};I.ParameterStructures=qe;qe.auto=new qe("auto");qe.byPosition=new qe("byPosition");qe.byName=new qe("byName");var ce=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return qe.auto}};I.AbstractMessageSignature=ce;var wi=class extends ce{constructor(t){super(t,0)}};I.RequestType0=wi;var Ci=class extends ce{constructor(t,n=qe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};I.RequestType=Ci;var Si=class extends ce{constructor(t,n=qe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};I.RequestType1=Si;var ki=class extends ce{constructor(t){super(t,2)}};I.RequestType2=ki;var Ni=class extends ce{constructor(t){super(t,3)}};I.RequestType3=Ni;var qi=class extends ce{constructor(t){super(t,4)}};I.RequestType4=qi;var Mi=class extends ce{constructor(t){super(t,5)}};I.RequestType5=Mi;var Oi=class extends ce{constructor(t){super(t,6)}};I.RequestType6=Oi;var Ei=class extends ce{constructor(t){super(t,7)}};I.RequestType7=Ei;var xi=class extends ce{constructor(t){super(t,8)}};I.RequestType8=xi;var Ii=class extends ce{constructor(t){super(t,9)}};I.RequestType9=Ii;var ji=class extends ce{constructor(t,n=qe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};I.NotificationType=ji;var Li=class extends ce{constructor(t){super(t,0)}};I.NotificationType0=Li;var Ai=class extends ce{constructor(t,n=qe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};I.NotificationType1=Ai;var Fi=class extends ce{constructor(t){super(t,2)}};I.NotificationType2=Fi;var Wi=class extends ce{constructor(t){super(t,3)}};I.NotificationType3=Wi;var Hi=class extends ce{constructor(t){super(t,4)}};I.NotificationType4=Hi;var $i=class extends ce{constructor(t){super(t,5)}};I.NotificationType5=$i;var Ui=class extends ce{constructor(t){super(t,6)}};I.NotificationType6=Ui;var zi=class extends ce{constructor(t){super(t,7)}};I.NotificationType7=zi;var Vi=class extends ce{constructor(t){super(t,8)}};I.NotificationType8=Vi;var Bi=class extends ce{constructor(t){super(t,9)}};I.NotificationType9=Bi;var Fs;(function(e){function t(i){let c=i;return c&&kt.string(c.method)&&(kt.string(c.id)||kt.number(c.id))}e.isRequest=t;function n(i){let c=i;return c&&kt.string(c.method)&&i.id===void 0}e.isNotification=n;function r(i){let c=i;return c&&(c.result!==void 0||!!c.error)&&(kt.string(c.id)||kt.number(c.id)||c.id===null)}e.isResponse=r})(Fs||(I.Message=Fs={}))});var Yi=M(lt=>{"use strict";var Ws;Object.defineProperty(lt,"__esModule",{value:!0});lt.LRUCache=lt.LinkedMap=lt.Touch=void 0;var we;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(we||(lt.Touch=we={}));var rr=class{constructor(){this[Ws]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=we.None){let r=this._map.get(t);if(r)return n!==we.None&&this.touch(r,n),r.value}set(t,n,r=we.None){let i=this._map.get(t);if(i)i.value=n,r!==we.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case we.None:this.addItemLast(i);break;case we.First:this.addItemFirst(i);break;case we.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Ws=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==we.First&&n!==we.Last)){if(n===we.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===we.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};lt.LinkedMap=rr;var Ji=class extends rr{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=we.AsNew){return super.get(t,n)}peek(t){return super.get(t,we.None)}set(t,n){return super.set(t,n,we.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};lt.LRUCache=Ji});var $s=M(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.Disposable=void 0;var Hs;(function(e){function t(n){return{dispose:n}}e.create=t})(Hs||(ir.Disposable=Hs={}))});var ft=M(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});var Gi;function Qi(){if(Gi===void 0)throw new Error("No runtime abstraction layer installed");return Gi}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Gi=n}e.install=t})(Qi||(Qi={}));Zi.default=Qi});var Xt=M(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.Emitter=Bt.Event=void 0;var kl=ft(),Us;(function(e){let t={dispose(){}};e.None=function(){return t}})(Us||(Bt.Event=Us={}));var Ki=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,c=this._callbacks.length;i<c;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let c=0,h=r.length;c<h;c++)try{n.push(r[c].apply(i[c],t))}catch(g){(0,kl.default)().console.error(g)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},or=class e{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new Ki),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Bt.Emitter=or;or._noop=function(){}});var cr=M(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.CancellationTokenSource=Jt.CancellationToken=void 0;var Nl=ft(),ql=Vt(),eo=Xt(),sr;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:eo.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:eo.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||ql.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(sr||(Jt.CancellationToken=sr={}));var Ml=Object.freeze(function(e,t){let n=(0,Nl.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),ar=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ml:(this._emitter||(this._emitter=new eo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},to=class{get token(){return this._token||(this._token=new ar),this._token}cancel(){this._token?this._token.cancel():this._token=sr.Cancelled}dispose(){this._token?this._token instanceof ar&&this._token.dispose():this._token=sr.None}};Jt.CancellationTokenSource=to});var zs=M(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.SharedArrayReceiverStrategy=Yt.SharedArraySenderStrategy=void 0;var Ol=cr(),Rn;(function(e){e.Continue=0,e.Cancelled=1})(Rn||(Rn={}));var no=class{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=Rn.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,Rn.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}};Yt.SharedArraySenderStrategy=no;var ro=class{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Rn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},io=class{constructor(t){this.token=new ro(t)}cancel(){}dispose(){}},oo=class{constructor(){this.kind="request"}createCancellationTokenSource(t){let n=t.$cancellationData;return n===void 0?new Ol.CancellationTokenSource:new io(n)}};Yt.SharedArrayReceiverStrategy=oo});var ao=M(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.Semaphore=void 0;var El=ft(),so=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,El.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};ur.Semaphore=so});var Bs=M(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.ReadableStreamMessageReader=ht.AbstractMessageReader=ht.MessageReader=void 0;var uo=ft(),Gt=Vt(),co=Xt(),xl=ao(),Vs;(function(e){function t(n){let r=n;return r&&Gt.func(r.listen)&&Gt.func(r.dispose)&&Gt.func(r.onError)&&Gt.func(r.onClose)&&Gt.func(r.onPartialMessage)}e.is=t})(Vs||(ht.MessageReader=Vs={}));var dr=class{constructor(){this.errorEmitter=new co.Emitter,this.closeEmitter=new co.Emitter,this.partialMessageEmitter=new co.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${Gt.string(t.message)?t.message:"unknown"}`)}};ht.AbstractMessageReader=dr;var lo;(function(e){function t(n){let r,i,c,h=new Map,g,S=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(c=n.contentDecoder,h.set(c.name,c)),n.contentDecoders!==void 0)for(let w of n.contentDecoders)h.set(w.name,w);if(n.contentTypeDecoder!==void 0&&(g=n.contentTypeDecoder,S.set(g.name,g)),n.contentTypeDecoders!==void 0)for(let w of n.contentTypeDecoders)S.set(w.name,w)}return g===void 0&&(g=(0,uo.default)().applicationJson.decoder,S.set(g.name,g)),{charset:r,contentDecoder:c,contentDecoders:h,contentTypeDecoder:g,contentTypeDecoders:S}}e.fromOptions=t})(lo||(lo={}));var fo=class extends dr{constructor(t,n){super(),this.readable=t,this.options=lo.fromOptions(n),this.buffer=(0,uo.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new xl.Semaphore(1)}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let c=parseInt(i);if(isNaN(c)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=c}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,uo.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ht.ReadableStreamMessageReader=fo});var Qs=M(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.WriteableStreamMessageWriter=gt.AbstractMessageWriter=gt.MessageWriter=void 0;var Xs=ft(),Pn=Vt(),Il=ao(),Js=Xt(),jl="Content-Length: ",Ys=`\r
`,Gs;(function(e){function t(n){let r=n;return r&&Pn.func(r.dispose)&&Pn.func(r.onClose)&&Pn.func(r.onError)&&Pn.func(r.write)}e.is=t})(Gs||(gt.MessageWriter=Gs={}));var lr=class{constructor(){this.errorEmitter=new Js.Emitter,this.closeEmitter=new Js.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${Pn.string(t.message)?t.message:"unknown"}`)}};gt.AbstractMessageWriter=lr;var ho;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Xs.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Xs.default)().applicationJson.encoder}}e.fromOptions=t})(ho||(ho={}));var go=class extends lr{constructor(t,n){super(),this.writable=t,this.options=ho.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Il.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(jl,r.byteLength.toString(),Ys),i.push(Ys),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};gt.WriteableStreamMessageWriter=go});var Zs=M(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.AbstractMessageBuffer=void 0;var Ll=13,Al=10,Fl=`\r
`,mo=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,c=0;e:for(;r<this._chunks.length;){let w=this._chunks[r];for(i=0;i<w.length;){switch(w[i]){case Ll:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Al:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}c+=w.byteLength,r++}if(n!==4)return;let h=this._read(c+i),g=new Map,S=this.toString(h,"ascii").split(Fl);if(S.length<2)return g;for(let w=0;w<S.length-2;w++){let b=S[w],q=b.indexOf(":");if(q===-1)throw new Error(`Message header must separate key and value using ':'
${b}`);let O=b.substr(0,q),$=b.substr(q+1).trim();g.set(t?O.toLowerCase():O,$)}return g}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let c=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(c)}if(this._chunks[0].byteLength>t){let c=this._chunks[0],h=this.asNative(c,t);return this._chunks[0]=c.slice(t),this._totalLength-=t,h}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let c=this._chunks[i];if(c.byteLength>t){let h=c.slice(0,t);n.set(h,r),r+=t,this._chunks[i]=c.slice(t),this._totalLength-=t,t-=t}else n.set(c,r),r+=c.byteLength,this._chunks.shift(),this._totalLength-=c.byteLength,t-=c.byteLength}return n}};fr.AbstractMessageBuffer=mo});var ra=M(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.createMessageConnection=H.ConnectionOptions=H.MessageStrategy=H.CancellationStrategy=H.CancellationSenderStrategy=H.CancellationReceiverStrategy=H.RequestCancellationReceiverStrategy=H.IdCancellationReceiverStrategy=H.ConnectionStrategy=H.ConnectionError=H.ConnectionErrors=H.LogTraceNotification=H.SetTraceNotification=H.TraceFormat=H.TraceValues=H.Trace=H.NullLogger=H.ProgressType=H.ProgressToken=void 0;var Ks=ft(),le=Vt(),L=Xi(),ea=Yi(),Tn=Xt(),po=cr(),Sn;(function(e){e.type=new L.NotificationType("$/cancelRequest")})(Sn||(Sn={}));var yo;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(yo||(H.ProgressToken=yo={}));var wn;(function(e){e.type=new L.NotificationType("$/progress")})(wn||(wn={}));var vo=class{constructor(){}};H.ProgressType=vo;var bo;(function(e){function t(n){return le.func(n)}e.is=t})(bo||(bo={}));H.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var ee;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(ee||(H.Trace=ee={}));var ta;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(ta||(H.TraceValues=ta={}));(function(e){function t(r){if(!le.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(ee||(H.Trace=ee={}));var Le;(function(e){e.Text="text",e.JSON="json"})(Le||(H.TraceFormat=Le={}));(function(e){function t(n){return le.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(Le||(H.TraceFormat=Le={}));var _o;(function(e){e.type=new L.NotificationType("$/setTrace")})(_o||(H.SetTraceNotification=_o={}));var hr;(function(e){e.type=new L.NotificationType("$/logTrace")})(hr||(H.LogTraceNotification=hr={}));var Cn;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(Cn||(H.ConnectionErrors=Cn={}));var Qt=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};H.ConnectionError=Qt;var Do;(function(e){function t(n){let r=n;return r&&le.func(r.cancelUndispatched)}e.is=t})(Do||(H.ConnectionStrategy=Do={}));var gr;(function(e){function t(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&le.func(r.createCancellationTokenSource)&&(r.dispose===void 0||le.func(r.dispose))}e.is=t})(gr||(H.IdCancellationReceiverStrategy=gr={}));var Ro;(function(e){function t(n){let r=n;return r&&r.kind==="request"&&le.func(r.createCancellationTokenSource)&&(r.dispose===void 0||le.func(r.dispose))}e.is=t})(Ro||(H.RequestCancellationReceiverStrategy=Ro={}));var mr;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new po.CancellationTokenSource}});function t(n){return gr.is(n)||Ro.is(n)}e.is=t})(mr||(H.CancellationReceiverStrategy=mr={}));var pr;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Sn.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&le.func(r.sendCancellation)&&le.func(r.cleanup)}e.is=t})(pr||(H.CancellationSenderStrategy=pr={}));var yr;(function(e){e.Message=Object.freeze({receiver:mr.Message,sender:pr.Message});function t(n){let r=n;return r&&mr.is(r.receiver)&&pr.is(r.sender)}e.is=t})(yr||(H.CancellationStrategy=yr={}));var vr;(function(e){function t(n){let r=n;return r&&le.func(r.handleMessage)}e.is=t})(vr||(H.MessageStrategy=vr={}));var na;(function(e){function t(n){let r=n;return r&&(yr.is(r.cancellationStrategy)||Do.is(r.connectionStrategy)||vr.is(r.messageStrategy))}e.is=t})(na||(H.ConnectionOptions=na={}));var Je;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(Je||(Je={}));function Wl(e,t,n,r){let i=n!==void 0?n:H.NullLogger,c=0,h=0,g=0,S="2.0",w,b=new Map,q,O=new Map,$=new Map,z,G=new ea.LinkedMap,ne=new Map,U=new Set,v=new Map,p=ee.Off,T=Le.Text,A,Y=Je.New,B=new Tn.Emitter,K=new Tn.Emitter,pe=new Tn.Emitter,_e=new Tn.Emitter,Ie=new Tn.Emitter,Ne=r&&r.cancellationStrategy?r.cancellationStrategy:yr.Message;function At(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function Ft(d){return d===null?"res-unknown-"+(++g).toString():"res-"+d.toString()}function Ln(){return"not-"+(++h).toString()}function Di(d,D){L.Message.isRequest(D)?d.set(At(D.id),D):L.Message.isResponse(D)?d.set(Ft(D.id),D):d.set(Ln(),D)}function An(d){}function pn(){return Y===Je.Listening}function wt(){return Y===Je.Closed}function rt(){return Y===Je.Disposed}function Wt(){(Y===Je.New||Y===Je.Listening)&&(Y=Je.Closed,K.fire(void 0))}function Ct(d){B.fire([d,void 0,void 0])}function Fn(d){B.fire(d)}e.onClose(Wt),e.onError(Ct),t.onClose(Wt),t.onError(Fn);function yn(){z||G.size===0||(z=(0,Ks.default)().timer.setImmediate(()=>{z=void 0,Wn()}))}function vn(d){L.Message.isRequest(d)?$n(d):L.Message.isNotification(d)?zn(d):L.Message.isResponse(d)?Un(d):Ht(d)}function Wn(){if(G.size===0)return;let d=G.shift();try{let D=r?.messageStrategy;vr.is(D)?D.handleMessage(d,vn):vn(d)}finally{yn()}}let Hn=d=>{try{if(L.Message.isNotification(d)&&d.method===Sn.type.method){let D=d.params.id,k=At(D),x=G.get(k);if(L.Message.isRequest(x)){let te=r?.connectionStrategy,ae=te&&te.cancelUndispatched?te.cancelUndispatched(x,An):void 0;if(ae&&(ae.error!==void 0||ae.result!==void 0)){G.delete(k),v.delete(D),ae.id=x.id,St(ae,d.method,Date.now()),t.write(ae).catch(()=>i.error("Sending response for canceled message failed."));return}}let re=v.get(D);if(re!==void 0){re.cancel(),$t(d);return}else U.add(D)}Di(G,d)}finally{yn()}};function $n(d){if(rt())return;function D(V,ie,Q){let fe={jsonrpc:S,id:d.id};V instanceof L.ResponseError?fe.error=V.toJson():fe.result=V===void 0?null:V,St(fe,ie,Q),t.write(fe).catch(()=>i.error("Sending response failed."))}function k(V,ie,Q){let fe={jsonrpc:S,id:d.id,error:V.toJson()};St(fe,ie,Q),t.write(fe).catch(()=>i.error("Sending response failed."))}function x(V,ie,Q){V===void 0&&(V=null);let fe={jsonrpc:S,id:d.id,result:V};St(fe,ie,Q),t.write(fe).catch(()=>i.error("Sending response failed."))}Xn(d);let re=b.get(d.method),te,ae;re&&(te=re.type,ae=re.handler);let ue=Date.now();if(ae||w){let V=d.id??String(Date.now()),ie=gr.is(Ne.receiver)?Ne.receiver.createCancellationTokenSource(V):Ne.receiver.createCancellationTokenSource(d);d.id!==null&&U.has(d.id)&&ie.cancel(),d.id!==null&&v.set(V,ie);try{let Q;if(ae)if(d.params===void 0){if(te!==void 0&&te.numberOfParams!==0){k(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${d.method} defines ${te.numberOfParams} params but received none.`),d.method,ue);return}Q=ae(ie.token)}else if(Array.isArray(d.params)){if(te!==void 0&&te.parameterStructures===L.ParameterStructures.byName){k(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,ue);return}Q=ae(...d.params,ie.token)}else{if(te!==void 0&&te.parameterStructures===L.ParameterStructures.byPosition){k(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,ue);return}Q=ae(d.params,ie.token)}else w&&(Q=w(d.method,d.params,ie.token));let fe=Q;Q?fe.then?fe.then(De=>{v.delete(V),D(De,d.method,ue)},De=>{v.delete(V),De instanceof L.ResponseError?k(De,d.method,ue):De&&le.string(De.message)?k(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${De.message}`),d.method,ue):k(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,ue)}):(v.delete(V),D(Q,d.method,ue)):(v.delete(V),x(Q,d.method,ue))}catch(Q){v.delete(V),Q instanceof L.ResponseError?D(Q,d.method,ue):Q&&le.string(Q.message)?k(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${Q.message}`),d.method,ue):k(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,ue)}}else k(new L.ResponseError(L.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,ue)}function Un(d){if(!rt())if(d.id===null)d.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let D=d.id,k=ne.get(D);if(Jn(d,k),k!==void 0){ne.delete(D);try{if(d.error){let x=d.error;k.reject(new L.ResponseError(x.code,x.message,x.data))}else if(d.result!==void 0)k.resolve(d.result);else throw new Error("Should never happen.")}catch(x){x.message?i.error(`Response handler '${k.method}' failed with message: ${x.message}`):i.error(`Response handler '${k.method}' failed unexpectedly.`)}}}}function zn(d){if(rt())return;let D,k;if(d.method===Sn.type.method){let x=d.params.id;U.delete(x),$t(d);return}else{let x=O.get(d.method);x&&(k=x.handler,D=x.type)}if(k||q)try{if($t(d),k)if(d.params===void 0)D!==void 0&&D.numberOfParams!==0&&D.parameterStructures!==L.ParameterStructures.byName&&i.error(`Notification ${d.method} defines ${D.numberOfParams} params but received none.`),k();else if(Array.isArray(d.params)){let x=d.params;d.method===wn.type.method&&x.length===2&&yo.is(x[0])?k({token:x[0],value:x[1]}):(D!==void 0&&(D.parameterStructures===L.ParameterStructures.byName&&i.error(`Notification ${d.method} defines parameters by name but received parameters by position`),D.numberOfParams!==d.params.length&&i.error(`Notification ${d.method} defines ${D.numberOfParams} params but received ${x.length} arguments`)),k(...x))}else D!==void 0&&D.parameterStructures===L.ParameterStructures.byPosition&&i.error(`Notification ${d.method} defines parameters by position but received parameters by name`),k(d.params);else q&&q(d.method,d.params)}catch(x){x.message?i.error(`Notification handler '${d.method}' failed with message: ${x.message}`):i.error(`Notification handler '${d.method}' failed unexpectedly.`)}else pe.fire(d)}function Ht(d){if(!d){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);let D=d;if(le.string(D.id)||le.number(D.id)){let k=D.id,x=ne.get(k);x&&x.reject(new Error("The received response has neither a result nor an error property."))}}function Ve(d){if(d!=null)switch(p){case ee.Verbose:return JSON.stringify(d,null,4);case ee.Compact:return JSON.stringify(d);default:return}}function Vn(d){if(!(p===ee.Off||!A))if(T===Le.Text){let D;(p===ee.Verbose||p===ee.Compact)&&d.params&&(D=`Params: ${Ve(d.params)}

`),A.log(`Sending request '${d.method} - (${d.id})'.`,D)}else it("send-request",d)}function Bn(d){if(!(p===ee.Off||!A))if(T===Le.Text){let D;(p===ee.Verbose||p===ee.Compact)&&(d.params?D=`Params: ${Ve(d.params)}

`:D=`No parameters provided.

`),A.log(`Sending notification '${d.method}'.`,D)}else it("send-notification",d)}function St(d,D,k){if(!(p===ee.Off||!A))if(T===Le.Text){let x;(p===ee.Verbose||p===ee.Compact)&&(d.error&&d.error.data?x=`Error data: ${Ve(d.error.data)}

`:d.result?x=`Result: ${Ve(d.result)}

`:d.error===void 0&&(x=`No result returned.

`)),A.log(`Sending response '${D} - (${d.id})'. Processing request took ${Date.now()-k}ms`,x)}else it("send-response",d)}function Xn(d){if(!(p===ee.Off||!A))if(T===Le.Text){let D;(p===ee.Verbose||p===ee.Compact)&&d.params&&(D=`Params: ${Ve(d.params)}

`),A.log(`Received request '${d.method} - (${d.id})'.`,D)}else it("receive-request",d)}function $t(d){if(!(p===ee.Off||!A||d.method===hr.type.method))if(T===Le.Text){let D;(p===ee.Verbose||p===ee.Compact)&&(d.params?D=`Params: ${Ve(d.params)}

`:D=`No parameters provided.

`),A.log(`Received notification '${d.method}'.`,D)}else it("receive-notification",d)}function Jn(d,D){if(!(p===ee.Off||!A))if(T===Le.Text){let k;if((p===ee.Verbose||p===ee.Compact)&&(d.error&&d.error.data?k=`Error data: ${Ve(d.error.data)}

`:d.result?k=`Result: ${Ve(d.result)}

`:d.error===void 0&&(k=`No result returned.

`)),D){let x=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";A.log(`Received response '${D.method} - (${d.id})' in ${Date.now()-D.timerStart}ms.${x}`,k)}else A.log(`Received response ${d.id} without active response promise.`,k)}else it("receive-response",d)}function it(d,D){if(!A||p===ee.Off)return;let k={isLSPMessage:!0,type:d,message:D,timestamp:Date.now()};A.log(k)}function dt(){if(wt())throw new Qt(Cn.Closed,"Connection is closed.");if(rt())throw new Qt(Cn.Disposed,"Connection is disposed.")}function Yn(){if(pn())throw new Qt(Cn.AlreadyListening,"Connection is already listening")}function Gn(){if(!pn())throw new Error("Call listen() first.")}function Ze(d){return d===void 0?null:d}function bn(d){if(d!==null)return d}function _n(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function Ut(d,D){switch(d){case L.ParameterStructures.auto:return _n(D)?bn(D):[Ze(D)];case L.ParameterStructures.byName:if(!_n(D))throw new Error("Received parameters by name but param is not an object literal.");return bn(D);case L.ParameterStructures.byPosition:return[Ze(D)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function Dn(d,D){let k,x=d.numberOfParams;switch(x){case 0:k=void 0;break;case 1:k=Ut(d.parameterStructures,D[0]);break;default:k=[];for(let re=0;re<D.length&&re<x;re++)k.push(Ze(D[re]));if(D.length<x)for(let re=D.length;re<x;re++)k.push(null);break}return k}let ot={sendNotification:(d,...D)=>{dt();let k,x;if(le.string(d)){k=d;let te=D[0],ae=0,ue=L.ParameterStructures.auto;L.ParameterStructures.is(te)&&(ae=1,ue=te);let V=D.length,ie=V-ae;switch(ie){case 0:x=void 0;break;case 1:x=Ut(ue,D[ae]);break;default:if(ue===L.ParameterStructures.byName)throw new Error(`Received ${ie} parameters for 'by Name' notification parameter structure.`);x=D.slice(ae,V).map(Q=>Ze(Q));break}}else{let te=D;k=d.method,x=Dn(d,te)}let re={jsonrpc:S,method:k,params:x};return Bn(re),t.write(re).catch(te=>{throw i.error("Sending notification failed."),te})},onNotification:(d,D)=>{dt();let k;return le.func(d)?q=d:D&&(le.string(d)?(k=d,O.set(d,{type:void 0,handler:D})):(k=d.method,O.set(d.method,{type:d,handler:D}))),{dispose:()=>{k!==void 0?O.delete(k):q=void 0}}},onProgress:(d,D,k)=>{if($.has(D))throw new Error(`Progress handler for token ${D} already registered`);return $.set(D,k),{dispose:()=>{$.delete(D)}}},sendProgress:(d,D,k)=>ot.sendNotification(wn.type,{token:D,value:k}),onUnhandledProgress:_e.event,sendRequest:(d,...D)=>{dt(),Gn();let k,x,re;if(le.string(d)){k=d;let V=D[0],ie=D[D.length-1],Q=0,fe=L.ParameterStructures.auto;L.ParameterStructures.is(V)&&(Q=1,fe=V);let De=D.length;po.CancellationToken.is(ie)&&(De=De-1,re=ie);let je=De-Q;switch(je){case 0:x=void 0;break;case 1:x=Ut(fe,D[Q]);break;default:if(fe===L.ParameterStructures.byName)throw new Error(`Received ${je} parameters for 'by Name' request parameter structure.`);x=D.slice(Q,De).map(Qn=>Ze(Qn));break}}else{let V=D;k=d.method,x=Dn(d,V);let ie=d.numberOfParams;re=po.CancellationToken.is(V[ie])?V[ie]:void 0}let te=c++,ae;re&&(ae=re.onCancellationRequested(()=>{let V=Ne.sender.sendCancellation(ot,te);return V===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${te}`),Promise.resolve()):V.catch(()=>{i.log(`Sending cancellation messages for id ${te} failed`)})}));let ue={jsonrpc:S,id:te,method:k,params:x};return Vn(ue),typeof Ne.sender.enableCancellation=="function"&&Ne.sender.enableCancellation(ue),new Promise(async(V,ie)=>{let Q=je=>{V(je),Ne.sender.cleanup(te),ae?.dispose()},fe=je=>{ie(je),Ne.sender.cleanup(te),ae?.dispose()},De={method:k,timerStart:Date.now(),resolve:Q,reject:fe};try{await t.write(ue),ne.set(te,De)}catch(je){throw i.error("Sending request failed."),De.reject(new L.ResponseError(L.ErrorCodes.MessageWriteError,je.message?je.message:"Unknown reason")),je}})},onRequest:(d,D)=>{dt();let k=null;return bo.is(d)?(k=void 0,w=d):le.string(d)?(k=null,D!==void 0&&(k=d,b.set(d,{handler:D,type:void 0}))):D!==void 0&&(k=d.method,b.set(d.method,{type:d,handler:D})),{dispose:()=>{k!==null&&(k!==void 0?b.delete(k):w=void 0)}}},hasPendingResponse:()=>ne.size>0,trace:async(d,D,k)=>{let x=!1,re=Le.Text;k!==void 0&&(le.boolean(k)?x=k:(x=k.sendNotification||!1,re=k.traceFormat||Le.Text)),p=d,T=re,p===ee.Off?A=void 0:A=D,x&&!wt()&&!rt()&&await ot.sendNotification(_o.type,{value:ee.toString(d)})},onError:B.event,onClose:K.event,onUnhandledNotification:pe.event,onDispose:Ie.event,end:()=>{t.end()},dispose:()=>{if(rt())return;Y=Je.Disposed,Ie.fire(void 0);let d=new L.ResponseError(L.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let D of ne.values())D.reject(d);ne=new Map,v=new Map,U=new Set,G=new ea.LinkedMap,le.func(t.dispose)&&t.dispose(),le.func(e.dispose)&&e.dispose()},listen:()=>{dt(),Yn(),Y=Je.Listening,e.listen(Hn)},inspect:()=>{(0,Ks.default)().console.log("inspect")}};return ot.onNotification(hr.type,d=>{if(p===ee.Off||!A)return;let D=p===ee.Verbose||p===ee.Compact;A.log(d.message,D?d.verbose:void 0)}),ot.onNotification(wn.type,d=>{let D=$.get(d.token);D?D(d.value):_e.fire(d)}),ot}H.createMessageConnection=Wl});var br=M(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.ProgressType=_.ProgressToken=_.createMessageConnection=_.NullLogger=_.ConnectionOptions=_.ConnectionStrategy=_.AbstractMessageBuffer=_.WriteableStreamMessageWriter=_.AbstractMessageWriter=_.MessageWriter=_.ReadableStreamMessageReader=_.AbstractMessageReader=_.MessageReader=_.SharedArrayReceiverStrategy=_.SharedArraySenderStrategy=_.CancellationToken=_.CancellationTokenSource=_.Emitter=_.Event=_.Disposable=_.LRUCache=_.Touch=_.LinkedMap=_.ParameterStructures=_.NotificationType9=_.NotificationType8=_.NotificationType7=_.NotificationType6=_.NotificationType5=_.NotificationType4=_.NotificationType3=_.NotificationType2=_.NotificationType1=_.NotificationType0=_.NotificationType=_.ErrorCodes=_.ResponseError=_.RequestType9=_.RequestType8=_.RequestType7=_.RequestType6=_.RequestType5=_.RequestType4=_.RequestType3=_.RequestType2=_.RequestType1=_.RequestType0=_.RequestType=_.Message=_.RAL=void 0;_.MessageStrategy=_.CancellationStrategy=_.CancellationSenderStrategy=_.CancellationReceiverStrategy=_.ConnectionError=_.ConnectionErrors=_.LogTraceNotification=_.SetTraceNotification=_.TraceFormat=_.TraceValues=_.Trace=void 0;var se=Xi();Object.defineProperty(_,"Message",{enumerable:!0,get:function(){return se.Message}});Object.defineProperty(_,"RequestType",{enumerable:!0,get:function(){return se.RequestType}});Object.defineProperty(_,"RequestType0",{enumerable:!0,get:function(){return se.RequestType0}});Object.defineProperty(_,"RequestType1",{enumerable:!0,get:function(){return se.RequestType1}});Object.defineProperty(_,"RequestType2",{enumerable:!0,get:function(){return se.RequestType2}});Object.defineProperty(_,"RequestType3",{enumerable:!0,get:function(){return se.RequestType3}});Object.defineProperty(_,"RequestType4",{enumerable:!0,get:function(){return se.RequestType4}});Object.defineProperty(_,"RequestType5",{enumerable:!0,get:function(){return se.RequestType5}});Object.defineProperty(_,"RequestType6",{enumerable:!0,get:function(){return se.RequestType6}});Object.defineProperty(_,"RequestType7",{enumerable:!0,get:function(){return se.RequestType7}});Object.defineProperty(_,"RequestType8",{enumerable:!0,get:function(){return se.RequestType8}});Object.defineProperty(_,"RequestType9",{enumerable:!0,get:function(){return se.RequestType9}});Object.defineProperty(_,"ResponseError",{enumerable:!0,get:function(){return se.ResponseError}});Object.defineProperty(_,"ErrorCodes",{enumerable:!0,get:function(){return se.ErrorCodes}});Object.defineProperty(_,"NotificationType",{enumerable:!0,get:function(){return se.NotificationType}});Object.defineProperty(_,"NotificationType0",{enumerable:!0,get:function(){return se.NotificationType0}});Object.defineProperty(_,"NotificationType1",{enumerable:!0,get:function(){return se.NotificationType1}});Object.defineProperty(_,"NotificationType2",{enumerable:!0,get:function(){return se.NotificationType2}});Object.defineProperty(_,"NotificationType3",{enumerable:!0,get:function(){return se.NotificationType3}});Object.defineProperty(_,"NotificationType4",{enumerable:!0,get:function(){return se.NotificationType4}});Object.defineProperty(_,"NotificationType5",{enumerable:!0,get:function(){return se.NotificationType5}});Object.defineProperty(_,"NotificationType6",{enumerable:!0,get:function(){return se.NotificationType6}});Object.defineProperty(_,"NotificationType7",{enumerable:!0,get:function(){return se.NotificationType7}});Object.defineProperty(_,"NotificationType8",{enumerable:!0,get:function(){return se.NotificationType8}});Object.defineProperty(_,"NotificationType9",{enumerable:!0,get:function(){return se.NotificationType9}});Object.defineProperty(_,"ParameterStructures",{enumerable:!0,get:function(){return se.ParameterStructures}});var Po=Yi();Object.defineProperty(_,"LinkedMap",{enumerable:!0,get:function(){return Po.LinkedMap}});Object.defineProperty(_,"LRUCache",{enumerable:!0,get:function(){return Po.LRUCache}});Object.defineProperty(_,"Touch",{enumerable:!0,get:function(){return Po.Touch}});var Hl=$s();Object.defineProperty(_,"Disposable",{enumerable:!0,get:function(){return Hl.Disposable}});var ia=Xt();Object.defineProperty(_,"Event",{enumerable:!0,get:function(){return ia.Event}});Object.defineProperty(_,"Emitter",{enumerable:!0,get:function(){return ia.Emitter}});var oa=cr();Object.defineProperty(_,"CancellationTokenSource",{enumerable:!0,get:function(){return oa.CancellationTokenSource}});Object.defineProperty(_,"CancellationToken",{enumerable:!0,get:function(){return oa.CancellationToken}});var sa=zs();Object.defineProperty(_,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return sa.SharedArraySenderStrategy}});Object.defineProperty(_,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return sa.SharedArrayReceiverStrategy}});var To=Bs();Object.defineProperty(_,"MessageReader",{enumerable:!0,get:function(){return To.MessageReader}});Object.defineProperty(_,"AbstractMessageReader",{enumerable:!0,get:function(){return To.AbstractMessageReader}});Object.defineProperty(_,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return To.ReadableStreamMessageReader}});var wo=Qs();Object.defineProperty(_,"MessageWriter",{enumerable:!0,get:function(){return wo.MessageWriter}});Object.defineProperty(_,"AbstractMessageWriter",{enumerable:!0,get:function(){return wo.AbstractMessageWriter}});Object.defineProperty(_,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return wo.WriteableStreamMessageWriter}});var $l=Zs();Object.defineProperty(_,"AbstractMessageBuffer",{enumerable:!0,get:function(){return $l.AbstractMessageBuffer}});var Pe=ra();Object.defineProperty(_,"ConnectionStrategy",{enumerable:!0,get:function(){return Pe.ConnectionStrategy}});Object.defineProperty(_,"ConnectionOptions",{enumerable:!0,get:function(){return Pe.ConnectionOptions}});Object.defineProperty(_,"NullLogger",{enumerable:!0,get:function(){return Pe.NullLogger}});Object.defineProperty(_,"createMessageConnection",{enumerable:!0,get:function(){return Pe.createMessageConnection}});Object.defineProperty(_,"ProgressToken",{enumerable:!0,get:function(){return Pe.ProgressToken}});Object.defineProperty(_,"ProgressType",{enumerable:!0,get:function(){return Pe.ProgressType}});Object.defineProperty(_,"Trace",{enumerable:!0,get:function(){return Pe.Trace}});Object.defineProperty(_,"TraceValues",{enumerable:!0,get:function(){return Pe.TraceValues}});Object.defineProperty(_,"TraceFormat",{enumerable:!0,get:function(){return Pe.TraceFormat}});Object.defineProperty(_,"SetTraceNotification",{enumerable:!0,get:function(){return Pe.SetTraceNotification}});Object.defineProperty(_,"LogTraceNotification",{enumerable:!0,get:function(){return Pe.LogTraceNotification}});Object.defineProperty(_,"ConnectionErrors",{enumerable:!0,get:function(){return Pe.ConnectionErrors}});Object.defineProperty(_,"ConnectionError",{enumerable:!0,get:function(){return Pe.ConnectionError}});Object.defineProperty(_,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Pe.CancellationReceiverStrategy}});Object.defineProperty(_,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Pe.CancellationSenderStrategy}});Object.defineProperty(_,"CancellationStrategy",{enumerable:!0,get:function(){return Pe.CancellationStrategy}});Object.defineProperty(_,"MessageStrategy",{enumerable:!0,get:function(){return Pe.MessageStrategy}});var Ul=ft();_.RAL=Ul.default});var ua=M(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var aa=require("util"),at=br(),_r=class e extends at.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return e.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new aa.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};_r.emptyBuffer=Buffer.allocUnsafe(0);var Co=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),at.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),at.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),at.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),at.Disposable.create(()=>this.stream.off("data",t))}},So=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),at.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),at.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),at.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let c=h=>{h==null?r():i(h)};typeof t=="string"?this.stream.write(t,n,c):this.stream.write(t,c)})}end(){this.stream.end()}},ca=Object.freeze({messageBuffer:Object.freeze({create:e=>new _r(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new aa.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new Co(e),asWritableStream:e=>new So(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function ko(){return ca}(function(e){function t(){at.RAL.install(ca)}e.install=t})(ko||(ko={}));No.default=ko});var Mt=M(J=>{"use strict";var zl=J&&J.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Vl=J&&J.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&zl(t,e,n)};Object.defineProperty(J,"__esModule",{value:!0});J.createMessageConnection=J.createServerSocketTransport=J.createClientSocketTransport=J.createServerPipeTransport=J.createClientPipeTransport=J.generateRandomPipeName=J.StreamMessageWriter=J.StreamMessageReader=J.SocketMessageWriter=J.SocketMessageReader=J.PortMessageWriter=J.PortMessageReader=J.IPCMessageWriter=J.IPCMessageReader=void 0;var Zt=ua();Zt.default.install();var da=require("path"),Bl=require("os"),Xl=require("crypto"),Pr=require("net"),Ae=br();Vl(br(),J);var qo=class extends Ae.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Ae.Disposable.create(()=>this.process.off("message",t))}};J.IPCMessageReader=qo;var Mo=class extends Ae.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};J.IPCMessageWriter=Mo;var Oo=class extends Ae.AbstractMessageReader{constructor(t){super(),this.onData=new Ae.Emitter,t.on("close",()=>this.fireClose),t.on("error",n=>this.fireError(n)),t.on("message",n=>{this.onData.fire(n)})}listen(t){return this.onData.event(t)}};J.PortMessageReader=Oo;var Eo=class extends Ae.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",n=>this.fireError(n))}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};J.PortMessageWriter=Eo;var Nt=class extends Ae.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,Zt.default)().stream.asReadableStream(t),n)}};J.SocketMessageReader=Nt;var qt=class extends Ae.WriteableStreamMessageWriter{constructor(t,n){super((0,Zt.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};J.SocketMessageWriter=qt;var Dr=class extends Ae.ReadableStreamMessageReader{constructor(t,n){super((0,Zt.default)().stream.asReadableStream(t),n)}};J.StreamMessageReader=Dr;var Rr=class extends Ae.WriteableStreamMessageWriter{constructor(t,n){super((0,Zt.default)().stream.asWritableStream(t),n)}};J.StreamMessageWriter=Rr;var la=process.env.XDG_RUNTIME_DIR,Jl=new Map([["linux",107],["darwin",103]]);function Yl(){let e=(0,Xl.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;la?t=da.join(la,`vscode-ipc-${e}.sock`):t=da.join(Bl.tmpdir(),`vscode-${e}.sock`);let n=Jl.get(process.platform);return n!==void 0&&t.length>n&&(0,Zt.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}J.generateRandomPipeName=Yl;function Gl(e,t="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,Pr.createServer)(g=>{h.close(),n([new Nt(g,t),new qt(g,t)])});h.on("error",c),h.listen(e,()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}J.createClientPipeTransport=Gl;function Ql(e,t="utf-8"){let n=(0,Pr.createConnection)(e);return[new Nt(n,t),new qt(n,t)]}J.createServerPipeTransport=Ql;function Zl(e,t="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,Pr.createServer)(g=>{h.close(),n([new Nt(g,t),new qt(g,t)])});h.on("error",c),h.listen(e,"127.0.0.1",()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}J.createClientSocketTransport=Zl;function Kl(e,t="utf-8"){let n=(0,Pr.createConnection)(e,"127.0.0.1");return[new Nt(n,t),new qt(n,t)]}J.createServerSocketTransport=Kl;function ef(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function tf(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function nf(e,t,n,r){n||(n=Ae.NullLogger);let i=ef(e)?new Dr(e):e,c=tf(t)?new Rr(t):t;return Ae.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ae.createMessageConnection)(i,c,n,r)}J.createMessageConnection=nf});var xo=M((sg,fa)=>{"use strict";fa.exports=Mt()});var wr=M((ha,Tr)=>{(function(e){if(typeof Tr=="object"&&typeof Tr.exports=="object"){var t=e(require,ha);t!==void 0&&(Tr.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(s){function l(f){return typeof f=="string"}s.is=l})(n||(t.DocumentUri=n={}));var r;(function(s){function l(f){return typeof f=="string"}s.is=l})(r||(t.URI=r={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function l(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=l})(i||(t.integer=i={}));var c;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function l(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=l})(c||(t.uinteger=c={}));var h;(function(s){function l(a,o){return a===Number.MAX_VALUE&&(a=c.MAX_VALUE),o===Number.MAX_VALUE&&(o=c.MAX_VALUE),{line:a,character:o}}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&y.uinteger(o.line)&&y.uinteger(o.character)}s.is=f})(h||(t.Position=h={}));var g;(function(s){function l(a,o,m,R){if(y.uinteger(a)&&y.uinteger(o)&&y.uinteger(m)&&y.uinteger(R))return{start:h.create(a,o),end:h.create(m,R)};if(h.is(a)&&h.is(o))return{start:a,end:o};throw new Error("Range#create called with invalid arguments[".concat(a,", ").concat(o,", ").concat(m,", ").concat(R,"]"))}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&h.is(o.start)&&h.is(o.end)}s.is=f})(g||(t.Range=g={}));var S;(function(s){function l(a,o){return{uri:a,range:o}}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&g.is(o.range)&&(y.string(o.uri)||y.undefined(o.uri))}s.is=f})(S||(t.Location=S={}));var w;(function(s){function l(a,o,m,R){return{targetUri:a,targetRange:o,targetSelectionRange:m,originSelectionRange:R}}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&g.is(o.targetRange)&&y.string(o.targetUri)&&g.is(o.targetSelectionRange)&&(g.is(o.originSelectionRange)||y.undefined(o.originSelectionRange))}s.is=f})(w||(t.LocationLink=w={}));var b;(function(s){function l(a,o,m,R){return{red:a,green:o,blue:m,alpha:R}}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&y.numberRange(o.red,0,1)&&y.numberRange(o.green,0,1)&&y.numberRange(o.blue,0,1)&&y.numberRange(o.alpha,0,1)}s.is=f})(b||(t.Color=b={}));var q;(function(s){function l(a,o){return{range:a,color:o}}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&g.is(o.range)&&b.is(o.color)}s.is=f})(q||(t.ColorInformation=q={}));var O;(function(s){function l(a,o,m){return{label:a,textEdit:o,additionalTextEdits:m}}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&y.string(o.label)&&(y.undefined(o.textEdit)||A.is(o))&&(y.undefined(o.additionalTextEdits)||y.typedArray(o.additionalTextEdits,A.is))}s.is=f})(O||(t.ColorPresentation=O={}));var $;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})($||(t.FoldingRangeKind=$={}));var z;(function(s){function l(a,o,m,R,W,he){var oe={startLine:a,endLine:o};return y.defined(m)&&(oe.startCharacter=m),y.defined(R)&&(oe.endCharacter=R),y.defined(W)&&(oe.kind=W),y.defined(he)&&(oe.collapsedText=he),oe}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&y.uinteger(o.startLine)&&y.uinteger(o.startLine)&&(y.undefined(o.startCharacter)||y.uinteger(o.startCharacter))&&(y.undefined(o.endCharacter)||y.uinteger(o.endCharacter))&&(y.undefined(o.kind)||y.string(o.kind))}s.is=f})(z||(t.FoldingRange=z={}));var G;(function(s){function l(a,o){return{location:a,message:o}}s.create=l;function f(a){var o=a;return y.defined(o)&&S.is(o.location)&&y.string(o.message)}s.is=f})(G||(t.DiagnosticRelatedInformation=G={}));var ne;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(ne||(t.DiagnosticSeverity=ne={}));var U;(function(s){s.Unnecessary=1,s.Deprecated=2})(U||(t.DiagnosticTag=U={}));var v;(function(s){function l(f){var a=f;return y.objectLiteral(a)&&y.string(a.href)}s.is=l})(v||(t.CodeDescription=v={}));var p;(function(s){function l(a,o,m,R,W,he){var oe={range:a,message:o};return y.defined(m)&&(oe.severity=m),y.defined(R)&&(oe.code=R),y.defined(W)&&(oe.source=W),y.defined(he)&&(oe.relatedInformation=he),oe}s.create=l;function f(a){var o,m=a;return y.defined(m)&&g.is(m.range)&&y.string(m.message)&&(y.number(m.severity)||y.undefined(m.severity))&&(y.integer(m.code)||y.string(m.code)||y.undefined(m.code))&&(y.undefined(m.codeDescription)||y.string((o=m.codeDescription)===null||o===void 0?void 0:o.href))&&(y.string(m.source)||y.undefined(m.source))&&(y.undefined(m.relatedInformation)||y.typedArray(m.relatedInformation,G.is))}s.is=f})(p||(t.Diagnostic=p={}));var T;(function(s){function l(a,o){for(var m=[],R=2;R<arguments.length;R++)m[R-2]=arguments[R];var W={title:a,command:o};return y.defined(m)&&m.length>0&&(W.arguments=m),W}s.create=l;function f(a){var o=a;return y.defined(o)&&y.string(o.title)&&y.string(o.command)}s.is=f})(T||(t.Command=T={}));var A;(function(s){function l(m,R){return{range:m,newText:R}}s.replace=l;function f(m,R){return{range:{start:m,end:m},newText:R}}s.insert=f;function a(m){return{range:m,newText:""}}s.del=a;function o(m){var R=m;return y.objectLiteral(R)&&y.string(R.newText)&&g.is(R.range)}s.is=o})(A||(t.TextEdit=A={}));var Y;(function(s){function l(a,o,m){var R={label:a};return o!==void 0&&(R.needsConfirmation=o),m!==void 0&&(R.description=m),R}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&y.string(o.label)&&(y.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(y.string(o.description)||o.description===void 0)}s.is=f})(Y||(t.ChangeAnnotation=Y={}));var B;(function(s){function l(f){var a=f;return y.string(a)}s.is=l})(B||(t.ChangeAnnotationIdentifier=B={}));var K;(function(s){function l(m,R,W){return{range:m,newText:R,annotationId:W}}s.replace=l;function f(m,R,W){return{range:{start:m,end:m},newText:R,annotationId:W}}s.insert=f;function a(m,R){return{range:m,newText:"",annotationId:R}}s.del=a;function o(m){var R=m;return A.is(R)&&(Y.is(R.annotationId)||B.is(R.annotationId))}s.is=o})(K||(t.AnnotatedTextEdit=K={}));var pe;(function(s){function l(a,o){return{textDocument:a,edits:o}}s.create=l;function f(a){var o=a;return y.defined(o)&&wt.is(o.textDocument)&&Array.isArray(o.edits)}s.is=f})(pe||(t.TextDocumentEdit=pe={}));var _e;(function(s){function l(a,o,m){var R={kind:"create",uri:a};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(R.options=o),m!==void 0&&(R.annotationId=m),R}s.create=l;function f(a){var o=a;return o&&o.kind==="create"&&y.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||y.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||y.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||B.is(o.annotationId))}s.is=f})(_e||(t.CreateFile=_e={}));var Ie;(function(s){function l(a,o,m,R){var W={kind:"rename",oldUri:a,newUri:o};return m!==void 0&&(m.overwrite!==void 0||m.ignoreIfExists!==void 0)&&(W.options=m),R!==void 0&&(W.annotationId=R),W}s.create=l;function f(a){var o=a;return o&&o.kind==="rename"&&y.string(o.oldUri)&&y.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||y.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||y.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||B.is(o.annotationId))}s.is=f})(Ie||(t.RenameFile=Ie={}));var Ne;(function(s){function l(a,o,m){var R={kind:"delete",uri:a};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(R.options=o),m!==void 0&&(R.annotationId=m),R}s.create=l;function f(a){var o=a;return o&&o.kind==="delete"&&y.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||y.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||y.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||B.is(o.annotationId))}s.is=f})(Ne||(t.DeleteFile=Ne={}));var At;(function(s){function l(f){var a=f;return a&&(a.changes!==void 0||a.documentChanges!==void 0)&&(a.documentChanges===void 0||a.documentChanges.every(function(o){return y.string(o.kind)?_e.is(o)||Ie.is(o)||Ne.is(o):pe.is(o)}))}s.is=l})(At||(t.WorkspaceEdit=At={}));var Ft=function(){function s(l,f){this.edits=l,this.changeAnnotations=f}return s.prototype.insert=function(l,f,a){var o,m;if(a===void 0?o=A.insert(l,f):B.is(a)?(m=a,o=K.insert(l,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(a),o=K.insert(l,f,m)),this.edits.push(o),m!==void 0)return m},s.prototype.replace=function(l,f,a){var o,m;if(a===void 0?o=A.replace(l,f):B.is(a)?(m=a,o=K.replace(l,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(a),o=K.replace(l,f,m)),this.edits.push(o),m!==void 0)return m},s.prototype.delete=function(l,f){var a,o;if(f===void 0?a=A.del(l):B.is(f)?(o=f,a=K.del(l,f)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(f),a=K.del(l,o)),this.edits.push(a),o!==void 0)return o},s.prototype.add=function(l){this.edits.push(l)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(l){if(l===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),Ln=function(){function s(l){this._annotations=l===void 0?Object.create(null):l,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(l,f){var a;if(B.is(l)?a=l:(a=this.nextId(),f=l),this._annotations[a]!==void 0)throw new Error("Id ".concat(a," is already in use."));if(f===void 0)throw new Error("No annotation provided for id ".concat(a));return this._annotations[a]=f,this._size++,a},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),Di=function(){function s(l){var f=this;this._textEditChanges=Object.create(null),l!==void 0?(this._workspaceEdit=l,l.documentChanges?(this._changeAnnotations=new Ln(l.changeAnnotations),l.changeAnnotations=this._changeAnnotations.all(),l.documentChanges.forEach(function(a){if(pe.is(a)){var o=new Ft(a.edits,f._changeAnnotations);f._textEditChanges[a.textDocument.uri]=o}})):l.changes&&Object.keys(l.changes).forEach(function(a){var o=new Ft(l.changes[a]);f._textEditChanges[a]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(l){if(wt.is(l)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f={uri:l.uri,version:l.version},a=this._textEditChanges[f.uri];if(!a){var o=[],m={textDocument:f,edits:o};this._workspaceEdit.documentChanges.push(m),a=new Ft(o,this._changeAnnotations),this._textEditChanges[f.uri]=a}return a}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var a=this._textEditChanges[l];if(!a){var o=[];this._workspaceEdit.changes[l]=o,a=new Ft(o),this._textEditChanges[l]=a}return a}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ln,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(l,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(f)||B.is(f)?o=f:a=f;var m,R;if(o===void 0?m=_e.create(l,a):(R=B.is(o)?o:this._changeAnnotations.manage(o),m=_e.create(l,a,R)),this._workspaceEdit.documentChanges.push(m),R!==void 0)return R},s.prototype.renameFile=function(l,f,a,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;Y.is(a)||B.is(a)?m=a:o=a;var R,W;if(m===void 0?R=Ie.create(l,f,o):(W=B.is(m)?m:this._changeAnnotations.manage(m),R=Ie.create(l,f,o,W)),this._workspaceEdit.documentChanges.push(R),W!==void 0)return W},s.prototype.deleteFile=function(l,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Y.is(f)||B.is(f)?o=f:a=f;var m,R;if(o===void 0?m=Ne.create(l,a):(R=B.is(o)?o:this._changeAnnotations.manage(o),m=Ne.create(l,a,R)),this._workspaceEdit.documentChanges.push(m),R!==void 0)return R},s}();t.WorkspaceChange=Di;var An;(function(s){function l(a){return{uri:a}}s.create=l;function f(a){var o=a;return y.defined(o)&&y.string(o.uri)}s.is=f})(An||(t.TextDocumentIdentifier=An={}));var pn;(function(s){function l(a,o){return{uri:a,version:o}}s.create=l;function f(a){var o=a;return y.defined(o)&&y.string(o.uri)&&y.integer(o.version)}s.is=f})(pn||(t.VersionedTextDocumentIdentifier=pn={}));var wt;(function(s){function l(a,o){return{uri:a,version:o}}s.create=l;function f(a){var o=a;return y.defined(o)&&y.string(o.uri)&&(o.version===null||y.integer(o.version))}s.is=f})(wt||(t.OptionalVersionedTextDocumentIdentifier=wt={}));var rt;(function(s){function l(a,o,m,R){return{uri:a,languageId:o,version:m,text:R}}s.create=l;function f(a){var o=a;return y.defined(o)&&y.string(o.uri)&&y.string(o.languageId)&&y.integer(o.version)&&y.string(o.text)}s.is=f})(rt||(t.TextDocumentItem=rt={}));var Wt;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function l(f){var a=f;return a===s.PlainText||a===s.Markdown}s.is=l})(Wt||(t.MarkupKind=Wt={}));var Ct;(function(s){function l(f){var a=f;return y.objectLiteral(f)&&Wt.is(a.kind)&&y.string(a.value)}s.is=l})(Ct||(t.MarkupContent=Ct={}));var Fn;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(Fn||(t.CompletionItemKind=Fn={}));var yn;(function(s){s.PlainText=1,s.Snippet=2})(yn||(t.InsertTextFormat=yn={}));var vn;(function(s){s.Deprecated=1})(vn||(t.CompletionItemTag=vn={}));var Wn;(function(s){function l(a,o,m){return{newText:a,insert:o,replace:m}}s.create=l;function f(a){var o=a;return o&&y.string(o.newText)&&g.is(o.insert)&&g.is(o.replace)}s.is=f})(Wn||(t.InsertReplaceEdit=Wn={}));var Hn;(function(s){s.asIs=1,s.adjustIndentation=2})(Hn||(t.InsertTextMode=Hn={}));var $n;(function(s){function l(f){var a=f;return a&&(y.string(a.detail)||a.detail===void 0)&&(y.string(a.description)||a.description===void 0)}s.is=l})($n||(t.CompletionItemLabelDetails=$n={}));var Un;(function(s){function l(f){return{label:f}}s.create=l})(Un||(t.CompletionItem=Un={}));var zn;(function(s){function l(f,a){return{items:f||[],isIncomplete:!!a}}s.create=l})(zn||(t.CompletionList=zn={}));var Ht;(function(s){function l(a){return a.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=l;function f(a){var o=a;return y.string(o)||y.objectLiteral(o)&&y.string(o.language)&&y.string(o.value)}s.is=f})(Ht||(t.MarkedString=Ht={}));var Ve;(function(s){function l(f){var a=f;return!!a&&y.objectLiteral(a)&&(Ct.is(a.contents)||Ht.is(a.contents)||y.typedArray(a.contents,Ht.is))&&(f.range===void 0||g.is(f.range))}s.is=l})(Ve||(t.Hover=Ve={}));var Vn;(function(s){function l(f,a){return a?{label:f,documentation:a}:{label:f}}s.create=l})(Vn||(t.ParameterInformation=Vn={}));var Bn;(function(s){function l(f,a){for(var o=[],m=2;m<arguments.length;m++)o[m-2]=arguments[m];var R={label:f};return y.defined(a)&&(R.documentation=a),y.defined(o)?R.parameters=o:R.parameters=[],R}s.create=l})(Bn||(t.SignatureInformation=Bn={}));var St;(function(s){s.Text=1,s.Read=2,s.Write=3})(St||(t.DocumentHighlightKind=St={}));var Xn;(function(s){function l(f,a){var o={range:f};return y.number(a)&&(o.kind=a),o}s.create=l})(Xn||(t.DocumentHighlight=Xn={}));var $t;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})($t||(t.SymbolKind=$t={}));var Jn;(function(s){s.Deprecated=1})(Jn||(t.SymbolTag=Jn={}));var it;(function(s){function l(f,a,o,m,R){var W={name:f,kind:a,location:{uri:m,range:o}};return R&&(W.containerName=R),W}s.create=l})(it||(t.SymbolInformation=it={}));var dt;(function(s){function l(f,a,o,m){return m!==void 0?{name:f,kind:a,location:{uri:o,range:m}}:{name:f,kind:a,location:{uri:o}}}s.create=l})(dt||(t.WorkspaceSymbol=dt={}));var Yn;(function(s){function l(a,o,m,R,W,he){var oe={name:a,detail:o,kind:m,range:R,selectionRange:W};return he!==void 0&&(oe.children=he),oe}s.create=l;function f(a){var o=a;return o&&y.string(o.name)&&y.number(o.kind)&&g.is(o.range)&&g.is(o.selectionRange)&&(o.detail===void 0||y.string(o.detail))&&(o.deprecated===void 0||y.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=f})(Yn||(t.DocumentSymbol=Yn={}));var Gn;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(Gn||(t.CodeActionKind=Gn={}));var Ze;(function(s){s.Invoked=1,s.Automatic=2})(Ze||(t.CodeActionTriggerKind=Ze={}));var bn;(function(s){function l(a,o,m){var R={diagnostics:a};return o!=null&&(R.only=o),m!=null&&(R.triggerKind=m),R}s.create=l;function f(a){var o=a;return y.defined(o)&&y.typedArray(o.diagnostics,p.is)&&(o.only===void 0||y.typedArray(o.only,y.string))&&(o.triggerKind===void 0||o.triggerKind===Ze.Invoked||o.triggerKind===Ze.Automatic)}s.is=f})(bn||(t.CodeActionContext=bn={}));var _n;(function(s){function l(a,o,m){var R={title:a},W=!0;return typeof o=="string"?(W=!1,R.kind=o):T.is(o)?R.command=o:R.edit=o,W&&m!==void 0&&(R.kind=m),R}s.create=l;function f(a){var o=a;return o&&y.string(o.title)&&(o.diagnostics===void 0||y.typedArray(o.diagnostics,p.is))&&(o.kind===void 0||y.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||T.is(o.command))&&(o.isPreferred===void 0||y.boolean(o.isPreferred))&&(o.edit===void 0||At.is(o.edit))}s.is=f})(_n||(t.CodeAction=_n={}));var Ut;(function(s){function l(a,o){var m={range:a};return y.defined(o)&&(m.data=o),m}s.create=l;function f(a){var o=a;return y.defined(o)&&g.is(o.range)&&(y.undefined(o.command)||T.is(o.command))}s.is=f})(Ut||(t.CodeLens=Ut={}));var Dn;(function(s){function l(a,o){return{tabSize:a,insertSpaces:o}}s.create=l;function f(a){var o=a;return y.defined(o)&&y.uinteger(o.tabSize)&&y.boolean(o.insertSpaces)}s.is=f})(Dn||(t.FormattingOptions=Dn={}));var ot;(function(s){function l(a,o,m){return{range:a,target:o,data:m}}s.create=l;function f(a){var o=a;return y.defined(o)&&g.is(o.range)&&(y.undefined(o.target)||y.string(o.target))}s.is=f})(ot||(t.DocumentLink=ot={}));var d;(function(s){function l(a,o){return{range:a,parent:o}}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&g.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=f})(d||(t.SelectionRange=d={}));var D;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(D||(t.SemanticTokenTypes=D={}));var k;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(k||(t.SemanticTokenModifiers=k={}));var x;(function(s){function l(f){var a=f;return y.objectLiteral(a)&&(a.resultId===void 0||typeof a.resultId=="string")&&Array.isArray(a.data)&&(a.data.length===0||typeof a.data[0]=="number")}s.is=l})(x||(t.SemanticTokens=x={}));var re;(function(s){function l(a,o){return{range:a,text:o}}s.create=l;function f(a){var o=a;return o!=null&&g.is(o.range)&&y.string(o.text)}s.is=f})(re||(t.InlineValueText=re={}));var te;(function(s){function l(a,o,m){return{range:a,variableName:o,caseSensitiveLookup:m}}s.create=l;function f(a){var o=a;return o!=null&&g.is(o.range)&&y.boolean(o.caseSensitiveLookup)&&(y.string(o.variableName)||o.variableName===void 0)}s.is=f})(te||(t.InlineValueVariableLookup=te={}));var ae;(function(s){function l(a,o){return{range:a,expression:o}}s.create=l;function f(a){var o=a;return o!=null&&g.is(o.range)&&(y.string(o.expression)||o.expression===void 0)}s.is=f})(ae||(t.InlineValueEvaluatableExpression=ae={}));var ue;(function(s){function l(a,o){return{frameId:a,stoppedLocation:o}}s.create=l;function f(a){var o=a;return y.defined(o)&&g.is(a.stoppedLocation)}s.is=f})(ue||(t.InlineValueContext=ue={}));var V;(function(s){s.Type=1,s.Parameter=2;function l(f){return f===1||f===2}s.is=l})(V||(t.InlayHintKind=V={}));var ie;(function(s){function l(a){return{value:a}}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&(o.tooltip===void 0||y.string(o.tooltip)||Ct.is(o.tooltip))&&(o.location===void 0||S.is(o.location))&&(o.command===void 0||T.is(o.command))}s.is=f})(ie||(t.InlayHintLabelPart=ie={}));var Q;(function(s){function l(a,o,m){var R={position:a,label:o};return m!==void 0&&(R.kind=m),R}s.create=l;function f(a){var o=a;return y.objectLiteral(o)&&h.is(o.position)&&(y.string(o.label)||y.typedArray(o.label,ie.is))&&(o.kind===void 0||V.is(o.kind))&&o.textEdits===void 0||y.typedArray(o.textEdits,A.is)&&(o.tooltip===void 0||y.string(o.tooltip)||Ct.is(o.tooltip))&&(o.paddingLeft===void 0||y.boolean(o.paddingLeft))&&(o.paddingRight===void 0||y.boolean(o.paddingRight))}s.is=f})(Q||(t.InlayHint=Q={}));var fe;(function(s){function l(f){return{kind:"snippet",value:f}}s.createSnippet=l})(fe||(t.StringValue=fe={}));var De;(function(s){function l(f,a,o,m){return{insertText:f,filterText:a,range:o,command:m}}s.create=l})(De||(t.InlineCompletionItem=De={}));var je;(function(s){function l(f){return{items:f}}s.create=l})(je||(t.InlineCompletionList=je={}));var Qn;(function(s){s.Invoked=0,s.Automatic=1})(Qn||(t.InlineCompletionTriggerKind=Qn={}));var Cs;(function(s){function l(f,a){return{range:f,text:a}}s.create=l})(Cs||(t.SelectedCompletionInfo=Cs={}));var Ss;(function(s){function l(f,a){return{triggerKind:f,selectedCompletionInfo:a}}s.create=l})(Ss||(t.InlineCompletionContext=Ss={}));var ks;(function(s){function l(f){var a=f;return y.objectLiteral(a)&&r.is(a.uri)&&y.string(a.name)}s.is=l})(ks||(t.WorkspaceFolder=ks={})),t.EOL=[`
`,`\r
`,"\r"];var Ns;(function(s){function l(m,R,W,he){return new ul(m,R,W,he)}s.create=l;function f(m){var R=m;return!!(y.defined(R)&&y.string(R.uri)&&(y.undefined(R.languageId)||y.string(R.languageId))&&y.uinteger(R.lineCount)&&y.func(R.getText)&&y.func(R.positionAt)&&y.func(R.offsetAt))}s.is=f;function a(m,R){for(var W=m.getText(),he=o(R,function(zt,Zn){var qs=zt.range.start.line-Zn.range.start.line;return qs===0?zt.range.start.character-Zn.range.start.character:qs}),oe=W.length,Be=he.length-1;Be>=0;Be--){var Xe=he[Be],st=m.offsetAt(Xe.range.start),X=m.offsetAt(Xe.range.end);if(X<=oe)W=W.substring(0,st)+Xe.newText+W.substring(X,W.length);else throw new Error("Overlapping edit");oe=st}return W}s.applyEdits=a;function o(m,R){if(m.length<=1)return m;var W=m.length/2|0,he=m.slice(0,W),oe=m.slice(W);o(he,R),o(oe,R);for(var Be=0,Xe=0,st=0;Be<he.length&&Xe<oe.length;){var X=R(he[Be],oe[Xe]);X<=0?m[st++]=he[Be++]:m[st++]=oe[Xe++]}for(;Be<he.length;)m[st++]=he[Be++];for(;Xe<oe.length;)m[st++]=oe[Xe++];return m}})(Ns||(t.TextDocument=Ns={}));var ul=function(){function s(l,f,a,o){this._uri=l,this._languageId=f,this._version=a,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(l){if(l){var f=this.offsetAt(l.start),a=this.offsetAt(l.end);return this._content.substring(f,a)}return this._content},s.prototype.update=function(l,f){this._content=l.text,this._version=f,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var l=[],f=this._content,a=!0,o=0;o<f.length;o++){a&&(l.push(o),a=!1);var m=f.charAt(o);a=m==="\r"||m===`
`,m==="\r"&&o+1<f.length&&f.charAt(o+1)===`
`&&o++}a&&f.length>0&&l.push(f.length),this._lineOffsets=l}return this._lineOffsets},s.prototype.positionAt=function(l){l=Math.max(Math.min(l,this._content.length),0);var f=this.getLineOffsets(),a=0,o=f.length;if(o===0)return h.create(0,l);for(;a<o;){var m=Math.floor((a+o)/2);f[m]>l?o=m:a=m+1}var R=a-1;return h.create(R,l-f[R])},s.prototype.offsetAt=function(l){var f=this.getLineOffsets();if(l.line>=f.length)return this._content.length;if(l.line<0)return 0;var a=f[l.line],o=l.line+1<f.length?f[l.line+1]:this._content.length;return Math.max(Math.min(a+l.character,o),a)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),y;(function(s){var l=Object.prototype.toString;function f(X){return typeof X<"u"}s.defined=f;function a(X){return typeof X>"u"}s.undefined=a;function o(X){return X===!0||X===!1}s.boolean=o;function m(X){return l.call(X)==="[object String]"}s.string=m;function R(X){return l.call(X)==="[object Number]"}s.number=R;function W(X,zt,Zn){return l.call(X)==="[object Number]"&&zt<=X&&X<=Zn}s.numberRange=W;function he(X){return l.call(X)==="[object Number]"&&-2147483648<=X&&X<=2147483647}s.integer=he;function oe(X){return l.call(X)==="[object Number]"&&0<=X&&X<=2147483647}s.uinteger=oe;function Be(X){return l.call(X)==="[object Function]"}s.func=Be;function Xe(X){return X!==null&&typeof X=="object"}s.objectLiteral=Xe;function st(X,zt){return Array.isArray(X)&&X.every(zt)}s.typedArray=st})(y||(y={}))})});var de=M(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.ProtocolNotificationType=Me.ProtocolNotificationType0=Me.ProtocolRequestType=Me.ProtocolRequestType0=Me.RegistrationType=Me.MessageDirection=void 0;var Kt=Mt(),ga;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(ga||(Me.MessageDirection=ga={}));var Io=class{constructor(t){this.method=t}};Me.RegistrationType=Io;var jo=class extends Kt.RequestType0{constructor(t){super(t)}};Me.ProtocolRequestType0=jo;var Lo=class extends Kt.RequestType{constructor(t){super(t,Kt.ParameterStructures.byName)}};Me.ProtocolRequestType=Lo;var Ao=class extends Kt.NotificationType0{constructor(t){super(t)}};Me.ProtocolNotificationType0=Ao;var Fo=class extends Kt.NotificationType{constructor(t){super(t,Kt.ParameterStructures.byName)}};Me.ProtocolNotificationType=Fo});var Cr=M(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.objectLiteral=ve.typedArray=ve.stringArray=ve.array=ve.func=ve.error=ve.number=ve.string=ve.boolean=void 0;function rf(e){return e===!0||e===!1}ve.boolean=rf;function ma(e){return typeof e=="string"||e instanceof String}ve.string=ma;function of(e){return typeof e=="number"||e instanceof Number}ve.number=of;function sf(e){return e instanceof Error}ve.error=sf;function af(e){return typeof e=="function"}ve.func=af;function pa(e){return Array.isArray(e)}ve.array=pa;function cf(e){return pa(e)&&e.every(t=>ma(t))}ve.stringArray=cf;function uf(e,t){return Array.isArray(e)&&e.every(t)}ve.typedArray=uf;function df(e){return e!==null&&typeof e=="object"}ve.objectLiteral=df});var ba=M(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.ImplementationRequest=void 0;var ya=de(),va;(function(e){e.method="textDocument/implementation",e.messageDirection=ya.MessageDirection.clientToServer,e.type=new ya.ProtocolRequestType(e.method)})(va||(Sr.ImplementationRequest=va={}))});var Ra=M(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.TypeDefinitionRequest=void 0;var _a=de(),Da;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=_a.MessageDirection.clientToServer,e.type=new _a.ProtocolRequestType(e.method)})(Da||(kr.TypeDefinitionRequest=Da={}))});var wa=M(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.DidChangeWorkspaceFoldersNotification=en.WorkspaceFoldersRequest=void 0;var Nr=de(),Pa;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=Nr.MessageDirection.serverToClient,e.type=new Nr.ProtocolRequestType0(e.method)})(Pa||(en.WorkspaceFoldersRequest=Pa={}));var Ta;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=Nr.MessageDirection.clientToServer,e.type=new Nr.ProtocolNotificationType(e.method)})(Ta||(en.DidChangeWorkspaceFoldersNotification=Ta={}))});var ka=M(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.ConfigurationRequest=void 0;var Ca=de(),Sa;(function(e){e.method="workspace/configuration",e.messageDirection=Ca.MessageDirection.serverToClient,e.type=new Ca.ProtocolRequestType(e.method)})(Sa||(qr.ConfigurationRequest=Sa={}))});var Ma=M(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.ColorPresentationRequest=tn.DocumentColorRequest=void 0;var Mr=de(),Na;(function(e){e.method="textDocument/documentColor",e.messageDirection=Mr.MessageDirection.clientToServer,e.type=new Mr.ProtocolRequestType(e.method)})(Na||(tn.DocumentColorRequest=Na={}));var qa;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=Mr.MessageDirection.clientToServer,e.type=new Mr.ProtocolRequestType(e.method)})(qa||(tn.ColorPresentationRequest=qa={}))});var xa=M(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.FoldingRangeRefreshRequest=nn.FoldingRangeRequest=void 0;var Or=de(),Oa;(function(e){e.method="textDocument/foldingRange",e.messageDirection=Or.MessageDirection.clientToServer,e.type=new Or.ProtocolRequestType(e.method)})(Oa||(nn.FoldingRangeRequest=Oa={}));var Ea;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=Or.MessageDirection.serverToClient,e.type=new Or.ProtocolRequestType0(e.method)})(Ea||(nn.FoldingRangeRefreshRequest=Ea={}))});var La=M(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.DeclarationRequest=void 0;var Ia=de(),ja;(function(e){e.method="textDocument/declaration",e.messageDirection=Ia.MessageDirection.clientToServer,e.type=new Ia.ProtocolRequestType(e.method)})(ja||(Er.DeclarationRequest=ja={}))});var Wa=M(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.SelectionRangeRequest=void 0;var Aa=de(),Fa;(function(e){e.method="textDocument/selectionRange",e.messageDirection=Aa.MessageDirection.clientToServer,e.type=new Aa.ProtocolRequestType(e.method)})(Fa||(xr.SelectionRangeRequest=Fa={}))});var za=M(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.WorkDoneProgressCancelNotification=mt.WorkDoneProgressCreateRequest=mt.WorkDoneProgress=void 0;var lf=Mt(),Ir=de(),Ha;(function(e){e.type=new lf.ProgressType;function t(n){return n===e.type}e.is=t})(Ha||(mt.WorkDoneProgress=Ha={}));var $a;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=Ir.MessageDirection.serverToClient,e.type=new Ir.ProtocolRequestType(e.method)})($a||(mt.WorkDoneProgressCreateRequest=$a={}));var Ua;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=Ir.MessageDirection.clientToServer,e.type=new Ir.ProtocolNotificationType(e.method)})(Ua||(mt.WorkDoneProgressCancelNotification=Ua={}))});var Ja=M(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.CallHierarchyOutgoingCallsRequest=pt.CallHierarchyIncomingCallsRequest=pt.CallHierarchyPrepareRequest=void 0;var rn=de(),Va;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=rn.MessageDirection.clientToServer,e.type=new rn.ProtocolRequestType(e.method)})(Va||(pt.CallHierarchyPrepareRequest=Va={}));var Ba;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=rn.MessageDirection.clientToServer,e.type=new rn.ProtocolRequestType(e.method)})(Ba||(pt.CallHierarchyIncomingCallsRequest=Ba={}));var Xa;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=rn.MessageDirection.clientToServer,e.type=new rn.ProtocolRequestType(e.method)})(Xa||(pt.CallHierarchyOutgoingCallsRequest=Xa={}))});var ec=M(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.SemanticTokensRefreshRequest=Oe.SemanticTokensRangeRequest=Oe.SemanticTokensDeltaRequest=Oe.SemanticTokensRequest=Oe.SemanticTokensRegistrationType=Oe.TokenFormat=void 0;var ct=de(),Ya;(function(e){e.Relative="relative"})(Ya||(Oe.TokenFormat=Ya={}));var kn;(function(e){e.method="textDocument/semanticTokens",e.type=new ct.RegistrationType(e.method)})(kn||(Oe.SemanticTokensRegistrationType=kn={}));var Ga;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=ct.MessageDirection.clientToServer,e.type=new ct.ProtocolRequestType(e.method),e.registrationMethod=kn.method})(Ga||(Oe.SemanticTokensRequest=Ga={}));var Qa;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=ct.MessageDirection.clientToServer,e.type=new ct.ProtocolRequestType(e.method),e.registrationMethod=kn.method})(Qa||(Oe.SemanticTokensDeltaRequest=Qa={}));var Za;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=ct.MessageDirection.clientToServer,e.type=new ct.ProtocolRequestType(e.method),e.registrationMethod=kn.method})(Za||(Oe.SemanticTokensRangeRequest=Za={}));var Ka;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=ct.MessageDirection.serverToClient,e.type=new ct.ProtocolRequestType0(e.method)})(Ka||(Oe.SemanticTokensRefreshRequest=Ka={}))});var rc=M(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.ShowDocumentRequest=void 0;var tc=de(),nc;(function(e){e.method="window/showDocument",e.messageDirection=tc.MessageDirection.serverToClient,e.type=new tc.ProtocolRequestType(e.method)})(nc||(jr.ShowDocumentRequest=nc={}))});var sc=M(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.LinkedEditingRangeRequest=void 0;var ic=de(),oc;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=ic.MessageDirection.clientToServer,e.type=new ic.ProtocolRequestType(e.method)})(oc||(Lr.LinkedEditingRangeRequest=oc={}))});var gc=M(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.WillDeleteFilesRequest=Ce.DidDeleteFilesNotification=Ce.DidRenameFilesNotification=Ce.WillRenameFilesRequest=Ce.DidCreateFilesNotification=Ce.WillCreateFilesRequest=Ce.FileOperationPatternKind=void 0;var Fe=de(),ac;(function(e){e.file="file",e.folder="folder"})(ac||(Ce.FileOperationPatternKind=ac={}));var cc;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=Fe.MessageDirection.clientToServer,e.type=new Fe.ProtocolRequestType(e.method)})(cc||(Ce.WillCreateFilesRequest=cc={}));var uc;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=Fe.MessageDirection.clientToServer,e.type=new Fe.ProtocolNotificationType(e.method)})(uc||(Ce.DidCreateFilesNotification=uc={}));var dc;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=Fe.MessageDirection.clientToServer,e.type=new Fe.ProtocolRequestType(e.method)})(dc||(Ce.WillRenameFilesRequest=dc={}));var lc;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=Fe.MessageDirection.clientToServer,e.type=new Fe.ProtocolNotificationType(e.method)})(lc||(Ce.DidRenameFilesNotification=lc={}));var fc;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=Fe.MessageDirection.clientToServer,e.type=new Fe.ProtocolNotificationType(e.method)})(fc||(Ce.DidDeleteFilesNotification=fc={}));var hc;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=Fe.MessageDirection.clientToServer,e.type=new Fe.ProtocolRequestType(e.method)})(hc||(Ce.WillDeleteFilesRequest=hc={}))});var bc=M(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.MonikerRequest=yt.MonikerKind=yt.UniquenessLevel=void 0;var mc=de(),pc;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(pc||(yt.UniquenessLevel=pc={}));var yc;(function(e){e.$import="import",e.$export="export",e.local="local"})(yc||(yt.MonikerKind=yc={}));var vc;(function(e){e.method="textDocument/moniker",e.messageDirection=mc.MessageDirection.clientToServer,e.type=new mc.ProtocolRequestType(e.method)})(vc||(yt.MonikerRequest=vc={}))});var Pc=M(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.TypeHierarchySubtypesRequest=vt.TypeHierarchySupertypesRequest=vt.TypeHierarchyPrepareRequest=void 0;var on=de(),_c;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=on.MessageDirection.clientToServer,e.type=new on.ProtocolRequestType(e.method)})(_c||(vt.TypeHierarchyPrepareRequest=_c={}));var Dc;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=on.MessageDirection.clientToServer,e.type=new on.ProtocolRequestType(e.method)})(Dc||(vt.TypeHierarchySupertypesRequest=Dc={}));var Rc;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=on.MessageDirection.clientToServer,e.type=new on.ProtocolRequestType(e.method)})(Rc||(vt.TypeHierarchySubtypesRequest=Rc={}))});var Cc=M(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.InlineValueRefreshRequest=sn.InlineValueRequest=void 0;var Ar=de(),Tc;(function(e){e.method="textDocument/inlineValue",e.messageDirection=Ar.MessageDirection.clientToServer,e.type=new Ar.ProtocolRequestType(e.method)})(Tc||(sn.InlineValueRequest=Tc={}));var wc;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=Ar.MessageDirection.serverToClient,e.type=new Ar.ProtocolRequestType0(e.method)})(wc||(sn.InlineValueRefreshRequest=wc={}))});var qc=M(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.InlayHintRefreshRequest=bt.InlayHintResolveRequest=bt.InlayHintRequest=void 0;var an=de(),Sc;(function(e){e.method="textDocument/inlayHint",e.messageDirection=an.MessageDirection.clientToServer,e.type=new an.ProtocolRequestType(e.method)})(Sc||(bt.InlayHintRequest=Sc={}));var kc;(function(e){e.method="inlayHint/resolve",e.messageDirection=an.MessageDirection.clientToServer,e.type=new an.ProtocolRequestType(e.method)})(kc||(bt.InlayHintResolveRequest=kc={}));var Nc;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=an.MessageDirection.serverToClient,e.type=new an.ProtocolRequestType0(e.method)})(Nc||(bt.InlayHintRefreshRequest=Nc={}))});var Lc=M(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.DiagnosticRefreshRequest=We.WorkspaceDiagnosticRequest=We.DocumentDiagnosticRequest=We.DocumentDiagnosticReportKind=We.DiagnosticServerCancellationData=void 0;var jc=Mt(),ff=Cr(),cn=de(),Mc;(function(e){function t(n){let r=n;return r&&ff.boolean(r.retriggerRequest)}e.is=t})(Mc||(We.DiagnosticServerCancellationData=Mc={}));var Oc;(function(e){e.Full="full",e.Unchanged="unchanged"})(Oc||(We.DocumentDiagnosticReportKind=Oc={}));var Ec;(function(e){e.method="textDocument/diagnostic",e.messageDirection=cn.MessageDirection.clientToServer,e.type=new cn.ProtocolRequestType(e.method),e.partialResult=new jc.ProgressType})(Ec||(We.DocumentDiagnosticRequest=Ec={}));var xc;(function(e){e.method="workspace/diagnostic",e.messageDirection=cn.MessageDirection.clientToServer,e.type=new cn.ProtocolRequestType(e.method),e.partialResult=new jc.ProgressType})(xc||(We.WorkspaceDiagnosticRequest=xc={}));var Ic;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=cn.MessageDirection.serverToClient,e.type=new cn.ProtocolRequestType0(e.method)})(Ic||(We.DiagnosticRefreshRequest=Ic={}))});var zc=M(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.DidCloseNotebookDocumentNotification=ge.DidSaveNotebookDocumentNotification=ge.DidChangeNotebookDocumentNotification=ge.NotebookCellArrayChange=ge.DidOpenNotebookDocumentNotification=ge.NotebookDocumentSyncRegistrationType=ge.NotebookDocument=ge.NotebookCell=ge.ExecutionSummary=ge.NotebookCellKind=void 0;var Nn=wr(),Ye=Cr(),Ke=de(),Wo;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(Wo||(ge.NotebookCellKind=Wo={}));var Ho;(function(e){function t(i,c){let h={executionOrder:i};return(c===!0||c===!1)&&(h.success=c),h}e.create=t;function n(i){let c=i;return Ye.objectLiteral(c)&&Nn.uinteger.is(c.executionOrder)&&(c.success===void 0||Ye.boolean(c.success))}e.is=n;function r(i,c){return i===c?!0:i==null||c===null||c===void 0?!1:i.executionOrder===c.executionOrder&&i.success===c.success}e.equals=r})(Ho||(ge.ExecutionSummary=Ho={}));var Fr;(function(e){function t(c,h){return{kind:c,document:h}}e.create=t;function n(c){let h=c;return Ye.objectLiteral(h)&&Wo.is(h.kind)&&Nn.DocumentUri.is(h.document)&&(h.metadata===void 0||Ye.objectLiteral(h.metadata))}e.is=n;function r(c,h){let g=new Set;return c.document!==h.document&&g.add("document"),c.kind!==h.kind&&g.add("kind"),c.executionSummary!==h.executionSummary&&g.add("executionSummary"),(c.metadata!==void 0||h.metadata!==void 0)&&!i(c.metadata,h.metadata)&&g.add("metadata"),(c.executionSummary!==void 0||h.executionSummary!==void 0)&&!Ho.equals(c.executionSummary,h.executionSummary)&&g.add("executionSummary"),g}e.diff=r;function i(c,h){if(c===h)return!0;if(c==null||h===null||h===void 0||typeof c!=typeof h||typeof c!="object")return!1;let g=Array.isArray(c),S=Array.isArray(h);if(g!==S)return!1;if(g&&S){if(c.length!==h.length)return!1;for(let w=0;w<c.length;w++)if(!i(c[w],h[w]))return!1}if(Ye.objectLiteral(c)&&Ye.objectLiteral(h)){let w=Object.keys(c),b=Object.keys(h);if(w.length!==b.length||(w.sort(),b.sort(),!i(w,b)))return!1;for(let q=0;q<w.length;q++){let O=w[q];if(!i(c[O],h[O]))return!1}}return!0}})(Fr||(ge.NotebookCell=Fr={}));var Ac;(function(e){function t(r,i,c,h){return{uri:r,notebookType:i,version:c,cells:h}}e.create=t;function n(r){let i=r;return Ye.objectLiteral(i)&&Ye.string(i.uri)&&Nn.integer.is(i.version)&&Ye.typedArray(i.cells,Fr.is)}e.is=n})(Ac||(ge.NotebookDocument=Ac={}));var un;(function(e){e.method="notebookDocument/sync",e.messageDirection=Ke.MessageDirection.clientToServer,e.type=new Ke.RegistrationType(e.method)})(un||(ge.NotebookDocumentSyncRegistrationType=un={}));var Fc;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=Ke.MessageDirection.clientToServer,e.type=new Ke.ProtocolNotificationType(e.method),e.registrationMethod=un.method})(Fc||(ge.DidOpenNotebookDocumentNotification=Fc={}));var Wc;(function(e){function t(r){let i=r;return Ye.objectLiteral(i)&&Nn.uinteger.is(i.start)&&Nn.uinteger.is(i.deleteCount)&&(i.cells===void 0||Ye.typedArray(i.cells,Fr.is))}e.is=t;function n(r,i,c){let h={start:r,deleteCount:i};return c!==void 0&&(h.cells=c),h}e.create=n})(Wc||(ge.NotebookCellArrayChange=Wc={}));var Hc;(function(e){e.method="notebookDocument/didChange",e.messageDirection=Ke.MessageDirection.clientToServer,e.type=new Ke.ProtocolNotificationType(e.method),e.registrationMethod=un.method})(Hc||(ge.DidChangeNotebookDocumentNotification=Hc={}));var $c;(function(e){e.method="notebookDocument/didSave",e.messageDirection=Ke.MessageDirection.clientToServer,e.type=new Ke.ProtocolNotificationType(e.method),e.registrationMethod=un.method})($c||(ge.DidSaveNotebookDocumentNotification=$c={}));var Uc;(function(e){e.method="notebookDocument/didClose",e.messageDirection=Ke.MessageDirection.clientToServer,e.type=new Ke.ProtocolNotificationType(e.method),e.registrationMethod=un.method})(Uc||(ge.DidCloseNotebookDocumentNotification=Uc={}))});var Xc=M(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.InlineCompletionRequest=void 0;var Vc=de(),Bc;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=Vc.MessageDirection.clientToServer,e.type=new Vc.ProtocolRequestType(e.method)})(Bc||(Wr.InlineCompletionRequest=Bc={}))});var sd=M(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.WorkspaceSymbolRequest=u.CodeActionResolveRequest=u.CodeActionRequest=u.DocumentSymbolRequest=u.DocumentHighlightRequest=u.ReferencesRequest=u.DefinitionRequest=u.SignatureHelpRequest=u.SignatureHelpTriggerKind=u.HoverRequest=u.CompletionResolveRequest=u.CompletionRequest=u.CompletionTriggerKind=u.PublishDiagnosticsNotification=u.WatchKind=u.RelativePattern=u.FileChangeType=u.DidChangeWatchedFilesNotification=u.WillSaveTextDocumentWaitUntilRequest=u.WillSaveTextDocumentNotification=u.TextDocumentSaveReason=u.DidSaveTextDocumentNotification=u.DidCloseTextDocumentNotification=u.DidChangeTextDocumentNotification=u.TextDocumentContentChangeEvent=u.DidOpenTextDocumentNotification=u.TextDocumentSyncKind=u.TelemetryEventNotification=u.LogMessageNotification=u.ShowMessageRequest=u.ShowMessageNotification=u.MessageType=u.DidChangeConfigurationNotification=u.ExitNotification=u.ShutdownRequest=u.InitializedNotification=u.InitializeErrorCodes=u.InitializeRequest=u.WorkDoneProgressOptions=u.TextDocumentRegistrationOptions=u.StaticRegistrationOptions=u.PositionEncodingKind=u.FailureHandlingKind=u.ResourceOperationKind=u.UnregistrationRequest=u.RegistrationRequest=u.DocumentSelector=u.NotebookCellTextDocumentFilter=u.NotebookDocumentFilter=u.TextDocumentFilter=void 0;u.MonikerRequest=u.MonikerKind=u.UniquenessLevel=u.WillDeleteFilesRequest=u.DidDeleteFilesNotification=u.WillRenameFilesRequest=u.DidRenameFilesNotification=u.WillCreateFilesRequest=u.DidCreateFilesNotification=u.FileOperationPatternKind=u.LinkedEditingRangeRequest=u.ShowDocumentRequest=u.SemanticTokensRegistrationType=u.SemanticTokensRefreshRequest=u.SemanticTokensRangeRequest=u.SemanticTokensDeltaRequest=u.SemanticTokensRequest=u.TokenFormat=u.CallHierarchyPrepareRequest=u.CallHierarchyOutgoingCallsRequest=u.CallHierarchyIncomingCallsRequest=u.WorkDoneProgressCancelNotification=u.WorkDoneProgressCreateRequest=u.WorkDoneProgress=u.SelectionRangeRequest=u.DeclarationRequest=u.FoldingRangeRefreshRequest=u.FoldingRangeRequest=u.ColorPresentationRequest=u.DocumentColorRequest=u.ConfigurationRequest=u.DidChangeWorkspaceFoldersNotification=u.WorkspaceFoldersRequest=u.TypeDefinitionRequest=u.ImplementationRequest=u.ApplyWorkspaceEditRequest=u.ExecuteCommandRequest=u.PrepareRenameRequest=u.RenameRequest=u.PrepareSupportDefaultBehavior=u.DocumentOnTypeFormattingRequest=u.DocumentRangesFormattingRequest=u.DocumentRangeFormattingRequest=u.DocumentFormattingRequest=u.DocumentLinkResolveRequest=u.DocumentLinkRequest=u.CodeLensRefreshRequest=u.CodeLensResolveRequest=u.CodeLensRequest=u.WorkspaceSymbolResolveRequest=void 0;u.InlineCompletionRequest=u.DidCloseNotebookDocumentNotification=u.DidSaveNotebookDocumentNotification=u.DidChangeNotebookDocumentNotification=u.NotebookCellArrayChange=u.DidOpenNotebookDocumentNotification=u.NotebookDocumentSyncRegistrationType=u.NotebookDocument=u.NotebookCell=u.ExecutionSummary=u.NotebookCellKind=u.DiagnosticRefreshRequest=u.WorkspaceDiagnosticRequest=u.DocumentDiagnosticRequest=u.DocumentDiagnosticReportKind=u.DiagnosticServerCancellationData=u.InlayHintRefreshRequest=u.InlayHintResolveRequest=u.InlayHintRequest=u.InlineValueRefreshRequest=u.InlineValueRequest=u.TypeHierarchySupertypesRequest=u.TypeHierarchySubtypesRequest=u.TypeHierarchyPrepareRequest=void 0;var C=de(),Jc=wr(),Re=Cr(),hf=ba();Object.defineProperty(u,"ImplementationRequest",{enumerable:!0,get:function(){return hf.ImplementationRequest}});var gf=Ra();Object.defineProperty(u,"TypeDefinitionRequest",{enumerable:!0,get:function(){return gf.TypeDefinitionRequest}});var nd=wa();Object.defineProperty(u,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return nd.WorkspaceFoldersRequest}});Object.defineProperty(u,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return nd.DidChangeWorkspaceFoldersNotification}});var mf=ka();Object.defineProperty(u,"ConfigurationRequest",{enumerable:!0,get:function(){return mf.ConfigurationRequest}});var rd=Ma();Object.defineProperty(u,"DocumentColorRequest",{enumerable:!0,get:function(){return rd.DocumentColorRequest}});Object.defineProperty(u,"ColorPresentationRequest",{enumerable:!0,get:function(){return rd.ColorPresentationRequest}});var id=xa();Object.defineProperty(u,"FoldingRangeRequest",{enumerable:!0,get:function(){return id.FoldingRangeRequest}});Object.defineProperty(u,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return id.FoldingRangeRefreshRequest}});var pf=La();Object.defineProperty(u,"DeclarationRequest",{enumerable:!0,get:function(){return pf.DeclarationRequest}});var yf=Wa();Object.defineProperty(u,"SelectionRangeRequest",{enumerable:!0,get:function(){return yf.SelectionRangeRequest}});var Bo=za();Object.defineProperty(u,"WorkDoneProgress",{enumerable:!0,get:function(){return Bo.WorkDoneProgress}});Object.defineProperty(u,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Bo.WorkDoneProgressCreateRequest}});Object.defineProperty(u,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Bo.WorkDoneProgressCancelNotification}});var Xo=Ja();Object.defineProperty(u,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Xo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(u,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Xo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(u,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Xo.CallHierarchyPrepareRequest}});var dn=ec();Object.defineProperty(u,"TokenFormat",{enumerable:!0,get:function(){return dn.TokenFormat}});Object.defineProperty(u,"SemanticTokensRequest",{enumerable:!0,get:function(){return dn.SemanticTokensRequest}});Object.defineProperty(u,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return dn.SemanticTokensDeltaRequest}});Object.defineProperty(u,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return dn.SemanticTokensRangeRequest}});Object.defineProperty(u,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return dn.SemanticTokensRefreshRequest}});Object.defineProperty(u,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return dn.SemanticTokensRegistrationType}});var vf=rc();Object.defineProperty(u,"ShowDocumentRequest",{enumerable:!0,get:function(){return vf.ShowDocumentRequest}});var bf=sc();Object.defineProperty(u,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return bf.LinkedEditingRangeRequest}});var Ot=gc();Object.defineProperty(u,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ot.FileOperationPatternKind}});Object.defineProperty(u,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ot.DidCreateFilesNotification}});Object.defineProperty(u,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ot.WillCreateFilesRequest}});Object.defineProperty(u,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ot.DidRenameFilesNotification}});Object.defineProperty(u,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ot.WillRenameFilesRequest}});Object.defineProperty(u,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ot.DidDeleteFilesNotification}});Object.defineProperty(u,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ot.WillDeleteFilesRequest}});var Jo=bc();Object.defineProperty(u,"UniquenessLevel",{enumerable:!0,get:function(){return Jo.UniquenessLevel}});Object.defineProperty(u,"MonikerKind",{enumerable:!0,get:function(){return Jo.MonikerKind}});Object.defineProperty(u,"MonikerRequest",{enumerable:!0,get:function(){return Jo.MonikerRequest}});var Yo=Pc();Object.defineProperty(u,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Yo.TypeHierarchyPrepareRequest}});Object.defineProperty(u,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Yo.TypeHierarchySubtypesRequest}});Object.defineProperty(u,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Yo.TypeHierarchySupertypesRequest}});var od=Cc();Object.defineProperty(u,"InlineValueRequest",{enumerable:!0,get:function(){return od.InlineValueRequest}});Object.defineProperty(u,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return od.InlineValueRefreshRequest}});var Go=qc();Object.defineProperty(u,"InlayHintRequest",{enumerable:!0,get:function(){return Go.InlayHintRequest}});Object.defineProperty(u,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Go.InlayHintResolveRequest}});Object.defineProperty(u,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Go.InlayHintRefreshRequest}});var qn=Lc();Object.defineProperty(u,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return qn.DiagnosticServerCancellationData}});Object.defineProperty(u,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return qn.DocumentDiagnosticReportKind}});Object.defineProperty(u,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return qn.DocumentDiagnosticRequest}});Object.defineProperty(u,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return qn.WorkspaceDiagnosticRequest}});Object.defineProperty(u,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return qn.DiagnosticRefreshRequest}});var et=zc();Object.defineProperty(u,"NotebookCellKind",{enumerable:!0,get:function(){return et.NotebookCellKind}});Object.defineProperty(u,"ExecutionSummary",{enumerable:!0,get:function(){return et.ExecutionSummary}});Object.defineProperty(u,"NotebookCell",{enumerable:!0,get:function(){return et.NotebookCell}});Object.defineProperty(u,"NotebookDocument",{enumerable:!0,get:function(){return et.NotebookDocument}});Object.defineProperty(u,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return et.NotebookDocumentSyncRegistrationType}});Object.defineProperty(u,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return et.DidOpenNotebookDocumentNotification}});Object.defineProperty(u,"NotebookCellArrayChange",{enumerable:!0,get:function(){return et.NotebookCellArrayChange}});Object.defineProperty(u,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return et.DidChangeNotebookDocumentNotification}});Object.defineProperty(u,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return et.DidSaveNotebookDocumentNotification}});Object.defineProperty(u,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return et.DidCloseNotebookDocumentNotification}});var _f=Xc();Object.defineProperty(u,"InlineCompletionRequest",{enumerable:!0,get:function(){return _f.InlineCompletionRequest}});var $o;(function(e){function t(n){let r=n;return Re.string(r)||Re.string(r.language)||Re.string(r.scheme)||Re.string(r.pattern)}e.is=t})($o||(u.TextDocumentFilter=$o={}));var Uo;(function(e){function t(n){let r=n;return Re.objectLiteral(r)&&(Re.string(r.notebookType)||Re.string(r.scheme)||Re.string(r.pattern))}e.is=t})(Uo||(u.NotebookDocumentFilter=Uo={}));var zo;(function(e){function t(n){let r=n;return Re.objectLiteral(r)&&(Re.string(r.notebook)||Uo.is(r.notebook))&&(r.language===void 0||Re.string(r.language))}e.is=t})(zo||(u.NotebookCellTextDocumentFilter=zo={}));var Vo;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Re.string(r)&&!$o.is(r)&&!zo.is(r))return!1;return!0}e.is=t})(Vo||(u.DocumentSelector=Vo={}));var Yc;(function(e){e.method="client/registerCapability",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolRequestType(e.method)})(Yc||(u.RegistrationRequest=Yc={}));var Gc;(function(e){e.method="client/unregisterCapability",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolRequestType(e.method)})(Gc||(u.UnregistrationRequest=Gc={}));var Qc;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(Qc||(u.ResourceOperationKind=Qc={}));var Zc;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(Zc||(u.FailureHandlingKind=Zc={}));var Kc;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})(Kc||(u.PositionEncodingKind=Kc={}));var eu;(function(e){function t(n){let r=n;return r&&Re.string(r.id)&&r.id.length>0}e.hasId=t})(eu||(u.StaticRegistrationOptions=eu={}));var tu;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||Vo.is(r.documentSelector))}e.is=t})(tu||(u.TextDocumentRegistrationOptions=tu={}));var nu;(function(e){function t(r){let i=r;return Re.objectLiteral(i)&&(i.workDoneProgress===void 0||Re.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&Re.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(nu||(u.WorkDoneProgressOptions=nu={}));var ru;(function(e){e.method="initialize",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(ru||(u.InitializeRequest=ru={}));var iu;(function(e){e.unknownProtocolVersion=1})(iu||(u.InitializeErrorCodes=iu={}));var ou;(function(e){e.method="initialized",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType(e.method)})(ou||(u.InitializedNotification=ou={}));var su;(function(e){e.method="shutdown",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType0(e.method)})(su||(u.ShutdownRequest=su={}));var au;(function(e){e.method="exit",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType0(e.method)})(au||(u.ExitNotification=au={}));var cu;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType(e.method)})(cu||(u.DidChangeConfigurationNotification=cu={}));var uu;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(uu||(u.MessageType=uu={}));var du;(function(e){e.method="window/showMessage",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolNotificationType(e.method)})(du||(u.ShowMessageNotification=du={}));var lu;(function(e){e.method="window/showMessageRequest",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolRequestType(e.method)})(lu||(u.ShowMessageRequest=lu={}));var fu;(function(e){e.method="window/logMessage",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolNotificationType(e.method)})(fu||(u.LogMessageNotification=fu={}));var hu;(function(e){e.method="telemetry/event",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolNotificationType(e.method)})(hu||(u.TelemetryEventNotification=hu={}));var gu;(function(e){e.None=0,e.Full=1,e.Incremental=2})(gu||(u.TextDocumentSyncKind=gu={}));var mu;(function(e){e.method="textDocument/didOpen",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType(e.method)})(mu||(u.DidOpenTextDocumentNotification=mu={}));var pu;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(pu||(u.TextDocumentContentChangeEvent=pu={}));var yu;(function(e){e.method="textDocument/didChange",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType(e.method)})(yu||(u.DidChangeTextDocumentNotification=yu={}));var vu;(function(e){e.method="textDocument/didClose",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType(e.method)})(vu||(u.DidCloseTextDocumentNotification=vu={}));var bu;(function(e){e.method="textDocument/didSave",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType(e.method)})(bu||(u.DidSaveTextDocumentNotification=bu={}));var _u;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(_u||(u.TextDocumentSaveReason=_u={}));var Du;(function(e){e.method="textDocument/willSave",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType(e.method)})(Du||(u.WillSaveTextDocumentNotification=Du={}));var Ru;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Ru||(u.WillSaveTextDocumentWaitUntilRequest=Ru={}));var Pu;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolNotificationType(e.method)})(Pu||(u.DidChangeWatchedFilesNotification=Pu={}));var Tu;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(Tu||(u.FileChangeType=Tu={}));var wu;(function(e){function t(n){let r=n;return Re.objectLiteral(r)&&(Jc.URI.is(r.baseUri)||Jc.WorkspaceFolder.is(r.baseUri))&&Re.string(r.pattern)}e.is=t})(wu||(u.RelativePattern=wu={}));var Cu;(function(e){e.Create=1,e.Change=2,e.Delete=4})(Cu||(u.WatchKind=Cu={}));var Su;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolNotificationType(e.method)})(Su||(u.PublishDiagnosticsNotification=Su={}));var ku;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(ku||(u.CompletionTriggerKind=ku={}));var Nu;(function(e){e.method="textDocument/completion",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Nu||(u.CompletionRequest=Nu={}));var qu;(function(e){e.method="completionItem/resolve",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(qu||(u.CompletionResolveRequest=qu={}));var Mu;(function(e){e.method="textDocument/hover",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Mu||(u.HoverRequest=Mu={}));var Ou;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(Ou||(u.SignatureHelpTriggerKind=Ou={}));var Eu;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Eu||(u.SignatureHelpRequest=Eu={}));var xu;(function(e){e.method="textDocument/definition",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(xu||(u.DefinitionRequest=xu={}));var Iu;(function(e){e.method="textDocument/references",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Iu||(u.ReferencesRequest=Iu={}));var ju;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(ju||(u.DocumentHighlightRequest=ju={}));var Lu;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Lu||(u.DocumentSymbolRequest=Lu={}));var Au;(function(e){e.method="textDocument/codeAction",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Au||(u.CodeActionRequest=Au={}));var Fu;(function(e){e.method="codeAction/resolve",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Fu||(u.CodeActionResolveRequest=Fu={}));var Wu;(function(e){e.method="workspace/symbol",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Wu||(u.WorkspaceSymbolRequest=Wu={}));var Hu;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Hu||(u.WorkspaceSymbolResolveRequest=Hu={}));var $u;(function(e){e.method="textDocument/codeLens",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})($u||(u.CodeLensRequest=$u={}));var Uu;(function(e){e.method="codeLens/resolve",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Uu||(u.CodeLensResolveRequest=Uu={}));var zu;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolRequestType0(e.method)})(zu||(u.CodeLensRefreshRequest=zu={}));var Vu;(function(e){e.method="textDocument/documentLink",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Vu||(u.DocumentLinkRequest=Vu={}));var Bu;(function(e){e.method="documentLink/resolve",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Bu||(u.DocumentLinkResolveRequest=Bu={}));var Xu;(function(e){e.method="textDocument/formatting",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Xu||(u.DocumentFormattingRequest=Xu={}));var Ju;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Ju||(u.DocumentRangeFormattingRequest=Ju={}));var Yu;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Yu||(u.DocumentRangesFormattingRequest=Yu={}));var Gu;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Gu||(u.DocumentOnTypeFormattingRequest=Gu={}));var Qu;(function(e){e.Identifier=1})(Qu||(u.PrepareSupportDefaultBehavior=Qu={}));var Zu;(function(e){e.method="textDocument/rename",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Zu||(u.RenameRequest=Zu={}));var Ku;(function(e){e.method="textDocument/prepareRename",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(Ku||(u.PrepareRenameRequest=Ku={}));var ed;(function(e){e.method="workspace/executeCommand",e.messageDirection=C.MessageDirection.clientToServer,e.type=new C.ProtocolRequestType(e.method)})(ed||(u.ExecuteCommandRequest=ed={}));var td;(function(e){e.method="workspace/applyEdit",e.messageDirection=C.MessageDirection.serverToClient,e.type=new C.ProtocolRequestType("workspace/applyEdit")})(td||(u.ApplyWorkspaceEditRequest=td={}))});var cd=M(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.createProtocolConnection=void 0;var ad=Mt();function Df(e,t,n,r){return ad.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,ad.createMessageConnection)(e,t,n,r)}Hr.createProtocolConnection=Df});var dd=M(Ee=>{"use strict";var Rf=Ee&&Ee.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),$r=Ee&&Ee.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Rf(t,e,n)};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.LSPErrorCodes=Ee.createProtocolConnection=void 0;$r(Mt(),Ee);$r(wr(),Ee);$r(de(),Ee);$r(sd(),Ee);var Pf=cd();Object.defineProperty(Ee,"createProtocolConnection",{enumerable:!0,get:function(){return Pf.createProtocolConnection}});var ud;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(ud||(Ee.LSPErrorCodes=ud={}))});var me=M(tt=>{"use strict";var Tf=tt&&tt.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ld=tt&&tt.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Tf(t,e,n)};Object.defineProperty(tt,"__esModule",{value:!0});tt.createProtocolConnection=void 0;var wf=xo();ld(xo(),tt);ld(dd(),tt);function Cf(e,t,n,r){return(0,wf.createMessageConnection)(e,t,n,r)}tt.createProtocolConnection=Cf});var Qo=M(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.generateUuid=He.parse=He.isUUID=He.v4=He.empty=void 0;var Mn=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},On=class e extends Mn{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""))}};On._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];On._timeHighBits=["8","9","a","b"];He.empty=new Mn("00000000-0000-0000-0000-000000000000");function fd(){return new On}He.v4=fd;var Sf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function hd(e){return Sf.test(e)}He.isUUID=hd;function kf(e){if(!hd(e))throw new Error("invalid uuid");return new Mn(e)}He.parse=kf;function Nf(){return fd().asHex()}He.generateUuid=Nf});var gd=M(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.attachPartialResult=Dt.ProgressFeature=Dt.attachWorkDone=void 0;var _t=me(),qf=Qo(),Et=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(t,n,r,i){let c={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,c)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,{kind:"end"})}};Et.Instances=new Map;var Ur=class extends Et{constructor(t,n){super(t,n),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},En=class{constructor(){}begin(){}report(){}done(){}},zr=class extends En{constructor(){super(),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Mf(e,t){if(t===void 0||t.workDoneToken===void 0)return new En;let n=t.workDoneToken;return delete t.workDoneToken,new Et(e,n)}Dt.attachWorkDone=Mf;var Of=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(_t.WorkDoneProgressCancelNotification.type,n=>{let r=Et.Instances.get(n.token);(r instanceof Ur||r instanceof zr)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new En:new Et(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,qf.generateUuid)();return this.connection.sendRequest(_t.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Ur(this.connection,t))}else return Promise.resolve(new zr)}};Dt.ProgressFeature=Of;var Zo;(function(e){e.type=new _t.ProgressType})(Zo||(Zo={}));var Ko=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(Zo.type,this._token,t)}};function Ef(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new Ko(e,n)}Dt.attachPartialResult=Ef});var md=M(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.ConfigurationFeature=void 0;var xf=me(),If=nr(),jf=e=>class extends e{getConfiguration(t){return t?If.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(xf.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};Vr.ConfigurationFeature=jf});var pd=M(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.WorkspaceFoldersFeature=void 0;var Br=me(),Lf=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Br.Emitter,this.connection.onNotification(Br.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Br.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Br.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Xr.WorkspaceFoldersFeature=Lf});var yd=M(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.CallHierarchyFeature=void 0;var es=me(),Af=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(es.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=es.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=es.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Jr.CallHierarchyFeature=Af});var ns=M(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.SemanticTokensBuilder=Rt.SemanticTokensDiff=Rt.SemanticTokensFeature=void 0;var Yr=me(),Ff=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Yr.SemanticTokensRefreshRequest.type),on:t=>{let n=Yr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=Yr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=Yr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Rt.SemanticTokensFeature=Ff;var Gr=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,c=n-1;for(;i>=r&&c>=r&&this.originalSequence[i]===this.modifiedSequence[c];)i--,c--;(i<r||c<r)&&(i++,c++);let h=i-r+1,g=this.modifiedSequence.slice(r,c+1);return g.length===1&&g[0]===this.originalSequence[i]?[{start:r,deleteCount:h-1}]:[{start:r,deleteCount:h,data:g}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};Rt.SemanticTokensDiff=Gr;var ts=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,c){let h=t,g=n;this._dataLen>0&&(h-=this._prevLine,h===0&&(g-=this._prevChar)),this._data[this._dataLen++]=h,this._data[this._dataLen++]=g,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=c,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Gr(this._prevData,this._data).computeDiff()}:this.build()}};Rt.SemanticTokensBuilder=ts});var vd=M(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.ShowDocumentFeature=void 0;var Wf=me(),Hf=e=>class extends e{showDocument(t){return this.connection.sendRequest(Wf.ShowDocumentRequest.type,t)}};Qr.ShowDocumentFeature=Hf});var bd=M(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.FileOperationsFeature=void 0;var ln=me(),$f=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(ln.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(ln.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(ln.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(ln.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(ln.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(ln.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};Zr.FileOperationsFeature=$f});var _d=M(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.LinkedEditingRangeFeature=void 0;var Uf=me(),zf=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(Uf.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};Kr.LinkedEditingRangeFeature=zf});var Dd=M(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.TypeHierarchyFeature=void 0;var rs=me(),Vf=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(rs.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=rs.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=rs.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ei.TypeHierarchyFeature=Vf});var Pd=M(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.InlineValueFeature=void 0;var Rd=me(),Bf=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(Rd.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(Rd.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};ti.InlineValueFeature=Bf});var wd=M(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.FoldingRangeFeature=void 0;var Td=me(),Xf=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(Td.FoldingRangeRefreshRequest.type),on:t=>{let n=Td.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ni.FoldingRangeFeature=Xf});var Cd=M(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.InlayHintFeature=void 0;var is=me(),Jf=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(is.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(is.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(is.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};ri.InlayHintFeature=Jf});var Sd=M(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.DiagnosticFeature=void 0;var xn=me(),Yf=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(xn.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(xn.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(xn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(xn.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(xn.WorkspaceDiagnosticRequest.partialResult,n)))}}};ii.DiagnosticFeature=Yf});var ss=M(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.TextDocuments=void 0;var xt=me(),os=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new xt.Emitter,this._onDidOpen=new xt.Emitter,this._onDidClose=new xt.Emitter,this._onDidSave=new xt.Emitter,this._onWillSave=new xt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=xt.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,c=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,c);let h=Object.freeze({document:c});this._onDidOpen.fire(h),this._onDidChangeContent.fire(h)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,c=r.contentChanges;if(c.length===0)return;let{version:h}=i;if(h==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let g=this._syncedDocuments.get(i.uri);g!==void 0&&(g=this._configuration.update(g,c,h),this._syncedDocuments.set(i.uri,g),this._onDidChangeContent.fire(Object.freeze({document:g})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let c=this._syncedDocuments.get(r.textDocument.uri);return c!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:c,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),xt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};oi.TextDocuments=os});var cs=M(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.NotebookDocuments=fn.NotebookSyncFeature=void 0;var $e=me(),kd=ss(),Gf=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification($e.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification($e.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification($e.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification($e.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};fn.NotebookSyncFeature=Gf;var si=class e{onDidOpenTextDocument(t){return this.openHandler=t,$e.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,$e.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,$e.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};si.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var as=class{constructor(t){t instanceof kd.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new kd.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new $e.Emitter,this._onDidChange=new $e.Emitter,this._onDidSave=new $e.Emitter,this._onDidClose=new $e.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new si,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let c of i.cellTextDocuments)n.openTextDocument({textDocument:c});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c===void 0)return;c.version=i.notebookDocument.version;let h=c.metadata,g=!1,S=i.change;S.metadata!==void 0&&(g=!0,c.metadata=S.metadata);let w=[],b=[],q=[],O=[];if(S.cells!==void 0){let U=S.cells;if(U.structure!==void 0){let v=U.structure.array;if(c.cells.splice(v.start,v.deleteCount,...v.cells!==void 0?v.cells:[]),U.structure.didOpen!==void 0)for(let p of U.structure.didOpen)n.openTextDocument({textDocument:p}),w.push(p.uri);if(U.structure.didClose)for(let p of U.structure.didClose)n.closeTextDocument({textDocument:p}),b.push(p.uri)}if(U.data!==void 0){let v=new Map(U.data.map(p=>[p.document,p]));for(let p=0;p<=c.cells.length;p++){let T=v.get(c.cells[p].document);if(T!==void 0){let A=c.cells.splice(p,1,T);if(q.push({old:A[0],new:T}),v.delete(T.document),v.size===0)break}}}if(U.textContent!==void 0)for(let v of U.textContent)n.changeTextDocument({textDocument:v.document,contentChanges:v.changes}),O.push(v.document.uri)}this.updateCellMap(c);let $={notebookDocument:c};g&&($.metadata={old:h,new:c.metadata});let z=[];for(let U of w)z.push(this.getNotebookCell(U));let G=[];for(let U of b)G.push(this.getNotebookCell(U));let ne=[];for(let U of O)ne.push(this.getNotebookCell(U));(z.length>0||G.length>0||q.length>0||ne.length>0)&&($.cells={added:z,removed:G,changed:{data:q,textContent:ne}}),($.metadata!==void 0||$.cells!==void 0)&&this._onDidChange.fire($)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);c!==void 0&&this._onDidSave.fire(c)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c!==void 0){this._onDidClose.fire(c);for(let h of i.cellTextDocuments)n.closeTextDocument({textDocument:h});this.notebookDocuments.delete(i.notebookDocument.uri);for(let h of c.cells)this.notebookCellMap.delete(h.document)}})),$e.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};fn.NotebookDocuments=as});var Nd=M(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.MonikerFeature=void 0;var Qf=me(),Zf=e=>class extends e{get moniker(){return{on:t=>{let n=Qf.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ai.MonikerFeature=Zf});var gs=M(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.createConnection=Z.combineFeatures=Z.combineNotebooksFeatures=Z.combineLanguagesFeatures=Z.combineWorkspaceFeatures=Z.combineWindowFeatures=Z.combineClientFeatures=Z.combineTracerFeatures=Z.combineTelemetryFeatures=Z.combineConsoleFeatures=Z._NotebooksImpl=Z._LanguagesImpl=Z.BulkUnregistration=Z.BulkRegistration=Z.ErrorMessageTracker=void 0;var N=me(),Ue=nr(),ds=Qo(),F=gd(),Kf=md(),eh=pd(),th=yd(),nh=ns(),rh=vd(),ih=bd(),oh=_d(),sh=Dd(),ah=Pd(),ch=wd(),uh=Cd(),dh=Sd(),lh=cs(),fh=Nd();function us(e){if(e!==null)return e}var ls=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};Z.ErrorMessageTracker=ls;var ci=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(N.MessageType.Error,t)}warn(t){this.send(N.MessageType.Warning,t)}info(t){this.send(N.MessageType.Info,t)}log(t){this.send(N.MessageType.Log,t)}debug(t){this.send(N.MessageType.Debug,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(N.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,N.RAL)().console.error("Sending log message failed")})}},fs=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:N.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(us)}showWarningMessage(t,...n){let r={type:N.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(us)}showInformationMessage(t,...n){let r={type:N.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(N.ShowMessageRequest.type,r).then(us)}},qd=(0,rh.ShowDocumentFeature)((0,F.ProgressFeature)(fs)),Md;(function(e){function t(){return new ui}e.create=t})(Md||(Z.BulkRegistration=Md={}));var ui=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=Ue.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=ds.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Od;(function(e){function t(){return new In(void 0,[])}e.create=t})(Od||(Z.BulkUnregistration=Od={}));var In=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(N.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=Ue.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(N.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},c=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},di=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof ui?this.registerMany(t):t instanceof In?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=Ue.string(n)?n:n.method,c=ds.generateUuid(),h={registrations:[{id:c,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(N.RegistrationRequest.type,h).then(g=>(t.add({id:c,method:i}),t),g=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(g)))}registerSingle2(t,n){let r=Ue.string(t)?t:t.method,i=ds.generateUuid(),c={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(N.RegistrationRequest.type,c).then(h=>N.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),h=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(h)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(N.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(N.RegistrationRequest.type,n).then(()=>new In(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},hs=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(N.ApplyWorkspaceEditRequest.type,r)}},Ed=(0,ih.FileOperationsFeature)((0,eh.WorkspaceFoldersFeature)((0,Kf.ConfigurationFeature)(hs))),li=class{constructor(){this._trace=N.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==N.Trace.Off&&this.connection.sendNotification(N.LogTraceNotification.type,{message:t,verbose:this._trace===N.Trace.Verbose?n:void 0}).catch(()=>{})}},fi=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(N.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},hi=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,F.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,F.attachPartialResult)(this.connection,n)}};Z._LanguagesImpl=hi;var xd=(0,ch.FoldingRangeFeature)((0,fh.MonikerFeature)((0,dh.DiagnosticFeature)((0,uh.InlayHintFeature)((0,ah.InlineValueFeature)((0,sh.TypeHierarchyFeature)((0,oh.LinkedEditingRangeFeature)((0,nh.SemanticTokensFeature)((0,th.CallHierarchyFeature)(hi))))))))),gi=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,F.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,F.attachPartialResult)(this.connection,n)}};Z._NotebooksImpl=gi;var Id=(0,lh.NotebookSyncFeature)(gi);function jd(e,t){return function(n){return t(e(n))}}Z.combineConsoleFeatures=jd;function Ld(e,t){return function(n){return t(e(n))}}Z.combineTelemetryFeatures=Ld;function Ad(e,t){return function(n){return t(e(n))}}Z.combineTracerFeatures=Ad;function Fd(e,t){return function(n){return t(e(n))}}Z.combineClientFeatures=Fd;function Wd(e,t){return function(n){return t(e(n))}}Z.combineWindowFeatures=Wd;function Hd(e,t){return function(n){return t(e(n))}}Z.combineWorkspaceFeatures=Hd;function $d(e,t){return function(n){return t(e(n))}}Z.combineLanguagesFeatures=$d;function Ud(e,t){return function(n){return t(e(n))}}Z.combineNotebooksFeatures=Ud;function hh(e,t){function n(i,c,h){return i&&c?h(i,c):i||c}return{__brand:"features",console:n(e.console,t.console,jd),tracer:n(e.tracer,t.tracer,Ad),telemetry:n(e.telemetry,t.telemetry,Ld),client:n(e.client,t.client,Fd),window:n(e.window,t.window,Wd),workspace:n(e.workspace,t.workspace,Hd),languages:n(e.languages,t.languages,$d),notebooks:n(e.notebooks,t.notebooks,Ud)}}Z.combineFeatures=hh;function gh(e,t,n){let r=n&&n.console?new(n.console(ci)):new ci,i=e(r);r.rawAttach(i);let c=n&&n.tracer?new(n.tracer(li)):new li,h=n&&n.telemetry?new(n.telemetry(fi)):new fi,g=n&&n.client?new(n.client(di)):new di,S=n&&n.window?new(n.window(qd)):new qd,w=n&&n.workspace?new(n.workspace(Ed)):new Ed,b=n&&n.languages?new(n.languages(xd)):new xd,q=n&&n.notebooks?new(n.notebooks(Id)):new Id,O=[r,c,h,g,S,w,b,q];function $(v){return v instanceof Promise?v:Ue.thenable(v)?new Promise((p,T)=>{v.then(A=>p(A),A=>T(A))}):Promise.resolve(v)}let z,G,ne,U={listen:()=>i.listen(),sendRequest:(v,...p)=>i.sendRequest(Ue.string(v)?v:v.method,...p),onRequest:(v,p)=>i.onRequest(v,p),sendNotification:(v,p)=>{let T=Ue.string(v)?v:v.method;return i.sendNotification(T,p)},onNotification:(v,p)=>i.onNotification(v,p),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:v=>(G=v,{dispose:()=>{G=void 0}}),onInitialized:v=>i.onNotification(N.InitializedNotification.type,v),onShutdown:v=>(z=v,{dispose:()=>{z=void 0}}),onExit:v=>(ne=v,{dispose:()=>{ne=void 0}}),get console(){return r},get telemetry(){return h},get tracer(){return c},get client(){return g},get window(){return S},get workspace(){return w},get languages(){return b},get notebooks(){return q},onDidChangeConfiguration:v=>i.onNotification(N.DidChangeConfigurationNotification.type,v),onDidChangeWatchedFiles:v=>i.onNotification(N.DidChangeWatchedFilesNotification.type,v),__textDocumentSync:void 0,onDidOpenTextDocument:v=>i.onNotification(N.DidOpenTextDocumentNotification.type,v),onDidChangeTextDocument:v=>i.onNotification(N.DidChangeTextDocumentNotification.type,v),onDidCloseTextDocument:v=>i.onNotification(N.DidCloseTextDocumentNotification.type,v),onWillSaveTextDocument:v=>i.onNotification(N.WillSaveTextDocumentNotification.type,v),onWillSaveTextDocumentWaitUntil:v=>i.onRequest(N.WillSaveTextDocumentWaitUntilRequest.type,v),onDidSaveTextDocument:v=>i.onNotification(N.DidSaveTextDocumentNotification.type,v),sendDiagnostics:v=>i.sendNotification(N.PublishDiagnosticsNotification.type,v),onHover:v=>i.onRequest(N.HoverRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),void 0)),onCompletion:v=>i.onRequest(N.CompletionRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onCompletionResolve:v=>i.onRequest(N.CompletionResolveRequest.type,v),onSignatureHelp:v=>i.onRequest(N.SignatureHelpRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),void 0)),onDeclaration:v=>i.onRequest(N.DeclarationRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onDefinition:v=>i.onRequest(N.DefinitionRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onTypeDefinition:v=>i.onRequest(N.TypeDefinitionRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onImplementation:v=>i.onRequest(N.ImplementationRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onReferences:v=>i.onRequest(N.ReferencesRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onDocumentHighlight:v=>i.onRequest(N.DocumentHighlightRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onDocumentSymbol:v=>i.onRequest(N.DocumentSymbolRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onWorkspaceSymbol:v=>i.onRequest(N.WorkspaceSymbolRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onWorkspaceSymbolResolve:v=>i.onRequest(N.WorkspaceSymbolResolveRequest.type,v),onCodeAction:v=>i.onRequest(N.CodeActionRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onCodeActionResolve:v=>i.onRequest(N.CodeActionResolveRequest.type,(p,T)=>v(p,T)),onCodeLens:v=>i.onRequest(N.CodeLensRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onCodeLensResolve:v=>i.onRequest(N.CodeLensResolveRequest.type,(p,T)=>v(p,T)),onDocumentFormatting:v=>i.onRequest(N.DocumentFormattingRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),void 0)),onDocumentRangeFormatting:v=>i.onRequest(N.DocumentRangeFormattingRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),void 0)),onDocumentOnTypeFormatting:v=>i.onRequest(N.DocumentOnTypeFormattingRequest.type,(p,T)=>v(p,T)),onRenameRequest:v=>i.onRequest(N.RenameRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),void 0)),onPrepareRename:v=>i.onRequest(N.PrepareRenameRequest.type,(p,T)=>v(p,T)),onDocumentLinks:v=>i.onRequest(N.DocumentLinkRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onDocumentLinkResolve:v=>i.onRequest(N.DocumentLinkResolveRequest.type,(p,T)=>v(p,T)),onDocumentColor:v=>i.onRequest(N.DocumentColorRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onColorPresentation:v=>i.onRequest(N.ColorPresentationRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onFoldingRanges:v=>i.onRequest(N.FoldingRangeRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onSelectionRanges:v=>i.onRequest(N.SelectionRangeRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),(0,F.attachPartialResult)(i,p))),onExecuteCommand:v=>i.onRequest(N.ExecuteCommandRequest.type,(p,T)=>v(p,T,(0,F.attachWorkDone)(i,p),void 0)),dispose:()=>i.dispose()};for(let v of O)v.attach(U);return i.onRequest(N.InitializeRequest.type,v=>{t.initialize(v),Ue.string(v.trace)&&(c.trace=N.Trace.fromString(v.trace));for(let p of O)p.initialize(v.capabilities);if(G){let p=G(v,new N.CancellationTokenSource().token,(0,F.attachWorkDone)(i,v),void 0);return $(p).then(T=>{if(T instanceof N.ResponseError)return T;let A=T;A||(A={capabilities:{}});let Y=A.capabilities;Y||(Y={},A.capabilities=Y),Y.textDocumentSync===void 0||Y.textDocumentSync===null?Y.textDocumentSync=Ue.number(U.__textDocumentSync)?U.__textDocumentSync:N.TextDocumentSyncKind.None:!Ue.number(Y.textDocumentSync)&&!Ue.number(Y.textDocumentSync.change)&&(Y.textDocumentSync.change=Ue.number(U.__textDocumentSync)?U.__textDocumentSync:N.TextDocumentSyncKind.None);for(let B of O)B.fillServerCapabilities(Y);return A})}else{let p={capabilities:{textDocumentSync:N.TextDocumentSyncKind.None}};for(let T of O)T.fillServerCapabilities(p.capabilities);return p}}),i.onRequest(N.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,z)return z(new N.CancellationTokenSource().token)}),i.onNotification(N.ExitNotification.type,()=>{try{ne&&ne()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(N.SetTraceNotification.type,v=>{c.trace=N.Trace.fromString(v.value)}),U}Z.createConnection=gh});var zd=M(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.resolveModulePath=xe.FileSystem=xe.resolveGlobalYarnPath=xe.resolveGlobalNodePath=xe.resolve=xe.uriToFilePath=void 0;var mh=require("url"),Ge=require("path"),ms=require("fs"),bs=require("child_process");function ph(e){let t=mh.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let c=n[0],h=n[1];c.length===0&&h.length>1&&h[1]===":"&&n.shift()}return Ge.normalize(n.join("/"))}xe.uriToFilePath=ph;function ps(){return process.platform==="win32"}function mi(e,t,n,r){let i="NODE_PATH",c=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((h,g)=>{let S=process.env,w=Object.create(null);Object.keys(S).forEach(b=>w[b]=S[b]),t&&ms.existsSync(t)&&(w[i]?w[i]=t+Ge.delimiter+w[i]:w[i]=t,r&&r(`NODE_PATH value is: ${w[i]}`)),w.ELECTRON_RUN_AS_NODE="1";try{let b=(0,bs.fork)("",[],{cwd:n,env:w,execArgv:["-e",c]});if(b.pid===void 0){g(new Error(`Starting process to resolve node module  ${e} failed`));return}b.on("error",O=>{g(O)}),b.on("message",O=>{O.c==="r"&&(b.send({c:"e"}),O.s?h(O.r):g(new Error(`Failed to resolve module: ${e}`)))});let q={c:"rs",a:e};b.send(q)}catch(b){g(b)}})}xe.resolve=mi;function ys(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(c=>n[c]=process.env[c]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};ps()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let c=(0,bs.spawnSync)(t,["config","get","prefix"],r).stdout;if(!c){e&&e("'npm config get prefix' didn't return a value.");return}let h=c.trim();return e&&e(`'npm config get prefix' value is: ${h}`),h.length>0?ps()?Ge.join(h,"node_modules"):Ge.join(h,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}xe.resolveGlobalNodePath=ys;function yh(e){let t="yarn",n={encoding:"utf8"};ps()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,bs.spawnSync)(t,["global","dir","--json"],n),c=i.stdout;if(!c){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let h=c.trim().split(/\r?\n/);for(let g of h)try{let S=JSON.parse(g);if(S.type==="log")return Ge.join(S.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}xe.resolveGlobalYarnPath=yh;var vs;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!ms.existsSync(__filename.toUpperCase())||!ms.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,c){return n()?Ge.normalize(c).indexOf(Ge.normalize(i))===0:Ge.normalize(c).toLowerCase().indexOf(Ge.normalize(i).toLowerCase())===0}e.isParent=r})(vs||(xe.FileSystem=vs={}));function vh(e,t,n,r){return n?(Ge.isAbsolute(n)||(n=Ge.join(e,n)),mi(t,n,n,r).then(i=>vs.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>mi(t,ys(r),e,r))):mi(t,ys(r),e,r)}xe.resolveModulePath=vh});var _s=M((gm,Vd)=>{"use strict";Vd.exports=me()});var Bd=M(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.InlineCompletionFeature=void 0;var bh=me(),_h=e=>class extends e{get inlineCompletion(){return{on:t=>this.connection.onRequest(bh.InlineCompletionRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};pi.InlineCompletionFeature=_h});var Yd=M(Se=>{"use strict";var Dh=Se&&Se.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Jd=Se&&Se.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Dh(t,e,n)};Object.defineProperty(Se,"__esModule",{value:!0});Se.ProposedFeatures=Se.NotebookDocuments=Se.TextDocuments=Se.SemanticTokensBuilder=void 0;var Rh=ns();Object.defineProperty(Se,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Rh.SemanticTokensBuilder}});var Ph=Bd();Jd(me(),Se);var Th=ss();Object.defineProperty(Se,"TextDocuments",{enumerable:!0,get:function(){return Th.TextDocuments}});var wh=cs();Object.defineProperty(Se,"NotebookDocuments",{enumerable:!0,get:function(){return wh.NotebookDocuments}});Jd(gs(),Se);var Xd;(function(e){e.all={__brand:"features",languages:Ph.InlineCompletionFeature}})(Xd||(Se.ProposedFeatures=Xd={}))});var tl=M(ze=>{"use strict";var Ch=ze&&ze.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Kd=ze&&ze.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Ch(t,e,n)};Object.defineProperty(ze,"__esModule",{value:!0});ze.createConnection=ze.Files=void 0;var Gd=require("node:util"),Ds=nr(),Sh=gs(),jn=zd(),It=_s();Kd(_s(),ze);Kd(Yd(),ze);var Qd;(function(e){e.uriToFilePath=jn.uriToFilePath,e.resolveGlobalNodePath=jn.resolveGlobalNodePath,e.resolveGlobalYarnPath=jn.resolveGlobalYarnPath,e.resolve=jn.resolve,e.resolveModulePath=jn.resolveModulePath})(Qd||(ze.Files=Qd={}));var Zd;function yi(){if(Zd!==void 0)try{Zd.end()}catch{}}var hn=!1,el;function kh(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(el=setInterval(()=>{try{process.kill(r,0)}catch{yi(),process.exit(hn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}kh();var Nh={initialize:e=>{let t=e.processId;Ds.number(t)&&el===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(hn?0:1)}},3e3)},get shutdownReceived(){return hn},set shutdownReceived(e){hn=e},exit:e=>{yi(),process.exit(e)}};function qh(e,t,n,r){let i,c,h,g;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),It.ConnectionStrategy.is(e)||It.ConnectionOptions.is(e)?g=e:(c=e,h=t,g=n),Mh(c,h,g,i)}ze.createConnection=qh;function Mh(e,t,n,r){let i=!1;if(!e&&!t&&process.argv.length>2){let S,w,b=process.argv.slice(2);for(let q=0;q<b.length;q++){let O=b[q];if(O==="--node-ipc"){e=new It.IPCMessageReader(process),t=new It.IPCMessageWriter(process);break}else if(O==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(O==="--socket"){S=parseInt(b[q+1]);break}else if(O==="--pipe"){w=b[q+1];break}else{var c=O.split("=");if(c[0]==="--socket"){S=parseInt(c[1]);break}else if(c[0]==="--pipe"){w=c[1];break}}}if(S){let q=(0,It.createServerSocketTransport)(S);e=q[0],t=q[1]}else if(w){let q=(0,It.createServerPipeTransport)(w);e=q[0],t=q[1]}}var h="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+h);if(!t)throw new Error("Connection output stream is not set. "+h);if(Ds.func(e.read)&&Ds.func(e.on)){let S=e;S.on("end",()=>{yi(),process.exit(hn?0:1)}),S.on("close",()=>{yi(),process.exit(hn?0:1)})}let g=S=>{let w=(0,It.createProtocolConnection)(e,t,S,n);return i&&Oh(S),w};return(0,Sh.createConnection)(g,Nh,r)}function Oh(e){function t(r){return r.map(i=>typeof i=="string"?i:(0,Gd.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...c){if(!i)if(c.length===0)e.error("Assertion failed");else{let[h,...g]=c;e.error(`Assertion failed: ${h} ${t(g)}`)}},console.count=function(i="default"){let c=String(i),h=n.get(c)??0;h+=1,n.set(c,h),e.log(`${c}: ${c}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){e.log(t(i))},console.dir=function(i,c){e.log((0,Gd.inspect)(i,c))},console.log=function(...i){e.log(t(i))},console.error=function(...i){e.error(t(i))},console.trace=function(...i){let c=new Error().stack.replace(/(.+\n){2}/,""),h="Trace";i.length!==0&&(h+=`: ${t(i)}`),e.log(`${h}
${c}`)},console.warn=function(...i){e.warn(t(i))}}});var Rs=M((bm,nl)=>{"use strict";nl.exports=tl()});var Ts=M(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.s8IntToNumber=j.strictParseInt=j.decompileInstruction=j.componentsOf=j.compile=j.parseBinaryInstruction=j.validateOperand=j.formatBinaryNumber=j.binaryRegex=j.nibbleRegex=j.isJumpInstruction=j.preprocessLine=j.InstructionPart=j.instructionRegex=j.getInstructionRepresentation=j.getInstructionSignature=j.getInstructionByName=j.hmmmAliases=j.hmmmInstructions=void 0;{let e=function(n){let r=65535;n.operand1==="register"&&(r&=61695);let i=n.operand1==="signed_number"||n.operand1==="unsigned_number"||n.operand2==="signed_number"||n.operand2==="unsigned_number";return(n.operand2||i)&&(r&=65295),(n.operand3||i)&&(r&=65520),r},t=function(n,r,i,c,h,g){let S={name:n,opcode:r,mask:0,operand1:i,operand2:c,operand3:h,description:g};return S.mask=e(S),S};j.hmmmInstructions=[t("halt",0,void 0,void 0,void 0,"Halt Program!"),t("read",1,"register",void 0,void 0,"Stop for user input, which will then be stored in register rX (input is an integer from -32768 to +32767)"),t("write",2,"register",void 0,void 0,"Print contents of register rX"),t("jumpr",3,"register",void 0,void 0,"Set program counter to address in rX"),t("setn",4096,"register","signed_number",void 0,"Set register rX equal to the integer N (-128 to +127)"),t("loadn",8192,"register","unsigned_number",void 0,"Load register rX with the contents of memory address N"),t("storen",12288,"register","unsigned_number",void 0,"Store contents of register rX into memory address N"),t("loadr",16384,"register","register",void 0,"Load register rX with the contents of memory address N"),t("storer",16385,"register","register",void 0,"Store contents of register rX into memory address held in reg. rY"),t("popr",16386,"register","register",void 0,"Load contents of register rX from stack pointed to by reg. rY"),t("pushr",16387,"register","register",void 0,"Store contents of register rX onto stack pointed to by reg. rY"),t("addn",20480,"register","signed_number",void 0,"Add integer N (-128 to 127) to register rX"),t("nop",24576,void 0,void 0,void 0,"Do nothing"),t("copy",24576,"register","register",void 0,"Set rX = rY"),t("add",24576,"register","register","register","Set rX = rY + rZ"),t("neg",28672,"register","register",void 0,"Set rX = -rY"),t("sub",28672,"register","register","register","Set rX = rY - rZ"),t("mul",32768,"register","register","register","Set rx = rY * rZ"),t("div",36864,"register","register","register","Set rX = rY // rZ (integer division; rounds down; no remainder)"),t("mod",40960,"register","register","register","Set rX = rY % rZ (returns the remainder of integer division)"),t("jumpn",45056,"unsigned_number",void 0,void 0,"Set program counter to address N"),t("calln",45056,"register","unsigned_number",void 0,"Copy addr. of next instr. into rX and then jump to mem. addr. N"),t("jeqzn",49152,"register","unsigned_number",void 0,"If rX == 0, then jump to line N"),t("jnezn",53248,"register","unsigned_number",void 0,"If rX != 0, then jump to line N"),t("jgtzn",57344,"register","unsigned_number",void 0,"If rX > 0, then jump to line N"),t("jltzn",61440,"register","unsigned_number",void 0,"If rX < 0, then jump to line N")]}j.hmmmAliases=new Map([["mov","copy"],["jump","jumpr"],["jeqz","jeqzn"],["jnez","jnezn"],["jgtz","jgtzn"],["jltz","jltzn"],["call","calln"],["loadi","loadr"],["load","loadr"],["storei","storer"],["store","storer"]]);function rl(e){return j.hmmmAliases.has(e)&&(e=j.hmmmAliases.get(e)),j.hmmmInstructions.find(t=>t.name===e)}j.getInstructionByName=rl;function Eh(e){let t="";return e.operand1&&(t+=`${e.operand1==="register"?"rX":"N"}`),e.operand2&&(t+=` ${e.operand2==="register"?"rY":"N"}`),e.operand3&&(t+=` ${e.operand3==="register"?"rZ":"N"}`),t}j.getInstructionSignature=Eh;function xh(e){let t=(e.opcode>>>0).toString(2).padStart(16,"0");return t=t.match(/.{4}/g)?.join(" ")??t,t=t.padEnd(19," "),e.operand1&&(e.operand1==="register"?t=`${t.substring(0,4)} XXXX ${t.substring(10)}`:t=`${t.substring(0,9)} NNNN NNNN`),e.operand2&&(e.operand2==="register"?t=`${t.substring(0,9)} YYYY ${t.substring(15)}`:t=`${t.substring(0,9)} NNNN NNNN`),e.operand3&&(e.operand3==="register"?t=`${t.substring(0,14)} ZZZZ`:console.error(`Invalid instruction! ${e.name} has an operand 3 of type ${e.operand3}`)),t}j.getInstructionRepresentation=xh;var vi=/(?:(\S+)(?:\s+|$))?/gm,Ih=/(?:(\S+)\s*)?/gm;j.instructionRegex=RegExp(`^\\s*${vi.source}${vi.source}${vi.source}${vi.source}${Ih.source}(?:\\s+(.+))?$`,"md");var Qe;(function(e){e[e.FULL_LINE=0]="FULL_LINE",e[e.LINE_NUM=1]="LINE_NUM",e[e.INSTRUCTION=2]="INSTRUCTION",e[e.OPERAND1=3]="OPERAND1",e[e.OPERAND2=4]="OPERAND2",e[e.OPERAND3=5]="OPERAND3",e[e.OTHER=6]="OTHER"})(Qe||(j.InstructionPart=Qe={}));function il(e){return e.split("#")[0].trimEnd()}j.preprocessLine=il;function jh(e){return e?e.startsWith("j")||e.startsWith("call"):!1}j.isJumpInstruction=jh;j.nibbleRegex=/\s*((?:\s*[01]){4})/;j.binaryRegex=RegExp(`${j.nibbleRegex.source}${j.nibbleRegex.source}${j.nibbleRegex.source}${j.nibbleRegex.source}\\s*`,"d");function ol(e,t){return e=e.replaceAll(/[^01]/g,""),t&&(e=e.padStart(16,"0")),e=e.replace(j.binaryRegex,"$1 $2 $3 $4"),e}j.formatBinaryNumber=ol;function sl(e){if(!e)return;if(e==="r0"||e==="R0")return"r0";if(/^r\d+$/i.test(e))return/^r(\d|1[0-5])$/i.test(e)?"register":"invalid_register";let t=jt(e);if(!isNaN(t))return t<-128||t>255?"invalid_number":t<0?"signed_number":t>127?"unsigned_number":"number"}j.validateOperand=sl;function Ps(e){let t;if(typeof e=="string"){if(e=e.replace(/[^01]/g,""),e.length!==16)return;t=jt(e,2)}else t=e;let n=j.hmmmInstructions.filter(h=>((h.opcode^t)&h.mask)===0);if(!n.length)return;let r=n.sort((h,g)=>-(h.mask-g.mask))[0],i=[];function c(h,g){switch(h){case"register":return{type:"register",value:t>>g&15};case"signed_number":return{type:"signed_number",value:al(t&255)};case"unsigned_number":return{type:"unsigned_number",value:t&255}}}if(r.operand1&&i.push(c(r.operand1,8)),r.operand2&&i.push(c(r.operand2,4)),r.operand3){if(r.operand3==="signed_number"||r.operand3==="unsigned_number"){console.error(`Invalid instruction! ${r.name} has an operand 3 of type ${r.operand3}`);return}i.push(c(r.operand3,0))}return{instruction:r,operands:i}}j.parseBinaryInstruction=Ps;function Lh(e){let t=[],n=new Map,r=0;for(let i=0;i<e.length;i++){let w=function(b,q,O){let $=sl(q);if($!==void 0)switch(b){case"register":return $==="r0"||$==="register"?jt(q.slice(1))<<O:void 0;case"signed_number":return $==="signed_number"||$==="number"?jt(q)&255:void 0;case"unsigned_number":return $==="unsigned_number"||$==="number"?jt(q)&255:void 0}},c=il(e[i]).trim();if(!c)continue;let h;if(!(h=j.instructionRegex.exec(c))||h[Qe.OTHER]||jt(h[Qe.LINE_NUM])!==r)return;n.set(r++,i);let g=rl(h[Qe.INSTRUCTION]);if(!g)return;let S=g.opcode;if(g.operand1){let b=w(g.operand1,h[Qe.OPERAND1],8);if(b===void 0)return;S|=b}else if(h[Qe.OPERAND1])return;if(g.operand2){let b=w(g.operand2,h[Qe.OPERAND2],4);if(b===void 0)return;S|=b}else if(h[Qe.OPERAND2])return;if(g.operand3){if(g.operand3==="signed_number"||g.operand3==="unsigned_number"){console.error(`Invalid instruction! ${g.name} has an operand 3 of type ${g.operand3}`);return}let b=w(g.operand3,h[Qe.OPERAND3],0);if(b===void 0)return;S|=b}else if(h[Qe.OPERAND3])return;t.push(ol(S.toString(2),!0))}return[t,n]}j.compile=Lh;function Ah(e){let t=Ps(e);if(!t)return;let n,r,i,c;return t.instruction.operand1==="register"&&(n=t.operands[0].value),t.instruction.operand2==="register"&&(r=t.operands[1].value),t.instruction.operand3==="register"&&(i=t.operands[2].value),(t.instruction.operand1==="signed_number"||t.instruction.operand1==="unsigned_number")&&(c=t.operands[0].value),(t.instruction.operand2==="signed_number"||t.instruction.operand2==="unsigned_number")&&(c=t.operands[1].value),[e,t,n,r,i,c]}j.componentsOf=Ah;function Fh(e){if(typeof e=="string"||typeof e=="number"){let t=Ps(e);if(!t)return;e=t}return`${e.instruction.name}${e.operands.length!==0?" ":""}${e.operands.map(t=>`${t.type==="register"?"r":""}${t.value}`).join(" ")}`}j.decompileInstruction=Fh;function jt(e,t){return e===void 0?NaN:(e=e.trim(),/^-?\d+$/.test(e)?parseInt(e,t):NaN)}j.strictParseInt=jt;function al(e){return e>127?e-256:e}j.s8IntToNumber=al});var er=class e{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(e.isIncremental(r)){let i=Es(r.range),c=this.offsetAt(i.start),h=this.offsetAt(i.end);this._content=this._content.substring(0,c)+r.text+this._content.substring(h,this._content.length);let g=Math.max(i.start.line,0),S=Math.max(i.end.line,0),w=this._lineOffsets,b=Os(r.text,!1,c);if(S-g===b.length)for(let O=0,$=b.length;O<$;O++)w[O+g+1]=b[O];else b.length<1e4?w.splice(g+1,S-g,...b):this._lineOffsets=w=w.slice(0,g+1).concat(b,w.slice(S+1));let q=r.text.length-(h-c);if(q!==0)for(let O=g+1+b.length,$=w.length;O<$;O++)w[O]=w[O]+q}else if(e.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Os(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let h=Math.floor((r+i)/2);n[h]>t?i=h:r=h+1}let c=r-1;return{line:c,character:t-n[c]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line],i=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,i),r)}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},tr;(function(e){function t(i,c,h,g){return new er(i,c,h,g)}e.create=t;function n(i,c,h){if(i instanceof er)return i.update(c,h),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,c){let h=i.getText(),g=Ri(c.map(pl),(b,q)=>{let O=b.range.start.line-q.range.start.line;return O===0?b.range.start.character-q.range.start.character:O}),S=0,w=[];for(let b of g){let q=i.offsetAt(b.range.start);if(q<S)throw new Error("Overlapping edit");q>S&&w.push(h.substring(S,q)),b.newText.length&&w.push(b.newText),S=i.offsetAt(b.range.end)}return w.push(h.substr(S)),w.join("")}e.applyEdits=r})(tr||(tr={}));function Ri(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);Ri(r,t),Ri(i,t);let c=0,h=0,g=0;for(;c<r.length&&h<i.length;)t(r[c],i[h])<=0?e[g++]=r[c++]:e[g++]=i[h++];for(;c<r.length;)e[g++]=r[c++];for(;h<i.length;)e[g++]=i[h++];return e}function Os(e,t,n=0){let r=t?[n]:[];for(let i=0;i<e.length;i++){let c=e.charCodeAt(i);(c===13||c===10)&&(c===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Es(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function pl(e){let t=Es(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var E=Kn(Rs()),P=Kn(Ts());var be=Kn(Rs()),Pt=Kn(Ts());function Lt(e,t,n){return(e>=n[t]?.[0]&&e<=n[t]?.[1])??!1}function bi(e,t){let n=e.getText(ke(t.line)),r=be.Range.create(t.line,t.character,t.line,t.character);for(;r.start.character>0&&!/\s/.test(n[r.start.character-1]);)r.start.character--;for(;r.end.character<n.length&&!/\s/.test(n[r.end.character]);)r.end.character++;return[n.slice(r.start.character,r.end.character),r]}function ke(e){return be.Range.create(e,be.uinteger.MIN_VALUE,e,be.uinteger.MAX_VALUE)}function cl(e,t){if(e.options.insertFinalNewline||e.options.trimFinalNewlines){let n=0;for(let r=t.lineCount-1;r>=0&&!t.getText(ke(r)).trim();r--)n++;if(e.options.insertFinalNewline&&n===0)return be.TextEdit.insert(t.positionAt(t.getText().length),`
`);if(e.options.trimFinalNewlines&&n>1)return be.TextEdit.del(be.Range.create(t.lineCount-n,be.uinteger.MIN_VALUE,t.lineCount,be.uinteger.MIN_VALUE))}}function gn(e){for(let t of Pt.hmmmInstructions)e.items.push({label:t.name,labelDetails:{detail:` ${(0,Pt.getInstructionSignature)(t)}`,description:(0,Pt.getInstructionRepresentation)(t)},kind:be.CompletionItemKind.Keyword,documentation:t.description})}function _i(e,t){let n=0;for(let r=0;r<e;r++)Tt(t,r).trim()&&n++;return n}function ws(e,t,n){e.items.push({label:_i(t,n).toString(),labelDetails:{description:"Next Line Number"},kind:be.CompletionItemKind.Snippet})}function mn(e){e.items.push({label:"r0",labelDetails:{description:"Always 0"},kind:be.CompletionItemKind.Variable});for(let t=1;t<13;t++)e.items.push({label:`r${t}`,labelDetails:{description:"General Purpose Register"},kind:be.CompletionItemKind.Variable,sortText:`r${t.toString().padStart(2,"0")}`});e.items.push({label:"r13",labelDetails:{description:"Return Value"},kind:be.CompletionItemKind.Variable}),e.items.push({label:"r14",labelDetails:{description:"Return Address"},kind:be.CompletionItemKind.Variable}),e.items.push({label:"r15",labelDetails:{description:"Stack Pointer"},kind:be.CompletionItemKind.Variable})}function Tt(e,t){return(0,Pt.preprocessLine)(e.getText(ke(t)))}var nt=(0,E.createConnection)(E.ProposedFeatures.all),ut=new E.TextDocuments(tr);nt.onInitialize(e=>({capabilities:{textDocumentSync:E.TextDocumentSyncKind.Incremental,codeActionProvider:!0,completionProvider:{triggerCharacters:[" ",`
`]},definitionProvider:!0,documentFormattingProvider:!0,hoverProvider:!0,referencesProvider:!0}}));ut.onDidChangeContent(e=>{Wh(e.document)});async function Wh(e){let t=[],n=Array(7).fill([E.uinteger.MIN_VALUE,E.uinteger.MAX_VALUE]),r=0,i=[];for(let g=0;g<e.lineCount;g++){let G=function(B,K){B===void 0?t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[K][0],g,b[K][1]),message:"Invalid operand!",source:"HMMM Language Server",data:"invalid_operand"}):B==="invalid_register"?t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[K][0],g,b[K][1]),message:"Invalid register! HMMM only supports registers r0-r15",source:"HMMM Language Server",data:"invalid_register"}):B==="invalid_number"&&t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[K][0],g,b[K][1]),message:"Invalid number! HMMM only supports numerical arguments from -128 to 127 (signed) or 0 to 255 (unsigned)",source:"HMMM Language Server",data:"invalid_number"})},Y=function(B,K,pe,_e,Ie){if(Ie)if(B)switch(Ie){case"register":K!=="register"&&K!=="r0"&&K!=="invalid_register"&&t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[pe][0],g,b[pe][1]),message:`${_e.name} expects a register here`,source:"HMMM Language Server",data:"invalid_operand_type"});break;case"signed_number":K!=="signed_number"&&K!=="number"&&t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[pe][0],g,b[pe][1]),message:`${_e.name} expects a signed number (-128 to 127) here`,source:"HMMM Language Server",data:"invalid_operand_type"});break;case"unsigned_number":K!=="unsigned_number"&&K!=="number"?t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[pe][0],g,b[pe][1]),message:`${_e.name} expects an unsigned number (0 to 255) here`,source:"HMMM Language Server",data:"invalid_operand_type"}):(0,P.isJumpInstruction)(_e.name)&&i.push([(0,P.strictParseInt)(B),E.Range.create(g,b[pe][0],g,b[pe][1])]);break}else return t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[P.InstructionPart.INSTRUCTION][0],g,b[P.InstructionPart.INSTRUCTION][1]),message:`${_e.name} expects ${A} argument${A===1?"":"s"}`,source:"HMMM Language Server",data:"missing_operand"}),!0;else B&&t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[pe][0],g,b[pe][1]),message:`${_e.name} only expects ${A} argument${A===1?"":"s"}`,source:"HMMM Language Server",data:"too_many_operands"});return!1};var c=G,h=Y;let S=Tt(e,g);if(!S.trim())continue;let w;if(!(w=P.instructionRegex.exec(S))){t.push({severity:E.DiagnosticSeverity.Error,range:ke(g),message:"Invalid line!",source:"HMMM Language Server",data:"invalid_line"});continue}let b=w.indices??n;b=b.map(B=>B??[E.uinteger.MIN_VALUE,E.uinteger.MAX_VALUE]);let q=(0,P.strictParseInt)(w[P.InstructionPart.LINE_NUM]);isNaN(q)?(t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[P.InstructionPart.LINE_NUM][0],g,b[P.InstructionPart.LINE_NUM][0]+1),message:"Missing line number",source:"HMMM Language Server",data:"missing_line_num"}),w=P.instructionRegex.exec(`0 ${S}`)??w,b=w.indices??n):(q!==r&&t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[P.InstructionPart.LINE_NUM][0],g,b[P.InstructionPart.LINE_NUM][1]),message:`Incorrect line number! Should be ${r}`,source:"HMMM Language Server",data:"incorrect_line_num"}),q>255&&t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[P.InstructionPart.LINE_NUM][0],g,b[P.InstructionPart.LINE_NUM][1]),message:"Line number is out of range! HMMM programs can only have 256 lines of code",source:"HMMM Language Server",data:"line_num_out_of_range"})),r++;let O=w[P.InstructionPart.OPERAND1],$=w[P.InstructionPart.OPERAND2],z=w[P.InstructionPart.OPERAND3],ne,U,v;O&&(ne=(0,P.validateOperand)(O),G(ne,P.InstructionPart.OPERAND1)),$&&(U=(0,P.validateOperand)($),G(U,P.InstructionPart.OPERAND2)),z&&(v=(0,P.validateOperand)(z),G(v,P.InstructionPart.OPERAND3)),w[P.InstructionPart.OTHER]&&t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[P.InstructionPart.OTHER][0],g,b[P.InstructionPart.OTHER][1]),message:"Unexpected token!",source:"HMMM Language Server",data:"unexpected_token"});let p=w[P.InstructionPart.INSTRUCTION];if(!p){t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,Math.max(0,b[P.InstructionPart.LINE_NUM][1]-1),g,b[P.InstructionPart.LINE_NUM][1]),message:"Expected instruction",source:"HMMM Language Server",data:"missing_instruction"});continue}let T=(0,P.getInstructionByName)(p);if(!T){t.push({severity:E.DiagnosticSeverity.Error,range:E.Range.create(g,b[P.InstructionPart.INSTRUCTION][0],g,b[P.InstructionPart.INSTRUCTION][1]),message:"Unknown instruction",source:"HMMM Language Server",data:"invalid_instruction"});continue}let A=[T.operand1,T.operand2,T.operand3].filter(B=>B!==void 0).length;Y(O,ne,P.InstructionPart.OPERAND1,T,T.operand1)||Y($,U,P.InstructionPart.OPERAND2,T,T.operand2)||Y(z,v,P.InstructionPart.OPERAND3,T,T.operand3)}for(let[g,S]of i)g>=r&&t.push({severity:E.DiagnosticSeverity.Warning,range:S,message:"Jump destination is outside code segment",source:"HMMM Language Server",data:"jump_outside_cs"});nt.sendDiagnostics({uri:e.uri,diagnostics:t})}nt.onCodeAction(e=>{let t=[];return e.context.diagnostics.forEach(n=>{if(n.source!=="HMMM Language Server")return;let r=ut.get(e.textDocument.uri);if(!r)return;let i=Tt(r,n.range.start.line);switch(n.data){case"incorrect_line_num":{let h=_i(n.range.start.line,r);t.push({title:`Change Line Number to ${h}`,kind:E.CodeActionKind.QuickFix,diagnostics:[n],edit:{changes:{[e.textDocument.uri]:[E.TextEdit.replace(n.range,h.toString())]}}});break}case"missing_line_num":{let h=_i(n.range.start.line,ut.get(e.textDocument.uri));t.push({title:"Add Line Number",kind:E.CodeActionKind.QuickFix,diagnostics:[n],edit:{changes:{[e.textDocument.uri]:[E.TextEdit.replace(E.Range.create(n.range.start.line,0,n.range.end.line,i.search(/\S/)),h.toString()+" ")]}}});break}case"too_many_operands":{t.push({title:"Remove Extra Operands",kind:E.CodeActionKind.QuickFix,diagnostics:[n],edit:{changes:{[e.textDocument.uri]:[E.TextEdit.del(n.range)]}}});break}case"unexpected_token":{t.push({title:"Remove Unexpected Token",kind:E.CodeActionKind.QuickFix,diagnostics:[n],edit:{changes:{[e.textDocument.uri]:[E.TextEdit.del(n.range)]}}});break}}}),t});nt.onCompletion(e=>{let t=ut.get(e.textDocument.uri),n=E.CompletionList.create();if(!t)return mn(n),gn(n),n;let r=Tt(t,e.position.line);if(!r.trim())return ws(n,e.position.line,t),gn(n),n;let i;if(!(i=P.instructionRegex.exec(r))?.indices||!i.indices)return gn(n),n;let c=i.indices,h=e.position.character;if(Lt(h,P.InstructionPart.OTHER,c))return n;if(c[P.InstructionPart.LINE_NUM][0]=0,Lt(h,P.InstructionPart.LINE_NUM,c))return ws(n,e.position.line,t),isNaN((0,P.strictParseInt)(i[P.InstructionPart.LINE_NUM]))&&gn(n),n;if(!i[P.InstructionPart.INSTRUCTION]||Lt(h,P.InstructionPart.INSTRUCTION,c))return gn(n),n;let g=(0,P.getInstructionByName)(i[P.InstructionPart.INSTRUCTION]);return g?(!i[P.InstructionPart.OPERAND1]||Lt(h,P.InstructionPart.OPERAND1,c))&&g.operand1==="register"?(mn(n),n):(!i[P.InstructionPart.OPERAND2]||Lt(h,P.InstructionPart.OPERAND2,c))&&g.operand2==="register"?(mn(n),n):((!i[P.InstructionPart.OPERAND3]||Lt(h,P.InstructionPart.OPERAND3,c))&&g.operand3==="register"&&mn(n),n):(mn(n),n)});nt.onDefinition(e=>{let t=ut.get(e.textDocument.uri);if(!t)return[];let n=t.getText(ke(e.position.line)),r=n.indexOf("#");if(r!=-1&&e.position.character>=r)return[];let i=n.indexOf(" ");if(i!=-1&&e.position.character<=i)return[];let c=bi(t,e.position)[0],h=(0,P.strictParseInt)(c);if(isNaN(h)||h<0)return[];let g;if(!(g=P.instructionRegex.exec(n)))return[];let S=g[P.InstructionPart.INSTRUCTION];if(!(0,P.isJumpInstruction)(S))return[];let w=[];for(let b=0;b<t.lineCount;b++){let q=Tt(t,b).trim().split(/\s+/)[0];if(!q)continue;(0,P.strictParseInt)(q)===h&&w.push({uri:e.textDocument.uri,range:ke(b)})}return w.length?w:[{uri:e.textDocument.uri,range:ke(e.position.line)}]});nt.onDocumentFormatting(e=>{let t=ut.get(e.textDocument.uri);if(!t)return[];let n=0,r=0,i=0,c=0,h=0;for(let b=0;b<t.lineCount;b++){let q=Tt(t,b).trim();if(!q)continue;let O;if(!(O=P.instructionRegex.exec(q)))continue;let $=(0,P.strictParseInt)(O[P.InstructionPart.LINE_NUM]);isNaN($)&&(O=P.instructionRegex.exec(`0 ${q}`)??O,$=0);let z=$.toString().length??0,G=O[P.InstructionPart.INSTRUCTION]?.length??0,ne=O[P.InstructionPart.OPERAND1]?.length??0,U=O[P.InstructionPart.OPERAND2]?.length??0,v=O[P.InstructionPart.OPERAND3]?.length??0;z>n&&(n=z),G>r&&(r=G),ne>i&&(i=ne),U>c&&(c=U),v>h&&(h=v)}let g=[];for(let b=0;b<t.lineCount;b++){let K=function(Ie){return Ie===0?"":" "};var w=K;let q=t.getText(ke(b));if(!q)continue;let O=q.trim(),$=O.indexOf("#");if($==0||!O){g.push(E.TextEdit.replace(ke(b),O));continue}let z;if(!(z=P.instructionRegex.exec((0,P.preprocessLine)(O))))continue;let G=(0,P.strictParseInt)(z[P.InstructionPart.LINE_NUM]);isNaN(G)&&(z=P.instructionRegex.exec(`0 ${O}`)??z,G=0);let ne=z[P.InstructionPart.INSTRUCTION]?.length??0,U=z[P.InstructionPart.OPERAND1]?.length??0,v=z[P.InstructionPart.OPERAND2]?.length??0,p=z[P.InstructionPart.OPERAND3]?.length??0,T=r-ne,A=i-U,Y=c-v,B=h-p,pe=$!=-1?O.slice($):"",_e=`${G.toString().padStart(n,"0")} ${z[P.InstructionPart.INSTRUCTION]??""}${" ".repeat(T)}${K(i)}${z[P.InstructionPart.OPERAND1]??""}${" ".repeat(A)}${K(c)}${z[P.InstructionPart.OPERAND2]??""}${" ".repeat(Y)}${K(h)}${z[P.InstructionPart.OPERAND3]??""}${" ".repeat(B)} ${z[P.InstructionPart.OTHER]??""}${z[P.InstructionPart.OTHER]?" ":""}${pe}`.trim();_e!==q&&g.push(E.TextEdit.replace(ke(b),_e))}let S=cl(e,t);return S&&g.push(S),g});nt.onHover(e=>{let t=ut.get(e.textDocument.uri);if(!t)return{contents:[]};let r=t.getText(ke(e.position.line)).indexOf("#");if(r!=-1&&e.position.character>=r)return{contents:[]};let i=bi(t,e.position),c=(0,P.getInstructionByName)(i[0]);return c?{contents:{kind:E.MarkupKind.PlainText,value:c.description},range:i[1]}:/^r(\d|1[0-5])$/i.test(i[0])?(i[0]=i[0].toLowerCase(),i[0]==="r0"?{contents:{kind:E.MarkupKind.Markdown,value:"Always 0"},range:i[1]}:i[0]==="r13"?{contents:{kind:E.MarkupKind.Markdown,value:"Return Value"},range:i[1]}:i[0]==="r14"?{contents:{kind:E.MarkupKind.Markdown,value:"Return Address"},range:i[1]}:i[0]==="r15"?{contents:{kind:E.MarkupKind.Markdown,value:"Stack Pointer"},range:i[1]}:{contents:{kind:E.MarkupKind.Markdown,value:"General Purpose Register"},range:i[1]}):{contents:[]}});nt.onReferences(e=>{let t=ut.get(e.textDocument.uri);if(!t)return;let n=t.getText(ke(e.position.line)),r=n.indexOf("#");if(r!=-1&&e.position.character>=r)return;let i=n.indexOf(" ");if(i!=-1&&e.position.character>i)return;let c=bi(t,e.position),h=(0,P.strictParseInt)(c[0]);if(isNaN(h)||h<0)return;let g=[];for(let S=0;S<t.lineCount;S++){let w=Tt(t,S);if(!w)continue;let b;if(b=P.instructionRegex.exec(w)){if(!b.indices){w.slice(w.indexOf(" ")).includes(h.toString())&&g.push({uri:e.textDocument.uri,range:ke(S)});continue}if((0,P.isJumpInstruction)(b[P.InstructionPart.INSTRUCTION])){if(b[P.InstructionPart.OPERAND1]){let q=b[P.InstructionPart.OPERAND1];(0,P.strictParseInt)(q)===h&&g.push({uri:e.textDocument.uri,range:ke(S)})}if(b[P.InstructionPart.OPERAND2]){let q=b[P.InstructionPart.OPERAND2];(0,P.strictParseInt)(q)===h&&g.push({uri:e.textDocument.uri,range:ke(S)})}}}}return g});ut.listen(nt);nt.listen();
