"use strict";var sd=Object.create;var Ts=Object.defineProperty;var ad=Object.getOwnPropertyDescriptor;var cd=Object.getOwnPropertyNames;var ud=Object.getPrototypeOf,ld=Object.prototype.hasOwnProperty;var N=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var dd=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of cd(t))!ld.call(e,i)&&i!==n&&Ts(e,i,{get:()=>t[i],enumerable:!(r=ad(t,i))||r.enumerable});return e};var Jn=(e,t,n)=>(n=e!=null?sd(ud(e)):{},dd(t||!e||!e.__esModule?Ts(n,"default",{value:e,enumerable:!0}):n,e));var Zn=N(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.thenable=de.typedArray=de.stringArray=de.array=de.func=de.error=de.number=de.string=de.boolean=void 0;function hd(e){return e===!0||e===!1}de.boolean=hd;function qs(e){return typeof e=="string"||e instanceof String}de.string=qs;function gd(e){return typeof e=="number"||e instanceof Number}de.number=gd;function md(e){return e instanceof Error}de.error=md;function Ns(e){return typeof e=="function"}de.func=Ns;function Os(e){return Array.isArray(e)}de.array=Os;function pd(e){return Os(e)&&e.every(t=>qs(t))}de.stringArray=pd;function yd(e,t){return Array.isArray(e)&&e.every(t)}de.typedArray=yd;function bd(e){return e&&Ns(e.then)}de.thenable=bd});var Ht=N(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.stringArray=ye.array=ye.func=ye.error=ye.number=ye.string=ye.boolean=void 0;function vd(e){return e===!0||e===!1}ye.boolean=vd;function Es(e){return typeof e=="string"||e instanceof String}ye.string=Es;function _d(e){return typeof e=="number"||e instanceof Number}ye.number=_d;function Dd(e){return e instanceof Error}ye.error=Dd;function Rd(e){return typeof e=="function"}ye.func=Rd;function Ms(e){return Array.isArray(e)}ye.array=Ms;function wd(e){return Ms(e)&&e.every(t=>Es(t))}ye.stringArray=wd});var Hi=N(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Message=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var wt=Ht(),yi;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(yi||(M.ErrorCodes=yi={}));var bi=class e extends Error{constructor(t,n,r){super(n),this.code=wt.number(t)?t:yi.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,e.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};M.ResponseError=bi;var we=class e{constructor(t){this.kind=t}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};M.ParameterStructures=we;we.auto=new we("auto");we.byPosition=new we("byPosition");we.byName=new we("byName");var te=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return we.auto}};M.AbstractMessageSignature=te;var vi=class extends te{constructor(t){super(t,0)}};M.RequestType0=vi;var _i=class extends te{constructor(t,n=we.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType=_i;var Di=class extends te{constructor(t,n=we.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType1=Di;var Ri=class extends te{constructor(t){super(t,2)}};M.RequestType2=Ri;var wi=class extends te{constructor(t){super(t,3)}};M.RequestType3=wi;var Pi=class extends te{constructor(t){super(t,4)}};M.RequestType4=Pi;var Ci=class extends te{constructor(t){super(t,5)}};M.RequestType5=Ci;var Ti=class extends te{constructor(t){super(t,6)}};M.RequestType6=Ti;var Si=class extends te{constructor(t){super(t,7)}};M.RequestType7=Si;var ki=class extends te{constructor(t){super(t,8)}};M.RequestType8=ki;var qi=class extends te{constructor(t){super(t,9)}};M.RequestType9=qi;var Ni=class extends te{constructor(t,n=we.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType=Ni;var Oi=class extends te{constructor(t){super(t,0)}};M.NotificationType0=Oi;var Ei=class extends te{constructor(t,n=we.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=Ei;var Mi=class extends te{constructor(t){super(t,2)}};M.NotificationType2=Mi;var xi=class extends te{constructor(t){super(t,3)}};M.NotificationType3=xi;var ji=class extends te{constructor(t){super(t,4)}};M.NotificationType4=ji;var Ii=class extends te{constructor(t){super(t,5)}};M.NotificationType5=Ii;var Li=class extends te{constructor(t){super(t,6)}};M.NotificationType6=Li;var Fi=class extends te{constructor(t){super(t,7)}};M.NotificationType7=Fi;var Ai=class extends te{constructor(t){super(t,8)}};M.NotificationType8=Ai;var Wi=class extends te{constructor(t){super(t,9)}};M.NotificationType9=Wi;var xs;(function(e){function t(i){let c=i;return c&&wt.string(c.method)&&(wt.string(c.id)||wt.number(c.id))}e.isRequest=t;function n(i){let c=i;return c&&wt.string(c.method)&&i.id===void 0}e.isNotification=n;function r(i){let c=i;return c&&(c.result!==void 0||!!c.error)&&(wt.string(c.id)||wt.number(c.id)||c.id===null)}e.isResponse=r})(xs||(M.Message=xs={}))});var Ui=N(at=>{"use strict";var js;Object.defineProperty(at,"__esModule",{value:!0});at.LRUCache=at.LinkedMap=at.Touch=void 0;var be;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(be||(at.Touch=be={}));var Qn=class{constructor(){this[js]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=be.None){let r=this._map.get(t);if(r)return n!==be.None&&this.touch(r,n),r.value}set(t,n,r=be.None){let i=this._map.get(t);if(i)i.value=n,r!==be.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case be.None:this.addItemLast(i);break;case be.First:this.addItemFirst(i);break;case be.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(js=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==be.First&&n!==be.Last)){if(n===be.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===be.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};at.LinkedMap=Qn;var $i=class extends Qn{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=be.AsNew){return super.get(t,n)}peek(t){return super.get(t,be.None)}set(t,n){return super.set(t,n,be.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};at.LRUCache=$i});var Ls=N(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.Disposable=void 0;var Is;(function(e){function t(n){return{dispose:n}}e.create=t})(Is||(Kn.Disposable=Is={}))});var ct=N(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});var zi;function Vi(){if(zi===void 0)throw new Error("No runtime abstraction layer installed");return zi}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");zi=n}e.install=t})(Vi||(Vi={}));Bi.default=Vi});var Ut=N($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.Emitter=$t.Event=void 0;var Pd=ct(),Fs;(function(e){let t={dispose(){}};e.None=function(){return t}})(Fs||($t.Event=Fs={}));var Xi=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,c=this._callbacks.length;i<c;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let c=0,h=r.length;c<h;c++)try{n.push(r[c].apply(i[c],t))}catch(b){(0,Pd.default)().console.error(b)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},er=class e{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new Xi),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};$t.Emitter=er;er._noop=function(){}});var rr=N(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.CancellationTokenSource=zt.CancellationToken=void 0;var Cd=ct(),Td=Ht(),Ji=Ut(),tr;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ji.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ji.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||Td.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(tr||(zt.CancellationToken=tr={}));var Sd=Object.freeze(function(e,t){let n=(0,Cd.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),nr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Sd:(this._emitter||(this._emitter=new Ji.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Yi=class{get token(){return this._token||(this._token=new nr),this._token}cancel(){this._token?this._token.cancel():this._token=tr.Cancelled}dispose(){this._token?this._token instanceof nr&&this._token.dispose():this._token=tr.None}};zt.CancellationTokenSource=Yi});var As=N(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.SharedArrayReceiverStrategy=Vt.SharedArraySenderStrategy=void 0;var kd=rr(),pn;(function(e){e.Continue=0,e.Cancelled=1})(pn||(pn={}));var Gi=class{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=pn.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,pn.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}};Vt.SharedArraySenderStrategy=Gi;var Zi=class{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===pn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Qi=class{constructor(t){this.token=new Zi(t)}cancel(){}dispose(){}},Ki=class{constructor(){this.kind="request"}createCancellationTokenSource(t){let n=t.$cancellationData;return n===void 0?new kd.CancellationTokenSource:new Qi(n)}};Vt.SharedArrayReceiverStrategy=Ki});var to=N(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.Semaphore=void 0;var qd=ct(),eo=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,qd.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};ir.Semaphore=eo});var Hs=N(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ReadableStreamMessageReader=ut.AbstractMessageReader=ut.MessageReader=void 0;var ro=ct(),Bt=Ht(),no=Ut(),Nd=to(),Ws;(function(e){function t(n){let r=n;return r&&Bt.func(r.listen)&&Bt.func(r.dispose)&&Bt.func(r.onError)&&Bt.func(r.onClose)&&Bt.func(r.onPartialMessage)}e.is=t})(Ws||(ut.MessageReader=Ws={}));var or=class{constructor(){this.errorEmitter=new no.Emitter,this.closeEmitter=new no.Emitter,this.partialMessageEmitter=new no.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${Bt.string(t.message)?t.message:"unknown"}`)}};ut.AbstractMessageReader=or;var io;(function(e){function t(n){let r,i,c,h=new Map,b,w=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(c=n.contentDecoder,h.set(c.name,c)),n.contentDecoders!==void 0)for(let S of n.contentDecoders)h.set(S.name,S);if(n.contentTypeDecoder!==void 0&&(b=n.contentTypeDecoder,w.set(b.name,b)),n.contentTypeDecoders!==void 0)for(let S of n.contentTypeDecoders)w.set(S.name,S)}return b===void 0&&(b=(0,ro.default)().applicationJson.decoder,w.set(b.name,b)),{charset:r,contentDecoder:c,contentDecoders:h,contentTypeDecoder:b,contentTypeDecoders:w}}e.fromOptions=t})(io||(io={}));var oo=class extends or{constructor(t,n){super(),this.readable=t,this.options=io.fromOptions(n),this.buffer=(0,ro.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Nd.Semaphore(1)}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let c=parseInt(i);if(isNaN(c)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=c}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,ro.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ut.ReadableStreamMessageReader=oo});var Bs=N(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.WriteableStreamMessageWriter=lt.AbstractMessageWriter=lt.MessageWriter=void 0;var $s=ct(),yn=Ht(),Od=to(),Us=Ut(),Ed="Content-Length: ",zs=`\r
`,Vs;(function(e){function t(n){let r=n;return r&&yn.func(r.dispose)&&yn.func(r.onClose)&&yn.func(r.onError)&&yn.func(r.write)}e.is=t})(Vs||(lt.MessageWriter=Vs={}));var sr=class{constructor(){this.errorEmitter=new Us.Emitter,this.closeEmitter=new Us.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${yn.string(t.message)?t.message:"unknown"}`)}};lt.AbstractMessageWriter=sr;var so;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,$s.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,$s.default)().applicationJson.encoder}}e.fromOptions=t})(so||(so={}));var ao=class extends sr{constructor(t,n){super(),this.writable=t,this.options=so.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Od.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Ed,r.byteLength.toString(),zs),i.push(zs),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};lt.WriteableStreamMessageWriter=ao});var Xs=N(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.AbstractMessageBuffer=void 0;var Md=13,xd=10,jd=`\r
`,co=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,c=0;e:for(;r<this._chunks.length;){let S=this._chunks[r];for(i=0;i<S.length;){switch(S[i]){case Md:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case xd:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}c+=S.byteLength,r++}if(n!==4)return;let h=this._read(c+i),b=new Map,w=this.toString(h,"ascii").split(jd);if(w.length<2)return b;for(let S=0;S<w.length-2;S++){let q=w[S],P=q.indexOf(":");if(P===-1)throw new Error(`Message header must separate key and value using ':'
${q}`);let x=q.substr(0,P),J=q.substr(P+1).trim();b.set(t?x.toLowerCase():x,J)}return b}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let c=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(c)}if(this._chunks[0].byteLength>t){let c=this._chunks[0],h=this.asNative(c,t);return this._chunks[0]=c.slice(t),this._totalLength-=t,h}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let c=this._chunks[i];if(c.byteLength>t){let h=c.slice(0,t);n.set(h,r),r+=t,this._chunks[i]=c.slice(t),this._totalLength-=t,t-=t}else n.set(c,r),r+=c.byteLength,this._chunks.shift(),this._totalLength-=c.byteLength,t-=c.byteLength}return n}};ar.AbstractMessageBuffer=co});var Qs=N(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.createMessageConnection=A.ConnectionOptions=A.MessageStrategy=A.CancellationStrategy=A.CancellationSenderStrategy=A.CancellationReceiverStrategy=A.RequestCancellationReceiverStrategy=A.IdCancellationReceiverStrategy=A.ConnectionStrategy=A.ConnectionError=A.ConnectionErrors=A.LogTraceNotification=A.SetTraceNotification=A.TraceFormat=A.TraceValues=A.Trace=A.NullLogger=A.ProgressType=A.ProgressToken=void 0;var Js=ct(),ie=Ht(),I=Hi(),Ys=Ui(),bn=Ut(),uo=rr(),Dn;(function(e){e.type=new I.NotificationType("$/cancelRequest")})(Dn||(Dn={}));var lo;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(lo||(A.ProgressToken=lo={}));var vn;(function(e){e.type=new I.NotificationType("$/progress")})(vn||(vn={}));var fo=class{constructor(){}};A.ProgressType=fo;var ho;(function(e){function t(n){return ie.func(n)}e.is=t})(ho||(ho={}));A.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var B;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(B||(A.Trace=B={}));var Gs;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(Gs||(A.TraceValues=Gs={}));(function(e){function t(r){if(!ie.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(B||(A.Trace=B={}));var Ne;(function(e){e.Text="text",e.JSON="json"})(Ne||(A.TraceFormat=Ne={}));(function(e){function t(n){return ie.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(Ne||(A.TraceFormat=Ne={}));var go;(function(e){e.type=new I.NotificationType("$/setTrace")})(go||(A.SetTraceNotification=go={}));var cr;(function(e){e.type=new I.NotificationType("$/logTrace")})(cr||(A.LogTraceNotification=cr={}));var _n;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(_n||(A.ConnectionErrors=_n={}));var Xt=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};A.ConnectionError=Xt;var mo;(function(e){function t(n){let r=n;return r&&ie.func(r.cancelUndispatched)}e.is=t})(mo||(A.ConnectionStrategy=mo={}));var ur;(function(e){function t(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&ie.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ie.func(r.dispose))}e.is=t})(ur||(A.IdCancellationReceiverStrategy=ur={}));var po;(function(e){function t(n){let r=n;return r&&r.kind==="request"&&ie.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ie.func(r.dispose))}e.is=t})(po||(A.RequestCancellationReceiverStrategy=po={}));var lr;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new uo.CancellationTokenSource}});function t(n){return ur.is(n)||po.is(n)}e.is=t})(lr||(A.CancellationReceiverStrategy=lr={}));var dr;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Dn.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&ie.func(r.sendCancellation)&&ie.func(r.cleanup)}e.is=t})(dr||(A.CancellationSenderStrategy=dr={}));var fr;(function(e){e.Message=Object.freeze({receiver:lr.Message,sender:dr.Message});function t(n){let r=n;return r&&lr.is(r.receiver)&&dr.is(r.sender)}e.is=t})(fr||(A.CancellationStrategy=fr={}));var hr;(function(e){function t(n){let r=n;return r&&ie.func(r.handleMessage)}e.is=t})(hr||(A.MessageStrategy=hr={}));var Zs;(function(e){function t(n){let r=n;return r&&(fr.is(r.cancellationStrategy)||mo.is(r.connectionStrategy)||hr.is(r.messageStrategy))}e.is=t})(Zs||(A.ConnectionOptions=Zs={}));var Ue;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(Ue||(Ue={}));function Id(e,t,n,r){let i=n!==void 0?n:A.NullLogger,c=0,h=0,b=0,w="2.0",S,q=new Map,P,x=new Map,J=new Map,De,le=new Ys.LinkedMap,he=new Map,O=new Set,y=new Map,p=B.Off,C=Ne.Text,W,Z=Ue.New,oe=new bn.Emitter,Ae=new bn.Emitter,vt=new bn.Emitter,it=new bn.Emitter,ot=new bn.Emitter,Re=r&&r.cancellationStrategy?r.cancellationStrategy:fr.Message;function xt(l){if(l===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+l.toString()}function jt(l){return l===null?"res-unknown-"+(++b).toString():"res-"+l.toString()}function En(){return"not-"+(++h).toString()}function mi(l,_){I.Message.isRequest(_)?l.set(xt(_.id),_):I.Message.isResponse(_)?l.set(jt(_.id),_):l.set(En(),_)}function Mn(l){}function ln(){return Z===Ue.Listening}function _t(){return Z===Ue.Closed}function Qe(){return Z===Ue.Disposed}function It(){(Z===Ue.New||Z===Ue.Listening)&&(Z=Ue.Closed,Ae.fire(void 0))}function Dt(l){oe.fire([l,void 0,void 0])}function xn(l){oe.fire(l)}e.onClose(It),e.onError(Dt),t.onClose(It),t.onError(xn);function dn(){De||le.size===0||(De=(0,Js.default)().timer.setImmediate(()=>{De=void 0,jn()}))}function fn(l){I.Message.isRequest(l)?Ln(l):I.Message.isNotification(l)?An(l):I.Message.isResponse(l)?Fn(l):Lt(l)}function jn(){if(le.size===0)return;let l=le.shift();try{let _=r?.messageStrategy;hr.is(_)?_.handleMessage(l,fn):fn(l)}finally{dn()}}let In=l=>{try{if(I.Message.isNotification(l)&&l.method===Dn.type.method){let _=l.params.id,T=xt(_),E=le.get(T);if(I.Message.isRequest(E)){let X=r?.connectionStrategy,ee=X&&X.cancelUndispatched?X.cancelUndispatched(E,Mn):void 0;if(ee&&(ee.error!==void 0||ee.result!==void 0)){le.delete(T),y.delete(_),ee.id=E.id,Rt(ee,l.method,Date.now()),t.write(ee).catch(()=>i.error("Sending response for canceled message failed."));return}}let Y=y.get(_);if(Y!==void 0){Y.cancel(),Ft(l);return}else O.add(_)}mi(le,l)}finally{dn()}};function Ln(l){if(Qe())return;function _(H,G,z){let se={jsonrpc:w,id:l.id};H instanceof I.ResponseError?se.error=H.toJson():se.result=H===void 0?null:H,Rt(se,G,z),t.write(se).catch(()=>i.error("Sending response failed."))}function T(H,G,z){let se={jsonrpc:w,id:l.id,error:H.toJson()};Rt(se,G,z),t.write(se).catch(()=>i.error("Sending response failed."))}function E(H,G,z){H===void 0&&(H=null);let se={jsonrpc:w,id:l.id,result:H};Rt(se,G,z),t.write(se).catch(()=>i.error("Sending response failed."))}$n(l);let Y=q.get(l.method),X,ee;Y&&(X=Y.type,ee=Y.handler);let ne=Date.now();if(ee||S){let H=l.id??String(Date.now()),G=ur.is(Re.receiver)?Re.receiver.createCancellationTokenSource(H):Re.receiver.createCancellationTokenSource(l);l.id!==null&&O.has(l.id)&&G.cancel(),l.id!==null&&y.set(H,G);try{let z;if(ee)if(l.params===void 0){if(X!==void 0&&X.numberOfParams!==0){T(new I.ResponseError(I.ErrorCodes.InvalidParams,`Request ${l.method} defines ${X.numberOfParams} params but received none.`),l.method,ne);return}z=ee(G.token)}else if(Array.isArray(l.params)){if(X!==void 0&&X.parameterStructures===I.ParameterStructures.byName){T(new I.ResponseError(I.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by name but received parameters by position`),l.method,ne);return}z=ee(...l.params,G.token)}else{if(X!==void 0&&X.parameterStructures===I.ParameterStructures.byPosition){T(new I.ResponseError(I.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by position but received parameters by name`),l.method,ne);return}z=ee(l.params,G.token)}else S&&(z=S(l.method,l.params,G.token));let se=z;z?se.then?se.then(ge=>{y.delete(H),_(ge,l.method,ne)},ge=>{y.delete(H),ge instanceof I.ResponseError?T(ge,l.method,ne):ge&&ie.string(ge.message)?T(new I.ResponseError(I.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${ge.message}`),l.method,ne):T(new I.ResponseError(I.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,ne)}):(y.delete(H),_(z,l.method,ne)):(y.delete(H),E(z,l.method,ne))}catch(z){y.delete(H),z instanceof I.ResponseError?_(z,l.method,ne):z&&ie.string(z.message)?T(new I.ResponseError(I.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${z.message}`),l.method,ne):T(new I.ResponseError(I.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,ne)}}else T(new I.ResponseError(I.ErrorCodes.MethodNotFound,`Unhandled method ${l.method}`),l.method,ne)}function Fn(l){if(!Qe())if(l.id===null)l.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(l.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let _=l.id,T=he.get(_);if(Un(l,T),T!==void 0){he.delete(_);try{if(l.error){let E=l.error;T.reject(new I.ResponseError(E.code,E.message,E.data))}else if(l.result!==void 0)T.resolve(l.result);else throw new Error("Should never happen.")}catch(E){E.message?i.error(`Response handler '${T.method}' failed with message: ${E.message}`):i.error(`Response handler '${T.method}' failed unexpectedly.`)}}}}function An(l){if(Qe())return;let _,T;if(l.method===Dn.type.method){let E=l.params.id;O.delete(E),Ft(l);return}else{let E=x.get(l.method);E&&(T=E.handler,_=E.type)}if(T||P)try{if(Ft(l),T)if(l.params===void 0)_!==void 0&&_.numberOfParams!==0&&_.parameterStructures!==I.ParameterStructures.byName&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received none.`),T();else if(Array.isArray(l.params)){let E=l.params;l.method===vn.type.method&&E.length===2&&lo.is(E[0])?T({token:E[0],value:E[1]}):(_!==void 0&&(_.parameterStructures===I.ParameterStructures.byName&&i.error(`Notification ${l.method} defines parameters by name but received parameters by position`),_.numberOfParams!==l.params.length&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received ${E.length} arguments`)),T(...E))}else _!==void 0&&_.parameterStructures===I.ParameterStructures.byPosition&&i.error(`Notification ${l.method} defines parameters by position but received parameters by name`),T(l.params);else P&&P(l.method,l.params)}catch(E){E.message?i.error(`Notification handler '${l.method}' failed with message: ${E.message}`):i.error(`Notification handler '${l.method}' failed unexpectedly.`)}else vt.fire(l)}function Lt(l){if(!l){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(l,null,4)}`);let _=l;if(ie.string(_.id)||ie.number(_.id)){let T=_.id,E=he.get(T);E&&E.reject(new Error("The received response has neither a result nor an error property."))}}function We(l){if(l!=null)switch(p){case B.Verbose:return JSON.stringify(l,null,4);case B.Compact:return JSON.stringify(l);default:return}}function Wn(l){if(!(p===B.Off||!W))if(C===Ne.Text){let _;(p===B.Verbose||p===B.Compact)&&l.params&&(_=`Params: ${We(l.params)}

`),W.log(`Sending request '${l.method} - (${l.id})'.`,_)}else Ke("send-request",l)}function Hn(l){if(!(p===B.Off||!W))if(C===Ne.Text){let _;(p===B.Verbose||p===B.Compact)&&(l.params?_=`Params: ${We(l.params)}

`:_=`No parameters provided.

`),W.log(`Sending notification '${l.method}'.`,_)}else Ke("send-notification",l)}function Rt(l,_,T){if(!(p===B.Off||!W))if(C===Ne.Text){let E;(p===B.Verbose||p===B.Compact)&&(l.error&&l.error.data?E=`Error data: ${We(l.error.data)}

`:l.result?E=`Result: ${We(l.result)}

`:l.error===void 0&&(E=`No result returned.

`)),W.log(`Sending response '${_} - (${l.id})'. Processing request took ${Date.now()-T}ms`,E)}else Ke("send-response",l)}function $n(l){if(!(p===B.Off||!W))if(C===Ne.Text){let _;(p===B.Verbose||p===B.Compact)&&l.params&&(_=`Params: ${We(l.params)}

`),W.log(`Received request '${l.method} - (${l.id})'.`,_)}else Ke("receive-request",l)}function Ft(l){if(!(p===B.Off||!W||l.method===cr.type.method))if(C===Ne.Text){let _;(p===B.Verbose||p===B.Compact)&&(l.params?_=`Params: ${We(l.params)}

`:_=`No parameters provided.

`),W.log(`Received notification '${l.method}'.`,_)}else Ke("receive-notification",l)}function Un(l,_){if(!(p===B.Off||!W))if(C===Ne.Text){let T;if((p===B.Verbose||p===B.Compact)&&(l.error&&l.error.data?T=`Error data: ${We(l.error.data)}

`:l.result?T=`Result: ${We(l.result)}

`:l.error===void 0&&(T=`No result returned.

`)),_){let E=l.error?` Request failed: ${l.error.message} (${l.error.code}).`:"";W.log(`Received response '${_.method} - (${l.id})' in ${Date.now()-_.timerStart}ms.${E}`,T)}else W.log(`Received response ${l.id} without active response promise.`,T)}else Ke("receive-response",l)}function Ke(l,_){if(!W||p===B.Off)return;let T={isLSPMessage:!0,type:l,message:_,timestamp:Date.now()};W.log(T)}function st(){if(_t())throw new Xt(_n.Closed,"Connection is closed.");if(Qe())throw new Xt(_n.Disposed,"Connection is disposed.")}function zn(){if(ln())throw new Xt(_n.AlreadyListening,"Connection is already listening")}function Vn(){if(!ln())throw new Error("Call listen() first.")}function Xe(l){return l===void 0?null:l}function hn(l){if(l!==null)return l}function gn(l){return l!=null&&!Array.isArray(l)&&typeof l=="object"}function At(l,_){switch(l){case I.ParameterStructures.auto:return gn(_)?hn(_):[Xe(_)];case I.ParameterStructures.byName:if(!gn(_))throw new Error("Received parameters by name but param is not an object literal.");return hn(_);case I.ParameterStructures.byPosition:return[Xe(_)];default:throw new Error(`Unknown parameter structure ${l.toString()}`)}}function mn(l,_){let T,E=l.numberOfParams;switch(E){case 0:T=void 0;break;case 1:T=At(l.parameterStructures,_[0]);break;default:T=[];for(let Y=0;Y<_.length&&Y<E;Y++)T.push(Xe(_[Y]));if(_.length<E)for(let Y=_.length;Y<E;Y++)T.push(null);break}return T}let et={sendNotification:(l,..._)=>{st();let T,E;if(ie.string(l)){T=l;let X=_[0],ee=0,ne=I.ParameterStructures.auto;I.ParameterStructures.is(X)&&(ee=1,ne=X);let H=_.length,G=H-ee;switch(G){case 0:E=void 0;break;case 1:E=At(ne,_[ee]);break;default:if(ne===I.ParameterStructures.byName)throw new Error(`Received ${G} parameters for 'by Name' notification parameter structure.`);E=_.slice(ee,H).map(z=>Xe(z));break}}else{let X=_;T=l.method,E=mn(l,X)}let Y={jsonrpc:w,method:T,params:E};return Hn(Y),t.write(Y).catch(X=>{throw i.error("Sending notification failed."),X})},onNotification:(l,_)=>{st();let T;return ie.func(l)?P=l:_&&(ie.string(l)?(T=l,x.set(l,{type:void 0,handler:_})):(T=l.method,x.set(l.method,{type:l,handler:_}))),{dispose:()=>{T!==void 0?x.delete(T):P=void 0}}},onProgress:(l,_,T)=>{if(J.has(_))throw new Error(`Progress handler for token ${_} already registered`);return J.set(_,T),{dispose:()=>{J.delete(_)}}},sendProgress:(l,_,T)=>et.sendNotification(vn.type,{token:_,value:T}),onUnhandledProgress:it.event,sendRequest:(l,..._)=>{st(),Vn();let T,E,Y;if(ie.string(l)){T=l;let H=_[0],G=_[_.length-1],z=0,se=I.ParameterStructures.auto;I.ParameterStructures.is(H)&&(z=1,se=H);let ge=_.length;uo.CancellationToken.is(G)&&(ge=ge-1,Y=G);let qe=ge-z;switch(qe){case 0:E=void 0;break;case 1:E=At(se,_[z]);break;default:if(se===I.ParameterStructures.byName)throw new Error(`Received ${qe} parameters for 'by Name' request parameter structure.`);E=_.slice(z,ge).map(Bn=>Xe(Bn));break}}else{let H=_;T=l.method,E=mn(l,H);let G=l.numberOfParams;Y=uo.CancellationToken.is(H[G])?H[G]:void 0}let X=c++,ee;Y&&(ee=Y.onCancellationRequested(()=>{let H=Re.sender.sendCancellation(et,X);return H===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${X}`),Promise.resolve()):H.catch(()=>{i.log(`Sending cancellation messages for id ${X} failed`)})}));let ne={jsonrpc:w,id:X,method:T,params:E};return Wn(ne),typeof Re.sender.enableCancellation=="function"&&Re.sender.enableCancellation(ne),new Promise(async(H,G)=>{let z=qe=>{H(qe),Re.sender.cleanup(X),ee?.dispose()},se=qe=>{G(qe),Re.sender.cleanup(X),ee?.dispose()},ge={method:T,timerStart:Date.now(),resolve:z,reject:se};try{await t.write(ne),he.set(X,ge)}catch(qe){throw i.error("Sending request failed."),ge.reject(new I.ResponseError(I.ErrorCodes.MessageWriteError,qe.message?qe.message:"Unknown reason")),qe}})},onRequest:(l,_)=>{st();let T=null;return ho.is(l)?(T=void 0,S=l):ie.string(l)?(T=null,_!==void 0&&(T=l,q.set(l,{handler:_,type:void 0}))):_!==void 0&&(T=l.method,q.set(l.method,{type:l,handler:_})),{dispose:()=>{T!==null&&(T!==void 0?q.delete(T):S=void 0)}}},hasPendingResponse:()=>he.size>0,trace:async(l,_,T)=>{let E=!1,Y=Ne.Text;T!==void 0&&(ie.boolean(T)?E=T:(E=T.sendNotification||!1,Y=T.traceFormat||Ne.Text)),p=l,C=Y,p===B.Off?W=void 0:W=_,E&&!_t()&&!Qe()&&await et.sendNotification(go.type,{value:B.toString(l)})},onError:oe.event,onClose:Ae.event,onUnhandledNotification:vt.event,onDispose:ot.event,end:()=>{t.end()},dispose:()=>{if(Qe())return;Z=Ue.Disposed,ot.fire(void 0);let l=new I.ResponseError(I.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let _ of he.values())_.reject(l);he=new Map,y=new Map,O=new Set,le=new Ys.LinkedMap,ie.func(t.dispose)&&t.dispose(),ie.func(e.dispose)&&e.dispose()},listen:()=>{st(),zn(),Z=Ue.Listening,e.listen(In)},inspect:()=>{(0,Js.default)().console.log("inspect")}};return et.onNotification(cr.type,l=>{if(p===B.Off||!W)return;let _=p===B.Verbose||p===B.Compact;W.log(l.message,_?l.verbose:void 0)}),et.onNotification(vn.type,l=>{let _=J.get(l.token);_?_(l.value):it.fire(l)}),et}A.createMessageConnection=Id});var gr=N(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.ProgressType=v.ProgressToken=v.createMessageConnection=v.NullLogger=v.ConnectionOptions=v.ConnectionStrategy=v.AbstractMessageBuffer=v.WriteableStreamMessageWriter=v.AbstractMessageWriter=v.MessageWriter=v.ReadableStreamMessageReader=v.AbstractMessageReader=v.MessageReader=v.SharedArrayReceiverStrategy=v.SharedArraySenderStrategy=v.CancellationToken=v.CancellationTokenSource=v.Emitter=v.Event=v.Disposable=v.LRUCache=v.Touch=v.LinkedMap=v.ParameterStructures=v.NotificationType9=v.NotificationType8=v.NotificationType7=v.NotificationType6=v.NotificationType5=v.NotificationType4=v.NotificationType3=v.NotificationType2=v.NotificationType1=v.NotificationType0=v.NotificationType=v.ErrorCodes=v.ResponseError=v.RequestType9=v.RequestType8=v.RequestType7=v.RequestType6=v.RequestType5=v.RequestType4=v.RequestType3=v.RequestType2=v.RequestType1=v.RequestType0=v.RequestType=v.Message=v.RAL=void 0;v.MessageStrategy=v.CancellationStrategy=v.CancellationSenderStrategy=v.CancellationReceiverStrategy=v.ConnectionError=v.ConnectionErrors=v.LogTraceNotification=v.SetTraceNotification=v.TraceFormat=v.TraceValues=v.Trace=void 0;var K=Hi();Object.defineProperty(v,"Message",{enumerable:!0,get:function(){return K.Message}});Object.defineProperty(v,"RequestType",{enumerable:!0,get:function(){return K.RequestType}});Object.defineProperty(v,"RequestType0",{enumerable:!0,get:function(){return K.RequestType0}});Object.defineProperty(v,"RequestType1",{enumerable:!0,get:function(){return K.RequestType1}});Object.defineProperty(v,"RequestType2",{enumerable:!0,get:function(){return K.RequestType2}});Object.defineProperty(v,"RequestType3",{enumerable:!0,get:function(){return K.RequestType3}});Object.defineProperty(v,"RequestType4",{enumerable:!0,get:function(){return K.RequestType4}});Object.defineProperty(v,"RequestType5",{enumerable:!0,get:function(){return K.RequestType5}});Object.defineProperty(v,"RequestType6",{enumerable:!0,get:function(){return K.RequestType6}});Object.defineProperty(v,"RequestType7",{enumerable:!0,get:function(){return K.RequestType7}});Object.defineProperty(v,"RequestType8",{enumerable:!0,get:function(){return K.RequestType8}});Object.defineProperty(v,"RequestType9",{enumerable:!0,get:function(){return K.RequestType9}});Object.defineProperty(v,"ResponseError",{enumerable:!0,get:function(){return K.ResponseError}});Object.defineProperty(v,"ErrorCodes",{enumerable:!0,get:function(){return K.ErrorCodes}});Object.defineProperty(v,"NotificationType",{enumerable:!0,get:function(){return K.NotificationType}});Object.defineProperty(v,"NotificationType0",{enumerable:!0,get:function(){return K.NotificationType0}});Object.defineProperty(v,"NotificationType1",{enumerable:!0,get:function(){return K.NotificationType1}});Object.defineProperty(v,"NotificationType2",{enumerable:!0,get:function(){return K.NotificationType2}});Object.defineProperty(v,"NotificationType3",{enumerable:!0,get:function(){return K.NotificationType3}});Object.defineProperty(v,"NotificationType4",{enumerable:!0,get:function(){return K.NotificationType4}});Object.defineProperty(v,"NotificationType5",{enumerable:!0,get:function(){return K.NotificationType5}});Object.defineProperty(v,"NotificationType6",{enumerable:!0,get:function(){return K.NotificationType6}});Object.defineProperty(v,"NotificationType7",{enumerable:!0,get:function(){return K.NotificationType7}});Object.defineProperty(v,"NotificationType8",{enumerable:!0,get:function(){return K.NotificationType8}});Object.defineProperty(v,"NotificationType9",{enumerable:!0,get:function(){return K.NotificationType9}});Object.defineProperty(v,"ParameterStructures",{enumerable:!0,get:function(){return K.ParameterStructures}});var yo=Ui();Object.defineProperty(v,"LinkedMap",{enumerable:!0,get:function(){return yo.LinkedMap}});Object.defineProperty(v,"LRUCache",{enumerable:!0,get:function(){return yo.LRUCache}});Object.defineProperty(v,"Touch",{enumerable:!0,get:function(){return yo.Touch}});var Ld=Ls();Object.defineProperty(v,"Disposable",{enumerable:!0,get:function(){return Ld.Disposable}});var Ks=Ut();Object.defineProperty(v,"Event",{enumerable:!0,get:function(){return Ks.Event}});Object.defineProperty(v,"Emitter",{enumerable:!0,get:function(){return Ks.Emitter}});var ea=rr();Object.defineProperty(v,"CancellationTokenSource",{enumerable:!0,get:function(){return ea.CancellationTokenSource}});Object.defineProperty(v,"CancellationToken",{enumerable:!0,get:function(){return ea.CancellationToken}});var ta=As();Object.defineProperty(v,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return ta.SharedArraySenderStrategy}});Object.defineProperty(v,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return ta.SharedArrayReceiverStrategy}});var bo=Hs();Object.defineProperty(v,"MessageReader",{enumerable:!0,get:function(){return bo.MessageReader}});Object.defineProperty(v,"AbstractMessageReader",{enumerable:!0,get:function(){return bo.AbstractMessageReader}});Object.defineProperty(v,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return bo.ReadableStreamMessageReader}});var vo=Bs();Object.defineProperty(v,"MessageWriter",{enumerable:!0,get:function(){return vo.MessageWriter}});Object.defineProperty(v,"AbstractMessageWriter",{enumerable:!0,get:function(){return vo.AbstractMessageWriter}});Object.defineProperty(v,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return vo.WriteableStreamMessageWriter}});var Fd=Xs();Object.defineProperty(v,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Fd.AbstractMessageBuffer}});var pe=Qs();Object.defineProperty(v,"ConnectionStrategy",{enumerable:!0,get:function(){return pe.ConnectionStrategy}});Object.defineProperty(v,"ConnectionOptions",{enumerable:!0,get:function(){return pe.ConnectionOptions}});Object.defineProperty(v,"NullLogger",{enumerable:!0,get:function(){return pe.NullLogger}});Object.defineProperty(v,"createMessageConnection",{enumerable:!0,get:function(){return pe.createMessageConnection}});Object.defineProperty(v,"ProgressToken",{enumerable:!0,get:function(){return pe.ProgressToken}});Object.defineProperty(v,"ProgressType",{enumerable:!0,get:function(){return pe.ProgressType}});Object.defineProperty(v,"Trace",{enumerable:!0,get:function(){return pe.Trace}});Object.defineProperty(v,"TraceValues",{enumerable:!0,get:function(){return pe.TraceValues}});Object.defineProperty(v,"TraceFormat",{enumerable:!0,get:function(){return pe.TraceFormat}});Object.defineProperty(v,"SetTraceNotification",{enumerable:!0,get:function(){return pe.SetTraceNotification}});Object.defineProperty(v,"LogTraceNotification",{enumerable:!0,get:function(){return pe.LogTraceNotification}});Object.defineProperty(v,"ConnectionErrors",{enumerable:!0,get:function(){return pe.ConnectionErrors}});Object.defineProperty(v,"ConnectionError",{enumerable:!0,get:function(){return pe.ConnectionError}});Object.defineProperty(v,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return pe.CancellationReceiverStrategy}});Object.defineProperty(v,"CancellationSenderStrategy",{enumerable:!0,get:function(){return pe.CancellationSenderStrategy}});Object.defineProperty(v,"CancellationStrategy",{enumerable:!0,get:function(){return pe.CancellationStrategy}});Object.defineProperty(v,"MessageStrategy",{enumerable:!0,get:function(){return pe.MessageStrategy}});var Ad=ct();v.RAL=Ad.default});var ia=N(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});var na=require("util"),nt=gr(),mr=class e extends nt.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return e.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new na.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};mr.emptyBuffer=Buffer.allocUnsafe(0);var _o=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),nt.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),nt.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),nt.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),nt.Disposable.create(()=>this.stream.off("data",t))}},Do=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),nt.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),nt.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),nt.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let c=h=>{h==null?r():i(h)};typeof t=="string"?this.stream.write(t,n,c):this.stream.write(t,c)})}end(){this.stream.end()}},ra=Object.freeze({messageBuffer:Object.freeze({create:e=>new mr(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new na.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new _o(e),asWritableStream:e=>new Do(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function Ro(){return ra}(function(e){function t(){nt.RAL.install(ra)}e.install=t})(Ro||(Ro={}));wo.default=Ro});var Tt=N(U=>{"use strict";var Wd=U&&U.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Hd=U&&U.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Wd(t,e,n)};Object.defineProperty(U,"__esModule",{value:!0});U.createMessageConnection=U.createServerSocketTransport=U.createClientSocketTransport=U.createServerPipeTransport=U.createClientPipeTransport=U.generateRandomPipeName=U.StreamMessageWriter=U.StreamMessageReader=U.SocketMessageWriter=U.SocketMessageReader=U.PortMessageWriter=U.PortMessageReader=U.IPCMessageWriter=U.IPCMessageReader=void 0;var Jt=ia();Jt.default.install();var oa=require("path"),$d=require("os"),Ud=require("crypto"),br=require("net"),Oe=gr();Hd(gr(),U);var Po=class extends Oe.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Oe.Disposable.create(()=>this.process.off("message",t))}};U.IPCMessageReader=Po;var Co=class extends Oe.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};U.IPCMessageWriter=Co;var To=class extends Oe.AbstractMessageReader{constructor(t){super(),this.onData=new Oe.Emitter,t.on("close",()=>this.fireClose),t.on("error",n=>this.fireError(n)),t.on("message",n=>{this.onData.fire(n)})}listen(t){return this.onData.event(t)}};U.PortMessageReader=To;var So=class extends Oe.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",n=>this.fireError(n))}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};U.PortMessageWriter=So;var Pt=class extends Oe.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,Jt.default)().stream.asReadableStream(t),n)}};U.SocketMessageReader=Pt;var Ct=class extends Oe.WriteableStreamMessageWriter{constructor(t,n){super((0,Jt.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};U.SocketMessageWriter=Ct;var pr=class extends Oe.ReadableStreamMessageReader{constructor(t,n){super((0,Jt.default)().stream.asReadableStream(t),n)}};U.StreamMessageReader=pr;var yr=class extends Oe.WriteableStreamMessageWriter{constructor(t,n){super((0,Jt.default)().stream.asWritableStream(t),n)}};U.StreamMessageWriter=yr;var sa=process.env.XDG_RUNTIME_DIR,zd=new Map([["linux",107],["darwin",103]]);function Vd(){let e=(0,Ud.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;sa?t=oa.join(sa,`vscode-ipc-${e}.sock`):t=oa.join($d.tmpdir(),`vscode-${e}.sock`);let n=zd.get(process.platform);return n!==void 0&&t.length>n&&(0,Jt.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}U.generateRandomPipeName=Vd;function Bd(e,t="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,br.createServer)(b=>{h.close(),n([new Pt(b,t),new Ct(b,t)])});h.on("error",c),h.listen(e,()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}U.createClientPipeTransport=Bd;function Xd(e,t="utf-8"){let n=(0,br.createConnection)(e);return[new Pt(n,t),new Ct(n,t)]}U.createServerPipeTransport=Xd;function Jd(e,t="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,br.createServer)(b=>{h.close(),n([new Pt(b,t),new Ct(b,t)])});h.on("error",c),h.listen(e,"127.0.0.1",()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}U.createClientSocketTransport=Jd;function Yd(e,t="utf-8"){let n=(0,br.createConnection)(e,"127.0.0.1");return[new Pt(n,t),new Ct(n,t)]}U.createServerSocketTransport=Yd;function Gd(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function Zd(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function Qd(e,t,n,r){n||(n=Oe.NullLogger);let i=Gd(e)?new pr(e):e,c=Zd(t)?new yr(t):t;return Oe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Oe.createMessageConnection)(i,c,n,r)}U.createMessageConnection=Qd});var ko=N((ng,aa)=>{"use strict";aa.exports=Tt()});var _r=N((ca,vr)=>{(function(e){if(typeof vr=="object"&&typeof vr.exports=="object"){var t=e(require,ca);t!==void 0&&(vr.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(s){function d(f){return typeof f=="string"}s.is=d})(n||(t.DocumentUri=n={}));var r;(function(s){function d(f){return typeof f=="string"}s.is=d})(r||(t.URI=r={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(i||(t.integer=i={}));var c;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(c||(t.uinteger=c={}));var h;(function(s){function d(a,o){return a===Number.MAX_VALUE&&(a=c.MAX_VALUE),o===Number.MAX_VALUE&&(o=c.MAX_VALUE),{line:a,character:o}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.uinteger(o.line)&&m.uinteger(o.character)}s.is=f})(h||(t.Position=h={}));var b;(function(s){function d(a,o,g,D){if(m.uinteger(a)&&m.uinteger(o)&&m.uinteger(g)&&m.uinteger(D))return{start:h.create(a,o),end:h.create(g,D)};if(h.is(a)&&h.is(o))return{start:a,end:o};throw new Error("Range#create called with invalid arguments[".concat(a,", ").concat(o,", ").concat(g,", ").concat(D,"]"))}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&h.is(o.start)&&h.is(o.end)}s.is=f})(b||(t.Range=b={}));var w;(function(s){function d(a,o){return{uri:a,range:o}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&b.is(o.range)&&(m.string(o.uri)||m.undefined(o.uri))}s.is=f})(w||(t.Location=w={}));var S;(function(s){function d(a,o,g,D){return{targetUri:a,targetRange:o,targetSelectionRange:g,originSelectionRange:D}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&b.is(o.targetRange)&&m.string(o.targetUri)&&b.is(o.targetSelectionRange)&&(b.is(o.originSelectionRange)||m.undefined(o.originSelectionRange))}s.is=f})(S||(t.LocationLink=S={}));var q;(function(s){function d(a,o,g,D){return{red:a,green:o,blue:g,alpha:D}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.numberRange(o.red,0,1)&&m.numberRange(o.green,0,1)&&m.numberRange(o.blue,0,1)&&m.numberRange(o.alpha,0,1)}s.is=f})(q||(t.Color=q={}));var P;(function(s){function d(a,o){return{range:a,color:o}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&b.is(o.range)&&q.is(o.color)}s.is=f})(P||(t.ColorInformation=P={}));var x;(function(s){function d(a,o,g){return{label:a,textEdit:o,additionalTextEdits:g}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.string(o.label)&&(m.undefined(o.textEdit)||W.is(o))&&(m.undefined(o.additionalTextEdits)||m.typedArray(o.additionalTextEdits,W.is))}s.is=f})(x||(t.ColorPresentation=x={}));var J;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(J||(t.FoldingRangeKind=J={}));var De;(function(s){function d(a,o,g,D,F,ae){var Q={startLine:a,endLine:o};return m.defined(g)&&(Q.startCharacter=g),m.defined(D)&&(Q.endCharacter=D),m.defined(F)&&(Q.kind=F),m.defined(ae)&&(Q.collapsedText=ae),Q}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.uinteger(o.startLine)&&m.uinteger(o.startLine)&&(m.undefined(o.startCharacter)||m.uinteger(o.startCharacter))&&(m.undefined(o.endCharacter)||m.uinteger(o.endCharacter))&&(m.undefined(o.kind)||m.string(o.kind))}s.is=f})(De||(t.FoldingRange=De={}));var le;(function(s){function d(a,o){return{location:a,message:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&w.is(o.location)&&m.string(o.message)}s.is=f})(le||(t.DiagnosticRelatedInformation=le={}));var he;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(he||(t.DiagnosticSeverity=he={}));var O;(function(s){s.Unnecessary=1,s.Deprecated=2})(O||(t.DiagnosticTag=O={}));var y;(function(s){function d(f){var a=f;return m.objectLiteral(a)&&m.string(a.href)}s.is=d})(y||(t.CodeDescription=y={}));var p;(function(s){function d(a,o,g,D,F,ae){var Q={range:a,message:o};return m.defined(g)&&(Q.severity=g),m.defined(D)&&(Q.code=D),m.defined(F)&&(Q.source=F),m.defined(ae)&&(Q.relatedInformation=ae),Q}s.create=d;function f(a){var o,g=a;return m.defined(g)&&b.is(g.range)&&m.string(g.message)&&(m.number(g.severity)||m.undefined(g.severity))&&(m.integer(g.code)||m.string(g.code)||m.undefined(g.code))&&(m.undefined(g.codeDescription)||m.string((o=g.codeDescription)===null||o===void 0?void 0:o.href))&&(m.string(g.source)||m.undefined(g.source))&&(m.undefined(g.relatedInformation)||m.typedArray(g.relatedInformation,le.is))}s.is=f})(p||(t.Diagnostic=p={}));var C;(function(s){function d(a,o){for(var g=[],D=2;D<arguments.length;D++)g[D-2]=arguments[D];var F={title:a,command:o};return m.defined(g)&&g.length>0&&(F.arguments=g),F}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.title)&&m.string(o.command)}s.is=f})(C||(t.Command=C={}));var W;(function(s){function d(g,D){return{range:g,newText:D}}s.replace=d;function f(g,D){return{range:{start:g,end:g},newText:D}}s.insert=f;function a(g){return{range:g,newText:""}}s.del=a;function o(g){var D=g;return m.objectLiteral(D)&&m.string(D.newText)&&b.is(D.range)}s.is=o})(W||(t.TextEdit=W={}));var Z;(function(s){function d(a,o,g){var D={label:a};return o!==void 0&&(D.needsConfirmation=o),g!==void 0&&(D.description=g),D}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.string(o.label)&&(m.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(m.string(o.description)||o.description===void 0)}s.is=f})(Z||(t.ChangeAnnotation=Z={}));var oe;(function(s){function d(f){var a=f;return m.string(a)}s.is=d})(oe||(t.ChangeAnnotationIdentifier=oe={}));var Ae;(function(s){function d(g,D,F){return{range:g,newText:D,annotationId:F}}s.replace=d;function f(g,D,F){return{range:{start:g,end:g},newText:D,annotationId:F}}s.insert=f;function a(g,D){return{range:g,newText:"",annotationId:D}}s.del=a;function o(g){var D=g;return W.is(D)&&(Z.is(D.annotationId)||oe.is(D.annotationId))}s.is=o})(Ae||(t.AnnotatedTextEdit=Ae={}));var vt;(function(s){function d(a,o){return{textDocument:a,edits:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&_t.is(o.textDocument)&&Array.isArray(o.edits)}s.is=f})(vt||(t.TextDocumentEdit=vt={}));var it;(function(s){function d(a,o,g){var D={kind:"create",uri:a};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(D.options=o),g!==void 0&&(D.annotationId=g),D}s.create=d;function f(a){var o=a;return o&&o.kind==="create"&&m.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||m.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||m.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=f})(it||(t.CreateFile=it={}));var ot;(function(s){function d(a,o,g,D){var F={kind:"rename",oldUri:a,newUri:o};return g!==void 0&&(g.overwrite!==void 0||g.ignoreIfExists!==void 0)&&(F.options=g),D!==void 0&&(F.annotationId=D),F}s.create=d;function f(a){var o=a;return o&&o.kind==="rename"&&m.string(o.oldUri)&&m.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||m.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||m.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=f})(ot||(t.RenameFile=ot={}));var Re;(function(s){function d(a,o,g){var D={kind:"delete",uri:a};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(D.options=o),g!==void 0&&(D.annotationId=g),D}s.create=d;function f(a){var o=a;return o&&o.kind==="delete"&&m.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||m.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||m.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=f})(Re||(t.DeleteFile=Re={}));var xt;(function(s){function d(f){var a=f;return a&&(a.changes!==void 0||a.documentChanges!==void 0)&&(a.documentChanges===void 0||a.documentChanges.every(function(o){return m.string(o.kind)?it.is(o)||ot.is(o)||Re.is(o):vt.is(o)}))}s.is=d})(xt||(t.WorkspaceEdit=xt={}));var jt=function(){function s(d,f){this.edits=d,this.changeAnnotations=f}return s.prototype.insert=function(d,f,a){var o,g;if(a===void 0?o=W.insert(d,f):oe.is(a)?(g=a,o=Ae.insert(d,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(a),o=Ae.insert(d,f,g)),this.edits.push(o),g!==void 0)return g},s.prototype.replace=function(d,f,a){var o,g;if(a===void 0?o=W.replace(d,f):oe.is(a)?(g=a,o=Ae.replace(d,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(a),o=Ae.replace(d,f,g)),this.edits.push(o),g!==void 0)return g},s.prototype.delete=function(d,f){var a,o;if(f===void 0?a=W.del(d):oe.is(f)?(o=f,a=Ae.del(d,f)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(f),a=Ae.del(d,o)),this.edits.push(a),o!==void 0)return o},s.prototype.add=function(d){this.edits.push(d)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(d){if(d===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),En=function(){function s(d){this._annotations=d===void 0?Object.create(null):d,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(d,f){var a;if(oe.is(d)?a=d:(a=this.nextId(),f=d),this._annotations[a]!==void 0)throw new Error("Id ".concat(a," is already in use."));if(f===void 0)throw new Error("No annotation provided for id ".concat(a));return this._annotations[a]=f,this._size++,a},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),mi=function(){function s(d){var f=this;this._textEditChanges=Object.create(null),d!==void 0?(this._workspaceEdit=d,d.documentChanges?(this._changeAnnotations=new En(d.changeAnnotations),d.changeAnnotations=this._changeAnnotations.all(),d.documentChanges.forEach(function(a){if(vt.is(a)){var o=new jt(a.edits,f._changeAnnotations);f._textEditChanges[a.textDocument.uri]=o}})):d.changes&&Object.keys(d.changes).forEach(function(a){var o=new jt(d.changes[a]);f._textEditChanges[a]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(d){if(_t.is(d)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f={uri:d.uri,version:d.version},a=this._textEditChanges[f.uri];if(!a){var o=[],g={textDocument:f,edits:o};this._workspaceEdit.documentChanges.push(g),a=new jt(o,this._changeAnnotations),this._textEditChanges[f.uri]=a}return a}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var a=this._textEditChanges[d];if(!a){var o=[];this._workspaceEdit.changes[d]=o,a=new jt(o),this._textEditChanges[d]=a}return a}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new En,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(d,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Z.is(f)||oe.is(f)?o=f:a=f;var g,D;if(o===void 0?g=it.create(d,a):(D=oe.is(o)?o:this._changeAnnotations.manage(o),g=it.create(d,a,D)),this._workspaceEdit.documentChanges.push(g),D!==void 0)return D},s.prototype.renameFile=function(d,f,a,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var g;Z.is(a)||oe.is(a)?g=a:o=a;var D,F;if(g===void 0?D=ot.create(d,f,o):(F=oe.is(g)?g:this._changeAnnotations.manage(g),D=ot.create(d,f,o,F)),this._workspaceEdit.documentChanges.push(D),F!==void 0)return F},s.prototype.deleteFile=function(d,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Z.is(f)||oe.is(f)?o=f:a=f;var g,D;if(o===void 0?g=Re.create(d,a):(D=oe.is(o)?o:this._changeAnnotations.manage(o),g=Re.create(d,a,D)),this._workspaceEdit.documentChanges.push(g),D!==void 0)return D},s}();t.WorkspaceChange=mi;var Mn;(function(s){function d(a){return{uri:a}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.uri)}s.is=f})(Mn||(t.TextDocumentIdentifier=Mn={}));var ln;(function(s){function d(a,o){return{uri:a,version:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.uri)&&m.integer(o.version)}s.is=f})(ln||(t.VersionedTextDocumentIdentifier=ln={}));var _t;(function(s){function d(a,o){return{uri:a,version:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.uri)&&(o.version===null||m.integer(o.version))}s.is=f})(_t||(t.OptionalVersionedTextDocumentIdentifier=_t={}));var Qe;(function(s){function d(a,o,g,D){return{uri:a,languageId:o,version:g,text:D}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.uri)&&m.string(o.languageId)&&m.integer(o.version)&&m.string(o.text)}s.is=f})(Qe||(t.TextDocumentItem=Qe={}));var It;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function d(f){var a=f;return a===s.PlainText||a===s.Markdown}s.is=d})(It||(t.MarkupKind=It={}));var Dt;(function(s){function d(f){var a=f;return m.objectLiteral(f)&&It.is(a.kind)&&m.string(a.value)}s.is=d})(Dt||(t.MarkupContent=Dt={}));var xn;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(xn||(t.CompletionItemKind=xn={}));var dn;(function(s){s.PlainText=1,s.Snippet=2})(dn||(t.InsertTextFormat=dn={}));var fn;(function(s){s.Deprecated=1})(fn||(t.CompletionItemTag=fn={}));var jn;(function(s){function d(a,o,g){return{newText:a,insert:o,replace:g}}s.create=d;function f(a){var o=a;return o&&m.string(o.newText)&&b.is(o.insert)&&b.is(o.replace)}s.is=f})(jn||(t.InsertReplaceEdit=jn={}));var In;(function(s){s.asIs=1,s.adjustIndentation=2})(In||(t.InsertTextMode=In={}));var Ln;(function(s){function d(f){var a=f;return a&&(m.string(a.detail)||a.detail===void 0)&&(m.string(a.description)||a.description===void 0)}s.is=d})(Ln||(t.CompletionItemLabelDetails=Ln={}));var Fn;(function(s){function d(f){return{label:f}}s.create=d})(Fn||(t.CompletionItem=Fn={}));var An;(function(s){function d(f,a){return{items:f||[],isIncomplete:!!a}}s.create=d})(An||(t.CompletionList=An={}));var Lt;(function(s){function d(a){return a.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=d;function f(a){var o=a;return m.string(o)||m.objectLiteral(o)&&m.string(o.language)&&m.string(o.value)}s.is=f})(Lt||(t.MarkedString=Lt={}));var We;(function(s){function d(f){var a=f;return!!a&&m.objectLiteral(a)&&(Dt.is(a.contents)||Lt.is(a.contents)||m.typedArray(a.contents,Lt.is))&&(f.range===void 0||b.is(f.range))}s.is=d})(We||(t.Hover=We={}));var Wn;(function(s){function d(f,a){return a?{label:f,documentation:a}:{label:f}}s.create=d})(Wn||(t.ParameterInformation=Wn={}));var Hn;(function(s){function d(f,a){for(var o=[],g=2;g<arguments.length;g++)o[g-2]=arguments[g];var D={label:f};return m.defined(a)&&(D.documentation=a),m.defined(o)?D.parameters=o:D.parameters=[],D}s.create=d})(Hn||(t.SignatureInformation=Hn={}));var Rt;(function(s){s.Text=1,s.Read=2,s.Write=3})(Rt||(t.DocumentHighlightKind=Rt={}));var $n;(function(s){function d(f,a){var o={range:f};return m.number(a)&&(o.kind=a),o}s.create=d})($n||(t.DocumentHighlight=$n={}));var Ft;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(Ft||(t.SymbolKind=Ft={}));var Un;(function(s){s.Deprecated=1})(Un||(t.SymbolTag=Un={}));var Ke;(function(s){function d(f,a,o,g,D){var F={name:f,kind:a,location:{uri:g,range:o}};return D&&(F.containerName=D),F}s.create=d})(Ke||(t.SymbolInformation=Ke={}));var st;(function(s){function d(f,a,o,g){return g!==void 0?{name:f,kind:a,location:{uri:o,range:g}}:{name:f,kind:a,location:{uri:o}}}s.create=d})(st||(t.WorkspaceSymbol=st={}));var zn;(function(s){function d(a,o,g,D,F,ae){var Q={name:a,detail:o,kind:g,range:D,selectionRange:F};return ae!==void 0&&(Q.children=ae),Q}s.create=d;function f(a){var o=a;return o&&m.string(o.name)&&m.number(o.kind)&&b.is(o.range)&&b.is(o.selectionRange)&&(o.detail===void 0||m.string(o.detail))&&(o.deprecated===void 0||m.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=f})(zn||(t.DocumentSymbol=zn={}));var Vn;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(Vn||(t.CodeActionKind=Vn={}));var Xe;(function(s){s.Invoked=1,s.Automatic=2})(Xe||(t.CodeActionTriggerKind=Xe={}));var hn;(function(s){function d(a,o,g){var D={diagnostics:a};return o!=null&&(D.only=o),g!=null&&(D.triggerKind=g),D}s.create=d;function f(a){var o=a;return m.defined(o)&&m.typedArray(o.diagnostics,p.is)&&(o.only===void 0||m.typedArray(o.only,m.string))&&(o.triggerKind===void 0||o.triggerKind===Xe.Invoked||o.triggerKind===Xe.Automatic)}s.is=f})(hn||(t.CodeActionContext=hn={}));var gn;(function(s){function d(a,o,g){var D={title:a},F=!0;return typeof o=="string"?(F=!1,D.kind=o):C.is(o)?D.command=o:D.edit=o,F&&g!==void 0&&(D.kind=g),D}s.create=d;function f(a){var o=a;return o&&m.string(o.title)&&(o.diagnostics===void 0||m.typedArray(o.diagnostics,p.is))&&(o.kind===void 0||m.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||C.is(o.command))&&(o.isPreferred===void 0||m.boolean(o.isPreferred))&&(o.edit===void 0||xt.is(o.edit))}s.is=f})(gn||(t.CodeAction=gn={}));var At;(function(s){function d(a,o){var g={range:a};return m.defined(o)&&(g.data=o),g}s.create=d;function f(a){var o=a;return m.defined(o)&&b.is(o.range)&&(m.undefined(o.command)||C.is(o.command))}s.is=f})(At||(t.CodeLens=At={}));var mn;(function(s){function d(a,o){return{tabSize:a,insertSpaces:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.uinteger(o.tabSize)&&m.boolean(o.insertSpaces)}s.is=f})(mn||(t.FormattingOptions=mn={}));var et;(function(s){function d(a,o,g){return{range:a,target:o,data:g}}s.create=d;function f(a){var o=a;return m.defined(o)&&b.is(o.range)&&(m.undefined(o.target)||m.string(o.target))}s.is=f})(et||(t.DocumentLink=et={}));var l;(function(s){function d(a,o){return{range:a,parent:o}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&b.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=f})(l||(t.SelectionRange=l={}));var _;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(_||(t.SemanticTokenTypes=_={}));var T;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(T||(t.SemanticTokenModifiers=T={}));var E;(function(s){function d(f){var a=f;return m.objectLiteral(a)&&(a.resultId===void 0||typeof a.resultId=="string")&&Array.isArray(a.data)&&(a.data.length===0||typeof a.data[0]=="number")}s.is=d})(E||(t.SemanticTokens=E={}));var Y;(function(s){function d(a,o){return{range:a,text:o}}s.create=d;function f(a){var o=a;return o!=null&&b.is(o.range)&&m.string(o.text)}s.is=f})(Y||(t.InlineValueText=Y={}));var X;(function(s){function d(a,o,g){return{range:a,variableName:o,caseSensitiveLookup:g}}s.create=d;function f(a){var o=a;return o!=null&&b.is(o.range)&&m.boolean(o.caseSensitiveLookup)&&(m.string(o.variableName)||o.variableName===void 0)}s.is=f})(X||(t.InlineValueVariableLookup=X={}));var ee;(function(s){function d(a,o){return{range:a,expression:o}}s.create=d;function f(a){var o=a;return o!=null&&b.is(o.range)&&(m.string(o.expression)||o.expression===void 0)}s.is=f})(ee||(t.InlineValueEvaluatableExpression=ee={}));var ne;(function(s){function d(a,o){return{frameId:a,stoppedLocation:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&b.is(a.stoppedLocation)}s.is=f})(ne||(t.InlineValueContext=ne={}));var H;(function(s){s.Type=1,s.Parameter=2;function d(f){return f===1||f===2}s.is=d})(H||(t.InlayHintKind=H={}));var G;(function(s){function d(a){return{value:a}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&(o.tooltip===void 0||m.string(o.tooltip)||Dt.is(o.tooltip))&&(o.location===void 0||w.is(o.location))&&(o.command===void 0||C.is(o.command))}s.is=f})(G||(t.InlayHintLabelPart=G={}));var z;(function(s){function d(a,o,g){var D={position:a,label:o};return g!==void 0&&(D.kind=g),D}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&h.is(o.position)&&(m.string(o.label)||m.typedArray(o.label,G.is))&&(o.kind===void 0||H.is(o.kind))&&o.textEdits===void 0||m.typedArray(o.textEdits,W.is)&&(o.tooltip===void 0||m.string(o.tooltip)||Dt.is(o.tooltip))&&(o.paddingLeft===void 0||m.boolean(o.paddingLeft))&&(o.paddingRight===void 0||m.boolean(o.paddingRight))}s.is=f})(z||(t.InlayHint=z={}));var se;(function(s){function d(f){return{kind:"snippet",value:f}}s.createSnippet=d})(se||(t.StringValue=se={}));var ge;(function(s){function d(f,a,o,g){return{insertText:f,filterText:a,range:o,command:g}}s.create=d})(ge||(t.InlineCompletionItem=ge={}));var qe;(function(s){function d(f){return{items:f}}s.create=d})(qe||(t.InlineCompletionList=qe={}));var Bn;(function(s){s.Invoked=0,s.Automatic=1})(Bn||(t.InlineCompletionTriggerKind=Bn={}));var Ds;(function(s){function d(f,a){return{range:f,text:a}}s.create=d})(Ds||(t.SelectedCompletionInfo=Ds={}));var Rs;(function(s){function d(f,a){return{triggerKind:f,selectedCompletionInfo:a}}s.create=d})(Rs||(t.InlineCompletionContext=Rs={}));var ws;(function(s){function d(f){var a=f;return m.objectLiteral(a)&&r.is(a.uri)&&m.string(a.name)}s.is=d})(ws||(t.WorkspaceFolder=ws={})),t.EOL=[`
`,`\r
`,"\r"];var Ps;(function(s){function d(g,D,F,ae){return new od(g,D,F,ae)}s.create=d;function f(g){var D=g;return!!(m.defined(D)&&m.string(D.uri)&&(m.undefined(D.languageId)||m.string(D.languageId))&&m.uinteger(D.lineCount)&&m.func(D.getText)&&m.func(D.positionAt)&&m.func(D.offsetAt))}s.is=f;function a(g,D){for(var F=g.getText(),ae=o(D,function(Wt,Xn){var Cs=Wt.range.start.line-Xn.range.start.line;return Cs===0?Wt.range.start.character-Xn.range.start.character:Cs}),Q=F.length,He=ae.length-1;He>=0;He--){var $e=ae[He],tt=g.offsetAt($e.range.start),$=g.offsetAt($e.range.end);if($<=Q)F=F.substring(0,tt)+$e.newText+F.substring($,F.length);else throw new Error("Overlapping edit");Q=tt}return F}s.applyEdits=a;function o(g,D){if(g.length<=1)return g;var F=g.length/2|0,ae=g.slice(0,F),Q=g.slice(F);o(ae,D),o(Q,D);for(var He=0,$e=0,tt=0;He<ae.length&&$e<Q.length;){var $=D(ae[He],Q[$e]);$<=0?g[tt++]=ae[He++]:g[tt++]=Q[$e++]}for(;He<ae.length;)g[tt++]=ae[He++];for(;$e<Q.length;)g[tt++]=Q[$e++];return g}})(Ps||(t.TextDocument=Ps={}));var od=function(){function s(d,f,a,o){this._uri=d,this._languageId=f,this._version=a,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(d){if(d){var f=this.offsetAt(d.start),a=this.offsetAt(d.end);return this._content.substring(f,a)}return this._content},s.prototype.update=function(d,f){this._content=d.text,this._version=f,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var d=[],f=this._content,a=!0,o=0;o<f.length;o++){a&&(d.push(o),a=!1);var g=f.charAt(o);a=g==="\r"||g===`
`,g==="\r"&&o+1<f.length&&f.charAt(o+1)===`
`&&o++}a&&f.length>0&&d.push(f.length),this._lineOffsets=d}return this._lineOffsets},s.prototype.positionAt=function(d){d=Math.max(Math.min(d,this._content.length),0);var f=this.getLineOffsets(),a=0,o=f.length;if(o===0)return h.create(0,d);for(;a<o;){var g=Math.floor((a+o)/2);f[g]>d?o=g:a=g+1}var D=a-1;return h.create(D,d-f[D])},s.prototype.offsetAt=function(d){var f=this.getLineOffsets();if(d.line>=f.length)return this._content.length;if(d.line<0)return 0;var a=f[d.line],o=d.line+1<f.length?f[d.line+1]:this._content.length;return Math.max(Math.min(a+d.character,o),a)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),m;(function(s){var d=Object.prototype.toString;function f($){return typeof $<"u"}s.defined=f;function a($){return typeof $>"u"}s.undefined=a;function o($){return $===!0||$===!1}s.boolean=o;function g($){return d.call($)==="[object String]"}s.string=g;function D($){return d.call($)==="[object Number]"}s.number=D;function F($,Wt,Xn){return d.call($)==="[object Number]"&&Wt<=$&&$<=Xn}s.numberRange=F;function ae($){return d.call($)==="[object Number]"&&-2147483648<=$&&$<=2147483647}s.integer=ae;function Q($){return d.call($)==="[object Number]"&&0<=$&&$<=2147483647}s.uinteger=Q;function He($){return d.call($)==="[object Function]"}s.func=He;function $e($){return $!==null&&typeof $=="object"}s.objectLiteral=$e;function tt($,Wt){return Array.isArray($)&&$.every(Wt)}s.typedArray=tt})(m||(m={}))})});var re=N(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ProtocolNotificationType=Pe.ProtocolNotificationType0=Pe.ProtocolRequestType=Pe.ProtocolRequestType0=Pe.RegistrationType=Pe.MessageDirection=void 0;var Yt=Tt(),ua;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(ua||(Pe.MessageDirection=ua={}));var qo=class{constructor(t){this.method=t}};Pe.RegistrationType=qo;var No=class extends Yt.RequestType0{constructor(t){super(t)}};Pe.ProtocolRequestType0=No;var Oo=class extends Yt.RequestType{constructor(t){super(t,Yt.ParameterStructures.byName)}};Pe.ProtocolRequestType=Oo;var Eo=class extends Yt.NotificationType0{constructor(t){super(t)}};Pe.ProtocolNotificationType0=Eo;var Mo=class extends Yt.NotificationType{constructor(t){super(t,Yt.ParameterStructures.byName)}};Pe.ProtocolNotificationType=Mo});var Dr=N(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.objectLiteral=fe.typedArray=fe.stringArray=fe.array=fe.func=fe.error=fe.number=fe.string=fe.boolean=void 0;function Kd(e){return e===!0||e===!1}fe.boolean=Kd;function la(e){return typeof e=="string"||e instanceof String}fe.string=la;function ef(e){return typeof e=="number"||e instanceof Number}fe.number=ef;function tf(e){return e instanceof Error}fe.error=tf;function nf(e){return typeof e=="function"}fe.func=nf;function da(e){return Array.isArray(e)}fe.array=da;function rf(e){return da(e)&&e.every(t=>la(t))}fe.stringArray=rf;function of(e,t){return Array.isArray(e)&&e.every(t)}fe.typedArray=of;function sf(e){return e!==null&&typeof e=="object"}fe.objectLiteral=sf});var ga=N(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ImplementationRequest=void 0;var fa=re(),ha;(function(e){e.method="textDocument/implementation",e.messageDirection=fa.MessageDirection.clientToServer,e.type=new fa.ProtocolRequestType(e.method)})(ha||(Rr.ImplementationRequest=ha={}))});var ya=N(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.TypeDefinitionRequest=void 0;var ma=re(),pa;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=ma.MessageDirection.clientToServer,e.type=new ma.ProtocolRequestType(e.method)})(pa||(wr.TypeDefinitionRequest=pa={}))});var _a=N(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.DidChangeWorkspaceFoldersNotification=Gt.WorkspaceFoldersRequest=void 0;var Pr=re(),ba;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=Pr.MessageDirection.serverToClient,e.type=new Pr.ProtocolRequestType0(e.method)})(ba||(Gt.WorkspaceFoldersRequest=ba={}));var va;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=Pr.MessageDirection.clientToServer,e.type=new Pr.ProtocolNotificationType(e.method)})(va||(Gt.DidChangeWorkspaceFoldersNotification=va={}))});var wa=N(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.ConfigurationRequest=void 0;var Da=re(),Ra;(function(e){e.method="workspace/configuration",e.messageDirection=Da.MessageDirection.serverToClient,e.type=new Da.ProtocolRequestType(e.method)})(Ra||(Cr.ConfigurationRequest=Ra={}))});var Ta=N(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.ColorPresentationRequest=Zt.DocumentColorRequest=void 0;var Tr=re(),Pa;(function(e){e.method="textDocument/documentColor",e.messageDirection=Tr.MessageDirection.clientToServer,e.type=new Tr.ProtocolRequestType(e.method)})(Pa||(Zt.DocumentColorRequest=Pa={}));var Ca;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=Tr.MessageDirection.clientToServer,e.type=new Tr.ProtocolRequestType(e.method)})(Ca||(Zt.ColorPresentationRequest=Ca={}))});var qa=N(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.FoldingRangeRefreshRequest=Qt.FoldingRangeRequest=void 0;var Sr=re(),Sa;(function(e){e.method="textDocument/foldingRange",e.messageDirection=Sr.MessageDirection.clientToServer,e.type=new Sr.ProtocolRequestType(e.method)})(Sa||(Qt.FoldingRangeRequest=Sa={}));var ka;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=Sr.MessageDirection.serverToClient,e.type=new Sr.ProtocolRequestType0(e.method)})(ka||(Qt.FoldingRangeRefreshRequest=ka={}))});var Ea=N(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.DeclarationRequest=void 0;var Na=re(),Oa;(function(e){e.method="textDocument/declaration",e.messageDirection=Na.MessageDirection.clientToServer,e.type=new Na.ProtocolRequestType(e.method)})(Oa||(kr.DeclarationRequest=Oa={}))});var ja=N(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.SelectionRangeRequest=void 0;var Ma=re(),xa;(function(e){e.method="textDocument/selectionRange",e.messageDirection=Ma.MessageDirection.clientToServer,e.type=new Ma.ProtocolRequestType(e.method)})(xa||(qr.SelectionRangeRequest=xa={}))});var Aa=N(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.WorkDoneProgressCancelNotification=dt.WorkDoneProgressCreateRequest=dt.WorkDoneProgress=void 0;var af=Tt(),Nr=re(),Ia;(function(e){e.type=new af.ProgressType;function t(n){return n===e.type}e.is=t})(Ia||(dt.WorkDoneProgress=Ia={}));var La;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=Nr.MessageDirection.serverToClient,e.type=new Nr.ProtocolRequestType(e.method)})(La||(dt.WorkDoneProgressCreateRequest=La={}));var Fa;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=Nr.MessageDirection.clientToServer,e.type=new Nr.ProtocolNotificationType(e.method)})(Fa||(dt.WorkDoneProgressCancelNotification=Fa={}))});var Ua=N(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.CallHierarchyOutgoingCallsRequest=ft.CallHierarchyIncomingCallsRequest=ft.CallHierarchyPrepareRequest=void 0;var Kt=re(),Wa;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=Kt.MessageDirection.clientToServer,e.type=new Kt.ProtocolRequestType(e.method)})(Wa||(ft.CallHierarchyPrepareRequest=Wa={}));var Ha;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=Kt.MessageDirection.clientToServer,e.type=new Kt.ProtocolRequestType(e.method)})(Ha||(ft.CallHierarchyIncomingCallsRequest=Ha={}));var $a;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=Kt.MessageDirection.clientToServer,e.type=new Kt.ProtocolRequestType(e.method)})($a||(ft.CallHierarchyOutgoingCallsRequest=$a={}))});var Ya=N(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.SemanticTokensRefreshRequest=Ce.SemanticTokensRangeRequest=Ce.SemanticTokensDeltaRequest=Ce.SemanticTokensRequest=Ce.SemanticTokensRegistrationType=Ce.TokenFormat=void 0;var rt=re(),za;(function(e){e.Relative="relative"})(za||(Ce.TokenFormat=za={}));var Rn;(function(e){e.method="textDocument/semanticTokens",e.type=new rt.RegistrationType(e.method)})(Rn||(Ce.SemanticTokensRegistrationType=Rn={}));var Va;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=rt.MessageDirection.clientToServer,e.type=new rt.ProtocolRequestType(e.method),e.registrationMethod=Rn.method})(Va||(Ce.SemanticTokensRequest=Va={}));var Ba;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=rt.MessageDirection.clientToServer,e.type=new rt.ProtocolRequestType(e.method),e.registrationMethod=Rn.method})(Ba||(Ce.SemanticTokensDeltaRequest=Ba={}));var Xa;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=rt.MessageDirection.clientToServer,e.type=new rt.ProtocolRequestType(e.method),e.registrationMethod=Rn.method})(Xa||(Ce.SemanticTokensRangeRequest=Xa={}));var Ja;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=rt.MessageDirection.serverToClient,e.type=new rt.ProtocolRequestType0(e.method)})(Ja||(Ce.SemanticTokensRefreshRequest=Ja={}))});var Qa=N(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.ShowDocumentRequest=void 0;var Ga=re(),Za;(function(e){e.method="window/showDocument",e.messageDirection=Ga.MessageDirection.serverToClient,e.type=new Ga.ProtocolRequestType(e.method)})(Za||(Or.ShowDocumentRequest=Za={}))});var tc=N(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.LinkedEditingRangeRequest=void 0;var Ka=re(),ec;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=Ka.MessageDirection.clientToServer,e.type=new Ka.ProtocolRequestType(e.method)})(ec||(Er.LinkedEditingRangeRequest=ec={}))});var uc=N(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.WillDeleteFilesRequest=ve.DidDeleteFilesNotification=ve.DidRenameFilesNotification=ve.WillRenameFilesRequest=ve.DidCreateFilesNotification=ve.WillCreateFilesRequest=ve.FileOperationPatternKind=void 0;var Ee=re(),nc;(function(e){e.file="file",e.folder="folder"})(nc||(ve.FileOperationPatternKind=nc={}));var rc;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolRequestType(e.method)})(rc||(ve.WillCreateFilesRequest=rc={}));var ic;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolNotificationType(e.method)})(ic||(ve.DidCreateFilesNotification=ic={}));var oc;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolRequestType(e.method)})(oc||(ve.WillRenameFilesRequest=oc={}));var sc;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolNotificationType(e.method)})(sc||(ve.DidRenameFilesNotification=sc={}));var ac;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolNotificationType(e.method)})(ac||(ve.DidDeleteFilesNotification=ac={}));var cc;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=Ee.MessageDirection.clientToServer,e.type=new Ee.ProtocolRequestType(e.method)})(cc||(ve.WillDeleteFilesRequest=cc={}))});var gc=N(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.MonikerRequest=ht.MonikerKind=ht.UniquenessLevel=void 0;var lc=re(),dc;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(dc||(ht.UniquenessLevel=dc={}));var fc;(function(e){e.$import="import",e.$export="export",e.local="local"})(fc||(ht.MonikerKind=fc={}));var hc;(function(e){e.method="textDocument/moniker",e.messageDirection=lc.MessageDirection.clientToServer,e.type=new lc.ProtocolRequestType(e.method)})(hc||(ht.MonikerRequest=hc={}))});var bc=N(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.TypeHierarchySubtypesRequest=gt.TypeHierarchySupertypesRequest=gt.TypeHierarchyPrepareRequest=void 0;var en=re(),mc;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=en.MessageDirection.clientToServer,e.type=new en.ProtocolRequestType(e.method)})(mc||(gt.TypeHierarchyPrepareRequest=mc={}));var pc;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=en.MessageDirection.clientToServer,e.type=new en.ProtocolRequestType(e.method)})(pc||(gt.TypeHierarchySupertypesRequest=pc={}));var yc;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=en.MessageDirection.clientToServer,e.type=new en.ProtocolRequestType(e.method)})(yc||(gt.TypeHierarchySubtypesRequest=yc={}))});var Dc=N(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.InlineValueRefreshRequest=tn.InlineValueRequest=void 0;var Mr=re(),vc;(function(e){e.method="textDocument/inlineValue",e.messageDirection=Mr.MessageDirection.clientToServer,e.type=new Mr.ProtocolRequestType(e.method)})(vc||(tn.InlineValueRequest=vc={}));var _c;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=Mr.MessageDirection.serverToClient,e.type=new Mr.ProtocolRequestType0(e.method)})(_c||(tn.InlineValueRefreshRequest=_c={}))});var Cc=N(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.InlayHintRefreshRequest=mt.InlayHintResolveRequest=mt.InlayHintRequest=void 0;var nn=re(),Rc;(function(e){e.method="textDocument/inlayHint",e.messageDirection=nn.MessageDirection.clientToServer,e.type=new nn.ProtocolRequestType(e.method)})(Rc||(mt.InlayHintRequest=Rc={}));var wc;(function(e){e.method="inlayHint/resolve",e.messageDirection=nn.MessageDirection.clientToServer,e.type=new nn.ProtocolRequestType(e.method)})(wc||(mt.InlayHintResolveRequest=wc={}));var Pc;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=nn.MessageDirection.serverToClient,e.type=new nn.ProtocolRequestType0(e.method)})(Pc||(mt.InlayHintRefreshRequest=Pc={}))});var Ec=N(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.DiagnosticRefreshRequest=Me.WorkspaceDiagnosticRequest=Me.DocumentDiagnosticRequest=Me.DocumentDiagnosticReportKind=Me.DiagnosticServerCancellationData=void 0;var Oc=Tt(),cf=Dr(),rn=re(),Tc;(function(e){function t(n){let r=n;return r&&cf.boolean(r.retriggerRequest)}e.is=t})(Tc||(Me.DiagnosticServerCancellationData=Tc={}));var Sc;(function(e){e.Full="full",e.Unchanged="unchanged"})(Sc||(Me.DocumentDiagnosticReportKind=Sc={}));var kc;(function(e){e.method="textDocument/diagnostic",e.messageDirection=rn.MessageDirection.clientToServer,e.type=new rn.ProtocolRequestType(e.method),e.partialResult=new Oc.ProgressType})(kc||(Me.DocumentDiagnosticRequest=kc={}));var qc;(function(e){e.method="workspace/diagnostic",e.messageDirection=rn.MessageDirection.clientToServer,e.type=new rn.ProtocolRequestType(e.method),e.partialResult=new Oc.ProgressType})(qc||(Me.WorkspaceDiagnosticRequest=qc={}));var Nc;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=rn.MessageDirection.serverToClient,e.type=new rn.ProtocolRequestType0(e.method)})(Nc||(Me.DiagnosticRefreshRequest=Nc={}))});var Ac=N(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.DidCloseNotebookDocumentNotification=ce.DidSaveNotebookDocumentNotification=ce.DidChangeNotebookDocumentNotification=ce.NotebookCellArrayChange=ce.DidOpenNotebookDocumentNotification=ce.NotebookDocumentSyncRegistrationType=ce.NotebookDocument=ce.NotebookCell=ce.ExecutionSummary=ce.NotebookCellKind=void 0;var wn=_r(),ze=Dr(),Je=re(),xo;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(xo||(ce.NotebookCellKind=xo={}));var jo;(function(e){function t(i,c){let h={executionOrder:i};return(c===!0||c===!1)&&(h.success=c),h}e.create=t;function n(i){let c=i;return ze.objectLiteral(c)&&wn.uinteger.is(c.executionOrder)&&(c.success===void 0||ze.boolean(c.success))}e.is=n;function r(i,c){return i===c?!0:i==null||c===null||c===void 0?!1:i.executionOrder===c.executionOrder&&i.success===c.success}e.equals=r})(jo||(ce.ExecutionSummary=jo={}));var xr;(function(e){function t(c,h){return{kind:c,document:h}}e.create=t;function n(c){let h=c;return ze.objectLiteral(h)&&xo.is(h.kind)&&wn.DocumentUri.is(h.document)&&(h.metadata===void 0||ze.objectLiteral(h.metadata))}e.is=n;function r(c,h){let b=new Set;return c.document!==h.document&&b.add("document"),c.kind!==h.kind&&b.add("kind"),c.executionSummary!==h.executionSummary&&b.add("executionSummary"),(c.metadata!==void 0||h.metadata!==void 0)&&!i(c.metadata,h.metadata)&&b.add("metadata"),(c.executionSummary!==void 0||h.executionSummary!==void 0)&&!jo.equals(c.executionSummary,h.executionSummary)&&b.add("executionSummary"),b}e.diff=r;function i(c,h){if(c===h)return!0;if(c==null||h===null||h===void 0||typeof c!=typeof h||typeof c!="object")return!1;let b=Array.isArray(c),w=Array.isArray(h);if(b!==w)return!1;if(b&&w){if(c.length!==h.length)return!1;for(let S=0;S<c.length;S++)if(!i(c[S],h[S]))return!1}if(ze.objectLiteral(c)&&ze.objectLiteral(h)){let S=Object.keys(c),q=Object.keys(h);if(S.length!==q.length||(S.sort(),q.sort(),!i(S,q)))return!1;for(let P=0;P<S.length;P++){let x=S[P];if(!i(c[x],h[x]))return!1}}return!0}})(xr||(ce.NotebookCell=xr={}));var Mc;(function(e){function t(r,i,c,h){return{uri:r,notebookType:i,version:c,cells:h}}e.create=t;function n(r){let i=r;return ze.objectLiteral(i)&&ze.string(i.uri)&&wn.integer.is(i.version)&&ze.typedArray(i.cells,xr.is)}e.is=n})(Mc||(ce.NotebookDocument=Mc={}));var on;(function(e){e.method="notebookDocument/sync",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.RegistrationType(e.method)})(on||(ce.NotebookDocumentSyncRegistrationType=on={}));var xc;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method),e.registrationMethod=on.method})(xc||(ce.DidOpenNotebookDocumentNotification=xc={}));var jc;(function(e){function t(r){let i=r;return ze.objectLiteral(i)&&wn.uinteger.is(i.start)&&wn.uinteger.is(i.deleteCount)&&(i.cells===void 0||ze.typedArray(i.cells,xr.is))}e.is=t;function n(r,i,c){let h={start:r,deleteCount:i};return c!==void 0&&(h.cells=c),h}e.create=n})(jc||(ce.NotebookCellArrayChange=jc={}));var Ic;(function(e){e.method="notebookDocument/didChange",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method),e.registrationMethod=on.method})(Ic||(ce.DidChangeNotebookDocumentNotification=Ic={}));var Lc;(function(e){e.method="notebookDocument/didSave",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method),e.registrationMethod=on.method})(Lc||(ce.DidSaveNotebookDocumentNotification=Lc={}));var Fc;(function(e){e.method="notebookDocument/didClose",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method),e.registrationMethod=on.method})(Fc||(ce.DidCloseNotebookDocumentNotification=Fc={}))});var $c=N(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.InlineCompletionRequest=void 0;var Wc=re(),Hc;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=Wc.MessageDirection.clientToServer,e.type=new Wc.ProtocolRequestType(e.method)})(Hc||(jr.InlineCompletionRequest=Hc={}))});var tl=N(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.WorkspaceSymbolRequest=u.CodeActionResolveRequest=u.CodeActionRequest=u.DocumentSymbolRequest=u.DocumentHighlightRequest=u.ReferencesRequest=u.DefinitionRequest=u.SignatureHelpRequest=u.SignatureHelpTriggerKind=u.HoverRequest=u.CompletionResolveRequest=u.CompletionRequest=u.CompletionTriggerKind=u.PublishDiagnosticsNotification=u.WatchKind=u.RelativePattern=u.FileChangeType=u.DidChangeWatchedFilesNotification=u.WillSaveTextDocumentWaitUntilRequest=u.WillSaveTextDocumentNotification=u.TextDocumentSaveReason=u.DidSaveTextDocumentNotification=u.DidCloseTextDocumentNotification=u.DidChangeTextDocumentNotification=u.TextDocumentContentChangeEvent=u.DidOpenTextDocumentNotification=u.TextDocumentSyncKind=u.TelemetryEventNotification=u.LogMessageNotification=u.ShowMessageRequest=u.ShowMessageNotification=u.MessageType=u.DidChangeConfigurationNotification=u.ExitNotification=u.ShutdownRequest=u.InitializedNotification=u.InitializeErrorCodes=u.InitializeRequest=u.WorkDoneProgressOptions=u.TextDocumentRegistrationOptions=u.StaticRegistrationOptions=u.PositionEncodingKind=u.FailureHandlingKind=u.ResourceOperationKind=u.UnregistrationRequest=u.RegistrationRequest=u.DocumentSelector=u.NotebookCellTextDocumentFilter=u.NotebookDocumentFilter=u.TextDocumentFilter=void 0;u.MonikerRequest=u.MonikerKind=u.UniquenessLevel=u.WillDeleteFilesRequest=u.DidDeleteFilesNotification=u.WillRenameFilesRequest=u.DidRenameFilesNotification=u.WillCreateFilesRequest=u.DidCreateFilesNotification=u.FileOperationPatternKind=u.LinkedEditingRangeRequest=u.ShowDocumentRequest=u.SemanticTokensRegistrationType=u.SemanticTokensRefreshRequest=u.SemanticTokensRangeRequest=u.SemanticTokensDeltaRequest=u.SemanticTokensRequest=u.TokenFormat=u.CallHierarchyPrepareRequest=u.CallHierarchyOutgoingCallsRequest=u.CallHierarchyIncomingCallsRequest=u.WorkDoneProgressCancelNotification=u.WorkDoneProgressCreateRequest=u.WorkDoneProgress=u.SelectionRangeRequest=u.DeclarationRequest=u.FoldingRangeRefreshRequest=u.FoldingRangeRequest=u.ColorPresentationRequest=u.DocumentColorRequest=u.ConfigurationRequest=u.DidChangeWorkspaceFoldersNotification=u.WorkspaceFoldersRequest=u.TypeDefinitionRequest=u.ImplementationRequest=u.ApplyWorkspaceEditRequest=u.ExecuteCommandRequest=u.PrepareRenameRequest=u.RenameRequest=u.PrepareSupportDefaultBehavior=u.DocumentOnTypeFormattingRequest=u.DocumentRangesFormattingRequest=u.DocumentRangeFormattingRequest=u.DocumentFormattingRequest=u.DocumentLinkResolveRequest=u.DocumentLinkRequest=u.CodeLensRefreshRequest=u.CodeLensResolveRequest=u.CodeLensRequest=u.WorkspaceSymbolResolveRequest=void 0;u.InlineCompletionRequest=u.DidCloseNotebookDocumentNotification=u.DidSaveNotebookDocumentNotification=u.DidChangeNotebookDocumentNotification=u.NotebookCellArrayChange=u.DidOpenNotebookDocumentNotification=u.NotebookDocumentSyncRegistrationType=u.NotebookDocument=u.NotebookCell=u.ExecutionSummary=u.NotebookCellKind=u.DiagnosticRefreshRequest=u.WorkspaceDiagnosticRequest=u.DocumentDiagnosticRequest=u.DocumentDiagnosticReportKind=u.DiagnosticServerCancellationData=u.InlayHintRefreshRequest=u.InlayHintResolveRequest=u.InlayHintRequest=u.InlineValueRefreshRequest=u.InlineValueRequest=u.TypeHierarchySupertypesRequest=u.TypeHierarchySubtypesRequest=u.TypeHierarchyPrepareRequest=void 0;var R=re(),Uc=_r(),me=Dr(),uf=ga();Object.defineProperty(u,"ImplementationRequest",{enumerable:!0,get:function(){return uf.ImplementationRequest}});var lf=ya();Object.defineProperty(u,"TypeDefinitionRequest",{enumerable:!0,get:function(){return lf.TypeDefinitionRequest}});var Zu=_a();Object.defineProperty(u,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Zu.WorkspaceFoldersRequest}});Object.defineProperty(u,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Zu.DidChangeWorkspaceFoldersNotification}});var df=wa();Object.defineProperty(u,"ConfigurationRequest",{enumerable:!0,get:function(){return df.ConfigurationRequest}});var Qu=Ta();Object.defineProperty(u,"DocumentColorRequest",{enumerable:!0,get:function(){return Qu.DocumentColorRequest}});Object.defineProperty(u,"ColorPresentationRequest",{enumerable:!0,get:function(){return Qu.ColorPresentationRequest}});var Ku=qa();Object.defineProperty(u,"FoldingRangeRequest",{enumerable:!0,get:function(){return Ku.FoldingRangeRequest}});Object.defineProperty(u,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Ku.FoldingRangeRefreshRequest}});var ff=Ea();Object.defineProperty(u,"DeclarationRequest",{enumerable:!0,get:function(){return ff.DeclarationRequest}});var hf=ja();Object.defineProperty(u,"SelectionRangeRequest",{enumerable:!0,get:function(){return hf.SelectionRangeRequest}});var Wo=Aa();Object.defineProperty(u,"WorkDoneProgress",{enumerable:!0,get:function(){return Wo.WorkDoneProgress}});Object.defineProperty(u,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Wo.WorkDoneProgressCreateRequest}});Object.defineProperty(u,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Wo.WorkDoneProgressCancelNotification}});var Ho=Ua();Object.defineProperty(u,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ho.CallHierarchyIncomingCallsRequest}});Object.defineProperty(u,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ho.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(u,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ho.CallHierarchyPrepareRequest}});var sn=Ya();Object.defineProperty(u,"TokenFormat",{enumerable:!0,get:function(){return sn.TokenFormat}});Object.defineProperty(u,"SemanticTokensRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRequest}});Object.defineProperty(u,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return sn.SemanticTokensDeltaRequest}});Object.defineProperty(u,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRangeRequest}});Object.defineProperty(u,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return sn.SemanticTokensRefreshRequest}});Object.defineProperty(u,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return sn.SemanticTokensRegistrationType}});var gf=Qa();Object.defineProperty(u,"ShowDocumentRequest",{enumerable:!0,get:function(){return gf.ShowDocumentRequest}});var mf=tc();Object.defineProperty(u,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return mf.LinkedEditingRangeRequest}});var St=uc();Object.defineProperty(u,"FileOperationPatternKind",{enumerable:!0,get:function(){return St.FileOperationPatternKind}});Object.defineProperty(u,"DidCreateFilesNotification",{enumerable:!0,get:function(){return St.DidCreateFilesNotification}});Object.defineProperty(u,"WillCreateFilesRequest",{enumerable:!0,get:function(){return St.WillCreateFilesRequest}});Object.defineProperty(u,"DidRenameFilesNotification",{enumerable:!0,get:function(){return St.DidRenameFilesNotification}});Object.defineProperty(u,"WillRenameFilesRequest",{enumerable:!0,get:function(){return St.WillRenameFilesRequest}});Object.defineProperty(u,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return St.DidDeleteFilesNotification}});Object.defineProperty(u,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return St.WillDeleteFilesRequest}});var $o=gc();Object.defineProperty(u,"UniquenessLevel",{enumerable:!0,get:function(){return $o.UniquenessLevel}});Object.defineProperty(u,"MonikerKind",{enumerable:!0,get:function(){return $o.MonikerKind}});Object.defineProperty(u,"MonikerRequest",{enumerable:!0,get:function(){return $o.MonikerRequest}});var Uo=bc();Object.defineProperty(u,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchyPrepareRequest}});Object.defineProperty(u,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchySubtypesRequest}});Object.defineProperty(u,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchySupertypesRequest}});var el=Dc();Object.defineProperty(u,"InlineValueRequest",{enumerable:!0,get:function(){return el.InlineValueRequest}});Object.defineProperty(u,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return el.InlineValueRefreshRequest}});var zo=Cc();Object.defineProperty(u,"InlayHintRequest",{enumerable:!0,get:function(){return zo.InlayHintRequest}});Object.defineProperty(u,"InlayHintResolveRequest",{enumerable:!0,get:function(){return zo.InlayHintResolveRequest}});Object.defineProperty(u,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return zo.InlayHintRefreshRequest}});var Pn=Ec();Object.defineProperty(u,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Pn.DiagnosticServerCancellationData}});Object.defineProperty(u,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Pn.DocumentDiagnosticReportKind}});Object.defineProperty(u,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Pn.DocumentDiagnosticRequest}});Object.defineProperty(u,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Pn.WorkspaceDiagnosticRequest}});Object.defineProperty(u,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Pn.DiagnosticRefreshRequest}});var Ye=Ac();Object.defineProperty(u,"NotebookCellKind",{enumerable:!0,get:function(){return Ye.NotebookCellKind}});Object.defineProperty(u,"ExecutionSummary",{enumerable:!0,get:function(){return Ye.ExecutionSummary}});Object.defineProperty(u,"NotebookCell",{enumerable:!0,get:function(){return Ye.NotebookCell}});Object.defineProperty(u,"NotebookDocument",{enumerable:!0,get:function(){return Ye.NotebookDocument}});Object.defineProperty(u,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Ye.NotebookDocumentSyncRegistrationType}});Object.defineProperty(u,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Ye.DidOpenNotebookDocumentNotification}});Object.defineProperty(u,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Ye.NotebookCellArrayChange}});Object.defineProperty(u,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Ye.DidChangeNotebookDocumentNotification}});Object.defineProperty(u,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Ye.DidSaveNotebookDocumentNotification}});Object.defineProperty(u,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Ye.DidCloseNotebookDocumentNotification}});var pf=$c();Object.defineProperty(u,"InlineCompletionRequest",{enumerable:!0,get:function(){return pf.InlineCompletionRequest}});var Io;(function(e){function t(n){let r=n;return me.string(r)||me.string(r.language)||me.string(r.scheme)||me.string(r.pattern)}e.is=t})(Io||(u.TextDocumentFilter=Io={}));var Lo;(function(e){function t(n){let r=n;return me.objectLiteral(r)&&(me.string(r.notebookType)||me.string(r.scheme)||me.string(r.pattern))}e.is=t})(Lo||(u.NotebookDocumentFilter=Lo={}));var Fo;(function(e){function t(n){let r=n;return me.objectLiteral(r)&&(me.string(r.notebook)||Lo.is(r.notebook))&&(r.language===void 0||me.string(r.language))}e.is=t})(Fo||(u.NotebookCellTextDocumentFilter=Fo={}));var Ao;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!me.string(r)&&!Io.is(r)&&!Fo.is(r))return!1;return!0}e.is=t})(Ao||(u.DocumentSelector=Ao={}));var zc;(function(e){e.method="client/registerCapability",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(zc||(u.RegistrationRequest=zc={}));var Vc;(function(e){e.method="client/unregisterCapability",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(Vc||(u.UnregistrationRequest=Vc={}));var Bc;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(Bc||(u.ResourceOperationKind=Bc={}));var Xc;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(Xc||(u.FailureHandlingKind=Xc={}));var Jc;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})(Jc||(u.PositionEncodingKind=Jc={}));var Yc;(function(e){function t(n){let r=n;return r&&me.string(r.id)&&r.id.length>0}e.hasId=t})(Yc||(u.StaticRegistrationOptions=Yc={}));var Gc;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||Ao.is(r.documentSelector))}e.is=t})(Gc||(u.TextDocumentRegistrationOptions=Gc={}));var Zc;(function(e){function t(r){let i=r;return me.objectLiteral(i)&&(i.workDoneProgress===void 0||me.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&me.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(Zc||(u.WorkDoneProgressOptions=Zc={}));var Qc;(function(e){e.method="initialize",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Qc||(u.InitializeRequest=Qc={}));var Kc;(function(e){e.unknownProtocolVersion=1})(Kc||(u.InitializeErrorCodes=Kc={}));var eu;(function(e){e.method="initialized",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(eu||(u.InitializedNotification=eu={}));var tu;(function(e){e.method="shutdown",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType0(e.method)})(tu||(u.ShutdownRequest=tu={}));var nu;(function(e){e.method="exit",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType0(e.method)})(nu||(u.ExitNotification=nu={}));var ru;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(ru||(u.DidChangeConfigurationNotification=ru={}));var iu;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(iu||(u.MessageType=iu={}));var ou;(function(e){e.method="window/showMessage",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(ou||(u.ShowMessageNotification=ou={}));var su;(function(e){e.method="window/showMessageRequest",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(su||(u.ShowMessageRequest=su={}));var au;(function(e){e.method="window/logMessage",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(au||(u.LogMessageNotification=au={}));var cu;(function(e){e.method="telemetry/event",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(cu||(u.TelemetryEventNotification=cu={}));var uu;(function(e){e.None=0,e.Full=1,e.Incremental=2})(uu||(u.TextDocumentSyncKind=uu={}));var lu;(function(e){e.method="textDocument/didOpen",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(lu||(u.DidOpenTextDocumentNotification=lu={}));var du;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(du||(u.TextDocumentContentChangeEvent=du={}));var fu;(function(e){e.method="textDocument/didChange",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(fu||(u.DidChangeTextDocumentNotification=fu={}));var hu;(function(e){e.method="textDocument/didClose",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(hu||(u.DidCloseTextDocumentNotification=hu={}));var gu;(function(e){e.method="textDocument/didSave",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(gu||(u.DidSaveTextDocumentNotification=gu={}));var mu;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(mu||(u.TextDocumentSaveReason=mu={}));var pu;(function(e){e.method="textDocument/willSave",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(pu||(u.WillSaveTextDocumentNotification=pu={}));var yu;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(yu||(u.WillSaveTextDocumentWaitUntilRequest=yu={}));var bu;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(bu||(u.DidChangeWatchedFilesNotification=bu={}));var vu;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(vu||(u.FileChangeType=vu={}));var _u;(function(e){function t(n){let r=n;return me.objectLiteral(r)&&(Uc.URI.is(r.baseUri)||Uc.WorkspaceFolder.is(r.baseUri))&&me.string(r.pattern)}e.is=t})(_u||(u.RelativePattern=_u={}));var Du;(function(e){e.Create=1,e.Change=2,e.Delete=4})(Du||(u.WatchKind=Du={}));var Ru;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(Ru||(u.PublishDiagnosticsNotification=Ru={}));var wu;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(wu||(u.CompletionTriggerKind=wu={}));var Pu;(function(e){e.method="textDocument/completion",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Pu||(u.CompletionRequest=Pu={}));var Cu;(function(e){e.method="completionItem/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Cu||(u.CompletionResolveRequest=Cu={}));var Tu;(function(e){e.method="textDocument/hover",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Tu||(u.HoverRequest=Tu={}));var Su;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(Su||(u.SignatureHelpTriggerKind=Su={}));var ku;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(ku||(u.SignatureHelpRequest=ku={}));var qu;(function(e){e.method="textDocument/definition",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(qu||(u.DefinitionRequest=qu={}));var Nu;(function(e){e.method="textDocument/references",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Nu||(u.ReferencesRequest=Nu={}));var Ou;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Ou||(u.DocumentHighlightRequest=Ou={}));var Eu;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Eu||(u.DocumentSymbolRequest=Eu={}));var Mu;(function(e){e.method="textDocument/codeAction",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Mu||(u.CodeActionRequest=Mu={}));var xu;(function(e){e.method="codeAction/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(xu||(u.CodeActionResolveRequest=xu={}));var ju;(function(e){e.method="workspace/symbol",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(ju||(u.WorkspaceSymbolRequest=ju={}));var Iu;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Iu||(u.WorkspaceSymbolResolveRequest=Iu={}));var Lu;(function(e){e.method="textDocument/codeLens",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Lu||(u.CodeLensRequest=Lu={}));var Fu;(function(e){e.method="codeLens/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Fu||(u.CodeLensResolveRequest=Fu={}));var Au;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType0(e.method)})(Au||(u.CodeLensRefreshRequest=Au={}));var Wu;(function(e){e.method="textDocument/documentLink",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Wu||(u.DocumentLinkRequest=Wu={}));var Hu;(function(e){e.method="documentLink/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Hu||(u.DocumentLinkResolveRequest=Hu={}));var $u;(function(e){e.method="textDocument/formatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})($u||(u.DocumentFormattingRequest=$u={}));var Uu;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Uu||(u.DocumentRangeFormattingRequest=Uu={}));var zu;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(zu||(u.DocumentRangesFormattingRequest=zu={}));var Vu;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Vu||(u.DocumentOnTypeFormattingRequest=Vu={}));var Bu;(function(e){e.Identifier=1})(Bu||(u.PrepareSupportDefaultBehavior=Bu={}));var Xu;(function(e){e.method="textDocument/rename",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Xu||(u.RenameRequest=Xu={}));var Ju;(function(e){e.method="textDocument/prepareRename",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Ju||(u.PrepareRenameRequest=Ju={}));var Yu;(function(e){e.method="workspace/executeCommand",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Yu||(u.ExecuteCommandRequest=Yu={}));var Gu;(function(e){e.method="workspace/applyEdit",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType("workspace/applyEdit")})(Gu||(u.ApplyWorkspaceEditRequest=Gu={}))});var rl=N(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.createProtocolConnection=void 0;var nl=Tt();function yf(e,t,n,r){return nl.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,nl.createMessageConnection)(e,t,n,r)}Ir.createProtocolConnection=yf});var ol=N(Te=>{"use strict";var bf=Te&&Te.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Lr=Te&&Te.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&bf(t,e,n)};Object.defineProperty(Te,"__esModule",{value:!0});Te.LSPErrorCodes=Te.createProtocolConnection=void 0;Lr(Tt(),Te);Lr(_r(),Te);Lr(re(),Te);Lr(tl(),Te);var vf=rl();Object.defineProperty(Te,"createProtocolConnection",{enumerable:!0,get:function(){return vf.createProtocolConnection}});var il;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(il||(Te.LSPErrorCodes=il={}))});var ue=N(Ge=>{"use strict";var _f=Ge&&Ge.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),sl=Ge&&Ge.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_f(t,e,n)};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.createProtocolConnection=void 0;var Df=ko();sl(ko(),Ge);sl(ol(),Ge);function Rf(e,t,n,r){return(0,Df.createMessageConnection)(e,t,n,r)}Ge.createProtocolConnection=Rf});var Vo=N(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.generateUuid=xe.parse=xe.isUUID=xe.v4=xe.empty=void 0;var Cn=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Tn=class e extends Cn{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""))}};Tn._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Tn._timeHighBits=["8","9","a","b"];xe.empty=new Cn("00000000-0000-0000-0000-000000000000");function al(){return new Tn}xe.v4=al;var wf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function cl(e){return wf.test(e)}xe.isUUID=cl;function Pf(e){if(!cl(e))throw new Error("invalid uuid");return new Cn(e)}xe.parse=Pf;function Cf(){return al().asHex()}xe.generateUuid=Cf});var ul=N(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.attachPartialResult=yt.ProgressFeature=yt.attachWorkDone=void 0;var pt=ue(),Tf=Vo(),kt=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(t,n,r,i){let c={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(pt.WorkDoneProgress.type,this._token,c)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(pt.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(pt.WorkDoneProgress.type,this._token,{kind:"end"})}};kt.Instances=new Map;var Fr=class extends kt{constructor(t,n){super(t,n),this._source=new pt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Sn=class{constructor(){}begin(){}report(){}done(){}},Ar=class extends Sn{constructor(){super(),this._source=new pt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Sf(e,t){if(t===void 0||t.workDoneToken===void 0)return new Sn;let n=t.workDoneToken;return delete t.workDoneToken,new kt(e,n)}yt.attachWorkDone=Sf;var kf=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(pt.WorkDoneProgressCancelNotification.type,n=>{let r=kt.Instances.get(n.token);(r instanceof Fr||r instanceof Ar)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new Sn:new kt(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,Tf.generateUuid)();return this.connection.sendRequest(pt.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Fr(this.connection,t))}else return Promise.resolve(new Ar)}};yt.ProgressFeature=kf;var Bo;(function(e){e.type=new pt.ProgressType})(Bo||(Bo={}));var Xo=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(Bo.type,this._token,t)}};function qf(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new Xo(e,n)}yt.attachPartialResult=qf});var ll=N(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.ConfigurationFeature=void 0;var Nf=ue(),Of=Zn(),Ef=e=>class extends e{getConfiguration(t){return t?Of.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(Nf.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};Wr.ConfigurationFeature=Ef});var dl=N($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.WorkspaceFoldersFeature=void 0;var Hr=ue(),Mf=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Hr.Emitter,this.connection.onNotification(Hr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Hr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Hr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};$r.WorkspaceFoldersFeature=Mf});var fl=N(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.CallHierarchyFeature=void 0;var Jo=ue(),xf=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(Jo.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=Jo.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=Jo.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ur.CallHierarchyFeature=xf});var Go=N(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.SemanticTokensBuilder=bt.SemanticTokensDiff=bt.SemanticTokensFeature=void 0;var zr=ue(),jf=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(zr.SemanticTokensRefreshRequest.type),on:t=>{let n=zr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=zr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=zr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};bt.SemanticTokensFeature=jf;var Vr=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,c=n-1;for(;i>=r&&c>=r&&this.originalSequence[i]===this.modifiedSequence[c];)i--,c--;(i<r||c<r)&&(i++,c++);let h=i-r+1,b=this.modifiedSequence.slice(r,c+1);return b.length===1&&b[0]===this.originalSequence[i]?[{start:r,deleteCount:h-1}]:[{start:r,deleteCount:h,data:b}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};bt.SemanticTokensDiff=Vr;var Yo=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,c){let h=t,b=n;this._dataLen>0&&(h-=this._prevLine,h===0&&(b-=this._prevChar)),this._data[this._dataLen++]=h,this._data[this._dataLen++]=b,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=c,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Vr(this._prevData,this._data).computeDiff()}:this.build()}};bt.SemanticTokensBuilder=Yo});var hl=N(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.ShowDocumentFeature=void 0;var If=ue(),Lf=e=>class extends e{showDocument(t){return this.connection.sendRequest(If.ShowDocumentRequest.type,t)}};Br.ShowDocumentFeature=Lf});var gl=N(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.FileOperationsFeature=void 0;var an=ue(),Ff=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(an.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(an.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(an.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(an.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(an.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(an.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};Xr.FileOperationsFeature=Ff});var ml=N(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.LinkedEditingRangeFeature=void 0;var Af=ue(),Wf=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(Af.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};Jr.LinkedEditingRangeFeature=Wf});var pl=N(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.TypeHierarchyFeature=void 0;var Zo=ue(),Hf=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(Zo.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=Zo.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=Zo.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Yr.TypeHierarchyFeature=Hf});var bl=N(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.InlineValueFeature=void 0;var yl=ue(),$f=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(yl.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(yl.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};Gr.InlineValueFeature=$f});var _l=N(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.FoldingRangeFeature=void 0;var vl=ue(),Uf=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(vl.FoldingRangeRefreshRequest.type),on:t=>{let n=vl.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Zr.FoldingRangeFeature=Uf});var Dl=N(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.InlayHintFeature=void 0;var Qo=ue(),zf=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Qo.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(Qo.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(Qo.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};Qr.InlayHintFeature=zf});var Rl=N(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.DiagnosticFeature=void 0;var kn=ue(),Vf=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(kn.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(kn.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(kn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(kn.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(kn.WorkspaceDiagnosticRequest.partialResult,n)))}}};Kr.DiagnosticFeature=Vf});var es=N(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.TextDocuments=void 0;var qt=ue(),Ko=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new qt.Emitter,this._onDidOpen=new qt.Emitter,this._onDidClose=new qt.Emitter,this._onDidSave=new qt.Emitter,this._onWillSave=new qt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=qt.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,c=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,c);let h=Object.freeze({document:c});this._onDidOpen.fire(h),this._onDidChangeContent.fire(h)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,c=r.contentChanges;if(c.length===0)return;let{version:h}=i;if(h==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let b=this._syncedDocuments.get(i.uri);b!==void 0&&(b=this._configuration.update(b,c,h),this._syncedDocuments.set(i.uri,b),this._onDidChangeContent.fire(Object.freeze({document:b})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let c=this._syncedDocuments.get(r.textDocument.uri);return c!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:c,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),qt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};ei.TextDocuments=Ko});var ns=N(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.NotebookDocuments=cn.NotebookSyncFeature=void 0;var je=ue(),wl=es(),Bf=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(je.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(je.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(je.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(je.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};cn.NotebookSyncFeature=Bf;var ti=class e{onDidOpenTextDocument(t){return this.openHandler=t,je.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,je.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,je.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};ti.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var ts=class{constructor(t){t instanceof wl.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new wl.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new je.Emitter,this._onDidChange=new je.Emitter,this._onDidSave=new je.Emitter,this._onDidClose=new je.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new ti,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let c of i.cellTextDocuments)n.openTextDocument({textDocument:c});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c===void 0)return;c.version=i.notebookDocument.version;let h=c.metadata,b=!1,w=i.change;w.metadata!==void 0&&(b=!0,c.metadata=w.metadata);let S=[],q=[],P=[],x=[];if(w.cells!==void 0){let O=w.cells;if(O.structure!==void 0){let y=O.structure.array;if(c.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),O.structure.didOpen!==void 0)for(let p of O.structure.didOpen)n.openTextDocument({textDocument:p}),S.push(p.uri);if(O.structure.didClose)for(let p of O.structure.didClose)n.closeTextDocument({textDocument:p}),q.push(p.uri)}if(O.data!==void 0){let y=new Map(O.data.map(p=>[p.document,p]));for(let p=0;p<=c.cells.length;p++){let C=y.get(c.cells[p].document);if(C!==void 0){let W=c.cells.splice(p,1,C);if(P.push({old:W[0],new:C}),y.delete(C.document),y.size===0)break}}}if(O.textContent!==void 0)for(let y of O.textContent)n.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),x.push(y.document.uri)}this.updateCellMap(c);let J={notebookDocument:c};b&&(J.metadata={old:h,new:c.metadata});let De=[];for(let O of S)De.push(this.getNotebookCell(O));let le=[];for(let O of q)le.push(this.getNotebookCell(O));let he=[];for(let O of x)he.push(this.getNotebookCell(O));(De.length>0||le.length>0||P.length>0||he.length>0)&&(J.cells={added:De,removed:le,changed:{data:P,textContent:he}}),(J.metadata!==void 0||J.cells!==void 0)&&this._onDidChange.fire(J)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);c!==void 0&&this._onDidSave.fire(c)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c!==void 0){this._onDidClose.fire(c);for(let h of i.cellTextDocuments)n.closeTextDocument({textDocument:h});this.notebookDocuments.delete(i.notebookDocument.uri);for(let h of c.cells)this.notebookCellMap.delete(h.document)}})),je.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};cn.NotebookDocuments=ts});var Pl=N(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.MonikerFeature=void 0;var Xf=ue(),Jf=e=>class extends e{get moniker(){return{on:t=>{let n=Xf.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ni.MonikerFeature=Jf});var cs=N(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.createConnection=V.combineFeatures=V.combineNotebooksFeatures=V.combineLanguagesFeatures=V.combineWorkspaceFeatures=V.combineWindowFeatures=V.combineClientFeatures=V.combineTracerFeatures=V.combineTelemetryFeatures=V.combineConsoleFeatures=V._NotebooksImpl=V._LanguagesImpl=V.BulkUnregistration=V.BulkRegistration=V.ErrorMessageTracker=void 0;var k=ue(),Ie=Zn(),is=Vo(),L=ul(),Yf=ll(),Gf=dl(),Zf=fl(),Qf=Go(),Kf=hl(),eh=gl(),th=ml(),nh=pl(),rh=bl(),ih=_l(),oh=Dl(),sh=Rl(),ah=ns(),ch=Pl();function rs(e){if(e!==null)return e}var os=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};V.ErrorMessageTracker=os;var ri=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(k.MessageType.Error,t)}warn(t){this.send(k.MessageType.Warning,t)}info(t){this.send(k.MessageType.Info,t)}log(t){this.send(k.MessageType.Log,t)}debug(t){this.send(k.MessageType.Debug,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(k.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,k.RAL)().console.error("Sending log message failed")})}},ss=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:k.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(k.ShowMessageRequest.type,r).then(rs)}showWarningMessage(t,...n){let r={type:k.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(k.ShowMessageRequest.type,r).then(rs)}showInformationMessage(t,...n){let r={type:k.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(k.ShowMessageRequest.type,r).then(rs)}},Cl=(0,Kf.ShowDocumentFeature)((0,L.ProgressFeature)(ss)),Tl;(function(e){function t(){return new ii}e.create=t})(Tl||(V.BulkRegistration=Tl={}));var ii=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=Ie.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=is.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Sl;(function(e){function t(){return new qn(void 0,[])}e.create=t})(Sl||(V.BulkUnregistration=Sl={}));var qn=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(k.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=Ie.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(k.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},c=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},oi=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof ii?this.registerMany(t):t instanceof qn?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=Ie.string(n)?n:n.method,c=is.generateUuid(),h={registrations:[{id:c,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(k.RegistrationRequest.type,h).then(b=>(t.add({id:c,method:i}),t),b=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(b)))}registerSingle2(t,n){let r=Ie.string(t)?t:t.method,i=is.generateUuid(),c={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(k.RegistrationRequest.type,c).then(h=>k.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),h=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(h)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(k.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(k.RegistrationRequest.type,n).then(()=>new qn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},as=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(k.ApplyWorkspaceEditRequest.type,r)}},kl=(0,eh.FileOperationsFeature)((0,Gf.WorkspaceFoldersFeature)((0,Yf.ConfigurationFeature)(as))),si=class{constructor(){this._trace=k.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==k.Trace.Off&&this.connection.sendNotification(k.LogTraceNotification.type,{message:t,verbose:this._trace===k.Trace.Verbose?n:void 0}).catch(()=>{})}},ai=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(k.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},ci=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,L.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,L.attachPartialResult)(this.connection,n)}};V._LanguagesImpl=ci;var ql=(0,ih.FoldingRangeFeature)((0,ch.MonikerFeature)((0,sh.DiagnosticFeature)((0,oh.InlayHintFeature)((0,rh.InlineValueFeature)((0,nh.TypeHierarchyFeature)((0,th.LinkedEditingRangeFeature)((0,Qf.SemanticTokensFeature)((0,Zf.CallHierarchyFeature)(ci))))))))),ui=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,L.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,L.attachPartialResult)(this.connection,n)}};V._NotebooksImpl=ui;var Nl=(0,ah.NotebookSyncFeature)(ui);function Ol(e,t){return function(n){return t(e(n))}}V.combineConsoleFeatures=Ol;function El(e,t){return function(n){return t(e(n))}}V.combineTelemetryFeatures=El;function Ml(e,t){return function(n){return t(e(n))}}V.combineTracerFeatures=Ml;function xl(e,t){return function(n){return t(e(n))}}V.combineClientFeatures=xl;function jl(e,t){return function(n){return t(e(n))}}V.combineWindowFeatures=jl;function Il(e,t){return function(n){return t(e(n))}}V.combineWorkspaceFeatures=Il;function Ll(e,t){return function(n){return t(e(n))}}V.combineLanguagesFeatures=Ll;function Fl(e,t){return function(n){return t(e(n))}}V.combineNotebooksFeatures=Fl;function uh(e,t){function n(i,c,h){return i&&c?h(i,c):i||c}return{__brand:"features",console:n(e.console,t.console,Ol),tracer:n(e.tracer,t.tracer,Ml),telemetry:n(e.telemetry,t.telemetry,El),client:n(e.client,t.client,xl),window:n(e.window,t.window,jl),workspace:n(e.workspace,t.workspace,Il),languages:n(e.languages,t.languages,Ll),notebooks:n(e.notebooks,t.notebooks,Fl)}}V.combineFeatures=uh;function lh(e,t,n){let r=n&&n.console?new(n.console(ri)):new ri,i=e(r);r.rawAttach(i);let c=n&&n.tracer?new(n.tracer(si)):new si,h=n&&n.telemetry?new(n.telemetry(ai)):new ai,b=n&&n.client?new(n.client(oi)):new oi,w=n&&n.window?new(n.window(Cl)):new Cl,S=n&&n.workspace?new(n.workspace(kl)):new kl,q=n&&n.languages?new(n.languages(ql)):new ql,P=n&&n.notebooks?new(n.notebooks(Nl)):new Nl,x=[r,c,h,b,w,S,q,P];function J(y){return y instanceof Promise?y:Ie.thenable(y)?new Promise((p,C)=>{y.then(W=>p(W),W=>C(W))}):Promise.resolve(y)}let De,le,he,O={listen:()=>i.listen(),sendRequest:(y,...p)=>i.sendRequest(Ie.string(y)?y:y.method,...p),onRequest:(y,p)=>i.onRequest(y,p),sendNotification:(y,p)=>{let C=Ie.string(y)?y:y.method;return i.sendNotification(C,p)},onNotification:(y,p)=>i.onNotification(y,p),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(le=y,{dispose:()=>{le=void 0}}),onInitialized:y=>i.onNotification(k.InitializedNotification.type,y),onShutdown:y=>(De=y,{dispose:()=>{De=void 0}}),onExit:y=>(he=y,{dispose:()=>{he=void 0}}),get console(){return r},get telemetry(){return h},get tracer(){return c},get client(){return b},get window(){return w},get workspace(){return S},get languages(){return q},get notebooks(){return P},onDidChangeConfiguration:y=>i.onNotification(k.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(k.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(k.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(k.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(k.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(k.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(k.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(k.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(k.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(k.HoverRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),void 0)),onCompletion:y=>i.onRequest(k.CompletionRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onCompletionResolve:y=>i.onRequest(k.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(k.SignatureHelpRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),void 0)),onDeclaration:y=>i.onRequest(k.DeclarationRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onDefinition:y=>i.onRequest(k.DefinitionRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onTypeDefinition:y=>i.onRequest(k.TypeDefinitionRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onImplementation:y=>i.onRequest(k.ImplementationRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onReferences:y=>i.onRequest(k.ReferencesRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onDocumentHighlight:y=>i.onRequest(k.DocumentHighlightRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onDocumentSymbol:y=>i.onRequest(k.DocumentSymbolRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onWorkspaceSymbol:y=>i.onRequest(k.WorkspaceSymbolRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onWorkspaceSymbolResolve:y=>i.onRequest(k.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(k.CodeActionRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onCodeActionResolve:y=>i.onRequest(k.CodeActionResolveRequest.type,(p,C)=>y(p,C)),onCodeLens:y=>i.onRequest(k.CodeLensRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onCodeLensResolve:y=>i.onRequest(k.CodeLensResolveRequest.type,(p,C)=>y(p,C)),onDocumentFormatting:y=>i.onRequest(k.DocumentFormattingRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),void 0)),onDocumentRangeFormatting:y=>i.onRequest(k.DocumentRangeFormattingRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(k.DocumentOnTypeFormattingRequest.type,(p,C)=>y(p,C)),onRenameRequest:y=>i.onRequest(k.RenameRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),void 0)),onPrepareRename:y=>i.onRequest(k.PrepareRenameRequest.type,(p,C)=>y(p,C)),onDocumentLinks:y=>i.onRequest(k.DocumentLinkRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onDocumentLinkResolve:y=>i.onRequest(k.DocumentLinkResolveRequest.type,(p,C)=>y(p,C)),onDocumentColor:y=>i.onRequest(k.DocumentColorRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onColorPresentation:y=>i.onRequest(k.ColorPresentationRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onFoldingRanges:y=>i.onRequest(k.FoldingRangeRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onSelectionRanges:y=>i.onRequest(k.SelectionRangeRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),(0,L.attachPartialResult)(i,p))),onExecuteCommand:y=>i.onRequest(k.ExecuteCommandRequest.type,(p,C)=>y(p,C,(0,L.attachWorkDone)(i,p),void 0)),dispose:()=>i.dispose()};for(let y of x)y.attach(O);return i.onRequest(k.InitializeRequest.type,y=>{t.initialize(y),Ie.string(y.trace)&&(c.trace=k.Trace.fromString(y.trace));for(let p of x)p.initialize(y.capabilities);if(le){let p=le(y,new k.CancellationTokenSource().token,(0,L.attachWorkDone)(i,y),void 0);return J(p).then(C=>{if(C instanceof k.ResponseError)return C;let W=C;W||(W={capabilities:{}});let Z=W.capabilities;Z||(Z={},W.capabilities=Z),Z.textDocumentSync===void 0||Z.textDocumentSync===null?Z.textDocumentSync=Ie.number(O.__textDocumentSync)?O.__textDocumentSync:k.TextDocumentSyncKind.None:!Ie.number(Z.textDocumentSync)&&!Ie.number(Z.textDocumentSync.change)&&(Z.textDocumentSync.change=Ie.number(O.__textDocumentSync)?O.__textDocumentSync:k.TextDocumentSyncKind.None);for(let oe of x)oe.fillServerCapabilities(Z);return W})}else{let p={capabilities:{textDocumentSync:k.TextDocumentSyncKind.None}};for(let C of x)C.fillServerCapabilities(p.capabilities);return p}}),i.onRequest(k.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,De)return De(new k.CancellationTokenSource().token)}),i.onNotification(k.ExitNotification.type,()=>{try{he&&he()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(k.SetTraceNotification.type,y=>{c.trace=k.Trace.fromString(y.value)}),O}V.createConnection=lh});var Al=N(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.resolveModulePath=Se.FileSystem=Se.resolveGlobalYarnPath=Se.resolveGlobalNodePath=Se.resolve=Se.uriToFilePath=void 0;var dh=require("url"),Ve=require("path"),us=require("fs"),hs=require("child_process");function fh(e){let t=dh.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let c=n[0],h=n[1];c.length===0&&h.length>1&&h[1]===":"&&n.shift()}return Ve.normalize(n.join("/"))}Se.uriToFilePath=fh;function ls(){return process.platform==="win32"}function li(e,t,n,r){let i="NODE_PATH",c=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((h,b)=>{let w=process.env,S=Object.create(null);Object.keys(w).forEach(q=>S[q]=w[q]),t&&us.existsSync(t)&&(S[i]?S[i]=t+Ve.delimiter+S[i]:S[i]=t,r&&r(`NODE_PATH value is: ${S[i]}`)),S.ELECTRON_RUN_AS_NODE="1";try{let q=(0,hs.fork)("",[],{cwd:n,env:S,execArgv:["-e",c]});if(q.pid===void 0){b(new Error(`Starting process to resolve node module  ${e} failed`));return}q.on("error",x=>{b(x)}),q.on("message",x=>{x.c==="r"&&(q.send({c:"e"}),x.s?h(x.r):b(new Error(`Failed to resolve module: ${e}`)))});let P={c:"rs",a:e};q.send(P)}catch(q){b(q)}})}Se.resolve=li;function ds(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(c=>n[c]=process.env[c]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};ls()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let c=(0,hs.spawnSync)(t,["config","get","prefix"],r).stdout;if(!c){e&&e("'npm config get prefix' didn't return a value.");return}let h=c.trim();return e&&e(`'npm config get prefix' value is: ${h}`),h.length>0?ls()?Ve.join(h,"node_modules"):Ve.join(h,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Se.resolveGlobalNodePath=ds;function hh(e){let t="yarn",n={encoding:"utf8"};ls()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,hs.spawnSync)(t,["global","dir","--json"],n),c=i.stdout;if(!c){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let h=c.trim().split(/\r?\n/);for(let b of h)try{let w=JSON.parse(b);if(w.type==="log")return Ve.join(w.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Se.resolveGlobalYarnPath=hh;var fs;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!us.existsSync(__filename.toUpperCase())||!us.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,c){return n()?Ve.normalize(c).indexOf(Ve.normalize(i))===0:Ve.normalize(c).toLowerCase().indexOf(Ve.normalize(i).toLowerCase())===0}e.isParent=r})(fs||(Se.FileSystem=fs={}));function gh(e,t,n,r){return n?(Ve.isAbsolute(n)||(n=Ve.join(e,n)),li(t,n,n,r).then(i=>fs.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>li(t,ds(r),e,r))):li(t,ds(r),e,r)}Se.resolveModulePath=gh});var gs=N((lm,Wl)=>{"use strict";Wl.exports=ue()});var Hl=N(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.InlineCompletionFeature=void 0;var mh=ue(),ph=e=>class extends e{get inlineCompletion(){return{on:t=>this.connection.onRequest(mh.InlineCompletionRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};di.InlineCompletionFeature=ph});var zl=N(_e=>{"use strict";var yh=_e&&_e.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ul=_e&&_e.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&yh(t,e,n)};Object.defineProperty(_e,"__esModule",{value:!0});_e.ProposedFeatures=_e.NotebookDocuments=_e.TextDocuments=_e.SemanticTokensBuilder=void 0;var bh=Go();Object.defineProperty(_e,"SemanticTokensBuilder",{enumerable:!0,get:function(){return bh.SemanticTokensBuilder}});var vh=Hl();Ul(ue(),_e);var _h=es();Object.defineProperty(_e,"TextDocuments",{enumerable:!0,get:function(){return _h.TextDocuments}});var Dh=ns();Object.defineProperty(_e,"NotebookDocuments",{enumerable:!0,get:function(){return Dh.NotebookDocuments}});Ul(cs(),_e);var $l;(function(e){e.all={__brand:"features",languages:vh.InlineCompletionFeature}})($l||(_e.ProposedFeatures=$l={}))});var Gl=N(Le=>{"use strict";var Rh=Le&&Le.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Jl=Le&&Le.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Rh(t,e,n)};Object.defineProperty(Le,"__esModule",{value:!0});Le.createConnection=Le.Files=void 0;var Vl=require("node:util"),ms=Zn(),wh=cs(),Nn=Al(),Nt=gs();Jl(gs(),Le);Jl(zl(),Le);var Bl;(function(e){e.uriToFilePath=Nn.uriToFilePath,e.resolveGlobalNodePath=Nn.resolveGlobalNodePath,e.resolveGlobalYarnPath=Nn.resolveGlobalYarnPath,e.resolve=Nn.resolve,e.resolveModulePath=Nn.resolveModulePath})(Bl||(Le.Files=Bl={}));var Xl;function fi(){if(Xl!==void 0)try{Xl.end()}catch{}}var un=!1,Yl;function Ph(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(Yl=setInterval(()=>{try{process.kill(r,0)}catch{fi(),process.exit(un?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}Ph();var Ch={initialize:e=>{let t=e.processId;ms.number(t)&&Yl===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(un?0:1)}},3e3)},get shutdownReceived(){return un},set shutdownReceived(e){un=e},exit:e=>{fi(),process.exit(e)}};function Th(e,t,n,r){let i,c,h,b;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),Nt.ConnectionStrategy.is(e)||Nt.ConnectionOptions.is(e)?b=e:(c=e,h=t,b=n),Sh(c,h,b,i)}Le.createConnection=Th;function Sh(e,t,n,r){let i=!1;if(!e&&!t&&process.argv.length>2){let w,S,q=process.argv.slice(2);for(let P=0;P<q.length;P++){let x=q[P];if(x==="--node-ipc"){e=new Nt.IPCMessageReader(process),t=new Nt.IPCMessageWriter(process);break}else if(x==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(x==="--socket"){w=parseInt(q[P+1]);break}else if(x==="--pipe"){S=q[P+1];break}else{var c=x.split("=");if(c[0]==="--socket"){w=parseInt(c[1]);break}else if(c[0]==="--pipe"){S=c[1];break}}}if(w){let P=(0,Nt.createServerSocketTransport)(w);e=P[0],t=P[1]}else if(S){let P=(0,Nt.createServerPipeTransport)(S);e=P[0],t=P[1]}}var h="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+h);if(!t)throw new Error("Connection output stream is not set. "+h);if(ms.func(e.read)&&ms.func(e.on)){let w=e;w.on("end",()=>{fi(),process.exit(un?0:1)}),w.on("close",()=>{fi(),process.exit(un?0:1)})}let b=w=>{let S=(0,Nt.createProtocolConnection)(e,t,w,n);return i&&kh(w),S};return(0,wh.createConnection)(b,Ch,r)}function kh(e){function t(r){return r.map(i=>typeof i=="string"?i:(0,Vl.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...c){if(!i)if(c.length===0)e.error("Assertion failed");else{let[h,...b]=c;e.error(`Assertion failed: ${h} ${t(b)}`)}},console.count=function(i="default"){let c=String(i),h=n.get(c)??0;h+=1,n.set(c,h),e.log(`${c}: ${c}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){e.log(t(i))},console.dir=function(i,c){e.log((0,Vl.inspect)(i,c))},console.log=function(...i){e.log(t(i))},console.error=function(...i){e.error(t(i))},console.trace=function(...i){let c=new Error().stack.replace(/(.+\n){2}/,""),h="Trace";i.length!==0&&(h+=`: ${t(i)}`),e.log(`${h}
${c}`)},console.warn=function(...i){e.warn(t(i))}}});var ps=N((mm,Zl)=>{"use strict";Zl.exports=Gl()});var bs=N(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.s8IntToNumber=j.strictParseInt=j.decompileInstruction=j.componentsOf=j.compile=j.parseBinaryInstruction=j.validateOperand=j.formatBinaryNumber=j.binaryRegex=j.nibbleRegex=j.isJumpInstruction=j.preprocessLine=j.InstructionPart=j.instructionRegex=j.getInstructionRepresentation=j.getInstructionSignature=j.getInstructionByName=j.hmmmAliases=j.hmmmInstructions=void 0;{let e=function(n){let r=65535;n.operand1==="register"&&(r&=61695);let i=n.operand1==="signed_number"||n.operand1==="unsigned_number"||n.operand2==="signed_number"||n.operand2==="unsigned_number";return(n.operand2||i)&&(r&=65295),(n.operand3||i)&&(r&=65520),r},t=function(n,r,i,c,h,b){let w={name:n,opcode:r,mask:0,operand1:i,operand2:c,operand3:h,description:b};return w.mask=e(w),w};j.hmmmInstructions=[t("halt",0,void 0,void 0,void 0,"Halt Program!"),t("read",1,"register",void 0,void 0,"Stop for user input, which will then be stored in register rX (input is an integer from -32768 to +32767)"),t("write",2,"register",void 0,void 0,"Print contents of register rX"),t("jumpr",3,"register",void 0,void 0,"Set program counter to address in rX"),t("setn",4096,"register","signed_number",void 0,"Set register rX equal to the integer N (-128 to +127)"),t("loadn",8192,"register","unsigned_number",void 0,"Load register rX with the contents of memory address N"),t("storen",12288,"register","unsigned_number",void 0,"Store contents of register rX into memory address N"),t("loadr",16384,"register","register",void 0,"Load register rX with the contents of memory address N"),t("storer",16385,"register","register",void 0,"Store contents of register rX into memory address held in reg. rY"),t("popr",16386,"register","register",void 0,"Load contents of register rX from stack pointed to by reg. rY"),t("pushr",16387,"register","register",void 0,"Store contents of register rX onto stack pointed to by reg. rY"),t("addn",20480,"register","signed_number",void 0,"Add integer N (-128 to 127) to register rX"),t("nop",24576,void 0,void 0,void 0,"Do nothing"),t("copy",24576,"register","register",void 0,"Set rX = rY"),t("add",24576,"register","register","register","Set rX = rY + rZ"),t("neg",28672,"register","register",void 0,"Set rX = -rY"),t("sub",28672,"register","register","register","Set rX = rY - rZ"),t("mul",32768,"register","register","register","Set rx = rY * rZ"),t("div",36864,"register","register","register","Set rX = rY // rZ (integer division; rounds down; no remainder)"),t("mod",40960,"register","register","register","Set rX = rY % rZ (returns the remainder of integer division)"),t("jumpn",45056,"unsigned_number",void 0,void 0,"Set program counter to address N"),t("calln",45056,"register","unsigned_number",void 0,"Copy addr. of next instr. into rX and then jump to mem. addr. N"),t("jeqzn",49152,"register","unsigned_number",void 0,"If rX == 0, then jump to line N"),t("jnezn",53248,"register","unsigned_number",void 0,"If rX != 0, then jump to line N"),t("jgtzn",57344,"register","unsigned_number",void 0,"If rX > 0, then jump to line N"),t("jltzn",61440,"register","unsigned_number",void 0,"If rX < 0, then jump to line N")]}j.hmmmAliases=new Map([["mov","copy"],["jump","jumpr"],["jeqz","jeqzn"],["jnez","jnezn"],["jgtz","jgtzn"],["jltz","jltzn"],["call","calln"],["loadi","loadr"],["load","loadr"],["storei","storer"],["store","storer"]]);function Ql(e){return j.hmmmAliases.has(e)&&(e=j.hmmmAliases.get(e)),j.hmmmInstructions.find(t=>t.name===e)}j.getInstructionByName=Ql;function qh(e){let t="";return e.operand1&&(t+=`${e.operand1==="register"?"rX":"N"}`),e.operand2&&(t+=` ${e.operand2==="register"?"rY":"N"}`),e.operand3&&(t+=` ${e.operand3==="register"?"rZ":"N"}`),t}j.getInstructionSignature=qh;function Nh(e){let t=(e.opcode>>>0).toString(2).padStart(16,"0");return t=t.match(/.{4}/g)?.join(" ")??t,t=t.padEnd(19," "),e.operand1&&(e.operand1==="register"?t=`${t.substring(0,4)} XXXX ${t.substring(10)}`:t=`${t.substring(0,9)} NNNN NNNN`),e.operand2&&(e.operand2==="register"?t=`${t.substring(0,9)} YYYY ${t.substring(15)}`:t=`${t.substring(0,9)} NNNN NNNN`),e.operand3&&(e.operand3==="register"?t=`${t.substring(0,14)} ZZZZ`:console.error(`Invalid instruction! ${e.name} has an operand 3 of type ${e.operand3}`)),t}j.getInstructionRepresentation=Nh;var hi=/(?:(\S+)(?:\s+|$))?/gm,Oh=/(?:(\S+)\s*)?/gm;j.instructionRegex=RegExp(`^\\s*${hi.source}${hi.source}${hi.source}${hi.source}${Oh.source}(?:\\s+(.+))?$`,"md");var Be;(function(e){e[e.FULL_LINE=0]="FULL_LINE",e[e.LINE_NUM=1]="LINE_NUM",e[e.INSTRUCTION=2]="INSTRUCTION",e[e.OPERAND1=3]="OPERAND1",e[e.OPERAND2=4]="OPERAND2",e[e.OPERAND3=5]="OPERAND3",e[e.OTHER=6]="OTHER"})(Be||(j.InstructionPart=Be={}));function Kl(e){return e.split("#")[0].trimEnd()}j.preprocessLine=Kl;function Eh(e){return e?e.startsWith("j")||e.startsWith("call"):!1}j.isJumpInstruction=Eh;j.nibbleRegex=/\s*((?:\s*[01]){4})/;j.binaryRegex=RegExp(`${j.nibbleRegex.source}${j.nibbleRegex.source}${j.nibbleRegex.source}${j.nibbleRegex.source}\\s*`,"d");function ed(e,t){return e=e.replaceAll(/[^01]/g,""),t&&(e=e.padStart(16,"0")),e=e.replace(j.binaryRegex,"$1 $2 $3 $4"),e}j.formatBinaryNumber=ed;function td(e){if(!e)return;if(e==="r0"||e==="R0")return"r0";if(/^r\d+$/i.test(e))return/^r(\d|1[0-5])$/i.test(e)?"register":"invalid_register";let t=Ot(e);if(!isNaN(t))return t<-128||t>255?"invalid_number":t<0?"signed_number":t>127?"unsigned_number":"number"}j.validateOperand=td;function ys(e){let t;if(typeof e=="string"){if(e=e.replace(/[^01]/g,""),e.length!==16)return;t=Ot(e,2)}else t=e;let n=j.hmmmInstructions.filter(h=>((h.opcode^t)&h.mask)===0);if(!n.length)return;let r=n.sort((h,b)=>-(h.mask-b.mask))[0],i=[];function c(h,b){switch(h){case"register":return{type:"register",value:t>>b&15};case"signed_number":return{type:"signed_number",value:nd(t&255)};case"unsigned_number":return{type:"unsigned_number",value:t&255}}}if(r.operand1&&i.push(c(r.operand1,8)),r.operand2&&i.push(c(r.operand2,4)),r.operand3){if(r.operand3==="signed_number"||r.operand3==="unsigned_number"){console.error(`Invalid instruction! ${r.name} has an operand 3 of type ${r.operand3}`);return}i.push(c(r.operand3,0))}return{instruction:r,operands:i}}j.parseBinaryInstruction=ys;function Mh(e){let t=[],n=new Map,r=0;for(let i=0;i<e.length;i++){let S=function(q,P,x){let J=td(P);if(J!==void 0)switch(q){case"register":return J==="r0"||J==="register"?Ot(P.slice(1))<<x:void 0;case"signed_number":return J==="signed_number"||J==="number"?Ot(P)&255:void 0;case"unsigned_number":return J==="unsigned_number"||J==="number"?Ot(P)&255:void 0}},c=Kl(e[i]).trim();if(!c)continue;let h;if(!(h=j.instructionRegex.exec(c))||h[Be.OTHER]||Ot(h[Be.LINE_NUM])!==r)return;n.set(r++,i);let b=Ql(h[Be.INSTRUCTION]);if(!b)return;let w=b.opcode;if(b.operand1){let q=S(b.operand1,h[Be.OPERAND1],8);if(q===void 0)return;w|=q}else if(h[Be.OPERAND1])return;if(b.operand2){let q=S(b.operand2,h[Be.OPERAND2],4);if(q===void 0)return;w|=q}else if(h[Be.OPERAND2])return;if(b.operand3){if(b.operand3==="signed_number"||b.operand3==="unsigned_number"){console.error(`Invalid instruction! ${b.name} has an operand 3 of type ${b.operand3}`);return}let q=S(b.operand3,h[Be.OPERAND3],0);if(q===void 0)return;w|=q}else if(h[Be.OPERAND3])return;t.push(ed(w.toString(2),!0))}return[t,n]}j.compile=Mh;function xh(e){let t=ys(e);if(!t)return;let n,r,i,c;return t.instruction.operand1==="register"&&(n=t.operands[0].value),t.instruction.operand2==="register"&&(r=t.operands[1].value),t.instruction.operand3==="register"&&(i=t.operands[2].value),(t.instruction.operand1==="signed_number"||t.instruction.operand1==="unsigned_number")&&(c=t.operands[0].value),(t.instruction.operand2==="signed_number"||t.instruction.operand2==="unsigned_number")&&(c=t.operands[1].value),[e,t,n,r,i,c]}j.componentsOf=xh;function jh(e){if(typeof e=="string"||typeof e=="number"){let t=ys(e);if(!t)return;e=t}return`${e.instruction.name}${e.operands.length!==0?" ":""}${e.operands.map(t=>`${t.type==="register"?"r":""}${t.value}`).join(" ")}`}j.decompileInstruction=jh;function Ot(e,t){return e===void 0?NaN:(e=e.trim(),/^-?\d+$/.test(e)?parseInt(e,t):NaN)}j.strictParseInt=Ot;function nd(e){return e>127?e-256:e}j.s8IntToNumber=nd});var Yn=class e{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(e.isIncremental(r)){let i=ks(r.range),c=this.offsetAt(i.start),h=this.offsetAt(i.end);this._content=this._content.substring(0,c)+r.text+this._content.substring(h,this._content.length);let b=Math.max(i.start.line,0),w=Math.max(i.end.line,0),S=this._lineOffsets,q=Ss(r.text,!1,c);if(w-b===q.length)for(let x=0,J=q.length;x<J;x++)S[x+b+1]=q[x];else q.length<1e4?S.splice(b+1,w-b,...q):this._lineOffsets=S=S.slice(0,b+1).concat(q,S.slice(w+1));let P=r.text.length-(h-c);if(P!==0)for(let x=b+1+q.length,J=S.length;x<J;x++)S[x]=S[x]+P}else if(e.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Ss(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let h=Math.floor((r+i)/2);n[h]>t?i=h:r=h+1}let c=r-1;return{line:c,character:t-n[c]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line],i=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,i),r)}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},Gn;(function(e){function t(i,c,h,b){return new Yn(i,c,h,b)}e.create=t;function n(i,c,h){if(i instanceof Yn)return i.update(c,h),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,c){let h=i.getText(),b=pi(c.map(fd),(q,P)=>{let x=q.range.start.line-P.range.start.line;return x===0?q.range.start.character-P.range.start.character:x}),w=0,S=[];for(let q of b){let P=i.offsetAt(q.range.start);if(P<w)throw new Error("Overlapping edit");P>w&&S.push(h.substring(w,P)),q.newText.length&&S.push(q.newText),w=i.offsetAt(q.range.end)}return S.push(h.substr(w)),S.join("")}e.applyEdits=r})(Gn||(Gn={}));function pi(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);pi(r,t),pi(i,t);let c=0,h=0,b=0;for(;c<r.length&&h<i.length;)t(r[c],i[h])<=0?e[b++]=r[c++]:e[b++]=i[h++];for(;c<r.length;)e[b++]=r[c++];for(;h<i.length;)e[b++]=i[h++];return e}function Ss(e,t,n=0){let r=t?[n]:[];for(let i=0;i<e.length;i++){let c=e.charCodeAt(i);(c===13||c===10)&&(c===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function ks(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function fd(e){let t=ks(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var ke=Jn(ps()),Ze=Jn(bs());var Fe=Jn(ps()),gi=Jn(bs());function Et(e){return Fe.Range.create(e,Fe.uinteger.MIN_VALUE,e,Fe.uinteger.MAX_VALUE)}function rd(e,t){if(e.options.insertFinalNewline||e.options.trimFinalNewlines){let n=0;for(let r=t.lineCount-1;r>=0&&!t.getText(Et(r)).trim();r--)n++;if(e.options.insertFinalNewline&&n===0)return Fe.TextEdit.insert(t.positionAt(t.getText().length),`
`);if(e.options.trimFinalNewlines&&n>1)return Fe.TextEdit.del(Fe.Range.create(t.lineCount-n,Fe.uinteger.MIN_VALUE,t.lineCount,Fe.uinteger.MIN_VALUE))}}var vs=(O=>(O[O.comment=0]="comment",O[O.keyword=1]="keyword",O[O.string=2]="string",O[O.number=3]="number",O[O.regexp=4]="regexp",O[O.type=5]="type",O[O.class=6]="class",O[O.interface=7]="interface",O[O.enum=8]="enum",O[O.typeParameter=9]="typeParameter",O[O.function=10]="function",O[O.member=11]="member",O[O.property=12]="property",O[O.variable=13]="variable",O[O.parameter=14]="parameter",O[O.lambdaFunction=15]="lambdaFunction",O[O._=16]="_",O))(vs||{}),_s=(P=>(P[P.declaration=0]="declaration",P[P.definition=1]="definition",P[P.readonly=2]="readonly",P[P.static=3]="static",P[P.deprecated=4]="deprecated",P[P.abstract=5]="abstract",P[P.async=6]="async",P[P.modification=7]="modification",P[P.documentation=8]="documentation",P[P.defaultLibrary=9]="defaultLibrary",P[P._=10]="_",P))(_s||{});function id(e){let t=new Set(e.tokenTypes),n=new Set(e.tokenModifiers),r=[];for(let c=0;c<16;c++){let h=vs[c];t.has(h)?r.push(h):h==="lambdaFunction"?r.push("function"):r.push("type")}let i=[];for(let c=0;c<10;c++){let h=_s[c];n.has(h)?i.push(h):i.push("")}return{tokenTypes:r,tokenModifiers:i}}var Mt=(0,ke.createConnection)(ke.ProposedFeatures.all),On=new ke.TextDocuments(Gn);Mt.onInitialize(e=>({capabilities:{textDocumentSync:ke.TextDocumentSyncKind.Incremental,documentFormattingProvider:!0,inlayHintProvider:!0,semanticTokensProvider:{legend:id(e.capabilities.textDocument?.semanticTokens??{tokenModifiers:[],tokenTypes:[],formats:[],requests:{}}),full:!0}}}));async function Ih(e){let t=[];for(let n=0;n<e.lineCount;n++){let r=Et(n),i=e.getText(r);if(!i.trim())continue;(0,Ze.parseBinaryInstruction)(i)||t.push({severity:ke.DiagnosticSeverity.Error,range:r,message:"Invalid Instruction",source:"HMMM Binary Language Server"})}Mt.sendDiagnostics({uri:e.uri,diagnostics:t})}On.onDidChangeContent(e=>{Ih(e.document)});Mt.languages.inlayHint.on(e=>{let t=On.get(e.textDocument.uri);if(!t)return[];let n=[];for(let r=0;r<t.lineCount;r++){let i=t.getText(Et(r)),c=(0,Ze.parseBinaryInstruction)(i);c&&n.push({label:` ${(0,Ze.decompileInstruction)(c)}`,position:{line:r,character:ke.uinteger.MAX_VALUE}})}return n});Mt.languages.semanticTokens.on(e=>{let t=On.get(e.textDocument.uri),n=new ke.SemanticTokensBuilder;if(!t)return n.build();function r(c,h,b,w=0){n.push(c,h[0],h[1]-h[0],b,w)}for(let c=0;c<t.lineCount;c++){let S=function(P){switch(P){case 0:return[13,516];case 13:case 14:case 15:return[13,512];default:return[14,0]}};var i=S;let h=t.getText(Et(c)),b=(0,Ze.parseBinaryInstruction)(h);if(!b)continue;let w;if(!(w=Ze.binaryRegex.exec(h))?.indices)continue;r(c,w.indices[1],1);let q=!1;switch(b.instruction.operand1){case"register":{let[P,x]=S(b.operands[0].value);r(c,w.indices[2],P,x);break}case"signed_number":case"unsigned_number":{q=!0,r(c,w.indices[2],1),r(c,w.indices[3],3),r(c,w.indices[4],3);break}case void 0:default:r(c,w.indices[2],1)}switch(b.instruction.operand2){case"register":{let[P,x]=S(b.operands[1].value);r(c,w.indices[3],P,x);break}case"signed_number":case"unsigned_number":{q=!0,r(c,w.indices[3],3),r(c,w.indices[4],3);break}case void 0:default:q||r(c,w.indices[3],1)}switch(b.instruction.operand3){case"register":{let[P,x]=S(b.operands[2].value);r(c,w.indices[4],P,x);break}case"signed_number":case"unsigned_number":{console.error(`Unexpected number as third operand in instruction ${b.instruction.name}`);break}case void 0:default:q||r(c,w.indices[4],1)}}return n.build()});Mt.onDocumentFormatting(e=>{let t=On.get(e.textDocument.uri);if(!t)return[];let n=[];for(let i=0;i<t.lineCount;i++){let c=t.getText(Et(i)).trim();if(!c)continue;let h=(0,Ze.formatBinaryNumber)(c,!1);c!==h&&n.push({range:Et(i),newText:h})}let r=rd(e,t);return r&&n.push(r),n});On.listen(Mt);Mt.listen();
